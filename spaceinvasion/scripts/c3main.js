// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let O=function(t){Mh=t},L=function(t){return t*Oh},B=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},U=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},H=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},$=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new Mh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=vh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=vh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=vh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Rt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Et=function(t,s,i,e,h,r,n,o,a){var l=new Mh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},At=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},kt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+w*n+i*l,t[7]=y*h+w*o+i*u,t[8]=y*r+w*a+i*s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+b*(u=u*s-d*p)-v*G+M*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-n*f-l*G)*d,t[2]=(n*c-o*u+l*x)*d,t[3]=(h*c-e*f-r*T)*d,t[4]=(i*f-h*u+r*G)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},$t=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=vh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=vh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,P=y*C-w*I+S*_+b*T-v*G+M*x;return P?(t[0]=(o*C-a*I+l*_)*(P=1/P),t[1]=(h*I-e*C-r*_)*P,t[2]=(m*M-g*v+s*b)*P,t[3]=(f*v-c*M-d*b)*P,t[4]=(a*T-n*C-l*G)*P,t[5]=(i*C-h*T+r*G)*P,t[6]=(g*S-p*M-s*w)*P,t[7]=(u*M-f*S+d*w)*P,t[8]=(n*I-o*T+l*x)*P,t[9]=(e*T-i*I-r*x)*P,t[10]=(p*v-m*S+s*y)*P,t[11]=(c*S-u*v-d*y)*P,t[12]=(o*G-n*_-a*x)*P,t[13]=(i*_-e*G+h*x)*P,t[14]=(m*w-p*b-g*y)*P,t[15]=(u*b-c*w+f*y)*P,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*T-n*C-l*G,t[5]=i*C-h*T+r*G,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=n*I-o*T+l*x,t[9]=e*T-i*I-r*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*G-n*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*r+S*l+b*d+v*y,t[3]=w*n+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*r+S*l+b*d+v*y,t[7]=w*n+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*r+S*l+b*d+v*y,t[11]=w*n+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*r+S*l+b*d+v*y,t[15]=w*n+S*u+b*p+v*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<vh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=G*T*(h=1-i)-e*_,S=T*T*h+i,b=e*T*h+G*_,v=G*e*h+T*_,M=T*e*h-G*_,x=e*e*h+i,t[0]=r*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+l*S+d*b,t[5]=n*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=r*v+l*M+d*x,t[9]=n*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<vh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,w=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Ps=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},Rs=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Es=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(l-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},ks=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ds=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Os=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],P=s[12],R=s[13],E=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(r-b)<=vh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-v)<=vh*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=vh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=vh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=vh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=vh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=vh*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-R)<=vh*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(g-E)<=vh*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Xs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*kh()*Math.PI,e=2*kh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Pi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ri=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ei=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},ki=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Di=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Oi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Bi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ni=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ui=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Hi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*kh()-1)*i+(e=2*kh()-1)*e););for(;1<=(o=(h=2*kh()-1)*h+(r=2*kh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},$i=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},P=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return R(t,s),Hh(t,t,i),P(t,t),t},E=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=kh(),i=kh(),e=kh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-vh},ue=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new Mh(3));return a(e,s),F(t,i,e),t},k=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},Me=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<vh?k(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Pe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Re=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Ee=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Yh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},ke=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},De=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},Oe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Be=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=vh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=vh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},D=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Ne=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},$e=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*kh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,w,S,b,x,G,T,_,I,C,P,R,E,A,F,k,D,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,kh=Math.random,Dh="zyx",Oh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:vh,get S(){return Mh},M:kh,G:Dh,T:O,_:L,equals:B},Bh=Object.freeze({__proto__:null,create:N,clone:W,I:j,identity:V,C:U,set:H,P:z,R:J,A:q,F:X,multiply:t,rotate:$,scale:Y,D:K,O:Z,L:Q,B:tt,N:st,add:it,W:s,j:et,equals:ht,V:rt,U:nt,mul:t,sub:s}),Nh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,C:ct,set:ft,R:dt,F:pt,multiply:i,rotate:mt,scale:gt,translate:yt,D:wt,O:St,H:bt,L:vt,B:Mt,add:xt,W:e,V:Gt,U:Tt,j:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,J:Ct,clone:Pt,I:Rt,C:Et,set:At,identity:Ft,P:kt,R:Dt,A:Ot,F:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,H:jt,D:Vt,O:Ut,X:Ht,$:zt,Y:Jt,K:qt,L:Xt,B:$t,add:Yt,W:n,V:Kt,U:Zt,j:Qt,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:hs,set:rs,identity:p,P:ns,R:os,A:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,tt:ps,it:ms,H:gs,O:ys,D:ws,et:Ss,ht:bs,nt:vs,ot:f,lt:Ms,ut:a,ct:d,gt:l,yt:xs,St:Gs,bt:Ts,$:_s,vt:Is,Mt:u,perspective:u,xt:Cs,Gt:Ps,Tt:c,ortho:c,_t:Rs,It:Es,Ct:As,L:Fs,B:ks,add:Ds,W:Os,V:Ls,U:Bs,j:Ns,equals:Ws,mul:o,sub:Os}),$h=Js,Zh=qs,Uh=Xs,Qh=ii,tr=ei,jh=Vs,sr=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,C:g,I:Us,set:Hs,add:zs,W:Js,multiply:qs,Pt:Xs,ceil:$s,floor:Ys,min:Ks,max:Zs,round:Qs,scale:ti,Rt:si,Et:ii,At:ei,Ft:hi,kt:ri,inverse:ni,normalize:y,Dt:w,Ot:S,Lt:oi,Bt:ai,Nt:li,Wt:ui,random:ci,jt:fi,Vt:di,Ut:pi,Z:mi,tt:gi,it:yi,angle:wi,Ht:Si,L:bi,j:vi,equals:Mi,sub:$h,mul:Zh,div:Uh,zt:Qh,Jt:tr,qt:jh,Xt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),$h=Ci,Zh=Pi,Uh=Ri,Qh=Bi,tr=Ni,sr=v,ir=M,Ah=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,C:Gi,I:Ti,set:_i,add:Ii,W:Ci,multiply:Pi,Pt:Ri,ceil:Ei,floor:Ai,min:Fi,max:ki,round:Di,scale:Oi,Rt:Li,Et:Bi,At:Ni,length:v,Ft:M,kt:Wi,inverse:ji,normalize:Vi,Dt:x,Ot:Ui,Lt:Hi,random:zi,jt:Ji,Ut:qi,Ht:Xi,L:$i,j:Yi,equals:Ki,sub:$h,mul:Zh,div:Uh,zt:Qh,Jt:tr,qt:sr,Xt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ah[0]=t[n],Ah[1]=t[n+1],Ah[2]=t[n+2],Ah[3]=t[n+3],h(Ah,Ah,r),t[n]=Ah[0],t[n+1]=Ah[1],t[n+2]=Ah[2],t[n+3]=Ah[3];return t}}),$h=xi,Zh=Gi,Uh=Ti,Qh=_i,tr=Ii,sr=se,Hh=Oi,zh=x,ir=Hi,er=Jh=v,hr=qh=M,Xh=Vi,rr=Yi,Ph=m(),Rh=g(1,0,0),Eh=g(0,1,0),nr=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Ph,Rh,s),jh(Ph)<1e-6&&S(Ph,Eh,s),y(Ph,Ph),T(t,Ph,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Ph,s,i),t[0]=Ph[0],t[1]=Ph[1],t[2]=Ph[2],t[3]=1+e,Xh(t,t))},Ih=G(),Ch=G(),or=function(t,s,i,e,h,r){return E(Ih,s,h,r),E(Ch,i,e,r),E(t,Ih,Ch,2*r*(1-r)),t},_h=h(),$h=Object.freeze({__proto__:null,create:G,identity:Zi,$t:T,Yt:Qi,Kt:te,multiply:se,Z:_,tt:I,it:C,Zt:ie,exp:P,Qt:R,pow:ee,Bt:E,random:he,R:re,ts:ne,es:A,hs:oe,L:ae,clone:$h,C:Zh,I:Uh,set:Qh,add:tr,mul:sr,scale:Hh,Dt:zh,Lt:ir,length:Jh,qt:er,Ft:qh,Xt:hr,normalize:Xh,j:rr,equals:le,ns:nr,os:or,ls:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],Xh(t,A(t,_h))}}),Yh=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,C:fe,us:de,ot:F,H:pe,D:me,J:ge,I:k,identity:ye,set:we,cs:Uh,ds:Se,gs:Uh,ys:be,ut:ve,translate:Me,Z:xe,tt:Ge,it:Te,ws:_e,Ss:Ie,bs:Ce,add:Pe,multiply:Re,mul:Re,scale:Ee,Dt:Yh,Lt:Ae,R:Fe,ts:ke,length:Jh,qt:Jh,Ft:Kh,Xt:Zh,normalize:De,L:Oe,j:Le,equals:Be}),tr=ih,sr=He,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Th=D(),or=Object.freeze({__proto__:null,create:D,clone:Ne,C:We,I:je,set:Ve,add:Ue,W:He,multiply:ze,Pt:Je,ceil:qe,floor:Xe,min:$e,max:Ye,round:Ke,scale:Ze,Rt:Qe,Et:th,At:sh,length:ih,Ft:eh,kt:hh,inverse:rh,normalize:nh,Dt:oh,Ot:ah,Lt:lh,random:uh,vs:ch,Ms:fh,Vt:dh,jt:ph,rotate:mh,angle:gh,Ht:yh,L:wh,j:Sh,equals:bh,qt:tr,sub:sr,mul:ir,div:er,zt:hr,Jt:rr,Xt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Th[0]=t[n],Th[1]=t[n+1],h(Th,Th,r),t[n]=Th[0],t[n+1]=Th[1];return t}}),globalThis.xs=Lh,globalThis.xs.Gs=Bh,globalThis.xs.Ts=Nh,globalThis.xs._s=Wh,globalThis.xs.Is=xh,globalThis.xs.Cs=$h,globalThis.xs.Ps=Qh,globalThis.xs.Rs=or,globalThis.xs.Es=Gh,globalThis.xs.As=Vh}var Th,_h,Ih,Ch,Ph,Rh,Eh,Ah,Fh,vh,Mh,kh,Dh,Oh,Lh,Bh,Nh,Wh,xh,jh,Gh,Vh,Uh,Hh,zh,Jh,qh,Xh,$h,Yh,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,k,D,O,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=D,(r=k)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},P=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},R=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=O,r=L;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},E=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(R(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var v=0;v<t.length;++v)if(R(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(l=A(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),T(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(l=A(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(P(y,S,v,p+1),y.push(l),w.push(l),0!==m&&P(w,S,m,S.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,S.length),P(y,S,0,p+1),y.push(l),w.push(l),P(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)G(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&E(S,v,M)&&(d=f,g=M%t.length);v<g?(P(y,S,v,g+1),0!==g&&P(w,S,g,b.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,b.length),P(y,S,0,g+1),P(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,r,n),F(w,s,i,e,h,r,n)):(F(w,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,r,I,C,n,P,l,R,u,E,c,f,d,A,F,m,g,k=[],D=[],O=[],L=[],self.Fs={ks:s,Ds:F,Os:i,Ls:e,Bs:p,Ns:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Ws=class{constructor(){throw TypeError("static class can't be instantiated")}static js(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Vs(){t=!0}static Us(){return t}static Hs(){s=!0}static zs(){return s}static Js(t){i=t}static qs(){return i}static Xs(){return"final"===i}};r.isDebug=!1,r.$s=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ys={}}{const s=self.Ws;s.Ks=class{constructor(t){this.Zs=t,this.Qs=new Map,this.ti()}ti(){let t=this.Zs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.si(i)}si(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Qs.set(i,e)}else this.Qs.set(t,null)}ei(){for(const t of this.Qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}hi(t){return this.Qs.has(t)}ri(t){const s=this.Qs.get(t);return void 0===s?null:s}ni(){history.replaceState("",document.title,location.pathname+location.search)}oi(t){this.Zs=t,this.Qs.clear(),this.ti()}},s.ai=new s.Ks(location.search),s.li=new s.Ks(location.hash),s.ai.hi("perf")&&(s.ci=!0),"dev"!==s.ai.ri("mode")&&s.Js("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ws,W="(unknown)",j=(a.fi={di:W,mi:W,gi:W,yi:W,wi:NaN,Si:W,bi:"browser",vi:!0,Mi:!1,xi:!1,Gi:!1,Ti:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=H.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.fi.gi="Chromium",a.fi.yi=h),a.fi.gi=s||W,a.fi.yi=i||W,a.fi.Si=e||W};s,a.fi.di=U.platform,a.fi.Mi=U.mobile,a.fi.vi=!a.fi.Mi;const H=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.fi.Ti=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.fi.di?a.fi.mi=e(t.platformVersion):a.fi.mi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(V);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.fi.di="Windows";const s=t[1];a.fi.mi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.fi.di="macOS",a.fi.mi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.fi.di="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.fi.di="Linux"}),t(/android/i,()=>{a.fi.di="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.fi.di="Android",a.fi.mi=t[1]}),a.fi.di===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.fi.di="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.fi.di="iOS",a.fi.mi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(V),q=/chromium\//i.test(V),X=/edg\//i.test(V),$=/OPR\//.test(V),Y=/nwjs/i.test(V),K=/safari\//i.test(V),Z=/webkit/i.test(V),Q=(X||$||t(/chrome\/([\d\.]+)/i,t=>{a.fi.gi="Chrome",a.fi.yi=t[1],a.fi.Si="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.fi.gi="Edge",a.fi.yi=t[1],a.fi.Si="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.fi.gi="Opera",a.fi.yi=t[1],a.fi.Si="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.fi.gi="Chromium",a.fi.yi=t[1],a.fi.Si="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.fi.gi="NW.js",a.fi.yi=t[1],a.fi.Si="Chromium",a.fi.bi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.fi.gi="Firefox",a.fi.yi=t[1],a.fi.Si="Gecko"}),!K||J||q||X||$||Y||(a.fi.gi="Safari",a.fi.Si="WebKit",t(/version\/([\d\.]+)/i,t=>{a.fi.yi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.fi.gi="Chrome for iOS",a.fi.yi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.fi.gi="Firefox for iOS",a.fi.yi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.fi.gi="Edge for iOS",a.fi.yi=t[1]})),a.fi.Si===W&&Z&&(a.fi.Si="WebKit"),"Android"===a.fi.di&&"Safari"===a.fi.gi&&(a.fi.gi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.fi.di)||"nwjs"===a.fi.bi;a.fi.vi=tt,a.fi.Mi=!tt}"Chrome"===a.fi.gi&&"browser"===a.fi.bi&&/wv\)/.test(V)&&(a.fi.bi="webview"),"nwjs"!==a.fi.bi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.fi.bi="webapp"),a.fi.wi=parseFloat(a.fi.yi);const i="macOS"===a.fi.di&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.fi.di="iOS",a.fi.mi=a.fi.yi,a.fi.vi=!1,a.fi.Mi=!0,a.fi.Gi=!0),a.fi.xi="macOS"===a.fi.di||"iOS"===a.fi.di}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),B(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self._i=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self._i,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Ii=t,this.Ci=!this.Ii,this.Ci||"undefined"!=typeof indexedDB||(this.Ci=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Pi=new Map}Ri(t){if(!this.Ci)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ci=!0;break}}async Ei(t){const s=this.Pi.get(t),i=await h(s);return void 0===i?null:i}async Ai(t,s){s=await h(s),this.Pi.set(t,s)}Fi(t){this.Pi.delete(t)}ki(){this.Pi.clear()}Di(){return Array.from(this.Pi.keys())}Oi(){return this.Ci}Li(){return this.Pi}Bi(t){this.Pi=t}async getItem(s,t){if(e(t),this.Ci)return this.Ei(s);let i;try{i=await this.Ii.get(s)}catch(t){return this.Ri(t),this.Ci?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ci)await this.Ai(s,i);else try{await this.Ii.set(s,i)}catch(t){if(this.Ri(t),!this.Ci)throw t;await this.Ai(s,i)}}async removeItem(s,t){if(e(t),this.Ci)this.Fi(s);else try{await this.Ii.delete(s)}catch(t){this.Ri(t),this.Ci?this.Fi(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ci)this.ki();else try{await this.Ii.clear()}catch(t){this.Ri(t),this.Ci?this.ki():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ci)return this.Di();let s=[];try{s=await this.Ii.keys()}catch(t){if(this.Ri(t),this.Ci)return this.Di();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ci?Promise.resolve(!0):this.Ii.ready()}Ni(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Wi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}ji(t){i("localforage.defineDriver()")}Vi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ws;if(e.Ui={},e.Ui.Hi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ui.Ji="undefined"!=typeof HTMLDialogElement,e.Ui.Xi=!!self.requestIdleCallback,e.Ui.ImageBitmap=!!self.createImageBitmap,e.Ui.ImageBitmapOptions=!1,e.Ui.$i=!1,e.Ui.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ui.ImageBitmapOptions=!0}).catch(()=>{e.Ui.ImageBitmapOptions=!1})}catch(t){e.Ui.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ui.$i=10===t.width&&10===t.height}).catch(()=>{e.Ui.$i=!1})}catch(t){e.Ui.$i=!1}}if(e.Ui.Yi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ui.Ki=!(!navigator.permissions||!navigator.permissions.query),e.Ui.Zi=!1,e.Ui.Ki){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ui.Zi=!0}).catch(()=>{e.Ui.Zi=!1})}e.Ui.Qi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ui.te="undefined"!=typeof Proxy,e.Ui.ie=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ui.he="function"==typeof fetch,e.Ui.ne=!!(self.isSecureContext&&"Opera"!==e.fi.gi&&navigator.storage&&navigator.storage.persist),e.Ui.oe=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ui.ae=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.fi.di)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ui.ImageDecoder=void 0!==self.ImageDecoder,e.Ui.le=!!self.VideoEncoder,e.Ui.ue=!!self.showOpenFilePicker,e.Ui.fe=!!self.queryLocalFonts,e.Ui.UserActivation=!!navigator.userActivation,e.Ui.de=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ui.de=i&&"image/webp"===i.type}catch(t){e.Ui.de=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ws;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.pe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.me||(Set.prototype.me=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ge(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ws;self.assert=function(t,s){t||i(s)}}{const h=self.Ws,mt=self.Ys,gt=(h.ye=function(t){return"number"==typeof t},h.we=function(t){return h.ye(t)&&isFinite(t)},h.Se=function(t){if(!h.ye(t))throw new TypeError("expected number")},h.ve=function(t){h.Me(t)},h.xe=function(t,s,i){if(!h.ye(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.Ge=function(...s){for(let t of s);},h.Te=function(t){if(!h.we(t))throw new TypeError("expected finite number")},h._e=function(t){h.Me(t)},h.Ie=function(...s){for(let t of s);},h.Ce=function(t){return"string"==typeof t},h.Pe=function(t){if(!h.Ce(t))throw new TypeError("expected string")},h.Re=function(t){h.Me(t)},h.Ee=function(...s){for(let t of s);},h.Ae=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Fe=function(t){if(!h.Ae(t))throw new TypeError("expected simple object")},h.ke=function(t){if(!h.Me(t)&&!h.Ae(t))throw new TypeError("expected simple object")},h.De=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Oe=function(t){if(!h.De(t))throw new TypeError("expected object")},h.Le=function(t){h.Me(t)},h.Be=function(...s){for(let t of s);},h.Ne=function(t){return h.We(t,Blob)&&"string"==typeof t.name},h.je=function(t){if(!h.Ne(t))throw new TypeError("expected file")},h.Ve=function(t){h.Me(t)},h.Ue=function(t){return Array.isArray(t)},h.He=function(t){if(!h.Ue(t))throw new TypeError("expected array")},h.Je=function(t){h.Me(t)},h.qe=function(...s){for(let t of s);},h.Xe=function(t){return!(!h.Ue(t)||t.length&&!h.Ue(t[0]))},h.$e=function(s){if(!h.Xe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Ue(t))throw new TypeError("expected 2d array")},h.Ye=function(t){h.Me(t)},h.Ke=function(t){return"function"==typeof t},h.Ze=function(t,s){if(!h.Ke(t))throw new TypeError("expected function");if(!h.Me(s)&&t!==s)throw new TypeError("expected same function reference")},h.Qe=function(t){h.Me(t)},h.th=function(...s){for(let t of s);},h.ih=function(s,...i){if(!h.Ke(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.Me(t)&&s===t)return;throw new TypeError("expected same function reference")},h.eh=function(...s){if(!h.Me(s))for(let t of s);},h.hh=function(t,s){return t instanceof s},h.rh=function(s,...i){for(let t of i)if(h.hh(s,t))return!0;return!1},h.nh=function(t,s){if(!h.hh(t,s))throw new TypeError("unexpected type")},h.oh=function(t,s){h.Me(t)},h.ah=function(t,...s){for(let t of s);},h.lh=function(t,...s){if(!h.rh(t,...s))throw new TypeError("unexpected type")},h.uh=function(t,...s){if(!h.Me(t)&&!h.rh(t,...s))throw new TypeError("unexpected type")},h.fh=function(s,i){for(let t of s)if(!h.hh(t,i))return!1;return!0},h.ph=function(s){for(let t of s)if(!h.we(t))return!1;return!0},h.mh=function(s,t){for(let t of s);},h.gh=function(s,t){if(!h.Me(s))for(let t of s);},h.yh=function(s,t){if(!h.Me(s))for(let t of s);},h.wh=function(s){for(let t of s);},h.Sh=function(s){if(!h.Me(s))for(let t of s);},h.bh=function(t,s){return!(h.Me(t)||!h.Ce(t.nodeName))&&(!s||h.Mh(t.nodeName,s))},h.xh=function(t,s){if(h.Me(t)||!h.Ce(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Mh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Gh=function(t,s){h.Me(t)},h.Th=function(t,s){return!(h.Me(t)||!h.Ce(t.tagName))&&(!s||h.Mh(t.tagName,s))},h._h=function(t,s){if(h.Me(t)||!h.Ce(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Mh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Ih=function(t,s){h.Me(t)},h.Ch=function(t){return h.Th(t,"img")||h.Th(t,"canvas")||h.Th(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Ph=function(t){if(!h.Ch(t))throw new TypeError("expected drawable")},h.Rh=function(t){h.Me(t)},h.Eh=function(t){return t instanceof ImageData||h.Ch(t)},h.Ah=function(t){if(!h.Eh(t))throw new TypeError("expected drawable or image data")},h.Fh=function(t){if(!h.Me(t)&&!h.Eh(t))throw new TypeError("expected drawable or image data")},h.kh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Dh},h.Oh=function(t){if(!h.kh(t))throw new TypeError("expected string-like")},h.Lh=function(t){h.Me(t)},h.Bh=function(...s){for(let t of s);},h.Nh=function(){throw new Error("must be overridden")},h.Wh=function(){throw new Error("not yet implemented")},h.jh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.Me=function(t){return null==t},h.Vh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Uh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Hh=function(t){return h.hh(t,gt)},h.zh=function(t){},h.Jh=function(t){h.qh(t,gt)},h.Xh=function(t,...s){if(!h.$h(t,...s))throw new TypeError("unexpected type")},h.$h=function(t,...s){for(const i of s)if(h.We(t,i))return!0;return!1},h.qh=function(t,s){if(!h.We(t,s))throw new TypeError("unexpected type")},h.We=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.Se=h.Se,mt.ve=h.ve,mt.Te=h.Te,mt._e=h._e,mt.Pe=h.Pe,mt.Re=h.Re,mt.Oe=h.Oe,mt.Le=h.Le,mt.He=h.He,mt.Je=h.Je,mt.Ze=h.Ze,mt.Qe=h.Qe,mt.nh=h.nh,mt.oh=h.oh,mt.Me=h.Me}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ge())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.Yh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Kh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Yh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Ws,yt=new Map;p.Zh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Qh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.ir=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,er:0,hr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.er.toPrecision(3)} :: calls => `+this.hr}})},p.rr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.er=i.total/i.hr,console.log(i.toString()),i.hr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ge=function(){return(new Error).stack},p.nr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Yh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ye(t)?"<number>":p.Ce(t)?"<string>":p.Ue(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ke(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.lr={};const wt=new Set(["then","splice"]);p.lr.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Yh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Yh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.lr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Yh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Yh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Yh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.lr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Yh(t)}'`)},p.lr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Yh(t)}'`)},p.lr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Yh(t)}'`)};let f=-1,d=(p.ur=class{constructor(){if(p.$s&&p.Ui.te){let t=Object.create(new.target.prototype),s=new Proxy(t,p.lr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.cr=function(s){if(p.$s&&p.Ui.te&&s instanceof p.ur){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.dr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.$s&&n(t,i),p.cr(i)},p.pr=function(t){let s=u.get(t);s&&c.set(s,p.ge())},p.Sr=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.br=class{constructor(t){this.vr="",t&&this.start(t)}start(t){p.ci&&(this.vr=t,performance.mark(this.vr+"-Start"))}end(){p.ci&&(performance.mark(this.vr+"-End"),performance.measure(this.vr,this.vr+"-Start",this.vr+"-End"))}next(t){p.ci&&(this.end(),this.vr=t,performance.mark(this.vr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ws,St=2*Math.PI,bt=Math.PI/180,vt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Mr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Gr=function(t,s,i){return t<s?s:i<t?i:t},y.Tr=function(t){return(t%=St)<0&&(t+=St),t},y._r=function(t){return t*bt},y.Ir=function(t){return t*vt},y.Cr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.Pr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Er=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Ar=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.Tr(t+i):y.Tr(t-i):y.Tr(s)},y.Fr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.kr=function(t,s,i,e=0){let h=y.Er(t,s),r=St*e;return y.Fr(s,t)?y.Tr(t+(h+r)*i):y.Tr(t-(h+r)*i)},y.Dr=function(t,s,i,e=0){const h=y.Er(t,s),r=St*e;return y.Fr(s,t)?y.Tr(t+(h+r)*i):y.Tr(t+(St-h+r)*i)},y.Or=function(t,s,i,e=0){const h=y.Er(t,s),r=St*e;return y.Fr(s,t)?y.Tr(t-(-St+h-r)*i):y.Tr(t-(h+r)*i)},y.Lr=function(t,s){const i=y.Er(t,s);return y.Fr(t,s)?y.Tr(s-i):y.Tr(s+i)},y.Lt=function(t,s,i){return t+i*(s-t)},y.Br=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Nr=function(t,s,i,e,h){return y.Lt(e,h,y.Br(t,s,i))},y.Wr=function(t,s,i,e){return y.Lt(y.Lt(t,s,e),y.Lt(s,i,e),e)},y.jr=function(t,s,i,e,h){return y.Lt(y.Wr(t,s,i,h),y.Wr(s,i,e,h),h)},y.Vr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Ur=function(t){return 0<t&&0==(t-1&t)},y.Hr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.zr=function(t,s){return Math.round(t*s)/s},y.Jr=function(t,s){return Math.floor(t*s)/s},y.qr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Xr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.$r=function(t,s,i){return y.Gr(t,0,255)|y.Gr(s,0,255)<<8|y.Gr(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.Yr=function(t,s,i,e){return t=y.Gr(Math.floor(1024*t),-8192,Gt),s=y.Gr(Math.floor(1024*s),-8192,Gt),i=y.Gr(Math.floor(1024*i),-8192,Gt),e=y.Gr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*Mt+s*xt*Mt+i*Mt+e)},y.Kr=function(t,s,i){return y.Yr(t,s,i,1)},y.Zr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.Qr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*Mt)/(xt*Mt));return t>Gt&&(t-=xt),t/1024}},y.tn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*Mt)/Mt);return t>Gt&&(t-=xt),t/1024}},y.sn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.hn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.rn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.hn(i,e);return[i/t,e/t]},y.nn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,w=i-t,S=e-s,b=n-h,v=o-r,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.an=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},y.ln=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.un(),u=h.cn(),c=h.dn(),f=h.pn(),d=h.mn(),p=h.gn(),m=h.yn(),g=h.wn();return y.an(t,s,i,e,r,n,o,a,l,u,c,f)||y.an(t,s,i,e,r,n,o,a,c,f,d,p)||y.an(t,s,i,e,r,n,o,a,d,p,m,g)||y.an(t,s,i,e,r,n,o,a,m,g,l,u)},y.Sn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.an(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.an(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y.bn=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.vn=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y.bn(t,s,i,e,h-l,r-u,n+l,o+u)},y.Mn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.xn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.Gn=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Ws,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.Tn=function(){return i},l._n=function(){if(!s)return"";const t=s.location;return l.In(t.origin+t.pathname)+i},l.In=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Cn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.Pn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Rn=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.En=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.An=function(t){return t.replace(/\\/g,"/")},l.Fn=function(t,s){const i=t?l.Pn(t).slice(1):"";return s===i},l.kn=function(t,s){let i,e;return l.Ne(t)&&(i=l.En(t.name)),l.Ce(t)&&(i=l.En(t)),l.Ne(s)&&(e=l.En(s.name)),l.Ce(s)&&(e=l.En(s)),i===e},l.Dn=function(t){t=l.An(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,On:h,name:r,root:s,ext:n,Ln:a}},l.Bn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Nn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Wn=function(){},l.Mh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.jn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Vn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Un=function(t,s){t.length=s},l.Hn=function(t){t&&0!==t.length&&l.Un(t,0)},l.zn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Un(t,0)}l.Un(i,0)}},l.Jn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.qn=function(t,s,i){const e=t.length;(s|=0)<e?l.Un(t,s):e<s&&l.Jn(t,s,i)},l.Xn=function(t,s){l.Hn(t),l.Kh(t,s)},l.Kh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.$n=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Un(i,s)}},l.Yn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Kn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Zn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.Un(i,r),h},l.Qn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Un(i,h),t-h},l.eo=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.ho=function(t,s){if(!l.eo(t,s))throw new RangeError("array index out of bounds")},l.ro=function(t){return t.slice()},l.no=function(t,i){let e=[];for(let s of t)if(l.De(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ue(s)?e.push(l.no(s,i)):e.push(s);return e},l.ao=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.lo=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.uo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.co=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.fo=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.do=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.po=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.yo=function(t){e.push(t)},l.wo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.So=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l.bo=function(t){r.delete(t)},l.vo=l.So,l.Mo=function(){return new Promise(t=>l.vo(t))},new Set);l.xo=function(s){const i=self.requestAnimationFrame(async t=>{await l.Mo(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.Go=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Ws;r.To=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r._o=function(t){return!r.To(t)},r.Io=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Co=function(t,s){return fetch(t,s).then(t=>(r.Io(t),t))},r.Po=function(t){return r.Co(t).then(t=>t.text())},r.Ro=function(t){return r.Co(t).then(t=>t.json())},r.Eo=function(t){return r.Co(t).then(t=>t.blob())},r.Ao=function(t){return r.Co(t).then(t=>t.arrayBuffer())},r.Fo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.ko=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Do=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Oo=function(t){return r.Do(t).then(t=>JSON.parse(t))},r.Lo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Fo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Bo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.No=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Gr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Wo=function(t,s,i){const e=r.Bo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.No(e,s,i)},r.jo=function(t,s,i){if(r.Ui.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Wo(t,s,i));if(r.Ui.ImageBitmap)return createImageBitmap(t).then(t=>r.Wo(t,s,i));{const e=r.Bo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.No(e,s,i)}},r.Vo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Uo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Ho=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.zo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Jo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.qo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Xo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.$o=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ws,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Yo=class{constructor(t,s,i,e){this.Ko=NaN,this.Zo=NaN,this.Qo=NaN,this.ta=NaN,this.Ko=0,this.Zo=0,this.Qo=0,this.ta=0,t instanceof u.Yo?this.set(t):this.ea(t||0,s||0,i||0,e||0)}ra(t,s,i){return this.Ko=+t,this.Zo=+s,this.Qo=+i,this.Gr(),this}ea(t,s,i,e){return this.Ko=+t,this.Zo=+s,this.Qo=+i,this.ta=+e,this.Gr(),this}set(t){return this.Ko=t.Ko,this.Zo=t.Zo,this.Qo=t.Qo,this.ta=t.ta,this}I(t){return this.set(t)}add(t){this.Ko+=t.Ko,this.Zo+=t.Zo,this.Qo+=t.Qo,this.ta+=t.ta,this.Gr()}na(t,s,i,e=0){this.Ko+=+t,this.Zo+=+s,this.Qo+=+i,this.ta+=+e,this.Gr()}aa(t){this.la(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.ua(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.ca(Math.max(this.Qo,t.Qo)-Math.min(this.Qo,t.Qo)),this.fa(Math.max(this.ta,t.ta)-Math.min(this.ta,t.ta)),this.Gr()}ma(t){this.Ko=t.Ko,this.Zo=t.Zo,this.Qo=t.Qo}la(t){this.Ko=u.Gr(+t,0,1)}ga(){return this.Ko}ua(t){this.Zo=u.Gr(+t,0,1)}ya(){return this.Zo}ca(t){this.Qo=u.Gr(+t,0,1)}wa(){return this.Qo}fa(t){this.ta=u.Gr(+t,0,1)}Sa(){return this.ta}clone(){return u.dr(u.Yo,this.Ko,this.Zo,this.Qo,this.ta)}toArray(){return[this.Ko,this.Zo,this.Qo,this.ta]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.Ko,t[s++]=this.Zo,t[s++]=this.Qo,t[s]=this.ta}xa(t,s){t[s++]=this.Ko,t[s++]=this.Zo,t[s]=this.Qo}equals(t){return this.Ko===t.Ko&&this.Zo===t.Zo&&this.Qo===t.Qo&&this.ta===t.ta}Ga(t){return this.Ko===t.Ko&&this.Zo===t.Zo&&this.Qo===t.Qo}Ta(t,s,i){return this.Ko===t&&this.Zo===s&&this.Qo===i}_a(t,s,i,e){return this.Ko===t&&this.Zo===s&&this.Qo===i&&this.ta===e}Ia(t,s){return t[s]===Math.fround(this.Ko)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Qo)&&t[s+3]===Math.fround(this.ta)}Ca(t,s){return t[s]===Math.fround(this.Ko)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Qo)}multiply(t){this.Ko*=t.Ko,this.Zo*=t.Zo,this.Qo*=t.Qo,this.ta*=t.ta}Pa(t){this.Ko*=t,this.Zo*=t,this.Qo*=t,this.ta*=t}Ra(){return this.Ko*=this.ta,this.Zo*=this.ta,this.Qo*=this.ta,this}Ea(){return this.Ko/=this.ta,this.Zo/=this.ta,this.Qo/=this.ta,this}Gr(){return this.Ko=u.Gr(this.Ko,0,1),this.Zo=u.Gr(this.Zo,0,1),this.Qo=u.Gr(this.Qo,0,1),this.ta=u.Gr(this.ta,0,1),this}Aa(t){this.Ko=u.Zr(t),this.Zo=u.Qr(t),this.Qo=u.tn(t),this.ta=u.sn(t)}Fa(t,s,i){const e=u.we(t)?t:this.ga(),h=u.we(s)?s:this.ya(),r=u.we(i)?i:this.wa();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}ka(t,s,i,e){const h=u.we(t)?t:this.ga(),r=u.we(s)?s:this.ya(),n=u.we(i)?i:this.wa(),o=u.we(e)?e:this.Sa();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Da(){const t=Math.round(255*this.ga()),s=Math.round(255*this.ya()),i=Math.round(255*this.wa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Oa(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.la(s),isFinite(i)&&this.ua(i),isFinite(e)&&this.ca(e),this.fa(1),!0}La(){const t=Math.round(255*this.ga()),s=Math.round(255*this.ya()),i=Math.round(255*this.wa());return t+`, ${s}, `+i}Ba(){const t=Math.round(255*this.ga()),s=Math.round(255*this.ya()),i=Math.round(255*this.wa());return[t,s,i]}Na(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.la(i),isFinite(e)&&this.ua(e),isFinite(h)&&this.ca(h),this.fa(1),!0}Wa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.la(i),isFinite(e)&&this.ua(e),isFinite(h)&&this.ca(h),this.fa(1),!0}ja(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.la(i),isFinite(e)&&this.ua(e),isFinite(h)&&this.ca(h),isFinite(r)&&this.fa(r),!0}Va(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.la(i),isFinite(e)&&this.ua(e),isFinite(h)&&this.ca(h),isFinite(r)&&this.fa(r),!0}Ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Wa(t):this.Na(t);if(t.startsWith("rgba("))return t.includes("%")?this.Va(t):this.ja(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ha(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Wa(t):4===s.length&&this.Va(t):3===s.length?this.Na(t):4===s.length&&this.ja(t)}}return this.Oa(t)}toJSON(){return[this.Ko,this.Zo,this.Qo,this.ta]}za(t,s,i,e){let h,r,n;if(t%=360,s=u.Gr(s,0,100),i=u.Gr(i,0,100),e=u.Gr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.la(h),this.ua(r),this.ca(n),this.fa(e),this}Ha(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.za(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.za(+i[1],+i[2],+i[3],+i[4]),0))}Ja(){const t=this.Ko,s=this.Zo,i=this.Qo,e=this.ta,h=u.Yo.qa(t,s,i),r=u.Yo.Xa(t,s,i),n=u.Yo.$a(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Ya(){const t=this.Ko,s=this.Zo,i=this.Qo;return[u.Yo.qa(t,s,i),u.Yo.Xa(t,s,i),u.Yo.$a(t,s,i),this.ta]}Ka(t){!Array.isArray(t)||t.length<3||(this.Ko=t[0],this.Zo=t[1],this.Qo=t[2],this.ta=4<=t.length?t[3]:1)}set r(t){this.la(t)}get r(){return this.ga()}set g(t){this.ua(t)}get g(){return this.ya()}set b(t){this.ca(t)}get b(){return this.wa()}set a(t){this.fa(t)}get a(){return this.Sa()}Za(t,s){switch(t){case 0:this.la(s);break;case 1:this.ua(s);break;case 2:this.ca(s);break;case 3:this.fa(s);break;default:throw new RangeError("invalid color index")}}Qa(t){switch(t){case 0:return this.ga();case 1:return this.ya();case 2:return this.wa();case 3:return this.Sa();default:throw new RangeError("invalid color index")}}static tl(t,s){let i,e;if(Array.isArray(t))(i=new u.Yo).Ka(t);else{if(!(t instanceof u.Yo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Yo).Ka(s);else{if(!(s instanceof u.Yo))throw new Error("unexpected type");e=s}return i.equals(e)}static sl(t,s){return u.Gr(Math.max(t,s)-Math.min(t,s),0,1)}static il(t,s){const i=new u.Yo;return i.la(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.ua(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.ca(Math.max(t.Qo,s.Qo)-Math.min(t.Qo,s.Qo)),i.fa(Math.max(t.ta,s.ta)-Math.min(t.ta,s.ta)),i}static el(t,s){const i=new u.Yo(0,0,0,1);return i.la(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.ua(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.ca(Math.max(t.Qo,s.Qo)-Math.min(t.Qo,s.Qo)),i}static qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Xa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static $a(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.Yo.hl=Object.freeze(u.dr(u.Yo,1,1,1,1)),u.Yo.rl=Object.freeze(u.dr(u.Yo,0,0,0,1)),u.Yo.nl=Object.freeze(u.dr(u.Yo,0,0,0,0))}{const Pt=self.Ws;Pt.ol=class{constructor(t,s){this.al=0,this.ll=0,t instanceof Pt.ol?this.I(t):this.set(t||0,s||0)}set(t,s){this.al=+t,this.ll=+s}I(t){this.al=t.al,this.ll=t.ll}equals(t){return this.al===t.al&&this.ll===t.ll}ul(t,s){return this.al===t&&this.ll===s}Ia(t,s){return t[s]===Math.fround(this.al)&&t[s+1]===Math.fround(this.ll)}cl(t){this.al=+t}fl(){return this.al}dl(t){this.ll=+t}pl(){return this.ll}toArray(){return[this.al,this.ll]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.al,t[s]=this.ll}offset(t,s){this.al+=+t,this.ll+=+s}scale(t,s){this.al*=t,this.ll*=s}Pt(t,s){this.al/=t,this.ll/=s}round(){this.al=Math.round(this.al),this.ll=Math.round(this.ll)}floor(){this.al=Math.floor(this.al),this.ll=Math.floor(this.ll)}ceil(){this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll)}angle(){return Pt.Rr(0,0,this.al,this.ll)}ml(){return this.al*this.al+this.ll*this.ll}length(){return Math.hypot(this.al,this.ll)}gl(t,s){const i=this.al*s-this.ll*t;this.ll=this.ll*s+this.al*t,this.al=i}rotate(t){0!==t&&this.gl(Math.sin(t),Math.cos(t))}yl(t,s,i){0===t||s===this.al&&i===this.ll||(this.al-=s,this.ll-=i,this.gl(Math.sin(t),Math.cos(t)),this.al+=+s,this.ll+=+i)}move(t,s){0!==s&&(this.al+=Math.cos(t)*s,this.ll+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.al/=t,this.ll/=t)}Gr(t,s){this.al=Pt.Gr(this.al,t,s),this.ll=Pt.Gr(this.ll,t,s)}Dt(t){return this.al*t.al+this.ll*t.ll}reverse(){this.al=-this.al,this.ll=-this.ll}wl(){let t=this.al;return this.al=this.ll,this.ll=-t,this}}}{const Rt=self.Ws;Rt.Rect=class{constructor(t,s,i,e){this.Sl=NaN,this.bl=NaN,this.vl=NaN,this.Ml=NaN,this.Sl=0,this.bl=0,this.vl=0,this.Ml=0,t instanceof Rt.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Sl=+t,this.bl=+s,this.vl=+i,this.Ml=+e}xl(t,s,i,e){s=+s,this.Sl=t=+t,this.bl=s,this.vl=t+ +i,this.Ml=s+ +e}I(t){this.Sl=+t.Sl,this.bl=+t.bl,this.vl=+t.vl,this.Ml=+t.Ml}clone(){return new Rt.Rect(this.Sl,this.bl,this.vl,this.Ml)}static Gl(t,s){const i=new Rt.Rect;return i.Tl(Math.min(t.Sl,s.Sl)),i._l(Math.min(t.bl,s.bl)),i.Il(Math.max(t.vl,s.vl)),i.Cl(Math.max(t.Ml,s.Ml)),i}static Pl(t){return new Rt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Sl===t.Sl&&this.bl===t.bl&&this.vl===t.vl&&this.Ml===t.Ml}Rl(t,s,i,e){return this.Sl===t&&this.bl===s&&this.width()===i&&this.height()===e}Ia(t,s){return t[s]===Math.fround(this.Sl)&&t[s+1]===Math.fround(this.bl)&&t[s+2]===Math.fround(this.vl)&&t[s+3]===Math.fround(this.Ml)}Tl(t){this.Sl=+t}El(){return this.Sl}_l(t){this.bl=+t}Al(){return this.bl}Il(t){this.vl=+t}Fl(){return this.vl}Cl(t){this.Ml=+t}kl(){return this.Ml}toArray(){return[this.Sl,this.bl,this.vl,this.Ml]}ba(){return new Float64Array(this.toArray())}Dl(){return new DOMRect(this.Sl,this.bl,this.width(),this.height())}static Ol(t){return Rt.dr(Rt.Rect,t.left,t.top,t.right,t.bottom)}Ma(t,s){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=this.vl,t[s]=this.Ml}Ll(t,s){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=this.vl,t[s++]=this.bl,t[s++]=this.vl,t[s++]=this.Ml,t[s++]=this.Sl,t[s]=this.Ml}Bl(t,s,i){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=i,t[s++]=this.vl,t[s++]=this.bl,t[s++]=i,t[s++]=this.vl,t[s++]=this.Ml,t[s++]=i,t[s++]=this.Sl,t[s++]=this.Ml,t[s]=i}width(){return this.vl-this.Sl}height(){return this.Ml-this.bl}Nl(){return(this.Sl+this.vl)/2}Wl(){return(this.bl+this.Ml)/2}offset(t,s){s=+s,this.Sl+=t=+t,this.bl+=s,this.vl+=t,this.Ml+=s}offsetLeft(t){this.Sl+=+t}offsetTop(t){this.bl+=+t}jl(t){this.vl+=+t}Vl(t){this.Ml+=+t}Ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.bl<this.Ml?this.Sl<this.vl?this.Ml=this.bl+this.width():this.Ml=this.bl-this.width():this.Sl<this.vl?this.Ml=this.bl-this.width():this.Ml=this.bl+this.width()}Hl(t,s){s=+s,this.Sl-=t=+t,this.bl-=s,this.vl+=t,this.Ml+=s}zl(t,s){s=+s,this.Sl+=t=+t,this.bl+=s,this.vl-=t,this.Ml-=s}multiply(t,s){this.Sl*=t,this.bl*=s,this.vl*=t,this.Ml*=s}Pt(t,s){this.Sl/=t,this.bl/=s,this.vl/=t,this.Ml/=s}Jl(t){this.Sl=+t-this.Sl,this.vl=+t-this.vl}ql(t){this.bl=+t-this.bl,this.Ml=+t-this.Ml}Xl(t,s){const i=this.width(),e=this.height(),h=this.El()+i*t,r=this.Al()+e*s;this.xl(h-e*s,r-i*t,e,i)}$l(){const t=this.Sl;this.Sl=this.vl,this.vl=t}Yl(){const t=this.bl;this.bl=this.Ml,this.Ml=t}Kl(t){const s=this.bl;this.bl=+t-this.Ml,this.Ml=+t-s}round(){this.Sl=Math.round(this.Sl),this.bl=Math.round(this.bl),this.vl=Math.round(this.vl),this.Ml=Math.round(this.Ml)}Zl(){this.Sl=Math.ceil(this.Sl),this.bl=Math.ceil(this.bl),this.vl=Math.floor(this.vl),this.Ml=Math.floor(this.Ml)}Ql(){this.Sl=Math.floor(this.Sl),this.bl=Math.floor(this.bl),this.vl=Math.ceil(this.vl),this.Ml=Math.ceil(this.Ml)}floor(){this.Sl=Math.floor(this.Sl),this.bl=Math.floor(this.bl),this.vl=Math.floor(this.vl),this.Ml=Math.floor(this.Ml)}ceil(){this.Sl=Math.ceil(this.Sl),this.bl=Math.ceil(this.bl),this.vl=Math.ceil(this.vl),this.Ml=Math.ceil(this.Ml)}Gr(t,s,i,e){this.Sl=Math.max(this.Sl,+t),this.bl=Math.max(this.bl,+s),this.vl=Math.min(this.vl,+i),this.Ml=Math.min(this.Ml,+e)}tu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Sl=Rt.Gr(this.Sl,t,i),this.bl=Rt.Gr(this.bl,s,e),this.vl=Rt.Gr(this.vl,t,i),this.Ml=Rt.Gr(this.Ml,s,e)}normalize(){this.Sl>this.vl&&this.$l(),this.bl>this.Ml&&this.Yl()}su(t){return!(t.vl<this.Sl||t.Ml<this.bl||t.Sl>this.vl||t.bl>this.Ml)}iu(t,s,i){return!(t.vl+s<this.Sl||t.Ml+i<this.bl||t.Sl+s>this.vl||t.bl+i>this.Ml)}eu(t,s){return t>=this.Sl&&t<=this.vl&&s>=this.bl&&s<=this.Ml}hu(t){return t.Sl>=this.Sl&&t.bl>=this.bl&&t.vl<=this.vl&&t.Ml<=this.Ml}ru(t){t.Sl<this.Sl&&(this.Sl=+t.Sl),t.bl<this.bl&&(this.bl=+t.bl),t.vl>this.vl&&(this.vl=+t.vl),t.Ml>this.Ml&&(this.Ml=+t.Ml)}nu(t){this.Sl=Rt.Lt(t.Sl,t.vl,this.Sl),this.bl=Rt.Lt(t.bl,t.Ml,this.bl),this.vl=Rt.Lt(t.Sl,t.vl,this.vl),this.Ml=Rt.Lt(t.bl,t.Ml,this.Ml)}}}{const Et=self.Ws;Et.ou=class{constructor(t,s,i,e,h,r,n,o){this.au=NaN,this.lu=NaN,this.uu=NaN,this.cu=NaN,this.fu=NaN,this.du=NaN,this.pu=NaN,this.mu=NaN,this.au=0,this.lu=0,this.uu=0,this.cu=0,this.fu=0,this.du=0,this.pu=0,this.mu=0,t instanceof Et.ou?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.au=+t,this.lu=+s,this.uu=+i,this.cu=+e,this.fu=+h,this.du=+r,this.pu=+n,this.mu=+o}gu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.au=t.au,this.lu=t.lu,this.uu=t.uu,this.cu=t.cu,this.fu=t.fu,this.du=t.du,this.pu=t.pu,this.mu=t.mu}equals(t){return this.au===t.au&&this.lu===t.lu&&this.uu===t.uu&&this.cu===t.cu&&this.fu===t.fu&&this.du===t.du&&this.pu===t.pu&&this.mu===t.mu}yu(t){this.au=+t}un(){return this.au}wu(t){this.lu=+t}cn(){return this.lu}Su(t){this.uu=+t}dn(){return this.uu}bu(t){this.cu=+t}pn(){return this.cu}vu(t){this.fu=+t}mn(){return this.fu}Mu(t){this.du=+t}gn(){return this.du}xu(t){this.pu=+t}yn(){return this.pu}Gu(t){this.mu=+t}wn(){return this.mu}Tu(){return new DOMQuad(new DOMPoint(this.au,this.lu),new DOMPoint(this.uu,this.cu),new DOMPoint(this.fu,this.du),new DOMPoint(this.pu,this.mu))}static _u(t){return Et.dr(Et.ou,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.au,this.lu,this.uu,this.cu,this.fu,this.du,this.pu,this.mu]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.au,t[s++]=this.lu,t[s++]=this.uu,t[s++]=this.cu,t[s++]=this.fu,t[s++]=this.du,t[s++]=this.pu,t[s]=this.mu}Iu(t,s,i){t[s++]=this.au,t[s++]=this.lu,t[s++]=i,t[s++]=this.uu,t[s++]=this.cu,t[s++]=i,t[s++]=this.fu,t[s++]=this.du,t[s++]=i,t[s++]=this.pu,t[s++]=this.mu,t[s]=i}offset(t,s){s=+s,this.au+=t=+t,this.lu+=s,this.uu+=t,this.cu+=s,this.fu+=t,this.du+=s,this.pu+=t,this.mu+=s}round(){this.au=Math.round(this.au),this.lu=Math.round(this.lu),this.uu=Math.round(this.uu),this.cu=Math.round(this.cu),this.fu=Math.round(this.fu),this.du=Math.round(this.du),this.pu=Math.round(this.pu),this.mu=Math.round(this.mu)}floor(){this.au=Math.floor(this.au),this.lu=Math.floor(this.lu),this.uu=Math.floor(this.uu),this.cu=Math.floor(this.cu),this.fu=Math.floor(this.fu),this.du=Math.floor(this.du),this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu)}ceil(){this.au=Math.ceil(this.au),this.lu=Math.ceil(this.lu),this.uu=Math.ceil(this.uu),this.cu=Math.ceil(this.cu),this.fu=Math.ceil(this.fu),this.du=Math.ceil(this.du),this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu)}Cu(t){this.au=t.Sl,this.lu=t.bl,this.uu=t.vl,this.cu=t.bl,this.fu=t.vl,this.du=t.Ml,this.pu=t.Sl,this.mu=t.Ml}Pu(t,s){0===s?this.Cu(t):this.Ru(t,Math.sin(s),Math.cos(s))}Ru(t,s,i){const e=t.Sl*s,h=t.bl*s,r=t.vl*s,n=t.Ml*s,o=t.Sl*i,a=t.bl*i,l=t.vl*i,u=t.Ml*i;this.au=o-h,this.lu=a+e,this.uu=l-h,this.cu=a+r,this.fu=l-n,this.du=u+r,this.pu=o-n,this.mu=u+e}Eu(t){t.set(Math.min(this.au,this.uu,this.fu,this.pu),Math.min(this.lu,this.cu,this.du,this.mu),Math.max(this.au,this.uu,this.fu,this.pu),Math.max(this.lu,this.cu,this.du,this.mu))}eu(t,s){let i=this.uu-this.au,e=this.cu-this.lu,h=this.fu-this.au,r=this.du-this.lu,n=t-this.au,o=s-this.lu,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.pu-this.au)*i+(e=this.mu-this.lu)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Nl(){return(this.au+this.uu+this.fu+this.pu)/4}Wl(){return(this.lu+this.cu+this.du+this.mu)/4}Au(t,s,i,e){return!(!this.eu(t,s)&&!this.eu(i,e))||Et.ln(t,s,i,e,this)}Fu(t){let s=t.Nl(),i=t.Wl();if(this.eu(s,i))return!0;if(s=this.Nl(),i=this.Wl(),t.eu(s,i))return!0;const e=this.au,h=this.lu,r=this.uu,n=this.cu,o=this.fu,a=this.du,l=this.pu,u=this.mu;return Et.ln(e,h,r,n,t)||Et.ln(r,n,o,a,t)||Et.ln(o,a,l,u,t)||Et.ln(l,u,e,h,t)}ku(){const t=this.au,s=this.lu;this.au=this.uu,this.lu=this.cu,this.uu=this.fu,this.cu=this.du,this.fu=this.pu,this.du=this.mu,this.pu=t,this.mu=s}Du(){this.Ou(0,2),this.Ou(1,3),this.Ou(6,4),this.Ou(7,5)}Lu(){this.Ou(0,6),this.Ou(1,7),this.Ou(2,4),this.Ou(3,5)}Bu(){this.Ou(2,6),this.Ou(3,7)}Ou(t,s){const i=this.Nu(t);this.Wu(t,this.Nu(s)),this.Wu(s,i)}Nu(t){switch(t){case 0:return this.au;case 1:return this.lu;case 2:return this.uu;case 3:return this.cu;case 4:return this.fu;case 5:return this.du;case 6:return this.pu;case 7:return this.mu;default:throw new RangeError("invalid quad point index")}}Wu(t,s){switch(s=+s,t){case 0:this.au=s;break;case 1:this.lu=s;break;case 2:this.uu=s;break;case 3:this.cu=s;break;case 4:this.fu=s;break;case 5:this.du=s;break;case 6:this.pu=s;break;case 7:this.mu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Ws,Ft=[0,0,1,0,1,1,0,1],kt=At.dr(At.ou);At.ju=class extends At.ur{constructor(t,s=!0){super(),t=t||Ft,this.Vu=Float64Array.from(t),this.Uu=new At.Rect,this.Hu=!0,this.zu=s}pr(){}Ju(){return this.Vu}qu(){return this.Vu.length/2}Xu(t){this.Vu.length===t.length?this.Vu.set(t):this.Vu=Float64Array.from(t),this.Hu=!0}$u(){this.Xu(Ft)}I(t){this.Xu(t.Vu)}Yu(){this.Hu=!0}Ku(){if(this.Hu){let i=this.Vu,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Uu.set(e,h,r,n),this.Hu=!1}}Cu(t,s,i){let e=this.Vu;8!==e.length&&(e=new Float64Array(8),this.Vu=e),e[0]=t.El()-s,e[1]=t.Al()-i,e[2]=t.Fl()-s,e[3]=t.Al()-i,e[4]=t.Fl()-s,e[5]=t.kl()-i,e[6]=t.El()-s,e[7]=t.kl()-i,this.Uu.I(t),0===s&&0===i||this.Uu.offset(-s,-i),this.Hu=!1}Zu(t,s,i){kt.I(t),kt.offset(s,i),this.Xu(kt.toArray()),this.Hu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Qu(t,s,e,h)}Qu(i,e,h,r){const n=this.Vu;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.Hu=!0}offset(i,e){const h=this.Vu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}eu(i,e){const h=this.Vu;if(i===h[0]&&e===h[1])return!0;this.Ku();let t=this.Uu,r=t.El()-110,n=t.Al()-101,o=t.Fl()+131,a=t.kl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],x=h[1+S];At.an(r,n,i,e,l,c,u,f,b,v,M,x)&&++y,At.an(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}tc(t,c,f){const d=t.Vu,p=this.Vu;if(this.eu(d[0]+c,d[1]+f))return!0;if(t.eu(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(At.an(i,e,h,r,n,a,o,l,g,y,w,S))return!0}}return!1}Au(i,e,h,r,n,o){if(this.eu(h-i,r-e))return!0;if(this.eu(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.Vu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.an(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}Du(i){const e=this.Vu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Hu=!0}Lu(i){const e=this.Vu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Hu=!0}Bu(){const i=this.Vu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Hu=!0}ic(){let i=this.Vu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.qu()}ec(){let i=this.Vu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.qu()}hc(){return this.Vu}rc(){return this.qu()}nc(){return this.zu}}}{const Dt=self.Ws;Dt.oc=class extends Dt.ur{constructor(t){if(super(),this.ac=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}pr(){this.lc(),this.ac=null}uc(){return 0===this.ac.size}lc(){const t=this.ac;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.ac,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ri(t,s){const i=this.ac.get(t);return i&&i.get(s)}hi(t,s){const i=this.ac.get(t);return!!i&&i.has(s)}cc(t,s){const i=this.ac,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}fc(t){const s=this.ac,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}mc(){let t=0;for(const s of this.ac.values())t+=s.size;return t}*values(){for(const t of this.ac.values())yield*t.values()}*yc(){for(const[t,s]of this.ac.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.ac.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Ot=self.Ws;Ot.wc=class extends Ot.ur{constructor(){super(),this.Sc=new Set,this.vc=[],this.Mc=!1}pr(){this.lc()}lc(){this.Sc.clear(),Ot.Hn(this.vc),this.Mc=!1}xc(t){this.Sc.has(t)||(this.Sc.add(t),this.Mc)||this.vc.push(t)}hi(t){return this.Sc.has(t)}cc(t){this.Sc.delete(t)&&(this.Mc=!0)}mc(){return this.Sc.size}uc(){return 0===this.Sc.size}Gc(){return this.Mc&&(this.Tc(),this.Mc=!1),this.vc}Tc(){const t=this.vc;Ot.Hn(t);for(const s of this.Sc)t.push(s)}}}{const Lt=self.Ws,Bt=new Map,Nt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ut=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],$t=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Yt=(self._c=class hs{constructor(){}static Ic(){return"default"}static Cc(){return"noease"}static Pc(t){return $t.get(t)}static Rc(s,...i){this.Ec();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.Ac(t,s)||hs.Ac(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Nt.keys()].concat(e).filter(t=>!i.includes(t))}static Fc(){this.Ec();const t=[...Vt.keys()];return t.sort(),[...Nt.keys()].concat(t)}static kc(){this.Ec();const t=[...Vt.keys()];return t.sort(),t}static Dc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Oc(t){return this.Ec(),[...Nt.keys()].includes(t)}static Lc(t){const s=Jt.get(t);return s?Bt.get(s):hs.Oc(t)?Bt.get(t):Ht.has(t)?Ht.get(t):void 0}static Bc(t){return this.Ec(),zt.get(t)}static Nc(t,s){this.Ec();const i=hs.Lc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static Ac(t,s){this.Ec();const i=jt.get(s);if(i)return i.get(t)}static Wc(t,s){this.Ec();const i=hs.Lc(t);return!!i||!!Wt.get(s).get(t)}static jc(t){this.Ec();const s=hs.Lc(t);return s||Vt.get(t)}static Vc(t){return this.Ec(),Ut.get(t)}static Uc(t){this.Ec();const s=this.Fc();return s[t]}static Hc(t,s){this.Ec();const i=this.Rc(s);return i.indexOf(t)}static zc(t){return this.Hc(t)}static Ec(){0===Bt.size&&(this.Jc("default",()=>{}),this.Jc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Jc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Jc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Jc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Jc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Jc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Jc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Jc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Jc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Jc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Jc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Jc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Jc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Jc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Jc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Jc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Jc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Jc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Jc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Jc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Jc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Jc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Jc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.qc("cubicbezier",this.Xc),this.qc("spline",this.$c))}static Jc(t,s,i=!1){if("function"==typeof s)hs.Yc(t,s,"predefined");else{if(!Lt.Ue(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.dr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Yc(t,(t,s,i,e)=>h.Kc(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.dr(Lt.Zc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Qc(i),hs.Yc(t,(t,s,i,e)=>r.Kc(t,s,i,e),"predefined")}}}static qc(t,s){hs.Yc(t,s,"private")}static tf(t,s,i,e){this.Ec(),hs.Yc(t,s,"custom",i,e)}static if(t,s){if(!this.Oc(t)&&![...Ht.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static Yc(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Nt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),jt.get(e));n.set(t,h)}else Vt.set(t,s),Ut.set(t,h);break;case"private":Bt.set(t,s),Ht.set(t,s);break;default:throw new Error("unexpected ease mode")}}static ef(t,s,i,e){return 0===e?s:i*t/e+s}static Xc(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static $c(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static hf(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Yt;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/(Yt-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=Yt-1;for(Yt;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Ce(t)};o;const rs=self.Ws;rs.rf=class{constructor(t){this.nf=[],this.vr=t||"",this.lf=0}pr(){this.lc(),this.nf=null}uf(){return this.vr}lc(){rs.zn(this.nf),this.lf=0}cf(){return this.lf}ff(t=Math.random()*this.cf()){let s=0;for(const[i,e]of this.nf)if(t<(s+=i))return e;return 0}df(t,s){o(s),this.lf+=t,this.nf.push([t,s])}pf(s,i){o(i);const e=0===s;for(let t=0;t<this.nf.length;t++){const h=this.nf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.nf.splice(t,1),this.lf-=h[0];break}}}mf(){return JSON.stringify(this.nf)}static gf(t,s){const i=new rs.rf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.df(r,n)}return i}}}{let t=self.Ws,i=0;t.yf=class{constructor(t,s){this.wf=t,this.Sf=s,this.bf=i++,this.wf.vf("runtime","screen-reader-text",{type:"create",id:this.bf,text:this.Sf})}pr(){this.wf.vf("runtime","screen-reader-text",{type:"release",id:this.bf}),this.wf=null,this.Sf="",this.bf=-1}Mf(t){this.Sf!==t&&(this.Sf=t,this.wf.vf("runtime","screen-reader-text",{type:"update",id:this.bf,text:this.Sf}))}}}{const ns=self.Ws;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.xf=!1,this.Gf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Gf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.xf=!0}}}{const os=self.Ws;os.Event.Tf=class extends os.ur{constructor(t){super(),this._f=t,this.If=[],this.Cf=new Set,this.Pf=[],this.Rf=new Set,this.Ef=0,this.Af=[]}pr(){0<this.Ef||(os.Hn(this.If),this.Cf.clear(),os.Hn(this.Pf),this.Rf.clear(),os.Hn(this.Af),os.pr(this))}Ff(t,s){this.kf()?this.Af.push({Df:"add",Of:t,capture:s}):s?this.Cf.has(t)||(this.If.push(t),this.Cf.add(t)):this.Rf.has(t)||(this.Pf.push(t),this.Rf.add(t))}Lf(t,s){this.kf()?this.Af.push({Df:"remove",Of:t,capture:s}):s?this.Cf.has(t)&&(this.Cf.delete(t),os.Yn(this.If,t)):this.Rf.has(t)&&(this.Rf.delete(t),os.Yn(this.Pf,t))}Bf(){return!this.If.length&&!this.Pf.length}kf(){return 0<this.Ef}Nf(){const t=new Set,s=new Set;for(const i of this.Af)if("add"===i.Df)this.Ff(i.Of,i.capture),(i.capture?s:t).delete(i.Of);else{if("remove"!==i.Df)throw new Error("invalid op");(i.capture?(this.Cf.delete(i.Of),s):(this.Rf.delete(i.Of),t)).add(i.Of)}os.Qn(this.Pf,t),os.Qn(this.If,s),os.Hn(this.Af)}Wf(i){this.jf();let e=!1;for(let t=0,s=this.If.length;t<s;++t)if(this.If[t](i),i.xf){e=!0;break}if(!e)for(let t=0,s=this.Pf.length;t<s&&(this.Pf[t](i),!i.xf);++t);return this.Vf(),!i.defaultPrevented}Uf(i){this.jf();for(let t=0,s=this.If.length;t<s;++t)this.If[t](i);for(let t=0,s=this.Pf.length;t<s;++t)this.Pf[t](i);return this.Vf(),!0}jf(){this.Ef++}Vf(){this.Ef--,0===this.Ef&&0<this.Af.length&&this.Nf()}Hf(t){t?this.jf():this.Vf()}zf(i){let e=[];for(let s=0,t=this.If.length;s<t;++s){let t=this.If[s];e.push(os.Jf(()=>t(i)))}for(let s=0,t=this.Pf.length;s<t;++s){let t=this.Pf[s];e.push(os.Jf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}qf(i){const e=[];this.jf();for(let t=0,s=this.If.length;t<s;++t){const h=this.If[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Pf.length;t<s;++t){const r=this.Pf[t](i);r instanceof Promise&&e.push(r)}return this.Vf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Xf(t){return this.qf(t)}async $f(i){this.jf();for(let t=0,s=this.If.length;t<s;++t){const e=this.If[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Pf.length;t<s;++t){const h=this.Pf[t](i);h instanceof Promise&&await h}return this.Vf(),!i.defaultPrevented}*Yf(i){this.jf();for(let t=0,s=this.If.length;t<s;++t){const e=this.If[t](i);os.Xo(e)&&(yield*e)}for(let t=0,s=this.Pf.length;t<s;++t){const h=this.Pf[t](i);os.Xo(h)&&(yield*h)}this.Vf()}}}{const as=self.Ws;as.Event.Kf=class extends as.ur{constructor(){super(),this.Zf=new Map,this.Qf=!1}pr(){if(this.Qf)throw new Error("already released");this.t0(),this.Qf=!0,as.pr(this)}Sr(){return this.Qf}t0(){if(this.Zf){for(let t of this.Zf.values())t.pr();this.Zf.clear()}}s0(t,s){let i=this.Zf.get(t);return i||(s?(i=as.dr(as.Event.Tf,t),this.Zf.set(t,i),i):null)}i0(t){return this.Zf.has(t)}addEventListener(t,s,i){let e=this.s0(t,!0);e.Ff(s,!!i)}removeEventListener(t,s,i){let e=this.s0(t,!1);e&&(e.Lf(s,!!i),e.Bf())&&this.Zf.delete(t)}dispatchEvent(t){const s=this.s0(t.type,!1);return!s||(t.cancelable?s.Wf(t):s.Uf(t))}e0(t){const s=this.s0(t.type,!1);return s?(t.Gf=!0,s.zf(t)):Promise.resolve(!0)}async h0(t){const s=this.s0(t.type,!1);if(!s)return!0;this.Zf.delete(t.type),t.Gf=!0;const i=await s.zf(t);return s.pr(),i}async r0(t){const s=this.s0(t.type,!1);return!s||s.Xf(t)}n0(t){const s=this.s0(t.type,!1);return!s||s.qf(t)}async o0(t){const s=this.s0(t.type,!1);return!s||s.$f(t)}a0(t){const s=this.s0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Yf(t)}Hf(t){for(const s of this.Zf.values())s.Hf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Of()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Ws),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.ai.hi("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Jf=function(i){let e=null;return t.isDebug&&(e=t.ge()),new Promise((t,s)=>{u.push({Of:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.Jf.l0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.u0(i)){let t=s.c0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Ws),e=1e3,h=100,r=-1,n=(i.f0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.d0=class{constructor(t,s){this.p0=t,this.m0=1e3*s,this.g0=0,this.y0=!1}w0(){let t=i.f0();this.g0=t+this.m0,this.y0||(a.add(this),this.y0=!0),-1===n?(o=this.g0,n=self.setTimeout(s,this.m0+h)):this.g0<o&&o>t+e&&(self.clearTimeout(n),o=this.g0,n=self.setTimeout(s,this.m0+h))}u0(t){return!(t>=this.g0)||(this.p0()?(this.g0=t+this.m0,!0):this.y0=!1)}c0(){return this.g0}S0(){this.y0&&(a.delete(this),this.y0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}pr(){this.S0(),this.p0=null}}}{const ls=self.Ws;ls.b0=class us{constructor(t){this.v0=!1,this.M0=t}x0(){this.v0||(this.v0=!0,this.M0&&(this.M0(),this.M0=null))}G0(){return this.v0}pr(){this.x0()}static pr(t){return new us(()=>t.pr())}static T0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls._0;for(let t of i)s.addEventListener(t,e,h),r.xc(ls.dr(ls.b0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.dr(ls.b0,()=>s.removeEventListener(i,e,h))}},ls.I0=class extends ls.b0{C0(t){this.M0=t}},ls._0=class extends ls.b0{constructor(...s){super(),this.P0=new Set;for(let t of s)this.xc(t)}xc(...s){if(this.v0)throw new Error("already disposed");for(let t of s)this.P0.add(t)}R0(t){if(this.v0)throw new Error("already disposed");this.P0.delete(t)}E0(){if(this.v0)throw new Error("already disposed");if(this.P0){for(let t of this.P0)t.x0();this.P0.clear()}}G0(){return this.v0}x0(){if(this.v0)throw new Error("already disposed");this.v0=!0;for(let t of this.P0)t.x0();this.P0.clear(),this.P0=null}pr(){this.x0()}}}{const cs=self.Ws;cs.A0=class extends cs.ur{constructor(){super(),this.F0=0,this.ll=0,this.k0=0,this.D0=0}xc(t){this.ll=(t=+t)-this.F0,this.k0=this.D0+this.ll,this.F0=this.k0-this.D0-this.ll,this.D0=this.k0}O0(t){this.D0-=+t}ri(){return this.D0}w0(){this.F0=0,this.ll=0,this.k0=0,this.D0=0}Set(t){this.F0=0,this.ll=0,this.k0=0,this.D0=+t}L0(t){this.F0=t.F0,this.ll=t.ll,this.k0=t.k0,this.D0=t.D0}pr(){}}}{const fs=self.Ws,n={};n.B0=function(t){this.N0=t,this.right=this.N0.W0,this.left=this.N0.W0,this.parent=null,this.color=!1,this.key=null},n.j0=function(t){this.size=0,this.W0=new n.B0(this),this.W0.color=!1,this.root=this.W0,this.root.parent=this.W0,this.compare=t||this.V0},n.j0.prototype.V0=function(t,s){return t<s?-1:s<t?1:0},n.j0.prototype.clone=function(){var t=new n.j0(this.compare);return t.U0(this),t},n.j0.prototype.clear=function(){this.size=0,this.W0=new n.B0(this),this.W0.color=!1,this.root=this.W0,this.root.parent=this.W0},n.j0.prototype.H0=function(t){var s=t.right;t.right=s.left,s.left!=this.W0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.W0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.j0.prototype.z0=function(t){var s=t.left;t.left=s.right,s.right!=this.W0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.W0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.j0.prototype.J0=function(t){if(this.contains(t))this.q0(t).key=t;else{for(var s=new n.B0(this),i=(s.key=t,this.W0),e=this.root;e!=this.W0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.W0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.W0,s.right=this.W0,s.color=!0,this.X0(s),this.size++}},n.j0.prototype.X0=function(t){for(;t!=this.W0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.H0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.W0&&this.z0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.z0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.W0&&this.H0(t.parent.parent))}this.root.color=!1},n.j0.prototype.$0=function(t){var s=t.left==this.W0||t.right==this.W0?t:this.Y0(t),i=s.left!=this.W0?s.left:s.right;i.parent=s.parent,s.parent==this.W0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.K0(i),this.size--},n.j0.prototype.K0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.H0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.z0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.H0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.z0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.H0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.z0(t.parent),this.root))}t.color=!1},n.j0.prototype.remove=function(t){var s;return(t=this.q0(t))!=this.W0?(s=t.key,this.$0(t),s):null},n.j0.prototype.Z0=function(t,s){this.remove(s)},n.j0.prototype.min=function(t){for(;t.left!=this.W0;)t=t.left;return t},n.j0.prototype.max=function(t){for(;t.right!=this.W0;)t=t.right;return t},n.j0.prototype.Y0=function(t){if(t.right!=this.W0)return this.min(t.right);for(var s=t.parent;s!=this.W0&&t==s.right;)s=(t=s).parent;return s},n.j0.prototype.Q0=function(t){if(t.left!=this.W0)return this.max(t.left);for(var s=t.parent;s!=this.W0&&t==s.left;)s=(t=s).parent;return s},n.j0.prototype.td=function(t){if(0<this.size){var s=this.q0(t);if(s==this.W0)return null;if(s.right!=this.W0)return this.min(s.right).key;for(var i=s.parent;i!=this.W0&&s==i.right;)i=(s=i).parent;return i!=this.W0?i.key:null}return null},n.j0.prototype.sd=function(t){if(0<this.size){var s=this.q0(t);if(s==this.W0)return null;if(s.left!=this.W0)return this.max(s.left).key;for(var i=s.parent;i!=this.W0&&s==i.left;)i=(s=i).parent;return i!=this.W0?i.key:null}return null},n.j0.prototype.ed=function(){return this.min(this.root).key},n.j0.prototype.hd=function(){return this.max(this.root).key},n.j0.prototype.q0=function(t){for(var s=this.root;s!=this.W0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.j0.prototype.contains=function(t){return null!=this.q0(t).key},n.j0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.j0.prototype.U0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.J0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.J0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.J0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.J0(t[e])},n.j0.prototype.rd=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.Z0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.j0.prototype.nd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.j0.prototype.range=function(t,s){var i=[];return this.od(function(t){i.push(t)},t,s),i},n.j0.prototype.ad=function(t,s){if(!this.ld())for(var i=this.min(this.root);i!=this.W0;){if(t.call(s,i.key,this))return;i=this.Y0(i)}},n.j0.prototype.ud=function(t,s,i){if(!this.ld())for(var e=this.q0(s);e!=this.W0;){if(t.call(i,e.key,this))return;e=this.Y0(e)}},n.j0.prototype.fd=function(t,s,i){if(!this.ld())for(var e=this.min(this.root),h=this.q0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.Y0(e)}},n.j0.prototype.od=function(t,s,i,e){if(!this.ld())for(var h=this.q0(s),r=this.q0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.Y0(h)}},n.j0.prototype.dd=function(t,s){if(!this.ld())for(var i=this.max(this.root);i!=this.W0;){if(t.call(s,i.key,this))return;i=this.Q0(i)}},n.j0.prototype.forEach=function(t,s){if(!this.ld())for(var i=this.min(this.root);i!=this.W0;i=this.Y0(i))t.call(s,i.key,i.key,this)},n.j0.prototype.some=function(t,s){if(!this.ld())for(var i=this.min(this.root);i!=this.W0;i=this.Y0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.j0.prototype.every=function(t,s){if(this.ld())return!1;for(var i=this.min(this.root);i!=this.W0;i=this.Y0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.j0.prototype.map=function(t,s){var i=[];if(!this.ld())for(var e=this.min(this.root);e!=this.W0;e=this.Y0(e))i.push(t.call(s,e.key,e.key,this));return i},n.j0.prototype.filter=function(t,s){var i=[];if(!this.ld())for(var e=this.min(this.root);e!=this.W0;e=this.Y0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.j0.prototype.getCount=function(){return this.size},n.j0.prototype.ld=function(){return 0==this.size},n.j0.prototype.me=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.ld())return!0;for(var e=this.min(this.root);e!=this.W0;e=this.Y0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.j0.prototype.md=function(t){var s=new n.j0(this.compare);if(!this.ld())for(var i=this.min(this.root);i!=this.W0;i=this.Y0(i))t.contains.call(t,i.key,i.key,this)&&s.J0(i.key);return s},fs.j0=class extends fs.ur{constructor(t){super(),this.gd=new n.j0(t),this.yd=!1,this.wd=new Set,this.Sd=new Set}xc(t){this.yd?this.gd.contains(t)?this.Sd.delete(t):this.wd.add(t):this.gd.J0(t)}R0(t){this.yd?this.gd.contains(t)?this.Sd.add(t):this.wd.delete(t):this.gd.remove(t)}hi(t){return this.yd?!!this.wd.has(t)||!this.Sd.has(t)&&this.gd.contains(t):this.gd.contains(t)}lc(){this.gd.clear(),this.wd.clear(),this.Sd.clear()}toArray(){if(this.yd)throw new Error("cannot be used in queueing mode");return this.gd.getValues()}mc(){return this.gd.getCount()+this.wd.size-this.Sd.size}uc(){return 0===this.mc()}bd(){if(this.uc())throw new Error("empty set");if(this.yd)throw new Error("cannot be used in queueing mode");const t=this.gd,s=t.min(t.root);return s.key}vd(){if(this.uc())throw new Error("empty set");if(this.yd)throw new Error("cannot be used in queueing mode");const t=this.bd();return this.R0(t),t}Md(t){if(this.yd!==(t=!!t)&&!(this.yd=t)){for(const s of this.Sd)this.gd.remove(s);this.Sd.clear();for(const i of this.wd)this.gd.J0(i);this.wd.clear()}}xd(t){this.gd.forEach(t)}*values(){if(!this.uc()){const s=this.gd;for(let t=s.min(s.root);t!=s.W0;t=s.Y0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ws;ds.Gd=class{constructor(t=ds.hardwareConcurrency){this.Td=t,this._d=[],this.Id=0}xc(i){return new Promise((t,s)=>{this._d.push({Of:i,resolve:t,reject:s}),this.Cd()})}Pd(i){for(let t=0,s=this._d.length;t<s;++t)if(this._d[t].Of===i)return t;return-1}Rd(t,s){const i=this.Pd(t);if(-1===i)throw new Error("cannot find promise to resolve");this._d[i].resolve(s),this._d.splice(i,1)}Ed(t,s){const i=this.Pd(t);if(-1===i)throw new Error("cannot find promise to reject");this._d[i].reject(s),this._d.splice(i,1)}async Cd(){if(this._d.length&&!(this.Id>=this.Td)){this.Id++;const s=this._d.shift();try{const t=await s.Of();s.resolve(t)}catch(t){s.reject(t)}this.Id--,this.Cd()}}static async Ad(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ws;ps.Fd=class{constructor(t,s,i){this.p0=t,this.kd=s,this.Dd=i||2*s,this.Od=-1,this.Ld=-1/0,this.Bd=()=>this.Nd(),this.Wd=!1,this.jd=!1,this.Vd=null}Ud(t){this.jd=!!t}Hd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Dd:this.kd}zd(...e){if(-1===this.Od){this.Vd=e;let t=ps.f0(),s=t-this.Ld,i=this.Hd();i<=s&&this.jd?(this.Ld=t,this.Jd()):this.Od=self.setTimeout(this.Bd,Math.max(i-s,4))}}Jd(){this.Wd=!0;const t=this.Vd;this.Vd=null,t?this.p0(...t):this.p0(),this.Wd=!1}w0(){this.Wd||(this.qd(),this.Vd=null,this.Ld=ps.f0())}Nd(){this.Od=-1,this.Ld=ps.f0(),this.Jd()}qd(){-1!==this.Od&&(self.clearTimeout(this.Od),this.Od=-1)}pr(){this.qd(),this.p0=null,this.Vd=null,this.Bd=null}}}{const ms=self.Ws;ms.Xd=class{constructor(){this.$d=new Map,this.Yd=!1,this.Kd=null,this.Zd=null,this.Qd=null,this.t1=null}s1(t){this.Yd=!!t}i1(){return this.Yd}e1(t){this.Kd=t}h1(t){if(this.Kd)return this.Kd(t);throw new Error("no get base size callback set")}n1(t){this.Zd=t}o1(t,s,i,e,h,r){if(this.Zd)return this.Zd(t,s,i,e,h,r);throw new Error("no raster at size callback set")}l1(t){this.Qd=t}u1(t){if(!this.Qd)throw new Error("no release result callback set");this.Qd(t)}c1(t){this.t1=t}f1(){if(!this.t1)throw new Error("no redraw callback set");this.t1()}d1(t){let s=this.$d.get(t);return s||(s=ms.dr(ms.m1,this,t),this.$d.set(t,s)),s.g1(),s}w1(t){this.$d.delete(t.S1())}b1(){for(const t of this.$d.values())t.v1(),t.M1()}}}{const gs=self.Ws;gs.m1=class{constructor(t,s){this.G1=t,this.T1=s,this._1=0,this.I1=0,this.C1=0,this.P1=this.G1.h1(s).then(t=>{this.G1&&(this.I1=t[0],this.C1=t[1],this.G1.f1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.R1=!0,this.G1&&this.G1.f1()}),this.E1=0,this.A1=0,this.F1=0,this.D1=0,this.O1=!1,this.L1=null,this.B1=!1,this.R1=!1}pr(){if(this._1<=0)throw new Error("already released");this._1--,0===this._1&&this.N1()}v1(){this.L1&&(this.G1.u1(this.L1),this.L1=null)}N1(){this.v1(),this.G1.w1(this),this.G1=null}S1(){return this.T1}g1(){this._1++}W1(){return 0<this._1}j1(){return this.L1}M1(){this.B1=!0}async V1(e,h,r){if(0!==h&&0!==r&&!this.R1&&!this.O1){let t=gs.Hr(Math.ceil(h)),s=gs.Hr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.G1.i1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.E1&&s<=this.A1)||this.B1){this.O1=!0,this.E1=t,this.A1=s;const l=await this.G1.o1(this.T1,e,this.E1,this.A1,h,r);this.G1&&(this.v1(),this.L1=l,this.F1=h,this.D1=r,this.O1=!1,this.B1=!1,this.G1.f1())}}}U1(){return this.P1}H1(){return this.I1}z1(){return this.C1}J1(){return this.F1}q1(){return this.D1}X1(){return this.R1}}}{let s=function(t){return bs.get(t)};s;const c=self.Ws,ys=(c.Y1="\ufeff",new Set("0123456789")),ws=(c.K1=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Z1=function(t){return ws.has(t)},c.Q1=function(t){return[...t].filter(t=>!c.Z1(t)).join("")},c.tp=function(t){for(const s of t)if(!c.Z1(s))return!1;return!0},c.sp=function(t){for(const s of t)if(!c.Z1(s))return!1;return!0},c.ep=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.hp=function(t){return[...t].filter(t=>!c.ep(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.rp=function(t){return!c.Z1(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),bs=(c.np=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.op=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.K1(t))break;--i}return s.substr(0,i)},c.lp=function(t){let s=c.op(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),vs=/[&<>"']/g,Ms=(c.up=function(t){return t.replace(vs,s)},c.cp=function(t){let s=c.fp(t,"\\","\\\\");return s=c.fp(s,'"','\\"'),s=c.fp(s,"\t","\\t"),s=c.fp(s,"\r",""),c.fp(s,"\n","\\n")},c.pp=function(t){let s=c.fp(t,"&","&amp;");return s=c.fp(s,"<","&lt;"),s=c.fp(s,">","&gt;"),c.fp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.pe=function(t){return t.replace(Ms,"\\$&")},c.mp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.gp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.fp=function(t,s,i){return t.replaceAll(s,()=>i)},c.yp=function(t,s,i){return t.replace(new RegExp(c.pe(s),"gi"),()=>i)},c.wp=function(t,s){"string"==typeof s?t.textContent=s:s.Sp()?t.textContent=s.toString():(t.innerHTML=s.bp(),s instanceof c.Dh&&s.vp(t))},c.Mp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Dh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Dh?s.equals(t):t===s},c.xp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Gp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Tp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c._p=function(t,s){return s<t?1:t<s?-1:0},c.Ip=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.Cp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Pp=function*(t){for(const s of xs.segment(t))yield s.segment},c.Rp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={Ep:!(c.Ap=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Fp:!0,kp:!0,Dp:!0,Op:!0};c.Lp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Fp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.kp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Dp){const a=Math.floor(t/60);(0<a||i.length||!s.Op)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Op){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.Ep?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Bp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Np=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Wp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.qn(i,4,"0"),c.qn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.jp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Vp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Up=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.fp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ws),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Dh=class{constructor(t,s){if(this.Hp=s&&s.zp?t:f.up(t),this.Jp="",this.qp=!1,this.Xp=[],this.$p=[],s){if(this.qp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Xp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.$p=s.tips}}this.Yp=this.Hp.includes("["),this.Kp=this.qp&&this.Hp.includes("\n"),this.Zp=!this.Yp&&!this.Kp&&!this.Hp.includes("&"),this.Qp=!1,this.im=[]}toString(){return this.Hp}valueOf(){return this.Hp}Sp(){return this.Zp}hm(){return this.Yp?this.Hp.replace(i,""):this.Hp}bp(){if(this.Zp)return this.Hp;if(!this.Jp&&this.Hp){let t=this.Hp;this.Yp&&(u=0,a=this.Xp,l=this.$p,t=t.replace(i,s),a=null,l=null),this.Kp&&(t=t.replace(e,"<br>")),this.Jp=t}return this.Jp}vp(i){if(this.Xp.length)for(let t=0,s=this.Xp.length;t<s;++t){const e=this.Xp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.bp()===t.bp():t instanceof f.Dh?this.Hp===t.Hp:this.Hp===t}rm(){if(!this.Qp){let e=[],t=this.Hp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,nm:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,nm:h.slice(0)})}else h.push({tag:t,om:s})}}}s<t.length&&e.push({text:t.substring(s),nm:h.slice(0)});for(const c of e)c.text&&(c.text=this.lm(c.text));this.im=e.map(t=>t.icon?f.dr(f.um,{icon:t.icon,nm:t.nm}):f.dr(f.fm,{pm:f.Cp(t.text),nm:t.nm})),this.Qp=!0}return this.im}lm(t){return t=f.fp(t,"\\[","["),f.fp(t,"\\\\","\\")}static gm(t){return f.dr(f.Dh,t,{zp:!0}).hm()}static ym(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.Z1(t)},a=function(t){return Is.has(t)},u=function(t){return w.rp(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Ws,Is=new Set("〈《「『【〔〖〘〚〝");w.wm=class{constructor(){this.Sm=[],this.vm=null}Mm(){return this.Sm}xm(){return this.Sm.length}Gm(t){this.vm=t}Tm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o._m()){const a=s(o);o.Im(a.height),o.Cm(a.fontBoundingBoxAscent||0),o.Pm(a.fontBoundingBoxDescent||0),o.Rm(a.Em||0),o.Am()?o.Fm(a.width):o.km()&&o.Dm(this.vm)}i+=o._m(),e=Math.max(e,o.Om()),h=Math.max(h,o.Lm()),r=Math.max(r,o.Bm()),n=Math.max(n,o.Nm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,Em:n}}Wm(t,s,i,e,h,r){this.Sm.push(w.dr(w.wm.jm,{Vm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Em:r}))}wm(s,r,n,i,o){if("string"==typeof s&&(s=[w.dr(w.fm,{pm:w.Cp(s)})]),w.Hn(this.Sm),!(!s.length||1===s.length&&s[0].Am()&&s[0].uc()||n<2)){if(1===s.length){const a=s[0];if(a.Am()&&a.Um()<=100&&!a.Hm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Em:h}=r(a);if(t+=o,a.Fm(t),a.Im(s),a.Cm(i||0),a.Pm(e||0),a.Rm(h||0),t<=n)return void this.Wm([a],t,s,i,e,h)}}let t;t="word"===i?this.zm(s):"cjk"===i?this.Jm(s):this.qm(s),this.Xm(t,r,n,o)}}zm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.$m();if(h.km())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Ym())if(y(n))0<i.length&&s.push(i),s.push([w.dr(w.fm,{pm:["\n"],nm:r})]),i=[];else if(0===i.length)i.push(w.dr(w.fm,{pm:[n],nm:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.$m()===r?a.Km(n):i.push(w.dr(w.fm,{pm:[n],nm:r}))}else s.push(i),i=[w.dr(w.fm,{pm:[n],nm:r})],e=o}}return 0<i.length&&s.push(i),s}Jm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.$m();if(h.km())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Ym())if(y(n))0<i.length&&s.push(i),s.push([w.dr(w.fm,{pm:["\n"],nm:r})]),i=[];else{if(0===i.length)i.push(w.dr(w.fm,{pm:[n],nm:r}));else if(e||u(n)){const o=i.at(-1);o.$m()===r?o.Km(n):i.push(w.dr(w.fm,{pm:[n],nm:r}))}else s.push(i),i=[w.dr(w.fm,{pm:[n],nm:r})];e=a(n)}}return 0<i.length&&s.push(i),s}qm(t){const s=[];for(const i of t)if(i.Am()){const e=i.Ym();w.Kh(s,e.map(t=>[w.dr(w.fm,{pm:[t],nm:i.$m()})]))}else s.push([i]);return s}Zm(t){return t.map(t=>t.Qm())}tg(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Am()&&i[0].Am()&&i[0].$m()===t.$m()&&(t.sg(i[0].Ym()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Qm())}}Xm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Am()&&1===u[0].Um()&&y(u[0].Ym()[0])){if(0===n){const c=w.dr(w.fm,{pm:[" "],nm:u[0].$m()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Em||0}this.Wm(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.Zm(h),p=(this.tg(d,u),this.Tm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Wm(h,r,n,o,a,l),h=[],u[0].Am()&&w.sp(u[0].Ym()))r=0,n=0,o=0,a=0,l=0;else{this.tg(h,u);const g=this.Tm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Em}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Em}0<h.length&&this.Wm(h,r,n,o,a,l),this.ig(s,e)}ig(s,i){for(const e of this.Sm){const h=e.eg();if(h.length){let t=h.at(-1);if(t.Am()){const r=t.Ym(),n=r.slice(0);if(c(n),0===n.length)e.hg(-t._m()),h.pop();else if(n.length<r.length){t.rg(n);const o=s(t).width,a=t._m()-o;t.Fm(o),e.hg(-a)}0!==i&&0<h.length&&((t=h.at(-1)).hg(i),e.hg(i))}}}}lc(){w.Hn(this.Sm)}ng(){return this.Sm.reduce((t,s)=>Math.max(t,s._m()),0)}og(){return this.Sm.reduce((t,s)=>t+s.Om(),0)}}}{const Cs=self.Ws;Cs.wm.jm=class{constructor(t){this.im=t.Vm||[],this.ag=t.width||-1,this.lg=t.height||-1,this.ug=t.fontBoundingBoxAscent||-1,this.fg=t.fontBoundingBoxDescent||-1,this.dg=t.Em||-1,this.pg=0,this.mg=0}Vm(){return this.im.values()}*gg(){const s=this.im;for(let t=s.length-1;0<=t;--t)yield s[t]}eg(){return this.im}hg(t){this.ag+=t}_m(){return this.ag}Om(){return this.lg}yg(){return this.ug}Bm(){return this.fg}Nm(){return this.dg}wg(t){this.pg=t}Sg(){return this.pg}bg(t){this.mg=t}vg(){return this.mg}}}{const Ps=self.Ws;Ps.Mg=class{constructor(t){this.xg=t.nm||[],this.ag=t.width||-1,this.lg=t.height||-1,this.ug=t.fontBoundingBoxAscent||-1,this.fg=t.fontBoundingBoxDescent||-1,this.dg=t.Em||-1,this.pg=0,this.mg=0}Am(){return!1}km(){return!1}$m(){return this.xg}Gg(s){const i=this.xg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Tg(t){return!!this.Gg(t)}_g(){const t=new Map;for(const s of this.xg)t.set(s.tag,s.om);return t}hg(t){this.ag+=t}Fm(t){this.ag=t}_m(){return this.ag}Im(t){this.lg=t}Om(){return this.lg}Cm(t){this.ug=t}Lm(){return this.ug}Pm(t){this.fg=t}Bm(){return this.fg}Rm(t){this.dg=t}Nm(){return this.dg}wg(t){this.pg=t}Sg(){return this.pg}bg(t){this.mg=t}vg(){return this.mg}}}{const Rs=self.Ws;Rs.fm=class extends Rs.Mg{constructor(t){super(t),this.Ig=t.pm}Am(){return!0}sg(t){Rs.Kh(this.Ig,t),this.ag=-1,this.lg=-1,this.ug=-1,this.fg=-1,this.dg=-1}Km(t){this.Ig.push(t)}Qm(){return Rs.dr(Rs.fm,{pm:this.Ig.slice(0),nm:this.xg,width:this.ag,height:this.lg,fontBoundingBoxAscent:this.ug,fontBoundingBoxDescent:this.fg,Em:this.dg})}Ym(){return this.Ig}rg(t){this.Ig=t}Um(){return this.Ig.length}uc(){return 0===this.Ig.length}Hm(){return this.Ig.includes("\n")}}}{const Es=self.Ws;Es.um=class extends Es.Mg{constructor(t){super(t),this.Cg=t.icon}km(){return!0}Pg(){return this.Cg}Qm(){return Es.dr(Es.um,{icon:this.Cg,nm:this.xg,width:this.ag,height:this.lg,fontBoundingBoxAscent:this.ug,fontBoundingBoxDescent:this.fg,Em:this.dg})}Rg(t){if(!t)return null;let s=Number(this.Cg);return String(s)===this.Cg?(s=Math.floor(s),t.Eg(s)):t.Ag(this.Cg)}Dm(t){const s=this.Rg(t);this.ag=s?this.lg*s._m()/s.Om():0}Fg(t){const s=this.Rg(t);return s?s.Fg():null}Um(){return 1}}}{const As=self.Ws;As.kg=class{constructor(t){this.Dg=new Map,this.Og=t.Lg,this.Bg=t.Ng}pr(){for(const t of this.Dg.values())t.pr();this.Dg.clear()}Wg(t){let s=this.Dg.get(t);if(!s){const i=this.Og(t);s=As.dr(As.jg,this,{source:t,Vg:i}),this.Dg.set(t,s)}return s}Ug(t){return this.Dg.has(t)}Hg(t){const s=this.Dg.get(t);s&&s.pr(),this.Dg.delete(t)}async zg(t){return this.Bg(t)}}}{const Fs=self.Ws;Fs.jg=class{constructor(t,s){this.Jg=t,this.qg=s.source,this.Xg=[],this.$g=new Map,this.Yg=!1,this.Kg=!1,this.Zg=null;const i=s.Vg.Qg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.dr(Fs.iy,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Xg.push(h),e.tag&&this.$g.set(e.tag.toLowerCase(),h)}}pr(){for(const t of this.Xg)t.pr();Fs.Hn(this.Xg),this.$g.clear(),this.Jg=null,this.qg=null}ey(){return this.Yg}hy(){return this.Kg}ny(){return this.Zg||(this.Zg=this.uy()),this.Zg}async uy(){if(!this.Yg){this.Yg=!0,this.Kg=!0;const t=await this.Jg.zg(this.qg);if(this.Jg){const i=t.Qg;for(let t=0,s=Math.min(i.length,this.Xg.length);t<s;++t){const e=i[t].my;this.Xg[t].gy(e)}this.Kg=!1}}}Eg(t){return(t=Math.floor(t))<0||t>=this.Xg.length?null:this.Xg[t]}Ag(t){return this.$g.get(t.toLowerCase())||null}}}{const ks=self.Ws;ks.iy=class{constructor(t,s){this.yy=t,this.qg=s.source||null,this.wy=s.index,this.Sy=s.tag,this.ag=s.width,this.lg=s.height,this.by=null}pr(){this.ag=0,this.lg=0,this.yy=null}vy(){return this.qg}_m(){return this.ag}Om(){return this.lg}gy(t){this.by=t}Fg(){return this.by}}}{let e=function(t,s,i,e){const h=Ns;Gh.W(Ls,i,s),Gh.W(Bs,t,s),Gh.Ot(h,Ls,Bs),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.Dt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.My,f=n.xy,d=n.Gy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<w},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Ds=self.Ws,Os=self.xs,Gh=Os.Es,Vh=Os.As,xh=Os.Is,Ls=Gh.create(),Bs=Gh.create(),Ns=Gh.create(),Ws=Vh.create(),js=xh.create(),Vs=Gh.create(),Us=Gh.create(),Hs=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),Xs=Gh.create(),$s=Gh.create(),Ys=Vh.C(0,0,1,1);Ds.Ty={_y(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Iy(t,s,i,e,h,r,n){const o=js,a=Ws;return xh.multiply(o,h,e),null!==xh.R(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.jt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Cy(t,s,i,e,h,r,n){const o=Ls,a=Bs;if(!Ds.Ty.Iy(t,s,0,e,h,r,o))return!1;if(!Ds.Ty.Iy(t,s,1,e,h,r,a))return!1;let l=Bs,u=(Gh.W(l,a,o),Ns),c=(Gh.set(u,0,0,1),-i),f=Gh.Dt(u,l),d=0;if(0===f){const p=Gh.Dt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.Dt(o,u)+c)/f)<0)return!1;return Gh.Rt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.My=NaN,this.xy=NaN,this.Gy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.My=0<t?1:0,this.xy=0<s?1:0,this.Gy=0<i?1:0}}Ds.Ty.Py=class{constructor(){this.Ry=new Ks,this.Ey=new Ks,this.Ay=new Ks,this.Fy=new Ks,this.ky=new Ks,this.Dy=new Ks}Oy(t,s){const i=Ys;Ds.Ty.Iy(0,1,0,t,s,i,Vs),Ds.Ty.Iy(1,1,0,t,s,i,Us),Ds.Ty.Iy(0,0,0,t,s,i,Hs),Ds.Ty.Iy(1,0,0,t,s,i,zs),Ds.Ty.Iy(0,1,1,t,s,i,Js),Ds.Ty.Iy(1,1,1,t,s,i,qs),Ds.Ty.Iy(0,0,1,t,s,i,Xs),Ds.Ty.Iy(1,0,1,t,s,i,$s),e(Hs,Vs,Js,this.Ry),e(Vs,Us,qs,this.Ey),e(Us,zs,$s,this.Ay),e(zs,Hs,Xs,this.Fy),e(Xs,Js,qs,this.Dy),e(zs,Us,Vs,this.ky)}Ly(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Ry)&&n(t,s,i,e,h,r,this.Ey)&&n(t,s,i,e,h,r,this.Ay)&&n(t,s,i,e,h,r,this.Fy)&&n(t,s,i,e,h,r,this.ky)&&n(t,s,i,e,h,r,this.Dy)}By(t,s,i){return!h(t,s,i,this.ky)}}}{const Zs=self.Ws,Qs=self.xs,Gh=Qs.Es,Vh=Qs.As,xh=Qs.Is,ti=xh.create(),si=Gh.C(0,0,0),ii=Gh.C(0,0,0),ei=Gh.C(0,0,0),hi=Gh.C(0,1,0),ri=(Vh.C(0,0,0,0),new Zs.ou),ni=new Zs.Rect,oi=new Zs.ou(0,0,1,0,1,1,0,1),ai={Ny:1,Wy:1e4},li=xh.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Ty.jy=class{constructor(t){t=Object.assign({},ai,t),this.ag=0,this.lg=0,this.Vy=Zs._r(45),this.Uy=Math.tan(this.Vy/2),this.Hy=xh.create(),this.zy=xh.create(),this.Jy=!1,this.qy=t.Ny,this.Xy=t.Wy,this.$y=[],this.Yy=new Map,this.Ky=null,this.Zy=null,this.Qy=null,this.iw=null,this.ew=null,this.hw=null,this.rw=null,this.ow=null,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.fw=new Map,this.pw=null,this.mw=[],this.gw=new Map,this.yw=0,this.ww=0,this.Sw=1,this.bw=[this.Sw],this.Mw=1,this.xw=[this.Mw],this.Gw=.5,this.Tw=[this.Gw],this._w=0,this.Iw=!0,this.Cw=!1}Pw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Rw(){this.yw=0,this.ww=0,this.Ky=null,this.Zy=null,this.Qy=null,this.iw=null,this.ew=null,this.hw=null,this.rw=null,this.ow=null,this.aw=null,this.lw=null,this.uw=null,this.cw=null,this.Ew()}Aw(){this.Rw(),this.pw=null}Fw(){for(const t of this.$y)t.pr();this.Rw()}_m(){return this.ag}Om(){return this.lg}kw(t){return this.Dw()?100:t/(2*this.Ow())}Lw(t){if(this.Dw()){const s=t/(2*this.Ow());return s/this.kw(t)}return 1}Bw(t){this.qy=t}Nw(){return this.qy}Ww(t){this.Xy=t}jw(){return this.Xy}Vw(t){this.Vy=t,this.Uy=Math.tan(this.Vy/2)}Uw(){return this.Vy}Ow(){return this.Uy}Hw(){this.Jy=!1}zw(){this.Jy=!0}Dw(){return!this.Jy}Jw(){return this.Jy}qw(t,s,i=.5,e=.5){const h=this.Nw(),r=this.jw(),n=this.Uw();if(.5===i&&.5===e)this.Xw()?xh.xt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.Ow()*h,f=c*s;xh.vt(t,o*f,a*f,l*c,u*c,h,r),this.Xw()&&xh.mul(t,li,t)}}$w(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.kw(i)*h*this.Ow()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.Xw()?xh._t(t,a,l,u,c,this.Nw(),this.jw()):xh.ortho(t,a,l,u,c,this.Nw(),this.jw())}Yw(t,s,i,e,h,r=1){let n=1;this.Dw()&&(n=200*this.Ow()/h);const o=ei,a=(Gh.set(o,n,-n,1),si),l=ii;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh.It(t,a,l,e||hi),o[2]=r,xh.scale(t,t,o)}Kw(t,s,i,e,h,r,n,o){return Gh.set(si,t,s,i),Gh.set(ii,e,h,r),this.Yw(ti,si,ii,hi,n,o),ti}Zw(t){this.$y.push(t),this.Yy.set(t.uf(),t)}Qw(t){const s=this.$y.indexOf(t);-1!==s&&this.$y.splice(s,1),this.Yy.delete(t.uf())}Ew(){Zs.Hn(this.$y),this.Yy.clear()}tS(t){return this.Yy.get(t)||null}sS(){return this.Ky}iS(){this.eS(this.Ky)}hS(){return this.Zy}rS(){this.eS(this.Zy)}nS(){this.eS(this.Qy)}oS(){this.eS(this.iw)}aS(){this.eS(this.ew)}lS(){this.eS(this.hw)}uS(){this.eS(this.rw)}cS(){this.eS(this.ow)}fS(){this.eS(this.aw)}dS(){this.eS(this.lw)}pS(){this.eS(this.uw)}mS(){this.eS(this.cw)}gS(t){this.pw=t}yS(){return this.pw}wS(t,s,i,e){let h=Zs.Ty.bS.SS(t,s,i,e),r=this.fw.get(h);return r||(r=Zs.dr(Zs.Ty.bS,this,t,s,i,e),this.fw.set(h,r)),r.vS(),r}MS(t){t.xS(),0===t.GS()&&(this.pw===t&&(this.pw=null),this.fw.delete(t.TS()),t.pr())}_S(t){Zs.Hn(this.mw),this.gw.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.mw.push([h,r]),this.gw.set(e,{number:s,IS:h,CS:r}),s++}}PS(t){return this.mw[t]}RS(t){return this.PS(t)[0]}ES(t){return this.PS(t)[1]}AS(t){const s=this.gw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}FS(t){const s=this.gw.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}kS(t){this.yw=t}DS(){return this.yw}OS(t){this.ww=t,this.pw=null}LS(){return this.ww}jm(t,s,i,e){const h=Zs.Rr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.Sw,a=r*o,l=n*o,u=this.Mw;2===u?this.BS(t,s,0,i,e,0,a,l):1===u?this.NS(t,s,0,i,e,0,a,l):this.WS(t,s,0,i,e,0,a,l)}jS(t,s,i,e,h,r){const n=Zs.Rr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.Sw,u=o*l,c=a*l,f=this.Mw;2===f?this.BS(t,s,i,e,h,r,u,c):1===f?this.NS(t,s,i,e,h,r,u,c):this.WS(t,s,i,e,h,r,u,c)}BS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,w=u+o+p,S=c+n,b=f-o,v=c-n-d,M=f+o-p;this.VS(m,g,i,S,b,r,v,M,r,y,w,i,oi)}NS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,w=f-o,S=c-n,b=f+o;this.VS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}WS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,w=f-o,S=c-n,b=f+o;this.VS(d,p,i,y,w,r,S,b,r,m,g,i,oi)}US(t,s,i,e,h,r){const n=Zs.Rr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.Sw,u=o*l,c=a*l,f=this.Mw;2===f?this.HS(t,s,i,e,u,c,h,r):1===f?this.zS(t,s,i,e,u,c,h,r):this.JS(t,s,i,e,u,c,h,r)}HS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,w=u+r+p,S=c+h,b=f-r,v=c-h-d,M=f+r-p;ri.set(m,g,S,b,v,M,y,w),ni.set(n,0,o,0),this.qS(ri,ni)}zS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.qS(ri,ni)}JS(t,s,i,e,h,r,n,o){const a=this.Gw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.qS(ri,ni)}XS(t,s,i,e){const h=.5*this.Sw,r=this.Mw;2===r?this.$S(t,s,i,e,h):1===r?this.YS(t,s,i,e,h):this.KS(t,s,i,e,h)}$S(t,s,i,e,h){this.BS(t,s,0,i,s,0,0,h),this.BS(i,s,0,i,e,0,h,0),this.BS(i,e,0,t,e,0,0,-h),this.BS(t,e,0,t,s,0,-h,0)}YS(t,s,i,e,h){this.NS(t,s,0,i,s,0,0,h),this.NS(i,s,0,i,e,0,h,0),this.NS(i,e,0,t,e,0,0,-h),this.NS(t,e,0,t,s,0,-h,0)}KS(t,s,i,e,h){this.WS(t,s,0,i,s,0,0,h),this.WS(i,s,0,i,e,0,h,0),this.WS(i,e,0,t,e,0,0,-h),this.WS(t,e,0,t,s,0,-h,0)}ZS(t){this.XS(t.El(),t.Al(),t.Fl(),t.kl())}QS(t){const s=Zs.Rr(t.un(),t.cn(),t.dn(),t.pn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Sw,r=i*h,n=e*h,o=this.Mw;2===o?this.tb(t,r,n):1===o?this.sb(t,r,n):this.ib(t,r,n)}tb(t,s,i){this.BS(t.un(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.BS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.BS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.BS(t.yn(),t.wn(),0,t.un(),t.cn(),0,-i,s)}sb(t,s,i){this.NS(t.un(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.NS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.NS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.NS(t.yn(),t.wn(),0,t.un(),t.cn(),0,-i,s)}ib(t,s,i){this.WS(t.un(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.WS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.WS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.WS(t.yn(),t.wn(),0,t.un(),t.cn(),0,-i,s)}eb(t){this.Sw=t,this.bw[this.bw.length-1]=t}hb(){return this.Sw}rb(t){if(100<=this.bw.length)throw new Error("pushed too many line widths - check push/pop pairs");this.bw.push(t),this.Sw=t}nb(){if(this.bw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.bw.pop(),this.Sw=this.bw.at(-1)}ob(){this.Mw=0,this.xw[this.xw.length-1]=0}ab(){this.Mw=1,this.xw[this.xw.length-1]=0}lb(){this.Mw=2,this.xw[this.xw.length-1]=0}ub(t){if("butt"===t)this.cb();else if("square"===t)this.fb();else{if("zag"!==t)throw new Error("invalid line cap");this.pb()}}cb(){if(100<=this.xw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.xw.push(0),this.Mw=0}fb(){if(100<=this.xw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.xw.push(1),this.Mw=1}pb(){if(100<=this.xw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.xw.push(2),this.Mw=2}mb(){if(this.xw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.xw.pop(),this.Mw=this.xw.at(-1)}gb(t){this.Gw=t,this.Tw[this.Tw.length-1]=t}yb(){return this.Gw}wb(t){if(100<=this.Tw.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Tw.push(t),this.Gw=t}Sb(){if(this.Tw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Tw.pop(),this.Gw=this.Tw.at(-1)}bb(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.vb(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.vb(h,r,o,a,l,u,c,f)}}}Mb(){return 3}xb(){this.Gb(!0),this._w++}Tb(){return this._w}_b(){this._w++}Ib(t){this.Iw=!!t}Cb(){return this.Iw}Pb(t){this.Cw=!!t}Rb(){return this.Cw}Eb(){return!1}Xw(){return!1}Ab(){}Fb(){}kb(){}Db(){return this.Ab()+this.Fb()+this.kb()}Ob(){return Zs.dr(Zs.Ty.Lb,this)}}}{const ui=self.Ws;ui.Ty.Bb=class{constructor(t,s){this.vr=s.name,this.Nb=t,this.Wb=s.extendBoxHorizontal||0,this.jb=s.extendBoxVertical||0,this.Vb=!!s.crossSampling,this.Ub=!!s.mustPreDraw,this.Hb=!!s.preservesOpaqueness,this.zb=!!s.supports3dDirectRendering,this.Jb=!!s.animated,this.qb=!!s.blendsBackground,this.Xb=!!s.usesDepth,this.$b=!1,this.Yb=this.Vb||this.qb||0!==this.Wb||0!==this.jb}pr(){this.Nb=null}Kb(){return this.Nb}uf(){return this.vr}Zb(){return 0!==this.Wb||0!==this.jb}Qb(){return this.Wb}tv(){return this.jb}sv(){return this.Vb}hv(){return this.Ub}rv(){return this.Hb}nv(){return this.zb}ov(){return this.Jb}av(){return this.qb}lv(){return this.Xb}uv(){return this.$b}cv(){return this.Yb}dv(){return!1}}}{const ci=self.Ws;ci.Ty.bS=class{constructor(t,s,i,e,h){this.Nb=t,this._1=0,this.pv=null,this.gv="",this.yv=i,this.wv=ci.dr(ci.Yo),this.wv.set(e),this.Sv=h,"string"==typeof s?this.gv=s:(this.pv=s,this.gv=this.pv.uf())}pr(){if(0<this._1)throw new Error("releasing state group still in use");this.Nb=null,this.pv=null,this.gv=""}bv(){const t=this.Nb;t.eS(this.pv),t.vv(this.yv),t.Mv(this.wv),t.OS(this.Sv),t.gS(this)}TS(){return ci.Ty.bS.SS(this.gv,this.yv,this.wv,this.Sv)}vS(){++this._1}xS(){--this._1}GS(){return this._1}xv(){this.pv=null}Gv(t){if(this.pv=t.tS(this.gv),!this.pv)throw new Error("failed to restore shader program")}static SS(t,s,i,e){const h="string"==typeof t?t:t.uf();return h+","+s+","+i.ga()+","+i.ya()+","+i.wa()+","+i.Sa()+","+e}}}{let e=function(t,s,i){const e=i.un(),h=i.cn(),r=i.dn()-e,n=i.pn()-h,o=i.yn()-e,a=i.wn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ws,fi=_.dr(_.ou);_.Ty.Tv=class{constructor(t,s,i){this._v=t,this.Iv=s,this.Cv=i,this.al=NaN,this.ll=NaN,this.Sv=NaN,this.Pv=NaN,this.Rv=NaN,this.al=0,this.ll=0,this.Sv=0,this.Pv=0,this.Rv=0}Ev(t,s,i,e){this.al=t,this.ll=s,this.Pv=i,this.Rv=e}Av(){return this.al}Fv(t){this.al!==t&&(this.al=t,this._v.kv())}Dv(){return this.ll}Ov(t){this.ll!==t&&(this.ll=t,this._v.kv())}Lv(){return this.Sv}Bv(t){this.Sv!==t&&(this.Sv=Math.max(t,0),this._v.kv())}Nv(){return this.Pv}Wv(t){this.Pv=t}jv(){return this.Rv}Vv(t){this.Rv=t}Uv(t,s,i){[this.al,this.ll]=e(t.al,t.ll,s),this.Sv=t.Sv,this.Pv=_.Lt(i.El(),i.Fl(),t.Pv),this.Rv=_.Lt(i.Al(),i.kl(),t.Rv)}Hv(t,s,i){[this.al,this.ll]=e(t.al,t.ll,s),this.Sv=t.Sv,[this.Pv,this.Rv]=e(t.Pv,t.Rv,i)}zv(){return{x:this.Av(),y:this.Dv(),z:this.Lv(),u:this.Nv(),v:this.jv()}}Jv(t){this.Fv(t.x),this.Ov(t.y),t.hasOwnProperty("z")&&this.Bv(t.z),this.Wv(t.u),this.Vv(t.v)}qv(){return this._v}Xv(){return this.Iv}$v(){return this.Cv}},_.Ty.Yv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.Kv=i,this.Zv=t,this.Qv=s||null,this.tM=[],this.sM=0,this.iM=0,this.eM=1,this.hM=1,this.rM=0,this.nM=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.dr(_.Ty.Tv,this,t,s),o=t/e,a=s/h;n.Ev(o,a,o,a),r.push(n)}this.tM.push(r)}}pr(){_.Hn(this.tM)}oM(){return this.Kv}aM(){return this.Zv}lM(){return this.Qv}uM(){return this.tM}kv(){this.nM=!0}cM(){if(this.nM){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.tM)for(const n of r){const o=n.Av(),a=n.Dv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.Lv())}this.sM=t,this.iM=s,this.eM=i,this.hM=e,this.rM=h,this.nM=!1}}fM(){return this.cM(),this.sM}dM(){return this.cM(),this.iM}pM(){return this.cM(),this.eM}mM(){return this.cM(),this.hM}gM(){return this.cM(),this.rM}yM(){return 0<this.gM()}wM(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Kv||s<0||s>=this.Zv?null:this.tM[s][t]}SM(t,i,e){const h=e instanceof _.Rect;if(t.oM()!==this.oM()||t.aM()!==this.aM())throw new Error("source mesh wrong size");const r=t.tM,n=this.tM;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.Uv(l,i,e):u.Hv(l,i,e)}}}bM(r){let n=this.tM,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.Nv(),e.jv(),a.Nv(),a.jv(),l.Nv(),l.jv(),h.Nv(),h.jv()),r.VS(e.Av(),e.Dv(),e.Lv(),a.Av(),a.Dv(),a.Lv(),l.Av(),l.Dv(),l.Lv(),h.Av(),h.Dv(),h.Lv(),fi),e=a,h=l}o=i}}vM(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.tM,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.Av(),e.Dv(),e.Lv()),[m,g,y]=a(u.Av(),u.Dv(),u.Lv()),[w,S,b]=a(c.Av(),c.Dv(),c.Lv()),[v,M,x]=a(h.Av(),h.Dv(),h.Lv());o.jS(f,d,p,m,g,y),o.jS(f,d,p,w,S,b),o.jS(f,d,p,v,M,x),t===s-1&&o.jS(m,g,y,w,S,b),r===n-1&&o.jS(v,M,x,w,S,b),e=u,h=c}l=i}}MM(t){let i=.99999999,e=t.Ju(),h=[],r=this.oM()-1,n=this.aM()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Gr(Math.floor(c*r),0,l),p=_.Gr(Math.floor(f*n),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.Gr(_.Lt(c,g,w),0,1),f=_.Gr(_.Lt(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Gr(Math.floor(c*r),0,l),p=_.Gr(Math.floor(f*n),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.Mn(c,f,M,x,G,x,G,T),0!==S&&0<=(w=_.vn(c,f,g,y,M,x,G,T,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.vn(c,f,g,y,M,x,G,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.vn(c,f,g,y,G,x,G,T,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.vn(c,f,g,y,M,x,M,T,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.vn(c,f,g,y,M,T,G,T,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.dr(_.ju,h)}xM(t,s){const i=this.GM(t);this.TM(i),s.Xu(i)}GM(t){const i=[],e=t.Ju();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this._M(h,r);i.push(n,o)}return i}_M(t,s){const i=this.oM()-1,e=this.aM()-1,h=1/i,r=1/e,n=_.Gr(Math.floor(t*i),0,i-1),o=_.Gr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.wM(n,o),d=this.wM(n+1,o+1),p=_.Mn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.wM(n+(p?1:0),o+(p?0:1)),[w,S,b]=_.xn(t,s,a,l,m,g,u,c);return _.Gn(w,S,b,f.Av(),f.Dv(),f.Lv(),y.Av(),y.Dv(),y.Lv(),d.Av(),d.Dv(),d.Lv())}TM(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.Xn(i,e)}zv(){return{cols:this.oM(),rows:this.aM(),points:this.tM.map(t=>t.map(t=>t.zv()))}}Jv(t){const i=this.oM(),e=this.aM();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.wM(t,s);n.Jv(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{IM:i,CM:e,format:h,type:r}};d;const di=self.Ws,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={PM:"clamp-to-edge",RM:"clamp-to-edge",EM:"trilinear",AM:0,FM:"rgba8",kM:!0,DM:"default",premultiplyAlpha:!0,OM:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Ty.LM=class{constructor(t){this.Nb=t,this.BM=null,this.ag=0,this.lg=0,this.NM=!0,this.WM="clamp-to-edge",this.jM="clamp-to-edge",this.VM="trilinear",this.UM=0,this.HM="rgba8",this.zM=!1,this.JM="default",this._1=0}qM(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.BM)throw new Error("already created texture");if(this.WM=t.PM,this.jM=t.RM,this.VM=t.EM,this.UM=t.AM,this.HM=t.FM,this.zM=!!t.kM&&this.Nb.Cb(),this.JM=t.DM,!yi.has(this.WM)||!yi.has(this.jM))throw new Error("invalid wrap mode");if(!mi.has(this.VM))throw new Error("invalid sampling");if(!pi.has(this.HM))throw new Error("invalid pixel format");if(!gi.has(this.JM))throw new Error("invalid mipmap quality");if(this.NM=!0,s instanceof ArrayBuffer||null===s||t.OM){if(this.ag=t.width,this.lg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.ag*this.lg*4)throw new Error("ArrayBuffer wrong size")}else this.ag=s.width,this.lg=s.height;if(this.ag<=0||this.lg<=0)throw new Error("invalid texture data size");if(t.OM){const o=di.Bo(this.ag,this.lg),a=o.getContext("2d");a.drawImage(s,0,0,this.ag,this.lg),s=o}const i=di.Ur(this.ag)&&di.Ur(this.lg),e=this.Nb.XM();if(this.ag>e||this.lg>e)throw new Error("texture data exceeds maximum texture size");const h=this.Nb.$M(),r=this.Nb.YM(),n=(this.BM=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.BM),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.HM,h));if(this.Nb.KM()||i||!this.ZM())if(2<=r){let t;t=this.zM?Math.floor(Math.log2(Math.max(this.ag,this.lg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.IM,this.ag,this.lg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.ag,this.lg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.CM,this.ag,this.lg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.CM,this.ag,this.lg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.CM,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.ag,this.lg):s)instanceof ImageData){const c=di.Bo(this.ag,this.lg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Bo(di.Hr(this.ag),di.Hr(this.lg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.VM,u.drawImage(s,0,0,this.ag,this.lg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.CM,n.format,n.type,l)}null!==s&&this.QM(h),h.bindTexture(h.TEXTURE_2D,null),this.Nb.t2(),this._1=1,bi.add(this)}s2(t,s,i){if(i=Object.assign({},wi,i),this.BM)throw new Error("already created texture");if(this.WM=i.PM,this.jM=i.RM,this.VM=i.EM,this.HM=i.FM,this.zM=!!i.kM&&this.Nb.Cb(),this.JM=i.DM,!yi.has(this.WM)||!yi.has(this.jM))throw new Error("invalid wrap mode");if(!mi.has(this.VM))throw new Error("invalid sampling");if(!pi.has(this.HM))throw new Error("invalid pixel format");if(!gi.has(this.JM))throw new Error("invalid mipmap quality");this.NM=!1,this.ag=Math.floor(t),this.lg=Math.floor(s);const e=di.Ur(this.ag)&&di.Ur(this.lg),h=this.Nb.XM();if(this.ag<=0||this.lg<=0)throw new Error("invalid texture size");if(this.ag>h||this.lg>h)throw new Error("texture exceeds maximum texture size");if(!this.Nb.KM()&&this.ZM()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Nb.$M(),n=this.Nb.YM(),o=(this.BM=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.BM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.HM,r)),a=2<=n?o.IM:o.CM;r.texImage2D(r.TEXTURE_2D,0,a,this.ag,this.lg,0,o.format,o.type,null),this.QM(r),r.bindTexture(r.TEXTURE_2D,null),this.Nb.t2(),this._1=1,bi.add(this)}i2(t){if("default"===this.JM)return this.NM?t.NICEST:t.FASTEST;if("low"===this.JM)return t.FASTEST;if("high"===this.JM)return t.NICEST;throw new Error("invalid mipmap quality")}ZM(){return"clamp-to-edge"!==this.WM||"clamp-to-edge"!==this.jM}e2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}QM(t){const s=di.Ur(this.ag)&&di.Ur(this.lg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.e2(t,this.WM)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.e2(t,this.jM)),"nearest"===this.VM)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.zM=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Nb.KM())&&this.zM){t.hint(t.GENERATE_MIPMAP_HINT,this.i2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.VM&&!this.Nb.Rb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.zM=!1;const i=this.Nb.h2();i&&0<this.UM&&"nearest"!==this.VM&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.UM,this.Nb.n2()))}o2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.BM||this._1<=0)throw new Error("texture not created");if(this.NM)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Nb.YM(),r=this.Nb.$M(),n=(r.bindTexture(r.TEXTURE_2D,this.BM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.HM,r)),o=2<=h?n.IM:n.CM;try{if(this.ag===i&&this.lg===e){const a=di.Ur(this.ag)&&di.Ur(this.lg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.Nb.KM())&&this.zM&&(r.hint(r.GENERATE_MIPMAP_HINT,this.i2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.ag=i,this.lg=e;const l=di.Ur(this.ag)&&di.Ur(this.lg);if(!this.Nb.KM()&&this.ZM()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.Nb.KM())&&this.zM&&(r.hint(r.GENERATE_MIPMAP_HINT,this.i2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Nb.t2()}l2(){if(0<this._1)throw new Error("texture still has references");if(!this.BM)throw new Error("already deleted texture");bi.delete(this);const t=this.Nb.$M();t.deleteTexture(this.BM),this.BM=null}u2(){return!!this.BM}c2(){return this.BM}Kb(){return this.Nb}f2(){this._1++}d2(){if(this._1<=0)throw new Error("no more references");this._1--}m2(){return this._1}_m(){return this.ag}Om(){return this.lg}g2(){return this.NM}w2(){let t=this.ag*this.lg;switch(this.HM){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.zM&&(t+=Math.floor(t/3)),t}static xv(){bi.clear()}static S2(){return bi.values()}}}{const vi=self.Ws,Mi=self.xs,Gh=Mi.Es,xh=Mi.Is,xi=new Set(["nearest","bilinear","trilinear"]),Gi={EM:"trilinear",alpha:!0,depth:!1,b2:!0,v2:!0,M2:0},Ti=new Set;vi.Ty.G2=class{constructor(t){this.Nb=t,this.T2=null,this._2=null,this.BM=null,this.I2=null,this.ag=0,this.lg=0,this.C2=!0,this.VM="trilinear",this.P2=!0,this.R2=!1,this.E2=!0,this.A2=0,this.F2=xh.create(),this.D2=0,this.O2=0,this.L2=0}B2(t,s,i){i=Object.assign({},Gi,i);const e=this.Nb.YM();if(this.BM||this.I2)throw new Error("already created render target");if(this.VM=i.EM,this.P2=!!i.alpha,this.R2=!!i.depth,this.E2=!!i.b2,this.C2=!!i.v2,this.A2=i.M2,!xi.has(this.VM))throw new Error("invalid sampling");if(0<this.A2&&(e<2||this.E2))throw new Error("invalid use of multisampling");if(e<2&&(this.E2=!0),this.ag=t,this.lg=s,this.ag<=0||this.lg<=0)throw new Error("invalid render target size");this.N2();const h=this.Nb.$M();if(this.T2=h.createFramebuffer(),this.R2&&(this._2=h.createFramebuffer()),this.E2){this.BM=this.Nb.W2(this.ag,this.lg,{EM:this.VM,FM:this.P2?"rgba8":"rgb8",kM:!1});const n=this.BM.c2();h.bindFramebuffer(h.FRAMEBUFFER,this.T2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.R2&&(h.bindFramebuffer(h.FRAMEBUFFER,this._2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.I2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.I2);const o=this.P2?h.RGBA8:h.RGB8;if(0<this.A2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.A2>l&&(this.A2=l)}else this.A2=0}0===this.A2?h.renderbufferStorage(h.RENDERBUFFER,o,this.ag,this.lg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.A2,o,this.ag,this.lg),h.bindFramebuffer(h.FRAMEBUFFER,this.T2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.I2),this.R2&&(h.bindFramebuffer(h.FRAMEBUFFER,this._2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.I2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.Nb.j2();this.R2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.T2),this.Nb.V2()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}U2(t,s){if(this.ag!==t||this.lg!==s){this.ag=t,this.lg=s,this.N2();const i=this.Nb.$M(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.T2),this.BM?this.BM.o2(new ImageData(this.ag,this.lg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.I2),i.renderbufferStorage(i.RENDERBUFFER,this.P2?i.RGBA8:i.RGB8,this.ag,this.lg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Nb.j2());this.R2&&e&&(this.Nb.V2()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}l2(){if(!this.BM&&!this.I2)throw new Error("already deleted render target");Ti.delete(this);const t=this.Nb.$M(),s=(this.BM?(t.bindFramebuffer(t.FRAMEBUFFER,this.T2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.R2&&(t.bindFramebuffer(t.FRAMEBUFFER,this._2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Nb.H2(this.BM),this.BM=null):this.I2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.T2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.R2&&(t.bindFramebuffer(t.FRAMEBUFFER,this._2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.I2),this.I2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Nb.YM()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.T2),this.R2&&t.deleteFramebuffer(this._2),this.Nb.z2());s.J2=null,this.T2=s.q2=null}N2(){this.Nb.qw(this.F2,this.ag/this.lg),this.D2=this.Nb.Uw(),this.O2=this.Nb.Nw(),this.L2=this.Nb.jw()}X2(){return this.T2}Y2(){return this._2}Kb(){return this.Nb}K2(){return this.BM}Z2(){return this.Nb.Uw()===this.D2&&this.Nb.Nw()===this.O2&&this.Nb.jw()===this.L2||this.N2(),this.F2}Q2(){return"nearest"!==this.VM}ix(){return this.P2}hx(){return this.E2}nx(){return this.R2}_m(){return this.ag}Om(){return this.lg}ux(){return this.C2}mx(){return this.A2}gx(){const t={EM:this.VM,alpha:this.P2,b2:this.E2};return this.C2||(t.width=this.ag,t.height=this.lg),t}yx(t){return"nearest"!==(t=Object.assign({},Gi,t)).EM===this.Q2()&&!!t.alpha===this.ix()&&!!t.depth===this.nx()&&!(2<=this.Nb.YM()&&!!t.b2!==this.hx())&&("number"==typeof t.width||"number"==typeof t.height?!this.ux()&&this._m()===Math.floor(t.width)&&this.Om()===Math.floor(t.height):this.ux())}wx(){return this.BM?this.BM.c2():null}w2(){return this.BM?this.BM.w2():this.ag*this.lg*(this.P2?4:3)}static async Sx(t,s){const i=await t.bx(s,!0);return vi.jo(i)}static xv(){Ti.clear()}static vx(){return Ti.values()}static Mx(t,s){for(const i of Ti)i.ux()&&i.U2(t,s)}}}{const m=self.Ws,_i=self.xs,Gh=_i.Es,xh=_i.Is,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Ty.xx=class extends m.Ty.Bb{static async Gx(t,s){const i=t.$M(),e=s.src,h=s.Tx,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t._x());if(l?await t.Ix(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Bn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.hp(i.getProgramInfoLog(a)||"").trim();return u&&!m.tp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async Cx(t,s){const i=await m.Ty.xx.Gx(t,s);return new m.Ty.xx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.$M(),h=t.z2(),r=(t.Gb(),e.useProgram(s),this.Px=e,this.pv=s,this.Rx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.Ex=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Ax),e.vertexAttribPointer(r,t.Mb(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Fx),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.Ex&&(e.bindBuffer(e.ARRAY_BUFFER,t.kx),e.vertexAttribPointer(this.Ex,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Ex)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Dx=new m.Ty.Ox(this,"matP","mat4"),this.Lx=new m.Ty.Ox(this,"matMV","mat4"),this.Bx=new m.Ty.Ox(this,"color","vec4"),this.Nx=new m.Ty.Ox(this,"samplerFront","sampler"),this.Wx=new m.Ty.Ox(this,"pointTexStart","vec2"),this.jx=new m.Ty.Ox(this,"pointTexEnd","vec2"),this.Vx=new m.Ty.Ox(this,"zElevation","float"),this.Ux=new m.Ty.Ox(this,"tileSize","vec2"),this.Hx=new m.Ty.Ox(this,"tileSpacing","vec2"),this.zx=new m.Ty.Ox(this,"color2_","vec4"),this.Jx=new m.Ty.Ox(this,"outlineThickness","float"),this.qx=new m.Ty.Ox(this,"samplerBack","sampler"),this.Xx=new m.Ty.Ox(this,"samplerDepth","sampler"),this.$x=new m.Ty.Ox(this,"destStart","vec2"),this.Yx=new m.Ty.Ox(this,"destEnd","vec2"),this.Kx=new m.Ty.Ox(this,"srcStart","vec2"),this.Zx=new m.Ty.Ox(this,"srcEnd","vec2"),this.Qx=new m.Ty.Ox(this,"srcOriginStart","vec2"),this.tG=new m.Ty.Ox(this,"srcOriginEnd","vec2"),this.sG=new m.Ty.Ox(this,"pixelSize","vec2"),this.iG=new m.Ty.Ox(this,"seconds","float"),this.eG=new m.Ty.Ox(this,"devicePixelRatio","float"),this.hG=new m.Ty.Ox(this,"layerScale","float"),this.rG=new m.Ty.Ox(this,"layerAngle","float"),this.nG=new m.Ty.Ox(this,"layoutStart","vec2"),this.oG=new m.Ty.Ox(this,"layoutEnd","vec2"),this.aG=new m.Ty.Ox(this,"zNear","float"),this.lG=new m.Ty.Ox(this,"zFar","float"),this.uG=!!(this.sG.cG()||this.iG.cG()||this.qx.cG()||this.$x.cG()||this.Yx.cG()||this.Kx.cG()||this.Zx.cG()||this.Qx.cG()||this.tG.cG()||this.eG.cG()||this.hG.cG()||this.rG.cG()||this.nG.cG()||this.oG.cG()),i.parameters||[]);this.fG=[],this.$b=this.sG.cG()||this.Kx.cG()||this.Zx.cG()||this.Qx.cG()||this.tG.cG(),this.dG=!1,this.pG=!1,this.Bx.mG(1,1,1,1),this.zx.mG(1,1,1,1),this.Nx.gG(0),this.qx.gG(1),this.Xx.gG(2),this.Wx.yG(0,0),this.jx.yG(1,1),this.Vx.wG(0),this.Ux.yG(0,0),this.Hx.yG(0,0),this.$x.yG(0,0),this.Yx.yG(1,1),this.Kx.yG(0,0),this.Zx.yG(0,0),this.Qx.yG(0,0),this.tG.yG(0,0),this.sG.yG(0,0),this.eG.wG(1),this.aG.wG(t.Nw()),this.lG.wG(t.jw()),this.hG.wG(1),this.rG.wG(0),this.iG.wG(0),this.nG.yG(0,0),this.oG.yG(0,0),this.Jx.wG(1);for(const l of o){const u=l[0],c=l[2],f=new m.Ty.Ox(this,u,c);"color"===c?f.SG(0,0,0):f.wG(0),this.fG.push(f)}this.Rx?this.bG(h.vG):(this.MG(h.vG,!0),this.xG(h.GG,!0));const a=h.TG;e.useProgram(a?a.pv:null)}pr(){this.Px.deleteProgram(this.pv),this.pv=null,this.Nb.Qw(this),this.Px=null,super.pr()}_G(){return this.Px}IG(){return this.pv}CG(){return this.fG.length}PG(t){return t<0||t>=this.fG.length?null:this.fG[t].EG()}AG(i){for(let t=0,s=i.length;t<s;++t)if(!this.fG[t].FG(i[t]))return!1;return!0}kG(i){for(let t=0,s=i.length;t<s;++t)this.fG[t].DG(i[t])}OG(t,s,i,e,h,r,n,o,a,l){return!this.qx.cG()&&!(this.sG.cG()&&!this.sG.LG(h,r)||this.$x.cG()&&!this.$x.LG(t.El(),t.Al())||this.Yx.cG()&&!this.Yx.LG(t.Fl(),t.kl())||this.eG.cG()&&!this.eG.BG(n)||this.hG.cG()&&!this.hG.BG(o)||this.rG.cG()&&!this.rG.BG(a)||this.Kx.cG()&&!this.Kx.LG(s.El(),s.Al())||this.Zx.cG()&&!this.Zx.LG(s.Fl(),s.kl())||this.Qx.cG()&&!this.Qx.LG(i.El(),i.Al())||this.tG.cG()&&!this.tG.LG(i.Fl(),i.kl())||this.nG.cG()&&!this.nG.LG(e.El(),e.Al())||this.oG.cG()&&!this.oG.LG(e.Al(),e.kl())||this.iG.cG()&&!this.iG.BG(l))}NG(t,s,i,e,h,r,n,o,a,l){this.qx.cG()||(this.sG.cG()&&this.sG.WG(h,r),this.$x.cG()&&this.$x.WG(t.El(),t.Al()),this.Yx.cG()&&this.Yx.WG(t.Fl(),t.kl()),this.eG.cG()&&this.eG.jG(n),this.hG.cG()&&this.hG.jG(o),this.rG.cG()&&this.rG.jG(a),this.Kx.cG()&&this.Kx.WG(s.El(),s.Al()),this.Zx.cG()&&this.Zx.WG(s.Fl(),s.kl()),this.Qx.cG()&&this.Qx.WG(i.El(),i.Al()),this.tG.cG()&&this.tG.WG(i.Fl(),i.kl()),this.nG.cG()&&this.nG.WG(e.El(),e.Al()),this.oG.cG()&&this.oG.WG(e.Al(),e.kl()),this.iG.cG()&&this.iG.jG(l))}MG(t,s){this.dG&&!s||this.Rx||(this.Dx.cG()&&this.Dx.VG(t),this.dG=!0)}UG(){this.dG=!1}xG(t,s){this.pG&&!s||this.Rx||(this.Lx.cG()&&this.Lx.VG(t),this.pG=!0)}HG(){this.pG=!1}bG(t){if(!this.Rx)throw new Error("not device transform shader");this.Dx.VG(t);const s=this.Nb,i=s._m()/2,e=s.Om()/2,h=s.Kw(i,e,s.kw(s.Om()),i,e,0,s.Om());this.Lx.VG(h)}zG(t){this.Bx.cG()&&this.Bx.JG(t[0],t[1],t[2],t[3])}static qG(){return Ii}static XG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static $G(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static YG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static KG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static ZG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static QG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static tT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static sT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static iT(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static eT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static hT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static rT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static nT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static oT(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static aT(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static lT(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static uT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static cT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static fT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static dT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static pT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static mT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Ws,Pi=self.xs,xh=Pi.Is,Ri=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Ty.Ox=class{constructor(t,s,i){if(!Ri.has(i))throw new Error("invalid uniform type");this.Qv=t,this.Px=this.Qv._G(),this.vr=s,this._f=i,this.gT="color"===this._f,this.yT=this.Px.getUniformLocation(this.Qv.IG(),s),this.wT=!!this.yT;const e=Ri.get(i);this.ST=new Float32Array(e),this.bT=new Float32Array(e)}pr(){this.Qv=null,this.Px=null,this.yT=null}cG(){return this.wT}EG(){return this._f}vT(){return this.gT}wG(t){this.cG()&&(this.ST[0]=t,this.bT.set(this.ST),this.Px.uniform1f(this.yT,t))}gG(t){this.cG()&&(this.ST[0]=t,this.bT.set(this.ST),this.Px.uniform1i(this.yT,t))}yG(t,s){this.cG()&&(this.ST[0]=t,this.ST[1]=s,this.bT.set(this.ST),this.Px.uniform2f(this.yT,t,s))}SG(t,s,i){this.cG()&&(this.ST[0]=t,this.ST[1]=s,this.ST[2]=i,this.bT.set(this.ST),this.Px.uniform3f(this.yT,t,s,i))}mG(t,s,i,e){this.cG()&&(this.ST[0]=t,this.ST[1]=s,this.ST[2]=i,this.ST[3]=e,this.bT.set(this.ST),this.Px.uniform4f(this.yT,t,s,i,e))}MT(t){t=Math.fround(t);const s=this.ST;s[0]!==t&&(s[0]=t,this.Px.uniform1f(this.yT,t))}xT(t){const s=this.ST;s[0]!==t&&this.Px.uniform1i(this.yT,s[0]=t)}GT(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.ST;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Px.uniform2f(this.yT,t,s))}TT(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.ST;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Px.uniform3f(this.yT,t,s,i))}JG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.ST;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Px.uniform4f(this.yT,t,s,i,e))}VG(t){const s=this.ST;xh.j(s,t)||(Ci.Vn(s,t,0),this.Px.uniformMatrix4fv(this.yT,!1,t))}FG(t){const s=this.bT;return this.vT()?s[0]===Math.fround(t.ga())&&s[1]===Math.fround(t.ya())&&s[2]===Math.fround(t.wa()):s[0]===Math.fround(t)}DG(t){const s=this.bT;this.vT()?(s[0]=t.ga(),s[1]=t.ya(),s[2]=t.wa()):s[0]=t}BG(t){return this.bT[0]===Math.fround(t)}LG(t,s){const i=this.bT;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}jG(t){this.bT[0]=t}WG(t,s){const i=this.bT;i[0]=t,i[1]=s}}}{const Ei=self.Ws,Ai=self.xs,Vh=Ai.As,xh=Ai.Is;Ei.Ty._T=class{constructor(t){this.renderer=t,this.GG=xh.create(),this.vG=xh.create(),this.J2=null,this.q2=null,this.IT=!1,this.CT=Vh.C(1,1,1,1),this.TG=null,this.PT=new Ei.Rect,this.clearColor=Ei.dr(Ei.Yo,0,0,0,0)}},Ei.Ty.RT=class{constructor(t){const s=new ArrayBuffer(96);this._f=0,this.ET=t,this.Px=t.renderer.$M(),this.AT=0,this.FT=0,this.kT=null,this.DT=new Float32Array(s,0,16),this.OT=new Float32Array(s,64,4),this.LT=new Float32Array(s,80,4),this.BT=[]}NT(t,s){this._f=1,this.AT=t,this.FT=s}WT(){const t=this.Px;t.drawElements(t.TRIANGLES,this.FT,t.UNSIGNED_SHORT,this.AT)}jT(t){this._f=2,this.kT=t}VT(){const t=this.Px,s=this.kT;t.bindTexture(t.TEXTURE_2D,s?s.c2():null)}UT(t){this._f=3,t.Ma(this.OT,0)}HT(){const t=this.OT,s=this.ET;Vh.I(s.CT,t),s.TG.zG(t)}zT(t){this._f=21,t.Ma(this.OT,0)}JT(){const t=this.OT,s=this.ET.TG;s.zx.cG()&&s.zx.JG(t[0],t[1],t[2],t[3])}qT(t,s){this._f=4,this.AT=t,this.FT=s}XT(){this.Px.blendFunc(this.AT,this.FT)}$T(t,s,i,e){this._f=5;const h=this.OT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}YT(){const t=this.OT;this.Px.viewport(t[0],t[1],t[2],t[3])}KT(t){this._f=6,xh.I(this.DT,t)}ZT(){const t=this.ET,i=t.renderer.$y,e=t.TG,h=this.DT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.MG(h,!0):r.UG()}xh.I(t.vG,h)}QT(t){this._f=7,xh.I(this.DT,t)}t_(){const t=this.ET,i=t.renderer.$y,e=t.TG,h=this.DT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.xG(h,!0):r.HG()}xh.I(t.GG,h)}s_(t){this._f=8,this.kT=t}i_(){const t=this.Px,s=this.kT,i=this.ET;s?(i.J2=s.X2(),i.q2=s.Y2(),i.IT&&i.q2?t.bindFramebuffer(t.FRAMEBUFFER,i.q2):t.bindFramebuffer(t.FRAMEBUFFER,i.J2)):(i.J2=null,i.q2=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}e_(t){this._f=9,t.Ma(this.DT,0)}h_(t,s,i,e){this._f=9;const h=this.DT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}r_(){const t=this.Px,s=this.DT,i=this.ET,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e._a(h,r,n,o)||(t.clearColor(h,r,n,o),e.ea(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}n_(t){this._f=15,t.Ma(this.DT,0)}o_(){const t=this.DT;this.ET.PT.set(t[0],t[1],t[2],t[3])}a_(t,s){this._f=10,this.AT=t,this.FT=1,this.DT[0]=s}l_(){const t=this.Px,s=this.ET,i=s.renderer,e=i.Zy,h=(t.useProgram(e.pv),e.MG(s.vG,!1),e.xG(s.GG,!1),s.PT),r=(e.Wx.cG()&&e.Wx.GT(h.El(),h.Al()),e.jx.cG()&&e.jx.GT(h.Fl(),h.kl()),this.DT[0]);if(e.Vx.cG()&&e.Vx.MT(r),e.Bx.cG()){const n=s.CT;e.Bx.JG(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.AT/4,this.FT),t.useProgram(s.TG.pv)}u_(t){this._f=11,this.kT=t}c_(){const t=this.Px,s=this.ET,i=this.kT;if(s.TG=i,t.useProgram(i.pv),i.MG(s.vG,!1),i.xG(s.GG,!1),i.Bx.cG()){const e=s.CT;i.Bx.JG(e[0],e[1],e[2],e[3])}}f_(){this._f=12}d_(){const t=this.ET.TG,s=this.Px,i=this.DT,e=this.OT,h=this.LT;if(t.qx.cG()){const r=this.ET.renderer,n=this.kT;r.p_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.c2():null),r.p_=n,s.activeTexture(s.TEXTURE0))}t.sG.cG()&&t.sG.GT(i[0],i[1]),t.$x.cG()&&t.$x.GT(i[2],i[3]),t.Yx.cG()&&t.Yx.GT(i[4],i[5]),t.eG.cG()&&t.eG.MT(this.FT),t.hG.cG()&&t.hG.MT(i[6]),t.rG.cG()&&t.rG.MT(i[7]),t.Kx.cG()&&t.Kx.GT(i[12],i[13]),t.Zx.cG()&&t.Zx.GT(i[14],i[15]),t.Qx.cG()&&t.Qx.GT(h[0],h[1]),t.tG.cG()&&t.tG.GT(h[2],h[3]),t.nG.cG()&&t.nG.GT(e[0],e[1]),t.oG.cG()&&t.oG.GT(e[2],e[3]),t.iG.cG()&&t.iG.MT(this.AT)}m_(){this._f=13}g_(){const t=this.ET.TG,i=t.fG,e=this.BT;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.vT()?h.TT(r.ga(),r.ya(),r.wa()):h.MT(r)}}y_(t){this._f=14,this.kT=t}w_(){const t=this.Px,s=this.kT,i=this.ET.J2;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}S_(t,s,i){this._f=17;const e=this.DT,h=this.ET.renderer,r=(e[0]=t._m(),e[1]=t.Om(),e[2]=(s||h)._m(),e[3]=(s||h).Om(),e[4]=t.Q2()?1:0,e[5]="stretch"===i,this.BT);Ei.Hn(r),r.push(t.X2()),r.push(s?s.X2():null)}b_(){const t=this.DT,s=this.BT,i=this.Px,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}v_(t){this._f=18,this.kT=t}M_(){this.kT.x_(),this.kT=null}G_(t){this._f=19,this.kT=t}T_(){this.kT.__(),this.kT=null}I_(t,s,i){this._f=20;const e=this.DT;e[0]=t,e[1]=s,e[2]=i}C_(){const t=this.ET.TG,s=this.DT;t.sG.cG()&&t.sG.GT(s[0],s[1]),t.Jx.cG()&&t.Jx.MT(s[2])}P_(t,s,i,e,h,r,n){this._f=16;const o=this.DT;t.Ma(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}R_(){const t=this.ET.TG,s=this.DT;t.Kx.cG()&&t.Kx.GT(s[0],s[1]),t.sG.cG()&&t.sG.GT(s[4],s[5]),t.Ux.cG()&&t.Ux.GT(s[6],s[7]),t.Hx.cG()&&t.Hx.GT(s[8],s[9])}E_(t,s,i,e,h,r,n){this._f=29;const o=this.DT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}A_(){const t=this.ET.TG,s=this.DT;t.sG.cG()&&t.sG.GT(s[0],s[1]),t.Ux.cG()&&t.Ux.GT(s[2],s[3]),t.Jx.cG()&&t.Jx.MT(s[4]),t.Hx.cG()&&t.Hx.GT(s[5],s[6])}F_(t){this._f=22,this.AT=t?1:0}k_(){const t=this.Px,s=0!==this.AT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}D_(t){this._f=23,this.AT=t?1:0}O_(){const t=this.Px;0===this.AT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}L_(t){this._f=24,this.AT=t?1:0}B_(){const t=this.Px,s=this.ET,i=s.renderer,e=0!==this.AT;s.IT=e,t.activeTexture(t.TEXTURE2),e?(s.q2&&t.bindFramebuffer(t.FRAMEBUFFER,s.q2),t.bindTexture(t.TEXTURE_2D,i.j2())):(t.bindTexture(t.TEXTURE_2D,null),s.q2&&t.bindFramebuffer(t.FRAMEBUFFER,s.J2)),t.activeTexture(t.TEXTURE0)}N_(){this._f=25}W_(){const t=this.Px;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}j_(){this._f=26}V_(){const t=this.Px;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}U_(){this._f=27}H_(){const t=this.Px;t.disable(t.STENCIL_TEST)}z_(t,s,i,e,h){this._f=28,this.AT=t?1:0;const r=this.DT;r[0]=s,r[1]=i,r[2]=e,r[3]=h}J_(){const t=this.Px,s=this.DT;1===this.AT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}q_(){switch(this._f){case 1:return void this.WT();case 2:return void this.VT();case 3:return void this.HT();case 4:return void this.XT();case 5:return void this.YT();case 6:return void this.ZT();case 7:return void this.t_();case 8:return void this.i_();case 9:return void this.r_();case 10:return void this.l_();case 11:return void this.c_();case 12:return void this.d_();case 13:return void this.g_();case 14:return void this.w_();case 15:return void this.o_();case 16:return void this.R_();case 17:return void this.b_();case 18:return void this.M_();case 19:return void this.T_();case 20:return void this.C_();case 21:return void this.JT();case 22:return void this.k_();case 23:return void this.O_();case 24:return void this.B_();case 25:return void this.W_();case 26:return void this.V_();case 27:return void this.H_();case 28:return void this.J_();case 29:return void this.A_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Ws,ki=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Di={timeout:60},Oi=new Fi.Yo(0,0,0,1),Li=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Ni=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.uf();for(const i of ji)(i.X_()||Fi.Mh(i.Y_(),s))&&i.K_()});let s=!1,i=!1;Fi.Ty.Lb=class{constructor(t,s){s=Object.assign({},Di,s),this.Nb=t,this.Z_="Arial",this.Q_=16,this.tI=1,this.sI=0,this.iI=!1,this.eI=!1,this.hI="black",this.rI=!1,this.vm=null,this.nI=!0,this.oI=null,this.aI=new Set,this.lI="left",this.uI="top",this.Sf="",this.cI=null,this.fI=Fi.dr(Fi.wm),this.dI="word",this.pI="ltr",this.mI=!1,this.gI=!1,this.yI=!1,this.wI=-1,this.SI=0,this.bI=0,this.vI=0,this.ag=0,this.lg=0,this.MI=1,this.xI=null,this.GI=null,this.TI=null,this._I=null,this.II=-1,this.CI=-1,this.RI="",this.EI="",this.AI="",this.FI=1,this.kI=1,this.DI=t=>this.OI(t),this.BM=null,this.LI=new Fi.Rect,this.BI=1,this.NI=new Fi.d0(()=>{this.WI(),this.jI(8,8)},s.timeout),this.VI=null,this.UI=!1,ji.add(this)}pr(){this.oI=null,this.aI.clear(),this.vm=null,this.cI=null,this.xI=null,this.GI=null,this.TI=null,this._I=null,this.DI=null,this.NI.pr(),this.VI=null,this.WI(),this.fI.lc(),this.fI=null,this.Nb=null,this.UI=!0,ji.delete(this)}HI(){this.yI=!0}zI(){this.HI(),this.gI=!0}K_(){this.zI(),this.mI=!0}JI(t){if(this.rI!==(t=!!t)){this.rI=t;const s=this.rI?"alphabetic":"top";this.GI&&(this.GI.textBaseline=s),this.TI&&(this.TI.textBaseline=s),this.K_()}}X_(){return this.rI}Gm(t){this.vm!==t&&(this.vm=t,this.fI.Gm(t),this.vm&&this.vm.hy()&&this.vm.ny().then(()=>this.HI()),this.K_())}qI(t){this.nI!==(t=!!t)&&(this.nI=t,this.HI())}XI(t){this.Z_!==(t=t||"serif")&&(this.Z_=t,this.K_())}Y_(){return this.Z_}$I(t){this.Q_!==(t=t<.1?.1:t)&&(this.Q_=t,this.K_())}YI(){return this.Q_}KI(t){this.tI!==t&&(this.tI=t,this.K_())}ZI(t){this.sI!==t&&(this.sI=t,this.zI())}QI(){return this.sI}tC(t){this.iI!==(t=!!t)&&(this.iI=t,this.K_())}sC(){return this.iI}iC(t){this.eI!==(t=!!t)&&(this.eI=t,this.K_())}eC(){return this.eI}hC(t){t=Math.floor(t),this.wI!==t&&(this.wI=t,this.HI())}rC(){return this.wI}nC(t,s){let i=[];(this.iI||s.Tg("b"))&&i.push("bold"),(this.eI||s.Tg("i"))&&i.push("italic");const e=s.Gg("size"),h=(e?parseFloat(e.om):this.Q_)*this.tI;i.push(t?h+"pt":h*this.oC()+"pt");let r=this.Z_,n=s.Gg("font");return n&&n.om&&(r=n.om,this.oI)&&!this.aI.has(r)&&(this.oI(r),this.aI.add(r)),r&&(ki.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Mv(t){t instanceof Fi.Yo&&(t=t.Fa()),this.hI!==t&&(this.hI=t,this.HI())}aC(t,s,i){Oi.ra(t,s,i),this.Mv(Oi)}lC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.lI!==t&&(this.lI=t,this.zI())}uC(){return this.lI}cC(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.uI!==t&&(this.uI=t,this.zI())}fC(){return this.uI}dC(t){if(!Ni.has(t))throw new Error("invalid word wrap mode");this.dI!==t&&(this.dI=t,this.K_())}pC(){return this.dI}mC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.pI!==t&&(this.pI=t,this.GI&&(this.GI.direction=this.pI),this.TI&&(this.TI.direction=this.pI),this.K_())}gC(){return this.pI}Mf(t){this.Sf!==t&&(this.Sf=t,this.K_())}yC(){return this.Sf}oC(){return this.BI*this.MI*self.devicePixelRatio}wC(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.bI===r&&this.vI===n&&this.MI===o)){let t=this.bI,s=(this.bI=r,this.vI=n,this.MI=o,self.devicePixelRatio),i=(this.ag=this.bI*this.MI*s,this.lg=this.vI*this.MI*s,Math.max(this.ag,this.lg)),e=Math.min(this.Nb.XM(),4096),h=1;e<i&&(h=e/i,this.ag=Math.min(this.ag*h,e),this.lg=Math.min(this.lg*h,e)),this.BI=h,this.bI!==t?this.K_():this.zI()}}_m(){return this.ag}Om(){return this.lg}SC(){return this.MI}bC(){return this.vC(),this.fI.ng()}MC(){return this.vC(),this.fI.og()+this.fI.xm()*(this.sI+4)-this.sI}xC(){this.vC();let t=0;for(const s of this.fI.Mm())for(const i of s.Vm())t+=i.Um();return t}K2(){return this.NI.w0(),this.GC(),this.BM}TC(t,s){this.vC();const i=this.oC(),e=this.fI.Mm();for(const h of e){const r=h.Bm()*i;if(s>=h.vg()-h.Om()*i+r&&s<h.vg()+r)for(const n of h.Vm())if(t>=n.Sg()&&t<n.Sg()+n._m()*i)return n}return null}*_C(t){this.vC();const s=this.fI.Mm();for(const i of s)for(const e of i.Vm()){const h=e.Gg("tag");h&&Fi.Mh(h.om,t)&&(yield e)}}IC(t,s){for(const i of this._C(t)){if(0===s)return i;--s}return null}CC(t){let s=0;for(const i of this._C(t))++s;return s}GC(){this.BM&&!this.yI&&!this.gI&&!this.mI||this.UI||this.ag<=0||this.lg<=0||(this.yI=!1,this.PC())}PC(){this.UI||(this.vC(),this.jI(Math.max(Fi.Hr(Math.ceil(this.ag)),128),Math.max(Fi.Hr(Math.ceil(this.lg)),64)),this.RC(),this.EC(),this.NI.w0())}jI(t,s){this.xI||(this.xI=Fi.Bo(16,16));let i=!1;this.II===t&&this.CI===s||(this.II=t,this.CI=s,this.xI.width=t,this.xI.height=s,i=!0),this.GI||(this.GI=this.xI.getContext("2d"),i=!0),i?(this.GI.textBaseline=this.rI?"alphabetic":"top",this.GI.direction=this.pI,this.GI.font=this.RI,this.GI.fillStyle=this.AI,this.GI.strokeStyle=this.AI,this.GI.globalAlpha=this.FI,this.GI.lineWidth=this.kI):this.GI.clearRect(0,0,t,s)}AC(){this.TI||(this.TI=Fi.Bo(16,16).getContext("2d"),this._I=Fi.Bo(16,16).getContext("2d"),this.TI.textBaseline=this.rI?"alphabetic":"top",this._I.textBaseline="top",this.TI.direction=this.pI,this._I.direction=this.pI)}FC(t){this.EI!==t&&(this.EI=t,this.TI.font=t,this._I.font=t)}kC(){if(!s){s=!0,this.AC();const t=this.TI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}vC(){this.DC(),this.OC()}DC(){this.mI&&(this.AC(),!this.rI||this.cI&&this.cI.toString()===this.Sf||(this.cI=new Fi.Dh(this.Sf,{zp:!0})),this.fI.wm(this.rI?this.cI.rm():this.Sf,this.DI,this.bI,this.dI,0),this.mI=!1)}OC(){this.gI&&(this.LC(),this.gI=!1)}OI(t){let s=t.Am()?t.Ym().join(""):" ",i=(this.FC(this.nC(!0,t)),t.Gg("size")),e=(i?parseFloat(i.om):this.Q_)*this.tI,h=this.TI.measureText(s),r=0;if(this.rI&&this.kC()){const n=this._I.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Em:r}}BC(t){this.RI!==t&&(this.RI=t,this.GI.font=t)}NC(t){this.AI!==t&&(this.AI=t,this.GI.fillStyle=t,this.GI.strokeStyle=t)}WC(t){this.FI!==t&&(this.FI=t,this.GI.globalAlpha=t)}jC(t){this.kI!==t&&(this.kI=t,this.GI.lineWidth=t)}LC(){let e=this.oC(),h=(4+this.sI)*e,r=0,n=this.fI.Mm();if(0!==n.length){for(const s of n){s.wg(NaN),s.bg(NaN);for(const o of s.Vm())o.wg(NaN),o.bg(NaN)}let t=this.rI&&this.kC(),i=n[0].Om()*e;if("center"===this.uI){const a=n.reduce((t,s)=>t+s.Om()*e+h,0)-h;r=Math.max(this.lg/2-a/2,0),t&&(i=n[0].Nm()*e)}else if("bottom"===this.uI){const l=n.reduce((t,s)=>t+s.Om()*e+h,0)-this.sI*e,u=t?n.at(-1).Bm()*e:0;r=this.lg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.Om()*e,d=r;if(this.rI){if(r+=0===t?i:f,0<t&&r>this.lg-4*e)break}else if(0<t&&r>=this.lg-f)break;0<=d&&this.VC(c,r,e),this.rI||(r+=f),r+=h}}}VC(t,s,i){let e=0;"center"===this.lI?e=Math.floor((this.ag-t._m()*i)/2):"right"===this.lI&&(e=this.ag-t._m()*i),t.wg(e),t.bg(s);for(const h of"ltr"===this.pI?t.Vm():t.gg())this.UC(h,e,s,i),e+=h._m()*i}UC(t,s,i,e){const h=t.Gg("offsetx"),r=(s+=h?o(h.om,t.Om())*e:0,t.Gg("offsety"));if(i+=r?o(r.om,t.Om())*e:0,t.km()){const n=t.Gg("iconoffsety");i+=n?o(n.om,t.Om())*e:.2*t.Om()*e}t.wg(s),t.bg(i)}RC(){this.GI.imageSmoothingEnabled=this.nI,this.GI.imageSmoothingQuality="high",this.SI=0;const t=this.oC(),s=this.fI.Mm();for(const i of s)this.HC(i,t)}HC(t,s){const i=t.Sg(),e=t.vg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.pI?t.Vm():t.gg())this.zC(h,s,t.Om())}zC(n,o,a){const l=this.GI,u=n.Sg(),c=n.vg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n._m()*o,i=n.Om()*o,e=n.Om()/16,h=(4+this.sI)*o,r=n.Am()?n.Ym():null;if(-1!==this.wI){if(this.SI>=this.wI)return;n.Am()&&this.SI+r.length>this.wI&&(r=r.slice(0,this.wI-this.SI),s=this.OI(n).width*o),this.SI+=n.Um()}const f=n.Gg("background"),d=n.Tg("u"),p=n.Tg("s");if((!n.Am()||!Fi.sp(r)||f||d||p)&&!n.Tg("hide")){const m=n.Gg("color"),g=n.Gg("opacity"),y=(this.WC(g?parseFloat(g.om)/100:1),f&&(this.NC(f.om),l.fillRect(u,c-i,s,i+h)),n.Gg("linethickness")),w=y?parseFloat(y.om):1,S=n.Tg("stroke");if(S&&this.jC(.5*e*w*this.oC()),n.Am()){const b=r.join("");if(this.BC(this.nC(!1,n)),!S){this.jC(.5*e*w*this.oC());const v=n.Gg("outlineback");v&&(this.NC(v.om),this.JC(!0,b,u,c,s))}if(this.NC(m?m.om:this.hI),this.JC(S,b,u,c,s),!S){this.jC(.5*e*w*this.oC());const M=n.Gg("outline");M&&(this.NC(M.om),this.JC(!0,b,u,c,s))}}else if(n.km()&&0<n._m()){const x=n.Fg(this.vm);x&&l.drawImage(x,u,c-i,s,i)}if(this.NC(m?m.om:this.hI),d&&I(l,S,u,c+o*t,s,o*t*w),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*w/2,s,T*w)}}}}JC(t,s,i,e,h){"rtl"===this.pI&&(i+=h),t?"Gecko"===Fi.fi.Si?this.GI.strokeText(s,i,e,h):this.GI.strokeText(s,i,e):"Gecko"===Fi.fi.Si?this.GI.fillText(s,i,e,h):this.GI.fillText(s,i,e)}EC(){this.Nb.qC()||(this.BM||(this.BM=this.Nb.W2(this.xI.width,this.xI.height,{kM:!0,DM:"high"})),this.Nb.XC(this.xI,this.BM),this.LI.set(0,0,this.ag/this.BM._m(),this.lg/this.BM.Om()),this.VI&&this.VI())}$C(){return this.LI}WI(){this.BM&&(this.Nb.qC()||this.Nb.H2(this.BM),this.BM=null)}static xv(){for(const t of ji)t.WI()}static YC(){return ji.values()}}}{const Vi=self.Ws;class Ui{constructor(t){this.Px=t.$M(),this.KC=t.YM(),this.ZC=t.QC(),this.tP=null,this.y0=!1,this.sP=!1,this.iP=0,1===this.KC?this.tP=this.ZC.createQueryEXT():this.tP=this.Px.createQuery()}pr(){this.eP(),this.Px=null,this.ZC=null,this.sP=!1}eP(){this.tP&&(1===this.KC?this.ZC.deleteQueryEXT(this.tP):this.Px.deleteQuery(this.tP),this.tP=null)}x_(){if(this.y0)throw new Error("query already active");1===this.KC?this.ZC.beginQueryEXT(this.ZC.TIME_ELAPSED_EXT,this.tP):this.Px.beginQuery(this.ZC.TIME_ELAPSED_EXT,this.tP),this.y0=!0}__(){if(!this.y0)throw new Error("query not active");1===this.KC?this.ZC.endQueryEXT(this.ZC.TIME_ELAPSED_EXT):this.Px.endQuery(this.ZC.TIME_ELAPSED_EXT),this.y0=!1}hP(){if(this.tP&&!this.sP&&!this.y0){let t;t=1===this.KC?this.ZC.getQueryObjectEXT(this.tP,this.ZC.QUERY_RESULT_AVAILABLE_EXT):this.Px.getQueryParameter(this.tP,this.Px.QUERY_RESULT_AVAILABLE);const s=this.Px.getParameter(this.ZC.GPU_DISJOINT_EXT);t&&!s&&(1===this.KC?this.iP=this.ZC.getQueryObjectEXT(this.tP,this.ZC.QUERY_RESULT_EXT):this.iP=this.Px.getQueryParameter(this.tP,this.Px.QUERY_RESULT),this.iP/=1e9,this.sP=!0),(t||s)&&this.eP()}}rP(){return this.sP}nP(){if(this.sP)return this.iP;throw new Error("no result available")}}Vi.Ty.oP=class{constructor(t){this.Nb=t,this._w=t.Tb(),this.y0=!1,this.aP=null,this.lP=!1,this.uP=null,this.cP=[]}pr(){for(const t of this.cP)t instanceof Ui&&t.pr();Vi.Hn(this.cP),this.aP=null,this.uP=null,this.Nb=null}x_(){if(this.y0)throw new Error("query already active");const t=this.Nb.fP();0<t.length?(this.lP=!0,this.aP=t.at(-1),this.aP.dP(),this.aP.cP.push(this)):(this.lP=!1,this.aP=null),this.y0=!0,t.push(this),this.pP()}__(){if(!this.y0)throw new Error("query not active");const t=this.Nb.fP().pop();if(t!==this)throw new Error("can only end most nested query");this.y0=!1,this.dP(),this.aP&&(this.aP.pP(),this.aP=null)}pP(){this.uP=Vi.dr(Ui,this.Nb),this.cP.push(this.uP),this.uP.x_()}dP(){this.uP.__(),this.uP=null}hP(){for(const t of this.cP)t.hP()}mP(){return this.lP}rP(){return this.cP.every(t=>t.rP())}nP(){return this.cP.reduce((t,s)=>t+s.nP(),0)}Tb(){return this._w}}}{const Hi=self.Ws;Hi.Ty.gP=class{constructor(t,s=1e3){this.Nb=t,this.yP=s,this.wP=[],this.Nb.SP(this)}pr(){this.lc(),this.Nb.bP(this),this.Nb=null}lc(){for(const t of this.wP)t.pr();Hi.Hn(this.wP)}vP(){const t=new Hi.Ty.oP(this.Nb);if(this.wP.push(t),this.wP.length>this.yP){const s=this.wP.shift();s.pr()}return t}MP(t){for(const s of this.wP){if(s.Tb()>=t)return;if(s.mP())return;s.hP()}}xP(t,s){if(s<=t)return NaN;let i=0;for(const e of this.wP){if(e.Tb()>=s)break;if(!(e.Tb()<t)){if(!e.rP())return NaN;i+=e.nP()}}return i}GP(i){for(let t=0,s=this.wP.length;t<s;++t){const e=this.wP[t];if(!(e.Tb()<i))return void(0<t&&this.wP.splice(0,t));e.pr()}}}}{let i=function(){h=-1;for(const t of e)t.TP()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ws),t=self.xs,v=(t.Es,t.As),y=t.Is,r={powerPreference:"default",_P:!0,alpha:!1,depth:!1,IP:!1,CP:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.ou(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.ou,x=new b.Rect,G=null,e=(b.isDebug&&(self.PP=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.RP=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Ty.EP=class extends b.Ty.jy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.CP&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Px=e,this.AP=e.getContextAttributes(),this.FP=e.getParameter(e.VERSION),this.KC=h,this.kP=v.create(),this.DP=!1,this.OP=y.create(),this.LP=!!s.depth,this.BP=!(!s.depth||!s.IP),this.NP=this.LP,this.WP=!1,this.jP=null,this.VP=!0,this.UP=0,this.HP=0,this.Ax=null,this.Fx=null,this.zP=null,this.kx=null,this.JP=new Float32Array(8e3*this.Mb()),this.qP=new Uint16Array(12e3),this.XP=new Float32Array(16e3),this.$P=new Float32Array(32e3),this.YP=0,this.KP=0,this.ZP=0,this.QP=0,this.tR=null,this.sR=null,this.iR=[],this.eR=0,this.hR=0,this.rR=null,this.nR=0,this.ET=b.dr(b.Ty._T,this),this.oR=b.dr(b.Yo,1,1,1,1),this.aR=null,this.p_=null,this.lR=0,this.uR=0,this.cR=new b.Rect,this.fR=b.dr(b.Rect,0,0,-1,-1),this.dR=0,this.pR=-1,this.mR=0,this.gR=0,this.yR=0,this.wR="(unavailable)",this.SR="(unavailable)",this.bR=[],this.vR=!1,this.MR=null,this.xR=null,this.GR=null,this.TR=null,this._R=null,this.IR=null,this.CR=0,this.PR=!!s._P,this.ZC=null,this.RR=new Set,this.ER=[],this.Pw(this.qP)}Eb(){return!0}async Aw(){super.Aw();const t=this.Px,s=this.Mb(),i=(this.oR.ea(1,1,1,1),this.aR=null,this.p_=null,this.YP=0,this.ZP=0,this.QP=8e3*s-4*s,b.Hn(this.iR),this.eR=0,this.hR=0,this.tR=null,this.rR=null,this.cR.set(0,0,1,1),this.nR=0,this.ET),e=(i.TG=null,i.J2=null,i.q2=null,v.set(i.CT,1,1,1,1),i.clearColor.ea(0,0,0,0),i.PT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.lR=t.ONE,this.uR=t.ONE_MINUS_SRC_ALPHA,this.AR(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.LP?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.NP=this.LP,this.WP=!1,this.kx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kx),t.bufferData(t.ARRAY_BUFFER,this.$P.byteLength,t.DYNAMIC_DRAW),this.Ax=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ax),t.bufferData(t.ARRAY_BUFFER,this.JP.byteLength,t.DYNAMIC_DRAW),this.Fx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Fx),t.bufferData(t.ARRAY_BUFFER,this.XP.byteLength,t.DYNAMIC_DRAW),this.zP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.zP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.qP,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.pR=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.mR=e[0],this.gR=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.yR=h&&r?Math.min(h.precision,r.precision):0,2048<this.gR&&(this.gR=2048),this.bR=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.wR=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.SR=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.MR=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.PR&&(1===this.YM()?this.ZC=t.getExtension("EXT_disjoint_timer_query"):this.ZC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.xR=t.getExtension("EXT_texture_filter_anisotropic"),this.xR?this.CR=t.getParameter(this.xR.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.CR=0,this.YM()<2&&this.LP&&this.BP&&(this.GR=t.getExtension("WEBGL_depth_texture"),!this.GR))throw new Error("no depth texture support");this.YM()<2&&(this.TR=t.getExtension("EXT_frag_depth"),this._R=t.getExtension("OES_standard_derivatives"),this.IR=t.getExtension("EXT_shader_texture_lod"));let o=b.Ty.xx,a=o.XG(!1),l=o.YG(),u=a,c=o.rT(),f=o.eT(),d=o.QG(),p=o.XG(!0),m=!1;this.LP&&(this.YM()<2?this.TR&&(l=o.KG(),c=o.nT(),d=o.tT(),m=!0):(u=o.$G(),l=o.ZG(),c=o.oT(),f=o.hT(),d=o.sT(),p=o.$G(!0)));const g=o.iT(this.YM(),m,this._R&&this.IR),y=2<=this.YM()?o.$G():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.aT(),a,"<fill>"],[o.lT(),a,"<lineargradient>"],[o.uT(),a,"<penumbra>"],[o.fT(),a,"<hardellipse>"],[o.dT(),a,"<hardellipseoutline>"],[o.pT(),a,"<smoothellipse>"],[o.mT(),a,"<smoothellipseoutline>"],[o.cT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.FR({src:t[0],Tx:t[1],name:t[2]})));this.Ky=S[0],this.sR=S[1],this.Zy=S[2],this.ew=S[3],this.hw=S[4],this.rw=S[5],this.ow=S[6],this.aw=S[7],this.lw=S[8],this.uw=S[9],this.cw=S[10],this.Qy=S[11],this.iw=S[12],this.iS()}async FR(t){const s=await b.Ty.xx.Cx(this,t);return this.Zw(s),s}kR(){this.tR=null}wC(t,s,i){if(this.ag!==t||this.lg!==s||i){this.Gb();const e=this.Px,h=this.ET;this.ag=t,this.lg=s,this.DR(0,0,t,s),this.qw(this.OP,t/s),this.OR(this.OP),this.sR&&(e.useProgram(this.sR.IG()),this.sR.bG(this.Hy),this.tR=this.sR,this.ET.TG=this.sR),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.aR=null,this.p_=null,this.LP&&this.VP&&this.LR(this.ag,this.lg),this.rR&&this.rR.U2(this.ag,this.lg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.rR=null,h.J2=null,h.q2=null}}LR(t,s){const i=this.Px;this.jP&&this.UP===t&&this.HP===s||(this.BP?(this.jP&&i.deleteTexture(this.jP),this.jP=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.jP),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.YM()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.GR&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.GR.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.jP&&i.deleteRenderbuffer(this.jP),this.jP=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.jP),i.renderbufferStorage(i.RENDERBUFFER,2<=this.KC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.UP=t,this.HP=s)}BR(t,s){this.LP&&(this.VP=!1,this.LR(t,s))}NR(){this.LP&&(this.VP=!0,this.LR(this.ag,this.lg))}DR(t,s,i,e){const h=this.kP;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.WR();r.$T(t,s,i,e),v.set(h,t,s,i,e),this.hR=0}}Vw(t){super.Vw(t),this.qw(this.OP,this.ag/this.lg)}Bw(t){super.Bw(t),this.qw(this.OP,this.ag/this.lg)}Ww(t){super.Ww(t),this.qw(this.OP,this.ag/this.lg)}OR(t){if(!y.j(this.Hy,t)){const s=this.WR();s.KT(t),y.I(this.Hy,t),this.hR=0,this.DP=!0}}jR(){let t,s,i,e=this.rR;i=(null===e?(t=this.OP,s=this._m(),this):(t=e.Z2(),s=e._m(),e)).Om(),this.OR(t),this.DR(0,0,s,i)}VR(t){if(!y.j(this.zy,t)){const s=this.WR();s.QT(t),y.I(this.zy,t),this.hR=0,this.DP=!0}}UR(){this.DP=!1}HR(){return this.DP}z2(){return this.ET}WR(){const t=this.iR;return this.eR===t.length&&t.push(new b.Ty.RT(this.ET)),t[this.eR++]}Gb(){0===this.eR||this.qC()||(this.zR(),this.JR(),this.eR=0,this.YP=0,this.KP=0,this.ZP=0,this.hR=0)}zR(){const t=this.Px;0<this.ZP&&(t.bindBuffer(t.ARRAY_BUFFER,this.kx),t.bufferSubData(t.ARRAY_BUFFER,0,this.$P.subarray(0,this.ZP))),0<this.YP&&(t.bindBuffer(t.ARRAY_BUFFER,this.Ax),t.bufferSubData(t.ARRAY_BUFFER,0,this.JP.subarray(0,this.YP)),t.bindBuffer(t.ARRAY_BUFFER,this.Fx),t.bufferSubData(t.ARRAY_BUFFER,0,this.XP.subarray(0,this.KP)))}JR(){const i=this.iR;for(let t=0,s=this.eR;t<s;++t)i[t].q_()}qR(){return this.oR.Sa()}$R(t,s,i,e){const h=this.oR;if(!h._a(t,s,i,e)){h.ea(t,s,i,e);const r=this.WR();r.UT(h),this.hR=0,this.pw=null}}YR(t){const s=this.oR;if(s.Sa()!==t){s.fa(t);const i=this.WR();i.UT(s),this.hR=0,this.pw=null}}Mv(t){const s=this.oR;if(!s.equals(t)){s.set(t);const i=this.WR();i.UT(s),this.hR=0,this.pw=null}}KR(){this.$R(1,1,1,1)}ZR(){return this.oR}QR(t){if(t!==this.aR){const s=this.WR();s.jT(t),this.aR=t,this.hR=0}}t2(){this.aR=null}vv(t){const s=this.PS(t);this.tE(s[0],s[1])}sE(t){const s=this.AS(t);this.tE(s.IS,s.CS)}tE(t,s){if(t!==this.lR||s!==this.uR){const i=this.WR();i.qT(t,s),this.lR=t,this.uR=s,this.hR=0,this.pw=null}}iE(){return this.lR===this.Px.ONE&&this.uR===this.Px.ONE_MINUS_SRC_ALPHA}eE(){this.tE(this.Px.ONE,this.Px.ONE_MINUS_SRC_ALPHA)}hE(){this.tE(this.Px.SRC_ALPHA,this.Px.ONE_MINUS_SRC_ALPHA)}rE(){this.tE(this.Px.ONE,this.Px.ZERO)}Rect(t){this.nE(t.El(),t.Al(),t.Fl(),t.kl())}nE(t,s,i,e){this.vb(t,s,i,s,i,e,t,e)}oE(){let t=this.YP;if(t>=this.QP&&(this.Gb(),t=0),1===this.hR)this.iR[this.eR-1].FT+=6;else{const s=this.WR();s.NT(t,6),this.hR=1}}aE(t){t.Iu(this.JP,this.YP,this.yw+this.ww),this.YP+=12}ou(t){this.oE(),this.aE(t),c.Ma(this.XP,this.KP),this.KP+=8}vb(t,s,i,e,h,r,n,o){this.oE();let a=this.JP,l=this.YP,u=this.yw+this.ww;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.YP=l,c.Ma(this.XP,this.KP),this.KP+=8}qS(t,s){this.oE(),this.aE(t),s.Ll(this.XP,this.KP),this.KP+=8}lE(t,s){this.oE(),this.aE(t),s.Ma(this.XP,this.KP),this.KP+=8}uE(t,s,i,e,h,r,n,o,a,l,u,c,f){this.oE();let d=this.JP,p=this.YP,m=this.yw+this.ww;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.YP=p,f.Ll(this.XP,this.KP),this.KP+=8}VS(t,s,i,e,h,r,n,o,a,l,u,c,f){this.oE();let d=this.JP,p=this.YP,m=this.yw+this.ww;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.YP=p,f.Ma(this.XP,this.KP),this.KP+=8}cE(e,h,r){const n=this.JP,o=this.XP;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.oE();let t=this.YP,s=this.KP;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.YP=t,this.KP=s}}fE(t,s){this.OS(0),y.I(w,this.Hy),y.I(S,this.zy),this.jR();const[i,e]=this.dE(this.rR),h=this.Kw(0,0,this.kw(e),0,0,0,e);if(this.VR(h),"crop"===t&&this.rR&&s){const r=this.ag/2,n=this.lg/2,o=s._m(),a=s.Om(),l=this.rR._m(),u=this.rR.Om(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,n-p,-r+c,n-f-p),M.Cu(x),x.set(0,d,c,f+d),x.Pt(o,a),this.qS(M,x)}else{const m=i/2,g=e/2;this.nE(-m,g,m,-g)}this.OR(w),this.VR(S)}pE(t){if(!this.cR.equals(t)){this.cR.I(t);const s=this.WR();s.n_(t),this.hR=0}}mE(){}gE(t,s,i,e){7996<=this.ZP&&this.Gb();let h=this.ZP,r=this.yw+this.ww;if(2===this.hR&&this.nR===r)this.iR[this.eR-1].FT++;else{const o=this.WR();o.a_(h,r),this.hR=2,this.nR=r}const n=this.$P;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.ZP=h}eS(t){if(this.tR!==t){const s=this.WR();s.u_(t),this.tR=t,this.hR=0,this.pw=null}}yE(){return this.tR}wE(){this.eS(this.sR)}SE(t){const s=this.WR();s.zT(t),this.hR=0}bE(t,s,i=1){const e=this.WR();e.I_(t,s,i),this.hR=0}vE(t,s,i,e,h,r,n){if(this.tR!==this.Qy)throw new Error("must set tilemap fill mode first");const o=this.WR();o.P_(t,s,i,e,h,r,n),this.hR=0}ME(t,s,i,e,h,r,n){if(this.tR!==this.iw)throw new Error("must set tile randomization mode first");const o=this.WR();o.E_(t,s,i,e,h,r,n),this.hR=0}xE(t,s,i,e,h,r,n,o,a,l,u){const c=this.tR;if(u%=10800,c.uG&&!c.OG(s,i,e,h,r,n,o,a,l,u)){const f=this.WR(),d=(f.f_(),c.NG(s,i,e,h,r,n,o,a,l,u),f.DT),p=(d[0]=r,d[1]=n,s.Ma(d,2),d[6]=a,d[7]=l,i.Ma(d,12),f.OT),m=(h.Ma(p,0),p[1]);p[1]=p[3],p[3]=m,e.Ma(f.LT,0),f.AT=u,f.FT=o,c.qx.cG()?f.kT=t?t.K2():null:f.kT=null,this.hR=0}}GE(t){const s=this.tR;if(0!==t.length&&!s.AG(t)){const i=this.WR();i.m_(),s.kG(t),b.Xn(i.BT,t),this.hR=0}}TE(t,s,i,e){const h=this.WR();h.h_(t,s,i,e),this.hR=0}lc(t){const s=this.WR();s.e_(t),this.hR=0}_E(){}xb(){super.xb(),this.Px.flush()}IE(){if(this.LP&&this.rR&&this.rR.nx()){const t=this.WR();t.F_(this.NP),this.hR=0}}CE(t){if(this.NP!==(t=!!t)&&this.LP){this.NP=t;const s=this.WR();s.D_(t),this.hR=0}}PE(){return this.NP}j2(){return this.jP}V2(){return this.BP}RE(t){if(t=!!t,this.BP&&this.WP!==t){if(t&&this.PE())throw new Error("depth still enabled");this.WP=t;const s=this.WR();s.L_(t),this.hR=0}}EE(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.fR.Rl(t,s,i,e)){this.fR.xl(t,s,i,e);const r=h||this.dE(this.AE())[1],n=(s=r-s-e,this.WR());n.z_(!0,t,s,i,e),this.hR=0}}FE(){if(-1!==this.fR.Fl()){this.fR.set(0,0,-1,-1);const t=this.WR();t.z_(!1,0,0,0,0),this.hR=0}}kE(){for(const t of this.RR)t.MP(this._w)}qC(){return!this.Px||this.Px.isContextLost()||this.vR}xv(){super.Fw(),b.Ty.LM.xv(),b.Ty.G2.xv(),b.Ty.Lb.xv();for(const t of this.RR)t.lc();this.bR=[],this.ZC=null,this.MR=null,this.xR=null,this.GR=null,this.TR=null,this._R=null,this.IR=null,this.CR=0,this.wR="(unavailable)",this.SR="(unavailable)",this.tR=null,this.sR=null,this.jP=null;for(const s of this.fw.values())s.xv()}async Gv(){this.vR=!0,await this.Aw(),this.vR=!1;for(const t of this.fw.values())t.Gv(this);this.wC(this.ag,this.lg,!0)}DE(t,s){if(this.qC())throw new Error("context lost");this.Gb();const i=b.dr(b.Ty.LM,this);return i.qM(t,s),i}async OE(e,h){if(this.qC())throw new Error("context lost");if(h=Object.assign({},h),b.Ui.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.PM&&"clamp-to-edge"!==h.PM||h.RM&&"clamp-to-edge"!==h.RM,i=b.Ur(t.width)&&b.Ur(t.height);return this.KM()||i||!s?h.premultiplyAlpha=!1:b.Ui.$i?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Hr(t.width),resizeHeight:b.Hr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Jf(()=>this.DE(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Lo(e);e=t}return b.Jf(()=>this.DE(e,h))}W2(t,s,i){this.Gb();const e=b.dr(b.Ty.LM,this);return e.s2(t,s,i),e}XC(t,s,i){this.Gb(),s.o2(t,i)}H2(t){t&&(t.d2(),0<t.m2()||(this.Gb(),t===this.aR&&(this.Px.bindTexture(this.Px.TEXTURE_2D,null),this.aR=null),t===this.p_&&(this.Px.activeTexture(this.Px.TEXTURE1),this.Px.bindTexture(this.Px.TEXTURE_2D,null),this.Px.activeTexture(this.Px.TEXTURE0),this.p_=null),t.l2()))}LE(t){let s=this.ag,i=this.lg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Gb();const h=b.dr(b.Ty.G2,this);return h.B2(s,i,Object.assign({v2:e},t)),this.rR=null,this.ET.J2=null,this.ET.q2=null,h}BE(t,s=!0){if(t!==this.rR){t&&t.ux()&&t.U2(this.ag,this.lg);const i=this.WR();i.s_(t),this.rR=t,this.hR=0,s&&this.jR()}}AE(){return this.rR}dE(t){return t?[t._m(),t.Om()]:[this.ag,this.lg]}NE(t,s="stretch"){if(this.KC<2||this.rR&&0<this.rR.mx())this.rE(),this.KR(),this.WE(t,s);else{const i=this.WR();i.S_(t,this.rR,s),this.hR=0}}WE(t,s="stretch"){const i=t.K2();if(!i)throw new Error("not a texture-backed render target");this.QR(i),this.fE(s,i)}jE(t){if(!(this.KC<2)){const s=this.WR();s.y_(t.X2()),this.hR=0}}VE(t){this.BE(null),this.Gb();const s=t.K2();s===this.aR&&(this.Px.bindTexture(this.Px.TEXTURE_2D,null),this.aR=null),s===this.p_&&(this.Px.activeTexture(this.Px.TEXTURE1),this.Px.bindTexture(this.Px.TEXTURE_2D,null),this.Px.activeTexture(this.Px.TEXTURE0),this.p_=null),t.l2()}async bx(t,s,i){this.Gb();let e=this.rR,h,r,n,o=(n=t?(h=t._m(),r=t.Om(),t.X2()):(h=this._m(),r=this.Om(),null),0),a=0,l=h,u=r;if(i){o=b.Gr(Math.floor(i.El()),0,h-1),a=b.Gr(Math.floor(i.Al()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Gr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Gr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.Px,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.rR=null,this.ET.J2=null,this.ET.q2=null,this.BE(e)}),d;if(!s&&2<=this.YM()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Ix(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}UE(){this.CE(!0);const t=this.WR();t.N_(),this.hR=0,this.dR=1}HE(){this.CE(!1);const t=this.WR();t.j_(),this.hR=0,this.dR=2}zE(){return 2===this.dR}JE(){this.CE(!0);const t=this.WR();t.U_(),this.hR=0,this.dR=0}qE(t){if(this.XE()){const s=this.WR();s.v_(t),this.hR=0}}$E(t){if(this.XE()){const s=this.WR();s.G_(t),this.hR=0}}Ix(s){const t=new Promise(t=>e.add({resolve:t,TP:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Ab(){return this.ag*this.lg*(this.AP.alpha?4:3)}Fb(){let t=0;for(const s of b.Ty.G2.vx())s.K2()||(t+=s.w2());return t}kb(){let t=0;for(const s of b.Ty.LM.S2())t+=s.w2();return t}YE(){return this.FP}YM(){return this.KC}KE(){return"webgl"+this.YM()}KM(){return 2<=this.YM()}XM(){return this.pR}ZE(){return this.mR}QE(){return this.gR}tA(){return 0!==this.yR}sA(){return this.yR}iA(){return this.wR}eA(){return this.SR}hA(){if(2<=this.YM())return"webgl2";{const t=[];return this.TR&&t.push("EXT_frag_depth"),this._R&&t.push("OES_standard_derivatives"),this.IR&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}rA(){return this.bR}XE(){return!!this.ZC}QC(){return this.ZC}_x(){return this.MR}h2(){return this.xR}n2(){return this.CR}SP(t){this.RR.add(t)}bP(t){this.RR.delete(t)}fP(){return this.ER}$M(){return this.Px}AR(t){this._S([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}nA(){return this.Ob()}}}{const zi=self.Ws,Ji={oA:null,aA:null,lA:null,getTime:null,uA:null};zi.Ty.cA=class{constructor(t){t=Object.assign({},Ji,t),this.fA=t.oA,this.dA=t.aA,this.pA=t.lA,this.mA=t.getTime,this.gA=t.uA,this.yA=null,this.wA=new Set}SA(t){this.wA.add(t)}bA(t){this.wA.delete(t)}xv(){this.yA=null;for(const t of this.wA)t.xv()}vA(t){return this.fA?this.fA(t):[t._m(),t.Om()]}AE(t){return this.dA(t)}MA(t,s){this.pA(t,s)}xA(){return this.mA()}f1(t){this.gA(t)}GA(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.yA||this.yA._m()===s&&this.yA.Om()===i||(t.H2(this.yA),this.yA=null),null===this.yA&&(this.yA=t.DE(null,{width:s,height:i,EM:"nearest",kM:!1})),this.yA}}}{const o=self.Ws,qi=self.xs,xh=qi.Is,Xi=o.dr(o.Rect),$i=o.dr(o.Rect),Yi=o.dr(o.Rect),Ki=o.dr(o.Rect),Zi=xh.create(),Qi=xh.create(),te={TA:null,_A:null,IA:null,CA:!1},se={PA:null,RA:!1,EA:!1,AA:!1,FA:!1,kA:!1,DA:!1};o.Ty.OA=class{constructor(t,s){s=Object.assign({},te,s),this.G1=t,this.LA=s.TA,this.BA=s._A,this.NA=s.IA,this.WA=null,this.jA=[],this.VA=[],this.UA=[],this.HA=!1,this.yv=0,this.zA=!1,this.JA=!1,this.qA=!1,this.XA=!1,this.$A=!1,this.YA=!1,this.DP=!1,this.KA=!1,this.ZA=!1,this.QA=!1,this.t3=!1,this.s3=!1,this.i3=0,this.e3=[null,null,null],this.h3=!!s.CA,this.r3=0,this.n3=0,this.o3=0,this.a3=0,this.l3=null,this.u3=null,this.f3=o.dr(o.Rect),this.d3=o.dr(o.Rect),this.m3=o.dr(o.Rect),this.g3=o.dr(o.Rect),this.y3=o.dr(o.Rect),this.w3=1,this.S3=1,this.b3=0,this.v3=0,this.M3=null,this.x3=null,this.G3=0,this.T3=0,this._3=!1,this.F2=xh.create(),this.I3=xh.create(),this.G1.SA(this)}pr(){this.G1.bA(this),o.Hn(this.UA),o.Hn(this.jA),o.Hn(this.VA),this.l3=null,this.u3=null,this.LA=null,this.BA=null,this.NA=null}xv(){this.HA=!0,o.Hn(this.UA),o.Hn(this.jA),o.Hn(this.VA)}C3(){return this.HA}P3(h,t){if(t=Object.assign({},se,t),o.Hn(this.UA),this.r3=0,this.n3=0,this.zA=!1,this.JA=!1,this.qA=!1,this.XA=!1,this.$A=!1,this.YA=!1,this.i3=0,this.s3=!!t.FA,this.t3=!!t.DA,this.HA=!1,o.Xn(this.jA,h),0!==h.length){if(t.PA){if(t.PA.length!==h.length)throw new Error("incorrect indexMap length");o.Xn(this.VA,t.PA)}else{o.Hn(this.VA);for(let t=0,s=h.length;t<s;++t)this.VA.push(t)}for(const s of h)this.r3+=s.Qb(),this.n3+=s.tv(),s.ov()&&(this.zA=!0),s.lv()&&(this.JA=!0),s.av()&&(this.qA=!0),s.sv()&&(this.XA=!0),s.dv()&&(this.$A=!0);this.YA=this.R3(h[0].Kb());const r=this.E3(h[0],t),n=this.A3(h.at(-1),t);if(1!==h.length||r||n){this.QA=!1;let e=0;r&&(this.i3=1,this.UA.push(o.dr(o.Ty.OA.D3.F3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.i3=Math.max(this.i3,t),this.UA.push(o.dr(o.Ty.OA.D3.O3,this,e,t,s)),e=t}else this.i3=1,this.UA.push(o.dr(o.Ty.OA.D3.L3,this,-1,1,s)),e=1;n&&this.UA.push(o.dr(o.Ty.OA.D3.B3,this,e,0))}else this.QA=!0}}E3(t,s){return!!(s.RA||t.hv()||s.AA&&!t.nv()||t.lv()&&!this.t3||0!==this.r3||0!==this.n3)||(t.Kb().Eb()?t.av()&&(s.kA||s.FA)||t.uv()&&s.FA:t.av()&&!this.YA&&s.kA)}A3(t,s){return!!s.EA||(t.Kb().Eb()?t.av()||t.sv():(t.av()||t.sv())&&this.N3())}R3(t){return t.Xw()&&this.qA&&!this.XA}W3(t,s,i){t.Xw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.M3=s,this.l3=i.j3||null,this.u3=i.contextObject||null,this.yv=i.V3||0,this.w3=i.devicePixelRatio||1,this.S3=i.U3||1,this.b3=i.H3||0,this.v3="number"==typeof i.time?i.time:this.G1.xA(),this.DP=!1,t.UR(),this.zA&&this.z3();let e=!1;if(this.J3()&&(this.q3(t,i),e=!0,this.x3=this.G1.GA(t,this.o3,this.a3),Xi.I(this.d3),Xi.Ql(),t.Xw()&&t._MaybeDoPendingClearRenderPass(this.M3),t.CopyTextureToTexture(this.M3.K2(),this.x3,Xi.El(),Xi.Al(),Xi.width(),Xi.height())),this.QA)this.X3(t,i);else if(e||this.q3(t,i),0!==this.m3.width()||0!==this.m3.height()){t.eE(),t.KR(),t.kS(0),t.OS(0),this.WA=i.Y3||null,this.G3=i.K3||0,this.T3=i.Z3||0,this._3=!!i.Q3,this.tF(t),this.e3[0]=s,this.e3[1]=1<=this.i3?this.sF():null,this.e3[2]=2===this.i3?this.sF():null;for(const h of this.UA){const r=this.iF(h.eF()),n=this.iF(h.hF());t.Xw()?h.rF(t,r,n):h.nF(t,r,n)}t.QR(null),this.e3[1]&&this.oF(this.e3[1]),this.e3[2]&&this.oF(this.e3[2]),this.e3.fill(null),this.aF(t),this.M3=null,this.x3=null,this.l3=null,this.u3=null,this.WA=null}}q3(t,s){const[i,e]=this.G1.vA(t);this.lF(t,i,e),this.uF(s)}lF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.o3===s&&this.a3===i||this.cF(t,s,i,0,0,this.F2,this.I3),this.o3=s,this.a3=i}cF(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.qw(r,s/i),t.Kw(o,a,t.kw(i),o,a,0,i));xh.I(n,l)}uF(t){this.f3.I(t.fF),t.dF?this.d3.I(t.dF):this.d3.set(0,0,this.o3,this.a3),this.m3.I(this.d3),this.m3.Pt(this.o3,this.a3);const s=this.S3*this.w3;this.d3.Hl(this.r3*s,this.n3*s),this.y3.I(this.d3),this.y3.Pt(this.o3,this.a3),this.d3.tu(0,0,this.o3,this.a3),this.g3.I(this.d3),this.g3.Pt(this.o3,this.a3)}tF(t){if(this.KA=t.PE(),this.ZA=t.zE(),this.t3)t.CE(!1),this.JA&&t.RE(!0);else{if(Xi.I(this.d3),t.Eb()){const s=this.S3*this.w3;Xi.Hl(Math.max(this.r3,1)*s,Math.max(this.n3,1)*s),Xi.Ql(),Xi.Gr(0,0,this.o3,this.a3)}else Xi.Ql();t.EE(Xi.El(),Xi.Al(),Xi.width(),Xi.height(),this.a3)}}pF(t){t.KR(),this.t3||(this.ZA&&t.JE(),t.CE(!1),this.JA&&t.RE(!0)),t.Xw()&&t.SetNormalizedCoordsProgramVariant(!0)}aF(t){t.RE(!1),this.ZA&&t.HE(),t.CE(this.KA),this.t3||t.FE(),t.Xw()&&t.SetNormalizedCoordsProgramVariant(!1),this.DP=t.HR()}mF(){this.y3.Gr(0,0,1,1)}iF(t){return t<0?null:this.e3[t]}sF(){return this.G1.AE(this)}gF(){return this.M3}oF(t){this.G1.MA(t,this)}yF(t){return this.jA[t]}wF(t){this.WA?this.WA(this,t,()=>this.LA(t,this)):this.LA(t,this),this.QA||this.pF(t)}SF(t){if(this.t3)return!0;if(0!==this.G3||0!==this.T3)return!1;const[s,i]=t.dE(t.AE());return s===this.o3&&i===this.a3}bF(t,s){let i=this.F2,e=this.I3;if(s&&!this.SF(t)){i=Zi,e=Qi;const[h,r]=t.dE(t.AE());this.cF(t,h,r,this.G3,this.T3,i,e),this.t3||t.FE()}t.OR(i),t.VR(e)}z3(){this.G1.f1(this)}vF(t,s){return this.NA(this.VA[t],s)}MF(t,s){let i=this.y3,e=this.g3,h=this.m3;t.Eb()&&($i.I(i),$i.ql(1),i=$i,Yi.I(e),Yi.ql(1),e=Yi,Ki.I(h),Ki.ql(1),h=Ki),this.xF(t,s,e,h,i,1/this.o3,1/this.a3)}GF(t,s){let e=this.g3,h=this.m3,r=1/this.o3,n=1/this.a3;if(this.BA){let{TF:t,_F:s,IF:i}=this.BA(this.l3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.o3,i=i||this.a3,e=t,h=t,r=1/s,n=1/i}else t.Eb()&&(Yi.I(e),Yi.ql(1),e=Yi,Ki.I(h),Ki.ql(1),h=Ki);let i=this.y3;t.Eb()&&((i=$i).I(this.y3),i.ql(1)),this.xF(t,s,e,h,i,r,n),t.Xw()&&this.$A&&t.SetProgramParameter_IsSrcTexRotated(this.s3)}CF(t){return this.qA?t.Xw()?this.J3()?this.x3:this.M3.K2():this.M3:null}xF(t,s,i,e,h,r,n){t.xE(this.CF(t),h,i,e,this.f3,r,n,this.w3,this.S3,this.b3,this.v3),t.GE(this.vF(s,t))}X3(t,s){const i=this.jA[0],e=t.PE(),h=i.lv();h&&(t.CE(!1),t.RE(!0),this.y3.set(0,0,1,1),this.m3.set(0,0,1,1)),t.eS(i),t.vv(this.yv),t.BE(this.M3);let r=0,n=1;if(this.m3.set(0,0,1,1),i.uv()&&this.BA){const{TF:o,_F:a,IF:l}=this.BA(this.l3);o&&this.m3.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.G1.vA(t);r=1/u,n=1/c}s.fF?this.f3.I(s.fF):this.f3.set(0,0,0,0),t.xE(this.CF(t),this.y3,this.m3,this.m3,this.f3,r,n,this.w3,this.S3,this.b3,this.v3),t.GE(this.vF(0,t)),t.Xw()&&this.$A&&t.SetProgramParameter_IsSrcTexRotated(this.s3),t.kS(0),this.wF(t),h&&(t.RE(!1),t.CE(e))}J3(){return this.YA}N3(){return!this.YA}PF(){return this.qA}RF(){return!!this.QA&&!this.J3()}EF(){return this.t3}AF(){return this.l3}FF(){return this.u3}kF(){return this.yv}DF(){return this._3}HR(){return this.DP}OF(){return this.d3}LF(){return this.g3}BF(){return this.h3}async NF(t,s,i){}}}{const ie=self.Ws;ie.Ty.OA.D3=class{constructor(t,s,i,e=-1){this.WF=t,this.jF=s,this.VF=i,this.wy=e}UF(){return this.WF}eF(){return this.jF}hF(){return this.VF}HF(){return this.wy}IG(){return this.UF().yF(this.HF())}nF(t,s,i){}rF(t,s,i){}}}{const ee=self.Ws;ee.Ty.OA.D3.F3=class extends ee.Ty.OA.D3{constructor(t,s,i,e){super(t,s,i,e)}nF(t,s,i){const e=this.UF();t.eE(),t.iS(),t.BE(i,e.DF()),t.TE(0,0,0,0),e.wF(t),e.mF()}rF(t,s,i){const e=this.UF();t.eE(),t.iS(),t.BE(i,!1),t.TE(0,0,0,0),e.wF(t),e.mF()}}}{const he=self.Ws,re=he.dr(he.Rect),ne=he.dr(he.ou);he.Ty.OA.D3.B3=class extends he.Ty.OA.D3{constructor(t,s,i,e){super(t,s,i,e)}nF(t,s,i){const e=this.UF();t.iS(),t.BE(i),e.bF(t,!0),t.vv(e.kF()),t.QR(s.K2()),ne.Cu(e.OF()),re.I(e.LF()),re.ql(1),t.qS(ne,re),e.BF()&&t.jE(s)}rF(t,s,i){const e=this.UF();t.iS(),t.BE(i,!1),e.SF(t)?ne.Cu(e.LF()):(t.SetNormalizedCoordsProgramVariant(!1),e.bF(t,!0),ne.Cu(e.OF())),t.SetBackTexture(null),t.vv(e.kF()),t.QR(s.K2()),e.EF()?t.fE():t.qS(ne,e.LF())}}}{const oe=self.Ws;oe.Ty.OA.D3.L3=class extends oe.Ty.OA.D3{constructor(t,s,i,e){super(t,s,i,e)}nF(t,s,i){const e=this.UF();t.BE(i,e.DF()),t.TE(0,0,0,0),t.rE(),t.eS(this.IG()),e.GF(t,this.HF()),e.wF(t),e.mF()}rF(t,s,i){const e=this.UF();t.BE(i,!1),t.TE(0,0,0,0),t.rE(),t.eS(this.IG()),e.GF(t,this.HF()),e.wF(t),e.mF()}}}{const ae=self.Ws,le=ae.dr(ae.Rect),ue=ae.dr(ae.ou);ae.Ty.OA.D3.O3=class extends ae.Ty.OA.D3{constructor(t,s,i,e){super(t,s,i,e)}nF(t,s,i){const e=this.UF(),h=(t.BE(i),0===this.hF());h?t.vv(e.kF()):(t.TE(0,0,0,0),t.rE()),t.eS(this.IG()),e.MF(t,this.HF()),t.QR(s.K2()),e.bF(t,h),ue.Cu(e.OF()),le.I(e.LF()),le.ql(1),t.qS(ue,le),e.BF()&&t.jE(s)}rF(t,s,i){const e=this.UF(),h=(t.BE(i,!1),0===this.hF());h?(t.vv(e.kF()),t.SetBackTexture(null),e.SF(t)?ue.Cu(e.LF()):(t.SetNormalizedCoordsProgramVariant(!1),e.bF(t,!0),ue.Cu(e.OF()))):(t.TE(0,0,0,0),t.rE(),ue.Cu(e.LF())),t.eS(this.IG()),e.MF(t,this.HF()),t.QR(s.K2()),e.EF()?t.fE():t.qS(ue,e.LF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Ws),f=self.Ys,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.zF=class{constructor(t){d=t,Object.defineProperties(this,{JF:{value:d.XF().qF(),writable:!1},$F:{value:d.KF().YF(),writable:!1},ZF:{value:{},writable:!1},QF:{value:{},writable:!1},sk:{value:d.ik(),writable:!1},ek:{value:d.hk(),writable:!1},storage:{value:new self.rk(d),writable:!1},isInWorker:{value:d.nk(),writable:!1},ak:{value:d.lk(),writable:!1},uk:{value:d.ck(),writable:!1},EM:{value:d.fk(),writable:!1},dk:{value:d.pk(),writable:!1},mk:{value:new self.gk(t),writable:!1},yk:{value:new self.wk(t),writable:!1}}),d.Sk().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.Sk().addEventListener("keyup",t=>s.delete(t.key)),d.Kf().addEventListener("window-blur",()=>s.clear()),d.nk()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}bk(t){Object.defineProperties(this.ZF,t)}vk(t){Object.defineProperties(this.QF,t)}addEventListener(t,s){d.Sk().addEventListener(t,s)}removeEventListener(t,s){d.Sk().removeEventListener(t,s)}Mk(t,...s){f.Pe(t);const i=d.xk(),e=i.Gk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.nc())return e.Tk();if(s.length<e._k())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e._k()} expected)`);let h=e.Ik(),r=h.Ck(),n=i.Pk();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.Ck())a.has(l)||(r.push(l),a.add(l));for(const u of i.Rk())a.has(u)||(r.push(u),a.add(u))}const o=h.Ek(r,e.Ak(),e.Fk(),e.Tk(),...s);return o}kk(t){const s=d.Ok().Dk();if(!s)throw new Error("not in a function which returns a value");switch(s.Lk()){case 1:"number"==typeof t&&s.Bk(t);break;case 2:"string"==typeof t&&s.Bk(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.Bk(t)}}signal(t){f.Pe(t),d.xk().Nk(t)}Wk(t){return f.Pe(t),d.xk().jk(t)}Vk(){return[d.lk(),d.ck()]}get isSuspended(){return d.Uk()}get dt(){return d.Hk()}get zk(){return d.Jk()}get qk(){return d.Xk()}get $k(){return d.Yk()}get Kk(){return d.Zk()}set Kk(t){f.Te(t),d.Qk(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.tD()}get framesPerSecond(){return d.tD()}get sD(){return d.iD()}get eD(){return d.hD()}get rD(){return d.nD()}get oD(){return d.aD()}set oD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.lD(t)}get uD(){return d.cD()}set uD(t){f.Te(t),d.fD(t)}get dD(){return d.pD()}set dD(t){d.mD(t)}random(){return d.gD()}get layout(){const t=d.yD();if(t)return t.wD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}SD(t){let s=d.bD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.vD(t))return i.wD();throw new Error("invalid layout")}MD(){return d.bD().xD().map(t=>t.wD())}GD(t){let s=d.bD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.vD(t)))throw new Error("invalid layout");s.TD()||s._D(i)}get keyboard(){const t=d.ID().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get CD(){const t=d.ID().CD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get PD(){const t=d.ID().PD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get RD(){const t=d.ID().RD;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}ED(t,s){f.Pe(t),f.Pe(s),d.AD(t,s)}FD(t){f.Te(t);const s=d.kD(t);return s?s.DD():null}OD(t,e){f.Ze(e);const h=d.LD();for(const s of t){const i=d.BD(s),r=i.ND();p.push([r.WD().HF(),r.jD()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.DD(),s.DD()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.VD(p[t][0]),a=p[t][1],l=o.UD();l[a]!==n&&((l[a]=n).ND().HD(o,!0),o.zD(n),i=!0)}i&&d.JD(),c.Hn(p),c.Hn(m)}}async qD(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.XD("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.XD("runtime","alert",{message:t+(d.nk()?" [via Web Worker]":"")})}$D(t){return f.Te(t),d.YD(t)}KD(t){d.ZD(t)}}}{let s=self.Ws,n=null;self.QD=class{constructor(t){n=t,Object.defineProperties(this,{tO:{value:n.sO("audio/webm; codecs=opus"),writable:!1}})}iO(t){const s=self.hO.eO(t);if(!s)throw new Error("invalid IImageInfo");s.rO(n.nO())}oO(t){return n.Po(t)}aO(t){return n.Ro(t)}lO(t){return n.Eo(t)}uO(t){return n.Ao(t)}cO(t){return n.fO(t)}dO(t){return"flat"===n.pO()&&s._o(t)&&(t=t.toLowerCase()),n.mO(t)}get gO(){return n.yO()}async wO(t,s){if(this.tO)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.nO().SO(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}bO(...t){return n.vO(...t)}MO(t){return n.xO(t)}GO(t){return n.TO(t)}}}{let n=self.Ws,i=self.Ys,o=null;self._O=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.nO(),writable:!1}})}IO(t,s){const i=o.nO(),e=i.BD(t),h=i.BD(s);return o.CO(e,h)}PO(t,s){const i=o.nO(),e=i.BD(t);for(const h of s){const r=i.BD(h);if(o.CO(e,r))return h}return null}RO(t){const s=o.nO().BD(t),i=o.EO(s);return i?i.DD():null}AO(t,s){if(i.Te(t),i.Te(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.FO(t,s)}kO(){return o.DO()}OO(t,s){let i=o.nO(),e;e=Array.isArray(t)?t.map(t=>i.LO(t)):[i.LO(t)];const h=n.Rect.Pl(s),r=[];return o.BO(null,e,h,r),r.map(t=>t.DD())}}}{let s=self.Ws,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.gk=class{constructor(t){i=t,Object.defineProperties(this,{NO:{value:s.fi.Mi,writable:!1},WO:{value:e.get(s.fi.di)||"unknown",writable:!1},jO:{value:s.fi.mi,writable:!1},VO:{value:h.get(s.fi.gi)||"unknown",writable:!1},UO:{value:s.fi.yi,writable:!1},HO:{value:r.get(s.fi.Si)||"unknown",writable:!1}})}get exportType(){let t=i.zO();return i.JO()?t="nwjs":i.qO()?t="windows-webview2":"cordova"===t?t="Android"===s.fi.di?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.$O().XO()}get YO(){return i.$O().KO()}get ZO(){return i.$O().QO()}get tL(){return i.$O().sL()}get iL(){return i.$O().eL()}get hL(){return i.$O().rL()}get devicePixelRatio(){return i.nL()}}}{const ce=self.Ys;self.rk=class{constructor(t){this.oL=t.aL()}getItem(t){return ce.Pe(t),this.oL.getItem(t)}setItem(t,s){return ce.Pe(t),this.oL.setItem(t,s)}removeItem(t){return ce.Pe(t),this.oL.removeItem(t)}clear(){return this.oL.clear()}keys(){return this.oL.keys()}}}{const fe=self.Ws,de=fe.js();self.lL=class{#uL;constructor(){const t=fe.fL.cL(de);this.#uL=t,Object.defineProperties(this,{runtime:{value:t.nO().dL(),writable:!1},pL:{value:t.mL(),writable:!1},gL:{value:t.yL(),writable:!1},wL:{value:t.SL(),writable:!1},bL:{value:t.vL(),writable:!1},ML:{value:t.xL(),writable:!1},GL:{value:t.TL(),writable:!1},_L:{value:t.IL(),writable:!1},CL:{value:t.PL(),writable:!1}})}static RL(t){if(!t)return null;const s=fe.fL.EL(t);return s?s.AL():null}FL(){return this.#uL.DL().kL()}OL(){return this.#uL.LL().DD()}}}{const pe=self.Ws,me=self.Ys,ge=pe.js();self.BL=class{#uL;constructor(){const t=pe.fL.cL(ge);this.#uL=t,Object.defineProperties(this,{name:{value:t.uf(),writable:!1},runtime:{value:t.nO().dL(),writable:!1},NL:{value:t.WL().AL(),writable:!1}}),t.nO().jL(this,t)}addEventListener(t,s){me.Pe(t),me.Ze(s),this.#uL.Sk().addEventListener(t,s)}removeEventListener(t,s){me.Pe(t),me.Ze(s),this.#uL.Sk().removeEventListener(t,s)}VL(){return[...this.instances()]}UL(){return pe.first(this.instances())}HL(){return[...this.zL()]}JL(){return pe.first(this.zL())}qL(t){const s=this.#uL,i=s.nO().XL(t),e=s.$L(i);return e?e.DD():null}*instances(){for(const t of this.#uL.YL())yield t.DD()}*zL(){for(const t of this.#uL.ZL().KL())yield t.DD()}QL(t){me.Ze(t);const s=this.#uL;if(0<s.t5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.s5(t)}Ni(t,s,i,e,h){if(me.Se(s),me.Se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#uL,n=r.nO(),o=n.yD().WD(t);if(!o)throw new Error("invalid layer");const a=n.i5(r,o,s,i,e,h),l=(e&&o.e5(a),n.xk());return l.h5(!0),a.r5(),l.h5(!1),l.n5()||n.bD().o5()||n.a5(),a.DD()}}}{const ye=self.Ys,l=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.l5=class{constructor(t){l.set(this,t);const s=[],i=t.u5(),e=i.c5().length;for(let t=0;t<e;++t)s.push(new self.f5(i,t));Object.defineProperties(this,{name:{value:t.uf(),writable:!1},index:{value:t.HF(),writable:!1},d5:{value:s,writable:!1}})}addEventListener(t,s){ye.Pe(t),ye.Ze(s),l.get(this).Sk().addEventListener(t,s)}removeEventListener(t,s){ye.Pe(t),ye.Ze(s),l.get(this).Sk().removeEventListener(t,s)}get width(){return l.get(this)._m()}set width(t){ye.Te(t),l.get(this).Fm(t)}get height(){return l.get(this).Om()}set height(t){ye.Te(t),l.get(this).Im(t)}p5(t,s){ye.Te(t),ye.Te(s);const i=l.get(this);i.Fm(t),i.Im(s)}getSize(){const t=l.get(this);return[t._m(),t.Om()]}set scale(t){ye.Te(t),l.get(this).m5(t)}get scale(){return l.get(this).g5()}set angle(t){ye.Te(t),l.get(this).y5(t)}get angle(){return l.get(this).w5()}set scrollX(t){ye.Se(t),l.get(this).S5(t)}get scrollX(){return l.get(this).b5()}set scrollY(t){ye.Se(t),l.get(this).v5(t)}get scrollY(){return l.get(this).M5()}scrollTo(t,s){ye.Se(t),ye.Se(s);const i=l.get(this);i.S5(t),i.v5(s)}x5(){const t=l.get(this);return[t.b5(),t.M5()]}G5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.WD(t))?i.T5():null}_5(){return l.get(this).I5().map(t=>t.T5())}*C5(){for(const t of l.get(this).C5())yield t.T5()}P5(t,s,i){const e=l.get(this),h=self.R5,r=(ye.Pe(t),ye.oh(s,h),s?e.nO().E5(s):null),n=we.indexOf(i);if(n<0)throw new Error("invalid location");e.A5(t,r,n)}F5(t,s,i){const e=l.get(this),h=e.nO(),r=self.R5,n=(ye.nh(t,r),h.E5(t));if(!n)throw new Error("invalid layer");ye.oh(s,r);const o=s?h.E5(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.k5(n,o,a)}D5(t){const s=l.get(this),i=self.R5,e=(ye.nh(t,i),s.nO().E5(t));if(!e)throw new Error("invalid layer");const h=e.nO();s.O5(e),h.xk().n5()||h.a5()}L5(){const t=l.get(this),s=t.nO();t.B5(),s.xk().n5()||s.a5()}N5(t,s){ye.Te(t),ye.Te(s),l.get(this).W5(t,s)}j5(){return l.get(this).V5()}set K(t){ye.Pe(t);const s=l.get(this);if("perspective"===t)s.U5();else{if("orthographic"!==t)throw new Error("invalid projection");s.H5()}}get K(){return l.get(this).z5()?"orthographic":"perspective"}}}{const Se=self.Ws,be=self.Ys,f=new WeakMap,ve=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Me=new Map([...ve.entries()].map(t=>[t[1],t[0]])),xe=Se.dr(Se.Yo);self.R5=class{constructor(t){f.set(this,t);const s=[],i=t.u5(),e=i.c5().length;for(let t=0;t<e;++t)s.push(new self.f5(i,t));Object.defineProperties(this,{name:{value:t.uf(),writable:!1},layout:{value:t.vD().wD(),writable:!1},d5:{value:s,writable:!1}}),t.nO().jL(this,t)}get J5(){const t=f.get(this).q5();return t?t.T5():null}*X5(){for(const t of f.get(this).X5())yield t.T5()}*Y5(){for(const t of f.get(this).K5())yield t.T5()}*Z5(){for(const t of f.get(this).K5())for(const s of t.Q5())yield s.T5()}get index(){return f.get(this).HF()}get isVisible(){return f.get(this).tB()}set isVisible(t){f.get(this).sB(t)}get iB(){return f.get(this).eB()}get isInteractive(){return f.get(this).hB()}set isInteractive(t){f.get(this).rB(t)}get nB(){return f.get(this).oB()}set nB(t){f.get(this).aB(!!t)}get lB(){return f.get(this).uB()}get opacity(){return f.get(this).qR()}set opacity(t){t=Se.Gr(+t,0,1),isNaN(t)||f.get(this).YR(t)}set scale(t){be.Te(t),f.get(this).cB(t)}get scale(){return f.get(this).fB()}set scaleRate(t){be.Te(t),f.get(this).dB(t)}get scaleRate(){return f.get(this).pB()}set angle(t){be.Te(t),f.get(this).y5(t)}get angle(){return f.get(this).mB()}set parallaxX(t){be.Te(t),f.get(this).gB(t)}get parallaxX(){return f.get(this).yB()}set parallaxY(t){be.Te(t),f.get(this).wB(t)}get parallaxY(){return f.get(this).SB()}set bB(t){be.Te(t),f.get(this).Bv(t)}get bB(){return f.get(this).Lv()}set vB(t){f.get(this).MB(t)}get vB(){return f.get(this).xB()}set GB(t){f.get(this).TB(t)}get GB(){return f.get(this)._B()}set V3(t){be.Pe(t);const s=ve.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).vv(s)}get V3(){return Me.get(f.get(this).IB())}set backgroundColor(t){if(be.He(t),t.length<3)throw new Error("expected 3 elements");xe.ra(t[0],t[1],t[2]);const s=f.get(this),i=s.CB();i.Ga(xe)||(i.ma(xe),s.nO().JD())}get backgroundColor(){const t=f.get(this).CB();return[t.ga(),t.ya(),t.wa()]}set scrollX(t){be.Se(t);const s=f.get(this);s.PB(!0),s.S5(t)}get scrollX(){return f.get(this).b5()}set scrollY(t){be.Se(t);const s=f.get(this);s.PB(!0),s.v5(t)}get scrollY(){return f.get(this).M5()}scrollTo(t,s){be.Se(t),be.Se(s);const i=f.get(this);i.PB(!0),i.S5(t),i.v5(s)}x5(){const t=f.get(this);return[t.b5(),t.M5()]}RB(){f.get(this).PB(!1)}getViewport(){return f.get(this).EB().Dl()}AB(t,s,i=0){be.Se(t),be.Se(s),be.Se(i);const e=f.get(this),h=e.nO();return e.kB(t-h.DB(),s-h.OB(),i)}LB(t,s,i=0){be.Se(t),be.Se(s),be.Se(i);const e=f.get(this),h=e.nO(),[r,n]=e.BB(t,s,i);return[r+h.DB(),n+h.OB()]}NB(t,s,i=0){return be.Se(t),be.Se(s),be.Se(i),f.get(this).WB(t,s,i)}jB(t,s,i=0){return be.Se(t),be.Se(s),be.Se(i),f.get(this).VB(t,s,i)}get UB(){return f.get(this).HB()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.dr(Ge.Event.Kf),_e.set(t,s)),s};e;const Ge=self.Ws,Te=self.Ys,_e=new WeakMap,Ie=Ge.js();self.zB=class{#uL;constructor(){const t=Ge.fL.cL(Ie),s={runtime:{value:(this.#uL=t).nO().dL(),writable:!1},JB:{value:t.qB().kL(),writable:!1},NL:{value:t.WL().AL(),writable:!1}};t.XB(s),t.$B(s),Object.defineProperties(this,s),t.nO().jL(this,t)}static YB(){return Ge.fL.KB()}ZB(){const t=_e.get(this);t&&(t.pr(),_e.delete(this))}addEventListener(t,s,i){Te.Pe(t),Te.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Pe(t),Te.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}QB(){const t=this.#uL,s=t.nO();s.t4(t),s.xk().n5()||s.bD().o5()||s.xk().s4()||s.a5()}i4(){const t=this.#uL.e4();return t?t.map(t=>t.DD()):[]}*h4(){const t=this.#uL;if(t.r4())for(const s of t.n4())yield s.DD()}get uid(){return this.#uL.o4()}get a4(){return this.#uL.l4()}set Kk(t){Te.Te(t),this.#uL.Qk(t)}get Kk(){return this.#uL.u4()}c4(){this.#uL.f4()}get dt(){const t=this.#uL;return t.nO().Hk(t)}d4(...t){Te.He(t);const s=new Set(t),i=this.#uL.m4();return s.me(i)}g4(t){Te.nh(t,Set),this.#uL.y4(t)}w4(){return new Set(this.#uL.m4())}signal(t){Te.Pe(t);const s=this.#uL;s.nO().xk().S4(s,t)}Wk(t){Te.Pe(t);const s=this.#uL;return s.nO().xk().b4(s,t)}}}{const Ce=self.Ws,Pe=self.Ys,Re=Ce.js();self.v4=class extends self.zB{#uL;#M4=!1;#x4=null;#G4=!1;#T4=null;#_4;#I4;constructor(t){super(),this.#uL=Ce.fL.cL(Re),this.#M4=!1,this.#x4=null,this.#G4=!1,this.#T4=null,this.#_4=t?.domComponentId,this.#I4=t?.wrapperComponentId}ZB(){this.C4(!1),this.P4(!1),super.ZB()}R4(){return Ce.fL.E4()}A4(t){const s=this.#uL;s.nO().F4(t,s)}D4(t){const s=this.#uL;return s.nO().O4(t,s)}L4(t,s){if(Pe.Pe(t),Pe.Ze(s),!this.#_4)throw new Error("no DOM component id set");const i=this.#uL.nO();i.B4(this.#_4,t,s)}N4(t){Pe.He(t);for(const[s,i]of t)this.L4(s,i)}W4(t,s){if(Pe.Pe(t),!this.#_4)throw new Error("no DOM component id set");const i=this.#uL.nO();i.vf(this.#_4,t,s)}j4(t,s){if(Pe.Pe(t),!this.#_4)throw new Error("no DOM component id set");const i=this.#uL.nO();return i.XD(this.#_4,t,s)}V4(t,s){const i=this.#uL.nO();if(!i.nk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#_4,handler:t,data:s,responseId:null});this.W4(t,s)}C4(t){if(this.#M4!==(t=!!t)){this.#M4=t;const s=this.#uL.nO();t?(this.#x4||(this.#x4=()=>this.U4()),s.Kf().addEventListener("tick",this.#x4)):s.Kf().removeEventListener("tick",this.#x4)}}H4(){return this.#M4}U4(){}P4(t){if(this.#G4!==(t=!!t)){this.#G4=t;const s=this.#uL.nO();t?(this.#T4||(this.#T4=()=>this.z4()),s.Kf().addEventListener("tick2",this.#T4)):s.Kf().removeEventListener("tick2",this.#T4)}}J4(){return this.#G4}z4(){}q4(){return[]}X4(){return null}Y4(t){}K4(){if(!this.#I4)throw new Error("no wrapper component id set");const t=this.#uL.nO();return t.Z4(this.#I4)}Q4(t,s){if(Pe.Pe(t),Pe.Ze(s),!this.#I4)throw new Error("no wrapper component id set");const i=this.#uL.nO();i.tN(this.#I4,t,s)}sN(t){Pe.He(t);for(const[s,i]of t)this.Q4(s,i)}iN(t,s){if(!this.#I4)throw new Error("no wrapper component id set");this.runtime.yk.eN(this.#I4,t,s)}hN(t,s){if(this.#I4)return this.runtime.yk.rN(this.#I4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#nN;#oN;constructor(t){super(t);const s=Ee.fL.cL(De),i=s.ND(),e=(this.#nN=s,this.#oN=i,ke.set(this,s),[]),h=i.aN();if(h){const n=i.qB().u5().c5().length;for(let t=0;t<n;++t)e.push(new self.f5(h,t))}const r={d5:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#oN.vD().wD()}get lN(){return this.#oN.WD().T5()}get x(){return this.#oN.Av()}set x(t){t=+t;const s=this.#oN;isNaN(t)||s.Av()===t||(s.Fv(t),s.uN())}get y(){return this.#oN.Dv()}set y(t){t=+t;const s=this.#oN;isNaN(t)||s.Dv()===t||(s.Ov(t),s.uN())}setPosition(t,s){t=+t,s=+s;const i=this.#oN;isNaN(t)||isNaN(s)||i.Av()===t&&i.Dv()===s||(i.cN(t,s),i.uN())}fN(){const t=this.#oN;return[t.Av(),t.Dv()]}dN(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#oN;i.pN(t,s),i.uN()}}get bB(){return this.#oN.Lv()}set bB(t){t=+t;const s=this.#nN,i=this.#oN;isNaN(t)||i.Lv()===t||(i.Bv(t),s.nO().JD())}get mN(){return this.#oN.gN()}get width(){return this.#oN._m()}set width(t){t=+t;const s=this.#oN;isNaN(t)||s._m()===t||(s.Fm(t),s.uN())}get height(){return this.#oN.Om()}set height(t){t=+t;const s=this.#oN;isNaN(t)||s.Om()===t||(s.Im(t),s.uN())}p5(t,s){t=+t,s=+s;const i=this.#oN;isNaN(t)||isNaN(s)||i._m()===t&&i.Om()===s||(i.wC(t,s),i.uN())}getSize(){const t=this.#oN;return[t._m(),t.Om()]}get angle(){return this.#oN.w5()}set angle(t){t=Ee.Tr(+t);const s=this.#oN;isNaN(t)||s.w5()===t||(s.y5(t),s.uN())}get yN(){return Ee.Ir(this.angle)}set yN(t){this.angle=Ee._r(t)}Eu(){return this.#oN.wN().Dl()}SN(){return this.#oN.bN().Tu()}vN(){return this.#oN.MN()}get isVisible(){return this.#oN.eB()}set isVisible(t){t=!!t;const s=this.#nN,i=this.#oN;i.eB()!==t&&(i.sB(t),s.nO().JD())}get opacity(){return this.#oN.qR()}set opacity(t){t=Ee.Gr(+t,0,1);const s=this.#nN,i=this.#oN;isNaN(t)||i.qR()===t||(i.YR(t),s.nO().JD())}set xN(t){if(Ae.He(t),t.length<3)throw new Error("expected 3 elements");Be.ra(t[0],t[1],t[2]);const s=this.#nN,i=this.#oN;i.GN().Ga(Be)||(i.TN(Be),s.nO().JD())}get xN(){const t=this.#oN.GN();return[t.ga(),t.ya(),t.wa()]}set V3(t){Ae.Pe(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#nN,e=this.#oN;e.vv(s),i.nO().JD()}get V3(){return Le.get(this.#oN.IB())}_N(){this.#oN.IN()}CN(){this.#oN.PN()}RN(t){Ae.nh(t,Fe);const s=this.#nN,i=s.nO().E5(t);if(!i)throw new Error("invalid layer");s.ND().EN(i)}AN(t,s){Ae.nh(t,h),this.#oN.FN(ke.get(t),s)}get zIndex(){return this.#oN.jD()}get kN(){return this.#oN.DN()}set kN(t){this.#oN.ON(!!t)}eu(t,s){return Ae.Se(t),Ae.Se(s),this.#oN.LN(+t,+s)}IO(t){Ae.nh(t,h);const s=this.#nN,i=ke.get(t);return s.nO().KF().CO(s,i)}RO(){const t=this.#nN,s=t.nO().KF().EO(t);return s?s.DD():null}getParent(){const t=this.#nN.BN();return t?t.DD():null}NN(){const t=this.#nN.WN();return t?t.DD():null}*jN(){for(const t of this.#nN.jN())yield t.DD()}VN(){return this.#nN.UN()}HN(t){const s=this.#nN.zN(t);return s?s.DD():null}*children(){for(const t of this.#nN.children())yield t.DD()}*JN(){for(const t of this.#nN.JN())yield t.DD()}qN(t,s){Ae.nh(t,h),Ae.Le(s),s=s||{};const i=this.#nN,e=ke.get(t);i.XN(e,s)}removeChild(t){Ae.nh(t,h);const s=this.#nN,i=ke.get(t);s.$N(i)}YN(){const t=this.#nN;if(t.KN()){const s=t.BN();s.$N(t)}}ZN(){const t=this.#oN;return{QN:t.t6(),s6:t.i6(),e6:t.h6(),r6:t.n6(),o6:t.a6(),l6:t.u6(),c6:t.f6(),d6:t.p6(),m6:t.g6()}}y6(t,s){Ae.Te(t),Ae.Te(s),this.#oN.w6(t,s)}S6(){const t=this.#oN;t.b6(),t.uN()}v6(t,s,i){Ae.Te(t),Ae.Te(s),Ae.Oe(i);const e=this.#oN;e.M6(t,s,i)&&e.uN()}x6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#oN;if(o.G6()){const a=o.T6(),l=a.wM(t,s);null!==l&&(i=l.Av(),e=l.Dv(),h=l.Lv(),r=l.Nv(),n=l.jv())}return{x:i,y:e,bB:h,u:r,v:n}}_6(){const t=this.#oN;if(!t.G6())return[0,0];const s=t.T6();return[s.oM(),s.aM()]}}};0;const Ee=self.Ws,Ae=self.Ys,Fe=self.R5,ke=new WeakMap,De=Ee.js(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Be=Ee.dr(Ee.Yo);self.I6=t(self.zB),self.C6=t(self.v4)}{const Ne=self.Ys;self.P6=class extends self.I6{#uL;constructor(){super(),this.#uL=self.zB.YB()}R6(){return this.#uL.A6().E6()}focus(){this.#uL.A6().F6()}blur(){this.#uL.A6().k6()}D6(t,s){Ne.Pe(t),this.#uL.A6().O6(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=We.dr(We.Event.Kf),Ve.set(t,s)),s};e;const We=self.Ws,je=self.Ys,Ve=new WeakMap,Ue=We.js();self.L6=class{#uL;constructor(){const t=We.fL.cL(Ue),s={runtime:{value:(this.#uL=t).nO().dL(),writable:!1},behavior:{value:t.N6().B6(),writable:!1},W6:{value:t.V6().j6(),writable:!1}};Object.defineProperties(this,s),t.nO().jL(this,t)}static YB(){return We.fL.KB()}get U6(){return this.#uL.H6().DD()}ZB(){const t=Ve.get(this);t&&(t.pr(),Ve.delete(this))}addEventListener(t,s,i){je.Pe(t),je.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.Pe(t),je.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Ws,ze=He.js();self.z6=class{constructor(){const t=He.fL.cL(ze),s={runtime:{value:t.nO().dL(),writable:!1},behavior:{value:t.N6().B6(),writable:!1},name:{value:t.uf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ws,qe=Je.js();self.J6=class{#uL;constructor(){const t=Je.fL.cL(qe),s={runtime:{value:(this.#uL=t).nO().dL(),writable:!1}};Object.defineProperties(this,s)}VL(){return this.#uL.KL().map(t=>t.DD())}static RL(t){if(!t)return null;const s=Je.fL.q6(t);return s?s.B6():null}}}{const Xe=self.Ws,$e=self.Ys,Ye=Xe.dr(Xe.Yo);self.f5=class{#uL;constructor(t,s){this.#uL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#uL.c5();return t[this.index].uf()}get isActive(){return this.#uL.X6(this.index)}set isActive(t){t=!!t;const s=this.#uL;s.X6(this.index)!==t&&(s.Y6(this.index,t),s.K6(),s.nO().JD())}setParameter(t,s){$e.Te(t),t=Math.floor(+t);const i=this.#uL,e=i.Z6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.Yo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ye.ra(s[0],s[1],s[2]),s=Ye}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.Q6(this.index,t,s);h&&i.X6(this.index)&&i.nO().JD()}getParameter(t){$e.Te(t),t=Math.floor(+t);const s=this.#uL,i=s.Z6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.Yo?[i.ga(),i.ya(),i.wa()]:i}}}self.tW=class{#uL;constructor(t){this.#uL=t,Object.defineProperties(this,{name:{value:t.uf(),writable:!1}})}get speed(){return this.#uL.sW()}get iW(){return this.#uL.eW()}get repeatCount(){return this.#uL.hW()}get rW(){return this.#uL.nW()}get oW(){return this.#uL.aW()}get frameCount(){return this.#uL.lW()}uW(){return this.#uL.cW().map(t=>t.fW())}*frames(){for(const t of this.#uL.cW())yield t.fW()}};self.hO=class{#uL;constructor(t){this.#uL=t}static eO(t){return t.#uL}get width(){return this.#uL._m()}get height(){return this.#uL.Om()}getSize(){const t=this.#uL;return[t._m(),t.Om()]}dW(t){return t.pW(this)}mW(){return this.#uL.$C().Dl()}};{const Ke=self.Ys;self.gW=class extends self.hO{#uL;constructor(t){super(t.yW()),this.#uL=t,Object.defineProperties(this,{duration:{value:t.wW(),writable:!1},SW:{value:t.bW(),writable:!1},vW:{value:t.MW(),writable:!1}})}xW(){const t=this.#uL;return[t.bW(),t.MW()]}GW(){return this.#uL.TW()}_W(t){return this.IW(t)[0]}PW(t){return this.IW(t)[1]}IW(t){let s=this.#uL,i=null;if("number"==typeof t)i=s.RW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.EW(t)}return i?[i.Av(),i.Dv()]:this.xW()}AW(){const t=this.#uL.FW();return t?t.qu():0}kW(t){return this.DW(t)[0]}OW(t){return this.DW(t)[1]}DW(t){Ke.Te(t),t=Math.floor(t);const s=this.#uL.FW();if(!s||t<0||t>=s.qu())return[0,0];const i=s.Ju(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#uL.LW()}}}{let s=function(t){const s=Qe.get(t);if(s.BW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Ys,Qe=new WeakMap;self.NW=class{constructor(t){Qe.set(this,t),t.nO().jL(this,t)}pause(){s(this).WW()}resume(){s(this).jW()}stop(){s(this).w0()}d4(t){return s(this).VW(t)}set time(t){Ze.Te(t),s(this).UW(t)}get time(){return s(this).xA()}set totalTime(t){Ze.Te(t),s(this).HW(t)}get totalTime(){return s(this).zW()}set iW(t){s(this).JW(!!t)}get iW(){return s(this).qW()}set oW(t){s(this).XW(!!t)}get oW(){return s(this).$W()}set playbackRate(t){Ze.Te(t),s(this).YW(t)}get playbackRate(){return s(this).KW()}get progress(){const t=s(this);return t.xA()/t.zW()}get tags(){return s(this).ZW()}get finished(){return s(this).QW()}get isPlaying(){return s(this).IsPlaying()}get tj(){return s(this).sj()}get ij(){return Qe.get(this).BW()}}}{let i=new WeakMap;self.ej=class extends self.NW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.uf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.BW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ys),h=new WeakMap,r=new WeakMap,n=null;self.hj=class extends self.NW{constructor(t,s,i){super(t),n=n||i.rj,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.nj(t)}oj(t){e.Pe(t);const s=self._c.Uc(n(t));i(this).aj(s)}get U6(){const t=i(this).lj();return t?t.DD():null}get uj(){return i(this).cj()}set uj(t){i(this).fj(!!t)}get value(){const t=i(this);if("value"!==t.dj())throw new Error("not a value tween");return t.mj("value").pj()}}}self.gj=class extends self.lL{constructor(){super()}};{const th=self.Ws,sh=self.Ys,ih=th.js();self.yj=class extends self.gj{#uL;#_4;#wj=0;#Sj=new Map;constructor(t){if(super(),this.#uL=th.fL.cL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#_4=t.domComponentId,this.bj("elem-focused",t=>t.vj()),this.bj("elem-blurred",t=>{t&&t.Mj()})}xj(t){const s=this.#wj++;return this.#Sj.set(s,t),s}Gj(t){this.#Sj.delete(t)}bj(t,i){const s=this.#uL.nO();s.B4(this.#_4,t,t=>{const s=this.#Sj.get(t.elementId);i(s,t)})}Tj(t){sh.He(t);for(const[s,i]of t)this.Tj(s,i)}}}{const eh=self.Ws,hh=(new WeakMap,eh.js());self._j=class extends self.BL{#uL;constructor(){super(),this.#uL=eh.fL.cL(hh)}Ij(){}Cj(){return this.#uL.yW().Pj()}Rj(t){}Ej(t){}Aj(){}Fj(t){}}}{const rh=self.Ws,nh=(new WeakMap,rh.js());self.kj=class extends self.C6{#uL;#Dj=null;#Oj=null;constructor(t){super(t),this.#uL=rh.fL.cL(nh)}ZB(){if(super.ZB(),this.#Dj){const t=this.#uL.nO().Kf();t.removeEventListener("renderercontextlost",this.#Dj),t.removeEventListener("renderercontextrestored",this.#Oj),this.#Dj=null,this.#Oj=null}}Lj(){if(!this.#Dj){this.#Dj=()=>this.Bj(),this.#Oj=()=>this.Nj();const t=this.#uL.nO().Kf();t.addEventListener("renderercontextlost",this.#Dj),t.addEventListener("renderercontextrestored",this.#Oj)}}Bj(){}Nj(){}Wj(t){}}}{const oh=self.Ws,ah=oh.dr(oh.Rect),lh=new WeakMap,uh=oh.js();self.jj=class extends self.kj{#Vj=-1;#Uj=!0;#Hj=!1;#zj=!1;#Jj=-.2;#qj=oh.dr(oh.Rect,0,0,-1,-1);#Xj=0;#$j=0;#Yj=-1;#Kj=-1;#Zj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.fL.cL(uh),i=(lh.set(this,s),this.#Vj=this.NL.xj(this),s.nO().$O());this.#Xj=i.Qj(),this.#$j=i.tV(),this.C4(!0)}ZB(){super.ZB(),this.NL.Gj(this.#Vj),this.sV("destroy"),this.#Vj=-1,lh.delete(this)}iV(){const t=lh.get(this).nO();if(t.nk())throw new Error("not valid in worker mode");return this.eV("get-element")}sV(t,s){(s=s||{}).elementId=this.#Vj,this.W4(t,s)}eV(t,s){return(s=s||{}).elementId=this.#Vj,this.V4(t,s)}hV(t,s){return(s=s||{}).elementId=this.#Vj,this.j4(t,s)}rV(t){t=t||{};const s=lh.get(this).ND();t.elementId=this.#Vj,t.isVisible=s.eB(),t.htmlIndex=s.WD().nV(),t.htmlZIndex=s.oV(),Object.assign(t,this.aV()),this.#Uj=!!t.isVisible,this.V4("create",t),this.lV(!0)}uV(t){this.#Uj!==(t=!!t)&&(this.#Uj=t,this.sV("set-visible",{isVisible:t}))}U4(){this.lV(!1)}cV(){const t=lh.get(this).nO(),s=t.$O().fV();return"Android"===oh.fi.di&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}lV(u){const c=lh.get(this);if(!c.dV()){let t=c.ND(),s=t.WD(),i=t.wN(),[e,h]=s.BB(i.El(),i.Al()),[r,n]=s.BB(i.Fl(),i.kl()),o=c.nO().$O(),a=o.QO(),l=o.sL();if(t.eB()&&s.eB())if(!this.cV()&&(r<=0||n<=0||a<=e||l<=h))this.uV(!1);else{ah.set(e,h,r,n);const f=o.Qj(),d=o.tV(),p=s.nV(),m=t.oV();if(!u&&ah.equals(this.#qj)&&this.#Xj===f&&this.#$j===d&&this.#Yj===p&&this.#Kj===m)this.uV(!0);else{this.#qj.I(ah),this.#Xj=f,this.#$j=d,this.#Yj=p,this.#Kj=m,this.uV(!0);let t=null;this.#zj&&(t=s.pV()+this.#Jj),this.sV("update-position",{left:Math.round(this.#qj.El()),top:Math.round(this.#qj.Al()),width:Math.round(this.#qj.width()),height:Math.round(this.#qj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.uV(!1)}}mV(){this.eV("focus",{focus:!0})}gV(){this.eV("focus",{focus:!1})}vj(){this.#Hj=!0}Mj(){this.#Hj=!1}yV(){return this.#Hj}wV(t,s){this.postToDOMElement("set-css-style",{prop:oh.qo(t),val:s})}SV(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}bV(t){this.postToDOMElement("remove-attribute",{name:t})}vV(){this.#Zj||(this.#Zj=!0,Promise.resolve().then(()=>{this.#Zj=!1,this.sV("update-state",this.aV())}))}aV(){}MV(){return this.#Vj}}}self.xV=class extends self.J6{constructor(){super()}};self.GV=class extends globalThis.z6{constructor(){super()}Ij(){}};{const ch=self.Ws,fh=new WeakMap,dh=ch.js();self.TV=class extends self.L6{#M4=!1;#G4=!1;#_V=!1;constructor(){super(),fh.set(this,ch.fL.cL(dh))}ZB(){super.ZB(),this.C4(!1),this.P4(!1),this.IV(!1),fh.delete(this)}R4(){return ch.fL.E4()}CV(){}A4(t){const s=fh.get(this);s.nO().F4(t,s.H6(),s.V6())}D4(t){const s=fh.get(this);return s.nO().O4(t,s.H6(),s.V6())}C4(t){if(this.#M4!==(t=!!t)){this.#M4=t;const s=fh.get(this).nO();t?s.PV(this):s.RV(this)}}H4(){return this.#M4}U4(){}P4(t){if(this.#G4!==(t=!!t)){this.#G4=t;const s=fh.get(this).nO();t?s.EV(this):s.AV(this)}}J4(){return this.#G4}z4(){}IV(t){if(this.#_V!==(t=!!t)){this.#_V=t;const s=fh.get(this).nO();t?s.FV(this):s.kV(this)}}DV(){return this.#_V}OV(){}q4(){return[]}X4(){return null}Y4(t){}}}{let e=self.Ys,h=null;self.wk=class{constructor(t){h=t}KD(t){h.ZD(t)}eN(t,s,i){e.Pe(t),e.Pe(s),e.Je(i),h.LV(t,s,i)}rN(t,s,i){return e.Pe(t),e.Pe(s),e.Je(i),h.BV(t,s,i)}NV(t){return e.Re(t),new self.WV(h,t)}set jV(t){h.VV(!!t)}get jV(){return h.UV()}HV(t){h.zV(!!t)}JV(t){e.Se(t);const s=h.qV(t);return s?s.kL():null}}}self.WV=class{#XV;#$V;#YV;#KV;#ZV;#QV;constructor(t,s){const i=(this.#XV=t).xk(),e=t.Pk(),h=(this.#$V=e,this.#YV=e.t8(),t.Ok()),r=(this.#KV=h.s8(),this.#ZV=h.i8(e),i.e8()),n=r.i8();this.#QV=n,s&&n.h8(s),t.r8(!1)}n8(){const t=this.#XV.xk(),s=this.#YV,i=this.#QV;t.o8(s),this.#$V.a8(this.#KV,this.#ZV),t.l8(s),i.u8(i.HF()+1)}get c8(){return this.#QV.f8()}release(){const t=this.#XV,s=t.Ok(),i=t.xk().e8();t.r8(!0),i.d8(),s.d8()}};{let d=self.Ws,h=self.Ys,p=null,r=null;self.p8=class{constructor(t,s){r=t,p=s}m8(){p.eE()}g8(t){p.sE(t)}y8(){p.aS()}w8(){p.iS()}S8(){p.mS()}setColor(t){p.$R(t[0],t[1],t[2],t[3])}b8(t,s,i,e){p.$R(t,s,i,e)}v8(){p.KR()}M8(t){p.YR(t)}x8(t){p.OS(t)}G8(){p.LS()}rect(t){p.nE(t.left,t.top,t.right,t.bottom)}T8(t,s,i,e){p.nE(t,s,i,e)}_8(t){p.ou(d.ou._u(t))}I8(t,s,i,e,h,r,n,o){p.vb(t,s,i,e,h,r,n,o)}C8(t,s){p.qS(d.ou._u(t),d.Rect.Ol(s))}P8(t,s){p.lE(d.ou._u(t),d.ou._u(s))}E8(t,s,i,e,h,r,n,o,a,l,u,c,f){p.uE(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.Ol(f))}A8(t,s,i,e,h,r,n,o,a,l,u,c,f){p.VS(t,s,i,e,h,r,n,o,a,l,u,c,d.ou._u(f))}F8(t,s,i){p.cE(t,s,i)}k8(t){p.bb(t)}line(t,s,i,e){p.jm(t,s,i,e)}D8(t,s,i,e,h,r){p.US(t,s,i,e,h,r)}O8(t,s,i,e){p.XS(t,s,i,e)}L8(t){p.ZS(d.Rect.Ol(t))}B8(t){p.QS(d.ou._u(t))}N8(t){p.rb(t)}W8(){p.nb()}j8(t){p.ub(t)}V8(){p.mb()}U8(t){h.oh(t,self.H8);const s=t?r.E5(t):null;p.QR(s)}z8(t,s){const i=self.hO.eO(t);if(i)return i.J8(p,{PM:s?.PM??"clamp-to-edge",RM:s?.RM??"clamp-to-edge",EM:s?.EM??"trilinear",kM:s?.kM??!0});throw new Error("invalid IImageInfo")}q8(t){const s=self.hO.eO(t);if(!s)throw new Error("invalid IImageInfo");s.WI()}pW(t){const s=self.hO.eO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.K2();return self.H8.X8(r,i)}Y8(t,s,i){h.Te(t),h.Te(s);const e=p.W2(t,s,{PM:i?.PM??"clamp-to-edge",RM:i?.RM??"clamp-to-edge",EM:i?.EM??"trilinear",kM:i?.kM??!0});return self.H8.X8(r,e)}K8(t,s,i){h.nh(s,self.H8);const e=r.E5(s);p.XC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.nh(t,self.H8);const s=r.E5(t);p.H2(s)}Z8(){const t=p.Ob();return new self.Q8(r,t)}tU(){r.$O().sU(p)}iU(t){h.nh(t,globalThis.R5);const s=r.E5(t);s.eU(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.H8=class{constructor(t,s){ph.set(this,{runtime:t,hU:s}),mh.set(s,this),t.jL(this,s),Object.defineProperties(this,{width:{value:s._m(),writable:!1},height:{value:s.Om(),writable:!1}})}static X8(t,s){if(!s)return null;const i=mh.get(s);return i||new self.H8(t,s)}}}{let e=function(t){return yh.get(t).rU};e;const gh=self.Ys,yh=new WeakMap;self.Q8=class{constructor(t,s){yh.set(this,{runtime:t,rU:s}),t.jL(this,s)}release(){e(this).pr()}set nU(t){gh.Pe(t),e(this).XI(t)}get nU(){return e(this).Y_()}set oU(t){gh.Te(t),e(this).$I(t)}get oU(){return e(this).YI()}set lineHeight(t){gh.Te(t),e(this).ZI(t)}get lineHeight(){return e(this).QI()}set aU(t){e(this).tC(t)}get aU(){return e(this).sC()}set lU(t){e(this).iC(t)}get lU(){return e(this).eC()}setColor(t){gh.He(t),this.uU(t[0],t[1],t[2])}uU(t,s,i){e(this).aC(t,s,i)}cU(t){gh.Pe(t),e(this).Mv(t)}set fU(t){e(this).lC(t)}get fU(){return e(this).uC()}set verticalAlign(t){e(this).cC(t)}get verticalAlign(){return e(this).fC()}set dU(t){e(this).dC(t)}get dU(){return e(this).pC()}set pU(t){e(this).mC(t)}get pU(){return e(this).gC()}set text(t){gh.Pe(t),e(this).Mf(t)}get text(){return e(this).yC()}p5(t,s,i){gh.Te(t),gh.Te(s),gh.Te(i),e(this).wC(t,s,i)}dW(){const{runtime:t,rU:s}=yh.get(this),i=s.K2();return self.H8.X8(t,i)}mW(){return e(this).$C().Dl()}mU(t){gh.Ze(t),e(this).VI=t}gU(){e(this).WI()}get yU(){return e(this).bC()}get wU(){return e(this).MC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Sh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Ws,wh=new Set(["local","remote"]),Sh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.SU=class extends d.ur{constructor(t,s){super();const i=s.exportType,e=(this.wf=t,this.bU="folders",this.vU=new Map,this.MU="cordova"===i,this.xU=!!s.isiOSCordova,this.GU=!!s.isFileProtocol,this.TU=s.swClientId,this._U=s.supportedAudioFormats||{},this.IU=new Map,this.CU=!1,this.PU=s.scriptFolder,this.RU="",this.EU="",this.AU="",this.FU=s.fileMap||new Map,this.kU=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.DU=e?"remote":"local",this.OU=new Map,this.LU=[],this.BU=[],this.NU=!1,this.WU=0,this.jU=0,this.VU=0,this.UU=!1,this.HU=d.dr(d.Fd,()=>this.zU(),50),this.JU=d.dr(d.Gd,Math.max(d.hardwareConcurrency,8)),this.qU=d.dr(d.Gd,20),this.XU=new self.QD(this)}pr(){for(const t of this.OU.values())t.pr();this.OU.clear(),d.Hn(this.BU),this.wf=null}nO(){return this.wf}$U(t){this.bU=t}pO(){return this.bU}YU(){return this.PU}KU(t){this.RU=t}yO(){return this.RU}ZU(t){this.EU=t}QU(){return this.EU}tH(t){this.AU=t}sH(){return this.AU}iH(){return this.GU}Eo(t,s){return s=s||this.DU,d._o(t)?("flat"===this.bU&&(t=t.toLowerCase()),this.MU&&this.GU?this.eH(t):"playable-ad-single-file"===this.wf.zO()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.JU:this.qU).xc(()=>d.Eo(t))):d.Eo(t)}Ao(t){return d._o(t)?("flat"===this.bU&&(t=t.toLowerCase()),this.MU&&this.GU?this.hH(t):"playable-ad-single-file"===this.wf.zO()?d.ko(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.DU?this.JU:this.qU).xc(()=>d.Ao(t))):d.Ao(t)}Po(t){return d._o(t)?("flat"===this.bU&&(t=t.toLowerCase()),this.MU&&this.GU?this.rH(t):"playable-ad-single-file"===this.wf.zO()?d.Do(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.DU?this.JU:this.qU).xc(()=>d.Po(t))):d.Po(t)}async Ro(t){const s=await this.Po(t);return JSON.parse(s)}nH(t,s){return"flat"===this.bU&&(t=t.toLowerCase()),this.wf.XD("runtime","cordova-fetch-local-file",{filename:t,as:s})}rH(t){return this.nH(t,"text")}async eH(t){const s=await this.nH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async oH(t){"flat"===this.bU&&(t=t.toLowerCase());let s=this.vU.get(t);if(!s){const i=await this.eH(t);s=URL.createObjectURL(i),this.vU.set(t,s)}return s}hH(t){return this.nH(t,"buffer")}mO(t){"flat"===this.bU&&(t=t.toLowerCase());let s=this.RU+t;return"Gecko"===d.fi.Si&&"preview"===this.wf.zO()?this.aH(s):s}fO(t){return d.To(t)?Promise.resolve(t):this.MU&&this.GU?this.oH(t):"playable-ad-single-file"===this.wf.zO()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.bU&&(t=t.toLowerCase()),Promise.resolve(t))}lH(s){if(d.To(s)||"preview"!==this.wf.zO()||!this.TU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.TU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}uH(t){return this.fO(t)}cH(t){if(t.fH&&!wh.has(t.fH))throw new Error("invalid load policy");let s=this.OU.get(t.url);return s||(s=d.dr(d.dH,this,{url:t.url,size:t.size||0,fH:t.fH||this.DU}),this.OU.set(s.pH(),s),this.NU)||(this.WU+=s.mc(),this.BU.push(s.mH().then(()=>this.gH(s.mc())))),s}yH(t){this.OU.delete(t.pH())}async wH(){try{await Promise.all(this.BU),this.VU=1}catch(t){console.error("Error loading: ",t),this.UU=!0,this.zU()}}SH(){this.NU=!0}bH(){return this.UU}gH(t){this.jU+=t,this.HU.zd()}zU(){const t=d.dr(d.Event,"loadingprogress");this.VU=d.Gr(this.jU/this.WU,0,1),t.progress=this.VU,this.wf.Kf().dispatchEvent(t)}vH(){return this.VU}MH(t){d.Xn(this.LU,t),this.LU.length&&this.BU.push(this.xH())}async xH(){const t=[],s=[];for(const[i,e,h]of this.LU)this.WU+=h,t.push(this.GH(i,e,s).then(()=>this.gH(h)));await Promise.all(t),this.wf.nk()&&0<s.length&&await this.wf.XD("runtime","load-webfonts",{webfonts:s})}async GH(s,i,e){try{let t=await this.fO(i);"Gecko"===d.fi.Si&&(s=`'${s}'`),("Gecko"===d.fi.Si&&"preview"===this.wf.zO()||"playable-ad-single-file"===this.wf.zO())&&(t=this.aH(t));const h=new FontFace(s,`url('${t}')`);(this.wf.nk()?self:document).fonts.add(h),await h.load(),this.wf.nk()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}sO(t){return!!this._U[t]}TH(t,s){this.CU=!!s;for(const[i,e,h]of t)this.IU.set(i,{fileName:i,_H:e.map(t=>({type:t[0],IH:t[1],CH:i+t[1],fileSize:t[2]})),PH:h})}RH(t){"flat"===this.bU&&(t=t.toLowerCase());const s=this.IU.get(t);if(!s)return null;let i=null;for(const e of s._H)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.sO(e.type))return e;return i}EH(t){const s=this.RH(t);return s?{url:this.mO(s.CH),type:s.type}:null}AH(){if(this.CU){const t=[];for(const s of this.IU.values())if(!s.PH){const i=this.RH(s.fileName);i&&t.push({FH:s.fileName,url:this.mO(i.CH),type:i.type,fileSize:i.fileSize})}return t}return[]}kH(t){return"preview"===this.wf.zO()&&(t=new URL(t,location.href).toString()),this.FU.get(t)||null}aH(t){let s=this.kU.get(t);if(!s){const i=this.kH(t);if(!i)return t;s=URL.createObjectURL(i),this.kU.set(t,s)}return s}qF(){return this.XU}async vO(...t){const s=await Promise.all(t.map(t=>this.fO(t)));if(this.wf.nk())if(1===t.length){const i=t[0];await import((d._o(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d._o(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async xO(t){if(WebAssembly.compileStreaming){const s=await this.fO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Ao(t);return WebAssembly.compile(i)}}async TO(t){const s=await this.fO(t);return this.wf.XD("runtime","add-stylesheet",{url:s})}}}{const bh=self.Ws;bh.DH=class extends bh.ur{constructor(t,s){super(),this.OH=t,this.wf=t.nO(),this.LH=s.url||"",this.BH=s.size,this.NH=s.fH,this.WH=s.blob||null,this.jH=!!this.WH,this.Zg=null}pr(){this.Zg=null,this.OH=null,this.wf=null,this.WH=null}pH(){return this.LH}mc(){return this.BH}mH(){return"local"===this.NH||this.WH?(this.jH=!0,Promise.resolve()):(this.Zg||(this.Zg=this.OH.Eo(this.LH,this.NH).then(t=>(this.jH=!0,this.Zg=null,this.WH=t)).catch(t=>{console.error("Error loading resource: ",t),this.Zg=null})),this.Zg)}VH(){return this.jH}UH(){return this.WH?Promise.resolve(this.WH):this.Zg||this.OH.Eo(this.LH,this.NH)}}}{const ar=self.Ws,lr=new ar.Gd,ur=new Set;ar.dH=class extends ar.DH{constructor(t,s){super(t,s),this.HH=null,this.zH=null,this._1=0,this.JH=-1,this.qH=-1,ur.add(this)}pr(){if(0!==this._1)throw new Error("released image asset which still has texture references");this.OH.yH(this),this.HH=null,ur.delete(this),super.pr()}static XH(){for(const t of ur)t.HH=null,t.zH=null,t._1=0}J8(t,s){return s=s||{},this._1++,this.zH?Promise.resolve(this.zH):(this.HH||(s.AM=this.wf.$O().$H(),this.HH=this.YH(t,s)),this.HH)}async YH(s,i){try{const e=await this.UH();return 0===this._1?this.HH=null:await lr.xc(async()=>{const t=await s.OE(e,i);return this.HH=null,0===this._1?(s.H2(t),null):(this.zH=t,this.JH=t._m(),this.qH=t.Om(),this.zH)})}catch(t){throw console.error("Failed to load texture: ",t),t}}WI(){if(this._1<=0)throw new Error("texture released too many times");if(this._1--,0===this._1&&this.zH){const t=this.zH.Kb();t.H2(this.zH),this.zH=null}}KH(){return this._1}K2(){return this.zH}_m(){return this.JH}Om(){return this.qH}async ZH(){const t=await this.UH();return ar.Ui.ImageBitmap?createImageBitmap(t):ar.Lo(t)}}}{let t=function(t,s){return t.ND().QH()-s.ND().QH()};t;const cr=self.Ws;cr.t7=class extends cr.ur{constructor(t,s,i){super(),this.s7=t,this.al=s,this.ll=i,this.i7=[],this.e7=!0,this.h7=new Set,this.r7=!1}pr(){cr.Hn(this.i7),this.h7.clear(),this.s7=null}w0(){cr.Hn(this.i7),this.e7=!0,this.h7.clear(),this.r7=!1}n7(){this.e7=!1}uc(){if(this.i7.length){if(this.i7.length>this.h7.size)return!1;this.o7()}return!0}a7(t){this.h7.has(t)?(this.h7.delete(t),0===this.h7.size&&(this.r7=!1)):(this.i7.push(t),this.e7=1===this.i7.length)}R0(t){this.h7.add(t),this.r7=!0,50<=this.h7.size&&this.o7()}o7(){this.r7&&(this.i7.length===this.h7.size?this.w0():(cr.Qn(this.i7,this.h7),this.h7.clear(),this.r7=!1))}l7(){this.e7||(this.i7.sort(t),this.e7=!0)}u7(t){this.o7(),this.l7(),this.i7.length&&t.push(this.i7)}}}{const fr=self.Ws;fr.c7=class extends fr.ur{constructor(t,s){super(),this.f7=t,this.d7=s,this.p7=fr.dr(fr.oc)}pr(){this.p7.pr(),this.p7=null}m7(t,s,i){let e=this.p7.ri(t,s);return e||(i?(e=fr.dr(fr.t7,this,t,s),this.p7.Set(t,s,e),e):null)}g7(t){return Math.floor(t/this.f7)}y7(t){return Math.floor(t/this.d7)}w7(e,h,r){if(h)for(let i=h.El(),t=h.Fl();i<=t;++i)for(let t=h.Al(),s=h.kl();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.m7(i,t,!1);n&&(n.R0(e),n.uc())&&this.p7.cc(i,t)}if(r)for(let i=r.El(),t=r.Fl();i<=t;++i)for(let t=r.Al(),s=r.kl();t<=s;++t)h&&h.eu(i,t)||this.m7(i,t,!0).a7(e)}S7(t,s){let i=this.g7(t.El()),e=this.y7(t.Al()),h=this.g7(t.Fl()),r=this.y7(t.kl());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.m7(i,t,!1);n&&n.u7(s)}}b7(t){let s=t.El(),i=t.Al(),e=t.Fl(),h=t.kl();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.m7(s,t,!1);r&&r.n7()}}}}{let n=function(t,s){return t.ND().QH()-s.ND().QH()},t=function(t,s){return t.ND().Lv()-s.ND().Lv()};n,t;const S=self.Ws,dr=new S.Rect,pr=new S.ou,mr=[],gr=(new S.Rect,new S.Rect,self.xs),Gh=gr.Es,Vh=gr.As,xh=gr.Is,yr=xh.create(),wr=Gh.create(),Sr=Vh.create(),br=Gh.create(),vr=Gh.create(),Mr=Gh.create(),xr=S.dr(S.ol),Gr=(S.dr(S.Rect),[]),Tr=[],_r=[],Ir={name:"",sid:-1,v7:!1,isVisible:!0,isInteractive:!0,nB:!1,backgroundColor:[1,1,1,1],vB:!0,M7:[1,1],opacity:1,GB:!1,x7:!1,G7:!1,T7:!1,scaleRate:1,V3:0,bB:0,_7:[],I7:[],C7:[]};S.P7=class extends S.ur{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.R7=t,this.wf=t.nO(),this.E7=s,this.vr=i.name,this.wy=-1,this.A7=!!i.nB,this.F7=-1,this.k7=i.sid,this.D7=!!i.v7,this.O7=!!i.isVisible,this.L7=!!i.isInteractive,this.B7=S.dr(S.Yo),this.B7.Ka(i.backgroundColor),this.N7=!!i.vB,this.W7=i.M7[0],this.j7=i.M7[1],this.wv=S.dr(S.Yo,1,1,1,i.opacity),this.V7=S.dr(S.Yo),this.U7=!!i.GB,this.H7=!!i.x7,this.z7=!!i.G7,this.J7=!!i.T7,this.q7=i.scaleRate,this.yv=i.V3,this.X7=null,this.Y7=1,this.Sv=i.bB,this.K7=0,this.Z7=0,this.Q7=0,this.sz=!1,this.kP=S.dr(S.Rect),this.iz=S.dr(S.Rect),this.ez=S.dr(S.Rect),this.hz=!0,this.F2=xh.create(),this.rz=!0,this.I3=xh.create(),this.nz=!0,this.oz=S.dr(S.Ty.Py),this.az=!0,this.lz=[],this.uz=i._7,this.cz=[],this.fz=[],this.pz=new Map,this.i7=[],this.mz=!1,this.gz=!1,this.yz=!1;const h=this.wf.$O();this.wz=S.dr(S.Sz,this,i.I7),this.WF=S.dr(S.Ty.OA,h.bz(),{TA:(t,s)=>{const i=s.AF(),e=i.AE();t.Mv(i.vz()),t.WE(e),t.jE(e),h.Mz(e)},IA:t=>this.u5().xz(t)}),this.Gz=!0,this.Tz=!0,this._z=null,this.Iz=[],this.Cz=!1,this.Pz=S.dr(S.Rect,0,0,-1,-1),this.Rz=S.dr(S.Rect,0,0,-1,-1),this.Ez=new self.R5(this),this.Az(),this.Fz()&&(this._z=S.dr(S.c7,this.wf.lk(),this.wf.ck())),this.kz=i.C7.map(t=>S.P7.Dz(this.R7,this,t))}Oz(){for(const t of this.uz){const s=this.wf.Lz(t[1]);this.R7.Bz(s),s.Nz()||(s.Wz(t),s.jz(this.wy)),this.cz.push(t),this.pz.set(t[2],t)}S.Xn(this.lz,this.cz),this.uz=null}static Dz(t,s,i){return S.dr(S.P7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],nB:i[19],backgroundColor:i[4].map(t=>t/255),vB:i[5],M7:[i[6],i[7]],opacity:i[8],GB:i[9],x7:i[17],G7:i[18],T7:i[10],scaleRate:i[11],V3:i[12],bB:i[16],_7:i[14],I7:i[15],C7:i[20]})}pr(){for(const t of this.kz)t.pr();S.Hn(this.kz);for(const s of this.i7)this.wf.t4(s);S.Hn(this.i7),this.wz.pr(),this.wz=null,this.WF.pr(),this.WF=null,this.Ez=null,this.E7=null,this.R7=null,this.wf=null}Vz(t){return this.pz.get(t)}Uz(h){let r=this.R7.zz(),n=0,o=this.cz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.wf.Lz(t[1]),i=!0;if(!s.Jz()||r){const a=this.wf.qz(t,this,!0);h.push(a),s.Xz()&&(i=!1,this.fz.push(a.o4()))}i&&(o[n]=o[e],++n)}S.Un(o,n),this.wf.a5(),this.zD()}$z(t,s){if(!t.WL().yL())throw new Error("instance is not of world type");const i=t.ND();if(i.WD()!==this)throw new Error("instance added to wrong layer");this.i7.push(t),0!==i.Lv()&&(this.yz=!0),s&&this.Fz()&&t.ND().uN(),this.zD(t)}Yz(t){this.i7.includes(t)||(this.i7.push(t),0!==t.ND().Lv()&&(this.yz=!0),this.zD(t))}Kz(t,s){const i=t.ND();if(i.WD()!==this)throw new Error("instance added to wrong layer");this.i7.unshift(t),0!==i.Lv()&&(this.yz=!0),this.zD(t),s&&this.Fz()&&t.ND().uN()}Zz(t,s){const i=this.i7.indexOf(t);i<0||(s&&this.Fz()&&t.ND().Qz(),this.i7.splice(i,1),this.zD(t),this.t9())}s9(){this.yz=!0}t9(){0===this.i7.length&&(this.yz=!1)}i9(t){if(t){const s=new Set;for(const i of this.i7){const e=i.ND().QH();0<=e&&s.add(e)}let t=-1;for(const h of this.i7){const r=h.ND();if(!(0<=r.QH())){for(++t;s.has(t);)++t;r.e9(t)}}}this.i7.sort(n)}h9(){}r9(){for(const t of this.i7)t.qB().Xz()||this.wf.t4(t);this.wf.a5(),S.Hn(this.i7),this.yz=!1,this.zD()}n9(s,t,i,e,h,r){const n=this.wf.xk(),o=this.wf.o9(),a=s.a9(),l=[];for(const u of this.cz){const c=u[0],f=c[0],d=c[1];if(t.eu(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.l9(p))continue}let t=h;if(!t){const y=this.wf.LD();t=this.vD()===y?this:(t=y.u9(this.uf()))||y.VD(this.HF())}const m=this.wf.qz(u,t,!1,void 0,void 0,!1,r),g=(t.e5(m),m.ND());g.pN(i,e),g.uN(),n.h5(!0),m.r5(),n.h5(!1),l.push(m)}}return l}t5(){return this.i7.length}vD(){return this.R7}uf(){return this.vr}c9(t){this.wy=t}HF(){return this.wy}f9(t){this.F7=t}nV(){return this.F7}oB(){return this.A7}aB(t){this.A7!==(t=!!t)&&(this.A7=t,this.R7.d9(),this.wf.JD())}p9(){let t=this.q5();return(t?t.K5():this.vD().m9()).indexOf(this)}g9(){return this.k7}nO(){return this.wf}y9(){return this.D7}w9(){for(const t of this.X5())if(t.y9())return!0;return!1}nL(){return this.wf.nL()}u5(){return this.wz}UF(){return this.S9(),this.WF}S9(){const t=this.b9();if(this.Gz||t!==this.Tz||this.WF.C3()){const s=this.u5().v9();this.WF.P3(s.map(t=>t.IG()),{PA:s.map(t=>t.HF()),RA:!t,DA:!0}),this.Gz=!1,this.Tz=t}}K6(){this.u5().K6(),this.Gz=!0}Fz(){return this.J7&&!this.z7}M9(){return this._z}x9(){this.Cz=!1}eB(){for(const t of this.G9())if(!t.tB())return!1;return!0}tB(){return this.O7}sB(t){this.O7!==(t=!!t)&&(this.O7=t,this.wf.JD())}rB(t){this.L7=!!t}hB(){return this.L7}uB(){for(const t of this.G9())if(!t.hB())return!1;return!0}PB(t){if(this.sz!==(t=!!t)){if(this.sz=t){const s=this.vD();this.Z7=s.b5(),this.Q7=s.M5()}this.T9(),this.wf.JD()}}_9(){return this.sz}S5(t){const s=this.vD(),i=s.I9(),e=s.C9();this.Z7!==(t=(t=e<t?e:t)<i?i:t)&&(this.Z7=t,this._9())&&(this.T9(),this.wf.JD())}v5(t){const s=this.vD(),i=s.P9(),e=s.R9();this.Q7!==(t=(t=e<t?e:t)<i?i:t)&&(this.Q7=t,this._9())&&(this.T9(),this.wf.JD())}b5(){return this._9()?this.Z7:this.vD().b5()}M5(){return this._9()?this.Q7:this.vD().M5()}EB(){return this.E9(),this.kP}A9(){return this.E9(),this.iz}F9(){return this.E9(),this.ez}V5(){const t=this.vD();return[t.k9(),t.D9()]}kw(t){return this.wf.kw(t)}O9(c,e){const h=this.A9();if(0===c)e.I(h);else{let o=h.Nl(),a=h.Wl(),t=this.L9(c),s=h.width()/t,i=h.height()/t,[l,u]=this.V5();if(.5!==l||.5!==u){let t=this.B9(),s=this.wf,i=this.kw()/t,e=(l-.5)*s.N9()/i,h=(u-.5)*s.W9()/i,r=this.w5(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.fl(),h=xr.pl()),S.Br(t,0,c));o+=S.Lt(e,0,n),a+=S.Lt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}qR(){return this.wv.Sa()}YR(t){t=S.Gr(t,0,1),this.wv.Sa()!==t&&(this.wv.fa(t),this.Az(),this.wf.JD())}Az(){this.V7.I(this.wv),this.V7.Ra()}vz(){return this.V7}b9(){return this.wv._a(1,1,1,1)}pB(){return this.q7}dB(t){this.q7!==t&&(this.q7=t,this.T9(),this.wf.JD())}yB(){return this.W7}SB(){return this.j7}j9(t,s){this.W7===t&&this.j7===s||(this.W7=t,this.j7=s,this.T9(),this.wf.JD())}gB(t){this.j9(t,this.SB())}wB(t){this.j9(this.yB(),t)}Bv(t){this.Sv!==t&&(this.Sv=t,this.wf.JD())}Lv(){return this.Sv}y5(t){t=S.Tr(t),this.K7!==t&&(this.K7=t,this.T9(),this.wf.JD())}w5(){return S.Tr(this.R7.w5()+this.K7)}mB(){return this.K7}V9(){return 0<this.i7.length}UD(){return this.i7}U9(){return this.H9()&&this.z7?(S.Xn(_r,this.UD()),_r.sort((t,s)=>this.z9(t,s)),_r):this.UD()}J9(t){S.Kh(t,this.U9());for(const s of this.kz)s.eB()&&0<s.qR()&&s.J9(t)}z9(t,s){const i=this.vD().q9(),e=i[0],h=i[1],r=i[2],n=t.ND(),o=s.ND(),a=n.Av()-e,l=n.Dv()-h,u=n.Lv()-r,c=o.Av()-e,f=o.Dv()-h,d=o.Lv()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}CB(){return this.B7}xB(){return this.N7}MB(t){this.N7!==(t=!!t)&&(this.N7=t,this.wf.JD())}_B(){return this.U7}TB(t){this.U7!==(t=!!t)&&(this.U7=t,this.wf.JD())}X9(){return!this.nO().Y9()||!this.H7}H9(){return!this.X9()}K9(){return this.H9()&&this.vD().Z9()}Q9(){if(!this.K9())return!1;for(const t of this.kz)if(!t.Q9())return!1;return!0}vv(t){this.yv!==t&&(this.yv=t,this.wf.JD())}IB(){return this.yv}tJ(){return!this.E7}q5(){return this.E7}sJ(t){this.E7=t}K5(){return this.kz}iJ(){return 0<this.kz.length}eJ(t,s=!0){s?this.kz.push(t):this.kz.unshift(t)}hJ(t,s,i){let e=this.kz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.kz.splice(e,0,t)}rJ(t){const s=this.kz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.kz.splice(s,1)}nJ(){for(const t of this.kz)if(t.oJ())return!0;return!1}*Q5(){for(const t of this.kz)yield*t.Q5();yield this}*X5(){let t=this.q5();for(;t;)yield t,t=t.q5()}*G9(){yield this,yield*this.X5()}aJ(t){for(const s of this.X5())if(s===t)return!0;return!1}lJ(t){return this===t||this.W7===t.W7&&this.j7===t.j7&&this.Y7===t.Y7&&this.q7===t.q7&&this.K7===t.K7&&this.b5()===t.b5()&&this.M5()===t.M5()}uJ(){return{parallaxX:this.yB(),parallaxY:this.SB(),scale:this.fB(),scaleRate:this.pB(),angle:this.mB(),hasOwnScroll:this._9(),scrollX:this.b5(),scrollY:this.M5()}}cJ(t){this.j9(t.parallaxX,t.parallaxY),this.cB(t.scale),this.dB(t.scaleRate),this.y5(t.angle),this.PB(t.hasOwnScroll),this.S5(t.scrollX),this.v5(t.scrollY),this.E9()}fJ(t){if(0!==t.size){const s=S.Qn(this.i7,t);0<s&&(this.t9(),this.zD())}}zD(t){this.mz=!1,this.Cz=!1,t&&!t.qB().WL().SL()||(this.gz=!1)}dJ(){if(!this.mz){if(this.i7.sort(t),this.Fz())for(let t=0,s=this.i7.length;t<s;++t){const i=this.i7[t].ND();i.e9(t),this._z.b7(i.pJ())}else for(let t=0,s=this.i7.length;t<s;++t)this.i7[t].ND().e9(t);this.mz=!0}}mJ(){if(!this.gz){let t=this.R7.gJ(this.nV()),s=t.map(t=>[...t.Q5()]).flat(),i=0;for(const e of s){for(const h of e.UD())h.qB().WL().SL()&&h.ND().yJ(i++);e.wJ()}}}wJ(){this.gz=!0}SJ(){return{isVisible:this.eB(),opacity:this.qR(),isInteractive:this.hB()}}bJ(t,s,i){const e=t.ND(),h=s.ND();if(e.WD()!==this||h.WD()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.jD(),n=h.jD();return r!==n+(i?1:-1)&&(S.$n(this.i7,r),r<n&&n--,i&&n++,n===this.i7.length?this.i7.push(t):this.i7.splice(n,0,t),this.zD(t),!0)}vJ(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.ND().QH()<a.ND().QH()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}MJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.vJ(h,r))}return e%2==1&&i.push(s[e-1]),i}xJ(t){for(;1<t.length;)t=this.MJ(t);return t[0]}GJ(){return this.dJ(),S.Hn(mr),this._z.S7(this.EB(),mr),mr.length?1===mr.length?mr[0]:this.xJ(mr):[]}oJ(){return this.eB()&&0<this.qR()&&this.TJ()}TJ(){if(this.V9()||!this.xB())return!0;for(const t of this.kz)if(t.TJ())return!0;return!1}_J(){return this._B()||!this.b9()||0!==this.IB()||this.wz.IJ()}CJ(){if(this._J())return!0;for(const t of this.kz)if(t.CJ())return!0;return!1}AE(){return this.X7}L9(t){if(this.R7.z5())return 1;{const s=this.PJ();return s/(s-t)}}RJ(t){const s=this.wf.HB();if(this.R7.z5())return s;{const i=this.PJ(),e=this.kw();return e/Math.abs(i-t)*s}}T9(){this.nz=!0,this.az=!0,this.hz=!0}EJ(t){return this.nz&&(this.AJ(t,this.I3,0,0,null),this.nz=!1),this.I3}B9(t){return this.kw(t)/this.FJ()}PJ(){return this.K9()?this.vD().q9()[2]:this.B9()}kJ(){if(this.K9()){const t=this.vD().q9();return[t[0],t[1],t[2]]}return this.DJ()}DJ(t=0,s=0,h=0){let r=this.wf,i=this.vD(),e=r.OJ(),n=r.LJ(),o=(this.b5()-e)*this.W7+e,a=(this.M5()-n)*this.j7+n,l=(r.pk()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.z5()?this.kw(h):this.B9(h),[f,d]=this.V5();if(.5!==f||.5!==d){let t=this.kw(h)/c,s=(f-.5)*r.N9()/t,i=(d-.5)*r.W9()/t,e=this.w5();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.fl(),i=xr.pl()),l+=s,u+=i}return[l,u,c]}AJ(t,s,i,e,h){const r=this.wf,n=this.vD();if(this.K9()){Gh.I(br,n.q9()),Gh.I(vr,n.BJ()),Gh.I(Mr,n.NJ());const o=r.OJ(),a=r.LJ(),l=vr[0]-br[0],u=vr[1]-br[1],c=vr[2]-br[2];br[0]=(br[0]-o)*this.W7+o,br[1]=(br[1]-a)*this.j7+a,br[2]*=Math.max(this.W7,this.j7),vr[0]=br[0]+l,vr[1]=br[1]+u,vr[2]=br[2]+c}else{const[f,d,p]=this.DJ(i,e,h),m=(Gh.set(br,f,d,p),Gh.set(vr,f,d,p-100),this.w5());0===m?Gh.set(Mr,0,1,0):Gh.set(Mr,Math.sin(m),Math.cos(m),0)}t.Yw(s,br,vr,Mr,h||r.W9())}WJ(){this.rz=!0,this.az=!0,this.hz=!0}jJ(t){return this.rz&&(this.VJ(t),this.rz=!1),this.F2}VJ(t){const s=this.wf.$O(),[i,e]=this.V5();if(this.R7.z5())t.$w(this.F2,s.UJ(),s.HJ());else if(.5===i&&.5===e)xh.I(this.F2,s.zJ());else{const h=s.UJ(),r=s.HJ();t.qw(this.F2,h/r,i,e)}}eU(t,s=!0,i=0,e=0,h=0){s&&t.OR(this.jJ(t));let r;r=0===i&&0===e&&0===h?this.EJ(t):(this.AJ(t,yr,i,e,h),yr),t.VR(r)}JJ(t){this.eU(t),t.kS(this.Lv())}qJ(t){let s=null;if(t.Eb()&&this.wf.XJ()){const i=this.wf.$O().$J(this);i&&(s=i.vP(),t.qE(s))}return s}YJ(t){if(t.Xw()&&this.wf.XJ()){const s=2*(this.HF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}bM(t,s,i){let e=this.wf.$O(),h=this._J(),r=null,n=this.qJ(t);if(this.YJ(t),h){const o={EM:this.wf.fk(),b2:!0,KJ:!!t.Xw()&&this.wf.ZJ()};"low"===e.QJ()&&(o.width=e.UJ(),o.height=e.HJ()),r=this.wf.tq(o),this.X7=r,t.BE(r),this.xB()&&t.TE(0,0,0,0)}else this.X7=s,t.BE(s);if(this.xB()||t.lc(this.B7),this.R7.sq(t,this.X7,this.kz,h&&this.xB()),this.YJ(t),this.eU(t),t.kS(this.Lv()),t.CE(this.H9()),this.FJ()>Number.EPSILON){this.dJ();const a=this.Fz()&&0===this.Lv()&&!this.yz;this.K9()?this.iq(t):a?this.eq(t):this.hq(t,this.U9())}t.kS(0),t.OS(0),h&&(t.CE(!1),this.rq(t,r,s,i)),n&&t.$E(n),this.X7=null}hq(i,e){let h=this.EB(),r=this.X7,n=this.vD().z5(),o=this.vD().nq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).ND();u.eB()&&u.oq(h,o,n)&&this.aq(l,u,i,r)}}}iq(e){const h=this.X7,r=this.lq(),n=Gr,o=Tr,a=this.U9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.ND();if(u.eB()&&u.uq(r)){(!l.cq()||0<u.fq())&&o.push(l);const c=l.ND().gN();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.ND();if(d.eB()&&d.uq(r)){if(d.gN()!==c)break;(f.cq()?(0<d.fq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].pq()){this.mq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.ND();m.gq(!0),this.aq(p,m,e,h),m.gq(!1)}}else{this.aq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.ND(),w=y.WD();w.aq(g,y,e,h)}}}s=t,S.Hn(n),S.Hn(o)}else++s}}mq(i,e){const h=this.X7;i.UE();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.ND();n.yq(!0),this.wq(r,n,i)}i.HE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.ND();this.aq(o,a,i,h),a.yq(!1)}i.JE()}eq(t){let s=this._z,i=this.Rz,e=this.Pz,h=this.EB(),r;i.set(s.g7(h.El()),s.y7(h.Al()),s.g7(h.Fl()),s.y7(h.kl())),this.Cz&&i.equals(e)?r=this.Iz:(r=this.GJ(),this.Cz=!0,e.I(i)),this.hq(t,r),r!==this.Iz&&S.Xn(this.Iz,r)}aq(t,s,i,e){s.IJ()?this.Sq(t,s,i,e):this.wq(t,s,i)}wq(t,s,i){const e=s.bq();i.yS()!==e&&e.bv(),t.bM(i)}Sq(t,s,i,e){this.vq(t,s,i,e,null)&&this.eU(i)}vq(t,s,i,e,h){const r=s.aN().UF();return r.W3(i,e,{j3:t,V3:s.IB(),devicePixelRatio:this.wf.Mq(),time:t.xq(),U3:this.wf.Gq()*this.FJ(),H3:this.w5(),fF:s.wN(),dF:r.RF()?null:this.Tq(s),Y3:h&&h.Y3,K3:h&&h.K3,Z3:h&&h.Z3,Q3:h&&h.Q3}),i.kS(this.Lv()),r.HR()}rq(t,s,i,e){const h=this.wz.v9(),r=this.wf;0===h.length?(t.BE(i),t.iS(),e&&0===this.yv&&this.b9()?t.NE(s):(t.vv(this.yv),t.Mv(this.V7),t.WE(s)),t.jE(s),r.Mz(s)):this.UF().W3(t,i,{j3:this,V3:this.IB(),devicePixelRatio:r.Mq(),U3:r.Gq()*this.FJ(),H3:this.w5(),fF:this.EB(),dF:null,CA:!0})}fB(){return this.Y7}cB(t){this.Y7!==t&&(this.Y7=t,this.R7._q(),this.T9(),this.wf.JD())}HB(){return this.FJ()*this.wf.HB()}pV(){return this.FJ()*this.wf.pV()}FJ(){return(this.Y7*this.R7.g5()-1)*this.q7+1}E9(){if(this.hz){this.hz=!1;let t=this.wf.OJ(),s=this.wf.LJ(),i=(this.b5()-t)*this.W7+t,e=(this.M5()-s)*this.j7+s,h=this.FJ(),r=this.wf.N9()/h,n=this.wf.W9()/h,o=i-r/2,a=e-n/2;this.wf.pk()&&(o=Math.round(o),a=Math.round(a));const l=this.iz,u=(l.set(o,a,o+r,a+n),this.w5()),c=(0!==u&&(dr.I(l),dr.offset(-l.Nl(),-l.Wl()),pr.Pu(dr,u),pr.Eu(dr),dr.offset(l.Nl(),l.Wl()),l.I(dr)),this.Sv);this.O9(c,this.kP),this.K9()?this.Iq(c,this.ez):this.ez.I(this.kP)}}Iq(t,s){let i=this.wf.$O(),e=i.QO(),h=i.sL(),[r,n]=this.kB(0,0,t),[o,a]=this.kB(e,0,t),[l,u]=this.kB(e,h,t),[c,f]=this.kB(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}kB(t,s,i=0){return this.Cq(t,s,i,this.pV())}WB(t,s,i=0){return this.Cq(t,s,i,this.HB()*this.nL())}Cq(t,s,i,e){const h=this.wf,r=h.Kb(),n=this.FJ(),o=h.N9()/n,a=h.W9()/n,l=Sr,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.jJ(r)),c=this.EJ(r),f=wr,d=S.Ty.Cy(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}Pq(t,s){const i=this.Y7,e=this.q7,h=this.W7,r=this.j7,n=this.K7,o=(this.Y7=1,this.q7=1,this.W7=1,this.j7=1,this.K7=0,this.T9(),this.kB(t,s));return this.Y7=i,this.q7=e,this.W7=h,this.j7=r,this.K7=n,this.T9(),o}BB(t,s,i=0){return this.Rq(t,s,i,this.pV())}VB(t,s,i=0){return this.Rq(t,s,i,this.HB()*this.nL())}Rq(t,s,i,e){const h=this.wf,r=h.Kb(),n=this.FJ(),o=h.N9()/n,a=h.W9()/n,l=Sr,u=(Vh.set(l,0,0,o,a),this.jJ(r)),c=this.EJ(r),f=wr,d=S.Ty._y(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Eq(t,s){return t*=this.HB()*this.nL(),0!==s&&(t*=this.L9(s)),t}Tq(t){const s=t.wN(),i=t.gN(),e=t.fq(),l=i+e,u=s.El(),c=s.Al(),f=s.Fl(),d=s.kl();if(this.K9()){if(this.Aq(u,c,i)||this.Aq(f,c,i)||this.Aq(f,d,i)||this.Aq(u,d,i))return null;if(0<e&&(this.Aq(u,c,l)||this.Aq(f,c,l)||this.Aq(f,d,l)||this.Aq(u,d,l)))return null}else if(l>=this.B9())return null;let[p,m]=this.VB(u,c,i),[g,y]=this.VB(f,d,i);if(0!==this.w5()||0<e||this.K9()){const[w,S]=this.VB(f,c,i),[b,v]=this.VB(u,d,i);if(0<e){let[t,s]=this.VB(u,c,l),[i,e]=this.VB(f,c,l),[h,r]=this.VB(f,d,l),[n,o]=this.VB(u,d,l),a=Math.min(p,g,w,b,t,i,h,n);g=Math.max(p,g,w,b,t,i,h,n),p=a,a=Math.min(m,y,S,v,s,e,r,o),y=Math.max(m,y,S,v,s,e,r,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return dr.set(p,m,g,y),dr}lq(){return this.az&&(this.Fq(),this.az=!1),this.oz}Fq(){const t=this.wf.Kb(),s=this.jJ(t),i=this.EJ(t);this.oz.Oy(i,s)}Aq(t,s,i){return this.lq().By(t,s,i)}kq(){const t={d:this.y9(),s:this.fB(),a:this.mB(),v:this.tB(),i:this.hB(),html:this.oB(),bc:this.B7.toJSON(),t:this.xB(),sx:this.Z7,sy:this.Q7,hosp:this.sz,px:this.yB(),py:this.SB(),c:this.wv.toJSON(),sr:this.pB(),fx:this.wz.zv(),cg:this.fz};return t}Dq(t){this.D7=!!t.d,this.Y7=t.s,this.K7=t.a,this.O7=!!t.v,this.L7=!t.hasOwnProperty("i")||t.i,this.A7=!!t.html,this.B7.Ka(t.bc),this.N7=!!t.t,t.hasOwnProperty("sx")&&(this.Z7=t.sx),t.hasOwnProperty("sy")&&(this.Q7=t.sy),t.hasOwnProperty("hosp")&&(this.sz=!!t.hosp),this.W7=t.px,this.j7=t.py,this.wv.Ka(t.c),this.Az(),this.q7=t.sr,S.Xn(this.fz,t.cg),S.Xn(this.cz,this.lz);let i=new Set(this.fz),e=0;for(let t=0,s=this.cz.length;t<s;++t)i.has(this.cz[t][2])||(this.cz[e]=this.cz[t],++e);S.Un(this.cz,e),this.wz.Jv(t.fx),this.Gz=!0}Oq(){this.i9(!1),this.zD(),this.T9(),this.WJ()}T5(){return this.Ez}e5(t,s=!1){if(this.i7.includes(t))s&&this.i7.sort((t,s)=>{const i=t.ND().Lq(),e=s.ND().Lq();return i-e});else if(t.Bq()){const i=[...t.JN()];i.push(t),i.sort((t,s)=>{const i=t.ND().Lq(),e=s.ND().Lq();return i-e});for(const e of i)if(e.r4())for(const h of e.n4())if(!i.includes(h)){const r=[...h.JN()];r.push(h),r.sort((t,s)=>{const i=t.ND().Lq(),e=s.ND().Lq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.WL().yL()&&this.$z(n,!0)}else if(t.WL().yL()&&this.$z(t,!0),t.r4())for(const o of t.n4()){const a=[...o.JN()];if(a.push(o),a.sort((t,s)=>{const i=t.ND().Lq(),e=s.ND().Lq();return i-e}),a&&a.length)for(const l of a)l.WL().yL()&&this.$z(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.JJ(s),I=t)},M=(l,v,self.Ws),e=self.C3Debugger,h=(M.dr(M.Rect),M.dr(M.Rect),M.dr(M.Rect)),x=M.dr(M.Yo),t=self.xs,u=t.Es,a=[],G=[],T=[],_=[],I=null;M.Nq=class extends M.ur{constructor(t,s,i){super(),this.Wq=t,this.wf=t.nO(),this.vr=i[0],this.jq=i[1],this.Vq=i[2],this.ag=i[1],this.lg=i[2],this.Uq=!!i[3],this.Hq=!!i[4],this.zq=i[5],this.Jq=i[6],this.qq=i[7],this.Xq=null,this.k7=i[8],this.wy=s,this.Z7=0,this.Q7=0,this.Y7=1,this.K7=0,this.$q=new Set,this.Yq=new Set,this.Kq=new Set,this.Zq=[],this.Qq=[],this.tX=new Map,this.sX=new Map,this.iX=[],this.eX=!1,this.hX=u.create(),this.rX=u.create(),this.nX=u.create(),this.aX=[],this.lX=[],this.uX=new Map,this.cX=new Map,this.fX=-1;const h=this.wf.$O();this.wz=M.dr(M.Sz,this,i[11]),this.WF=M.dr(M.Ty.OA,h.bz(),{TA:(t,s)=>{const i=s.AF(),e=i.AE();t.KR(),t.WE(e),t.jE(e),h.Mz(e)},IA:t=>this.u5().xz(t)}),this.Gz=!0,this.dX=!1,this.X7=null,this.pX={},this.mX=new Map,this.gX=!0,this.yX=new self.l5(this),this.wX=M.dr(M.Event.Kf);for(const e of i[9])this.aX.push(M.P7.Dz(this,null,e));this.SX();for(const r of this.C5())r.Oz();for(const n of i[10]){const o=this.wf.Lz(n[1]);if(!o)throw new Error("missing nonworld object class");o.Nz()||o.Wz(n),this.iX.push(n),this.Bz(o)}}pr(){for(const t of this.lX)t.pr();M.Hn(this.lX),this.Kq.clear(),this.Xq=null,this.Wq=null,this.wf=null}nO(){return this.wf}uf(){return this.vr}g9(){return this.k7}HF(){return this.wy}u5(){return this.wz}UF(){return this.S9(),this.WF}S9(){const t="low"===this.wf.$O().QJ();if(this.Gz||this.dX!==t||this.WF.C3()){const s=this.u5().v9();this.WF.P3(s.map(t=>t.IG()),{PA:s.map(t=>t.HF()),EA:t,DA:!0}),this.Gz=!1,this.dX=t}}K6(){this.u5().K6(),this.Gz=!0}bX(){let i=this.lX[0].FJ();for(let t=1,s=this.lX.length;t<s;++t){const e=this.lX[t];0===e.yB()&&0===e.SB()||(i=Math.min(i,e.FJ()))}return i}vX(){return.5*this.wf.N9()/this.bX()}MX(){return.5*this.wf.W9()/this.bX()}I9(){return this.xX()?-1/0:this.vX()}C9(){return this.xX()?1/0:this._m()-this.vX()}P9(){return this.xX()?-1/0:this.MX()}R9(){return this.xX()?1/0:this.Om()-this.MX()}S5(t){const s=this.I9(),i=this.C9();this.Z7!==(t=(t=i<t?i:t)<s?s:t)&&(this.Z7=t,this.GX(),this.wf.JD())}b5(){return this.Z7}v5(t){const s=this.P9(),i=this.R9();this.Q7!==(t=(t=i<t?i:t)<s?s:t)&&(this.Q7=t,this.GX(),this.wf.JD())}M5(){return this.Q7}xX(){return this.Uq}_q(){this.S5(this.b5()),this.v5(this.M5());for(const t of this.lX)t._9()&&(t.S5(t.b5()),t.v5(t.M5()))}W5(t,s){this.zq===t&&this.Jq===s||(this.zq=t,this.Jq=s,this.TX()&&(this._X(),this.GX(),this.wf.JD()))}k9(){return this.z5()?.5:this.zq}D9(){return this.z5()?.5:this.Jq}nq(){const t=this.k9(),s=this.D9();return t<0||1<t||s<0||1<s}U5(){this.Hq&&(this.Hq=!1,this._X(),this.GX(),this.wf.JD())}H5(){this.Hq||(this.Hq=!0,this._X(),this.GX(),this.wf.JD())}z5(){return this.Hq}TX(){return!this.z5()}IX(t){this.eX!==(t=!!t)&&(this.eX=t,this.GX(),this.wf.JD())}Z9(){return this.eX}CX(t,s,i,e,h,r,n,o,a){l(this.hX,t,s,i)&&l(this.rX,e,h,r)&&l(this.nX,n,o,a)||(u.set(this.hX,t,s,i),u.set(this.rX,e,h,r),u.set(this.nX,n,o,a),this.PX())}PX(){this.GX(),this.wf.JD()}q9(){return this.hX}BJ(){return this.rX}NJ(){return this.nX}g5(){return this.Y7}m5(t){this.Y7!==t&&(this.Y7=t,this.GX(),this._q(),this.wf.JD())}y5(t){t=M.Tr(t),this.K7!==t&&(this.K7=t,this.GX(),this.wf.JD())}w5(){return this.K7}_m(){return this.ag}Fm(t){!isFinite(t)||t<1||(this.ag=t)}Om(){return this.lg}Im(t){!isFinite(t)||t<1||(this.lg=t)}RX(){return this.Xq}m9(){return this.aX}*C5(){for(const t of this.aX)yield*t.Q5()}I5(){return this.lX}EX(){return this.lX.length}WD(t){return"number"==typeof t?this.VD(t):this.u9(t.toString())}VD(t){return t=M.Gr(Math.floor(t),0,this.lX.length-1),this.lX[t]}u9(t){return this.uX.get(t.toLowerCase())||null}AX(t){return!!this.u9(t)}FX(t){return this.cX.get(t)||null}_X(){for(const t of this.lX)t.WJ()}GX(){for(const t of this.lX)t.T9()}A5(t,s,i){if(this.AX(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.q5(),h=M.dr(M.P7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),v7:!0});this.kX(h,s,i),this.nO().JD(),this.d9()}k5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.DX(t),this.kX(t,s,i),this.nO().JD(),this.d9())}O5(t){if(this.DX(t)){const s=this.wf.xk();s.h5(!0),t.pr(),s.h5(!1),this.nO().JD(),this.d9()}}B5(){const t=new Set;for(const s of this.C5())s.y9()&&!s.w9()&&t.add(s);if(0!==t.size){const i=this.wf.xk();i.h5(!0);for(const e of t)this.DX(e),e.pr();i.h5(!1),this.nO().JD(),this.d9()}}kX(s,i,e){if(2<=e)if(i){if(i===s||i.aJ(s))throw new Error(`cannot move layer '${s.uf()}' to sub-layer of itself`);i.eJ(s,2===e),s.sJ(i)}else 2===e?this.aX.push(s):this.aX.unshift(s),s.sJ(null);else{const t=i.q5();if(t){if(i.aJ(s))throw new Error(`cannot move layer '${s.uf()}' to sub-layer of itself`);t.hJ(s,i,0===e),s.sJ(t)}else{let t=this.aX.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.aX.splice(t,0,s),s.sJ(null)}}}DX(t){const s=t.q5();if(s)return s.rJ(t),!0;if(1<this.aX.length){const i=this.aX.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.aX.splice(i,1),!0}return!1}SX(){this.lX=[...this.C5()],this.uX.clear(),this.cX.clear();for(let t=0,s=this.lX.length;t<s;++t){const i=this.lX[t];i.c9(t),this.uX.set(i.uf().toLowerCase(),i),this.cX.set(i.g9(),i)}}OX(){let t=0;for(const s of this.aX){for(const i of s.Q5())i.f9(t);s.oB()&&t++}}LX(){return this.aX.at(-1).nV()+1}async d9(){this.SX(),this.OX(),this.fX=this.LX()}BX(){return this.fX}NX(){this.fX=-1}gJ(t){const s=[];for(const i of this.aX){const e=i.nV();if(e===t)s.push(i);else if(t<e)break}return s}uJ(){return{scrollX:this.b5(),scrollY:this.M5(),scale:this.g5(),angle:this.w5(),vpX:this.k9(),vpY:this.D9()}}cJ(t){this.S5(t.scrollX),this.v5(t.scrollY),this.m5(t.scale),this.y5(t.angle),this.W5(t.vpX,t.vpY)}WX(){let t=this.aX.filter(t=>t.oJ())[0];for(;t;){if(!t.xB())return x.ma(t.CB()),x.fa(1),x;if(t._J())return x.ea(0,0,0,0),x;t=t.K5().filter(t=>t.oJ())[0]}return x.ea(0,0,0,0),x}zz(){return this.gX}jX(){return[...this.$q]}Bz(t){if(t.r4())for(const s of t.UX().VX())this.$q.add(s);else this.$q.add(t)}HX(){return[...this.Yq]}zX(t,s){if(t===this||!s)return Promise.resolve();t&&(M.Vo(this.Yq,t.Yq),t.Yq.clear());const i=[];for(const e of this.$q)this.Yq.has(e)||(i.push(e.JX(s)),this.Yq.add(e));return Promise.all(i)}async qX(t){if(t.a9())throw new Error("cannot load textures for family");const s=this.wf.Kb();if(s&&!s.qC()&&!this.Yq.has(t)){this.Yq.add(t);const i=t.JX(s);this.XX(i),await i,t.$X(),this.wf.JD()}}XX(t){this.Kq.add(t),t.then(()=>this.Kq.delete(t)).catch(()=>this.Kq.delete(t))}YX(){return Promise.all([...this.Kq])}KX(t){if(t.a9()||0<t.t5())throw new Error("cannot unload textures");const s=this.wf.Kb();s&&this.Yq.has(t)&&(this.Yq.delete(t),t.ZX(s))}QX(t,s){if(t!==this&&s)for(const i of this.Yq)i.Xz()||t.$q.has(i)||(i.ZX(),this.Yq.delete(i))}t$(){this.Yq.clear()}async s$(t){const s=this.wf,i=this.Wq,e=s.xk(),h=(this.qq&&(this.Xq=e.i$(this.qq),this.Xq.e$()),i.h$(this),this.ag=this.jq,this.lg=this.Vq,this.Z7=s.lk()/2,this.Q7=s.ck()/2,this._q(),this._X(),this.GX(),this.OX(),await this.wf.$O().r$(this.LX(),!0),this.n$(t),this.wf.o$(!0),this.a$(),this.gX||this.l$(),this.u$(this.Zq),this.u$(this.Qq),this.c$(),i.f$(),s.a5(),this.wf.o$(!1),this.wf.d$());if(await Promise.all(h),M.Hn(h),!s.p$()){for(const r of this.Zq)r.m$();for(const n of this.Qq)n.g$(this.tX,this.sX);for(const[o,a]of Object.entries(this.pX)){const l=this.wf.qV(parseInt(o,10));l&&!l.a9()&&l.Jz()&&M.Hn(a)}for(const u of this.Zq)u.y$();for(const c of this.Qq)c.y$()}M.Hn(this.Zq),M.Hn(this.Qq),this.tX.clear(),this.sX.clear(),await Promise.all([...this.$q].map(t=>t.w$(this.wf.Kb()))),t&&(s.Kf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.S$(new M.Event("beforeprojectstart"))),await this.b$(new M.Event("beforeanylayoutstart")),s.Kf().dispatchEvent(new M.Event("beforelayoutstart")),await this.S$(new M.Event("beforelayoutstart")),s.p$()||await s.O4(M.G$.x$.M$.v$,null,null),s.Kf().dispatchEvent(new M.Event("afterlayoutstart")),await this.S$(new M.Event("afterlayoutstart")),await this.b$(new M.Event("afteranylayoutstart")),t&&(s.Kf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.S$(new M.Event("afterprojectstart"))),e.T$(i),await this.YX(),this.gX=!1}n$(t){for(const s of this.wf.o9())if(!s.a9()&&s.yL())for(const i of s.KL()){const e=i.ND(),h=e.WD(),r=M.Gr(h.HF(),0,this.lX.length-1),n=this.lX[r];e.HD(n,!0),n.Yz(i)}if(!t)for(const o of this.lX)o.i9(!1)}a$(){for(const t of this.lX)t.Uz(this.Zq),t.h9()}l$(){let s=!1;for(const[t,i]of Object.entries(this.pX)){const e=this.wf.qV(parseInt(t,10));if(e&&!e.a9()&&e.Jz())for(const h of i){let t=null;if(!e.yL()||(t=h.hasOwnProperty("instJson")?this.FX(h.instJson.w.l):this.FX(h.w.l))){const r=this.wf.qz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.Jv(h.instJson):r.Jv(h),s=!0,this.Qq.push(r),h.hasOwnProperty("instJson")&&(this.tX.set(r,h),this.sX.set(h.index,r))}}}for(const n of this.lX)n.i9(!0),n.zD();s&&(this.wf.a5(),this.wf._$())}u$(s){for(const i of s)if(i.r4()){const e=i.ND(),t=i.I$();for(const h of i.qB().UX().C$())if(h!==i.qB()){const r=h.KL();if(r.length>t)i.P$(r[t]);else{let t;t=e?this.wf.qz(h,e.WD(),!0,e.Av(),e.Dv(),!0):this.wf.qz(h,null,!0,0,0,!0),this.wf.a5(),h.R$(),i.P$(t),s.push(t)}}}}c$(){for(const t of this.iX){const s=this.wf.Lz(t[1]);s.r4()||this.wf.qz(t,null,!0)}}E$(){let i=[],e=this.iX,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.wf.Lz(r[1]);n.Xz()?n.r4()&&n.UX().A$()||i.push(this.wf.qz(r,null,!0)):(e[h]=r,++h)}M.Un(e,h),this.wf.a5(),this.u$(i)}n9(t,s,i,e,h,r,n){if(i)return i.n9(t,s,h,r,e,n);{const o=[];for(const a of this.lX)o.push(a.n9(t,s,h,r,e,n));return o.flat()}}async F$(){const t=this.Wq;this.wf.p$()||(await this.b$(new M.Event("beforeanylayoutend")),await this.S$(new M.Event("beforelayoutend")),await this.wf.O4(M.G$.x$.M$.k$,null,null),await this.S$(new M.Event("afterlayoutend")),await this.b$(new M.Event("afteranylayoutend"))),t.D$(!0),this.wf.xk().O$(),this.gX||this.L$();for(const s of this.lX)s.r9();for(const i of this.wf.o9())if(!(i.Xz()||i.yL()||i.WL().mL()||i.a9())){for(const e of i.KL())this.wf.t4(e);this.wf.a5()}t.D$(!1),t.yD()===this&&t.h$(null)}B$(t,s){const i=t.qB().g9().toString(),e=(this.pX.hasOwnProperty(i)||(this.pX[i]=[]),this.pX[i]),h={index:s,instJson:t.zv(),sceneGraphJson:{children:[]}};e.push(h),this.mX.set(t,h)}N$(t){const s=this.mX.get(t);for(const i of t.W$()){const e=this.mX.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.V$.j$(i.ND())})}}L$(){this.mX.clear();let t=0;for(const s of this.lX){s.dJ();for(const i of s.UD()){const e=i.qB();!e.Xz()&&e.Jz()&&(this.B$(i,t),t++)}}for(const h of this.lX)for(const r of h.UD()){const n=r.qB();!n.Xz()&&n.Jz()&&this.N$(r)}this.mX.clear()}U$(){this.pX={},this.gX=!0}AE(){return this.X7}_J(){const t=this.wf,s=t.Kb().Eb();return"low"===t.$O().QJ()||s&&t.ZJ()||this.wz.IJ()||s&&t.Y9()}H$(t){const s=this.wf.$O();if(this._J()){t.BE(null),t.TE(0,0,0,0);const i={EM:this.wf.fk(),b2:t.Xw()||this.wf.ZJ()||this.wz.IJ(),KJ:!!t.Xw()&&this.wf.ZJ()};"low"===s.QJ()&&(i.width=s.UJ(),i.height=s.HJ()),this.X7=this.wf.tq(i)}else this.X7=null}z$(t){this.wf.J$(t)&&(t.CE(!1),t.BE(null),t.iS(),t.NE(this.X7))}q$(t){this._J()&&(t.CE(!1),this.X$(t,this.X7))}$$(t){t.BE(this.X7),t.lc(this.WX()),this.wf.Y9()&&t.IE();const s=this.gJ(0);this.sq(t,this.X7,s,!0),t.Xw()&&t.StartMeasuringRenderPassTime(0,1),this.q$(t),this.X7=null}Y$(t,s){let i=null;this.wf.J$(t)&&(i=this.X7),t.BE(i),t.TE(0,0,0,0),this.wf.Y9()&&t.IE();const e=this.gJ(s);this.sq(t,i,e,!0),this.z$(t),t.Gb(),this.wf.$O().K$(s)}sq(t,e,s,h){const r=s.filter(t=>t.oJ());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.Q9()&&!n.CJ()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.Q9()||o.CJ())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].nJ()){this.Z$(t,e,a),s+=a.length,M.Hn(a);continue}M.Hn(a)}n.bM(t,e,h&&0===s),++s}}X$(t,s){const i=this.wz.v9(),e=this.wf;0===i.length?(t.BE(null),t.iS(),t.NE(s),t.jE(s),e.Mz(s)):(h.set(0,0,e.N9(),e.W9()),this.UF().W3(t,null,{j3:this,V3:3,devicePixelRatio:this.wf.Mq(),U3:this.wf.Gq()*this.g5(),H3:this.w5(),fF:h,dF:null,CA:!0}))}Z$(e,h,t){t[0].xB()||(x.ma(t[0].CB()),x.fa(1),e.lc(x)),this.wf.$O(),e.CE(!0);const r=G,n=T,o=_;for(const a of t)a.dJ(),a.J9(r);const s=t[0],i=s.qJ(e);s.YJ(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.ND(),c=u.WD();if(u.eB()&&u.uq(c.lq())){(!l.cq()||0<u.fq())&&o.push(l);const f=l.ND().gN();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.ND();if(p.eB()&&p.uq(p.WD().lq())){if(p.gN()!==f)break;(d.cq()?(0<p.fq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].pq()){this.Q$(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.ND(),y=g.WD();g.gq(!0),v(y,e),y.aq(m,g,e,h),g.gq(!1)}}else{v(c,e),c.aq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.ND(),b=S.WD();v(b,e),b.aq(w,S,e,h)}}}s=t,M.Hn(n),M.Hn(o)}else++s}i&&e.$E(i),M.Hn(r),I=null}Q$(i,e,h){i.UE();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.ND(),o=n.WD();n.yq(!0),v(o,i),o.wq(r,n,i)}i.HE();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.ND(),u=l.WD();v(u,i),u.aq(a,l,i,e),l.yq(!1)}i.JE()}kq(){const t={sx:this.b5(),sy:this.M5(),s:this.g5(),a:this.w5(),w:this._m(),h:this.Om(),ortho:this.z5(),vpX:this.k9(),vpY:this.D9(),fv:this.gX,persist:this.pX,fx:this.wz.zv(),layers:{},dynamicLayers:[]};for(const s of this.lX)if(s.y9()){const i=s.q5();t.dynamicLayers.push({sid:s.g9(),name:s.uf(),parentSid:i?i.g9():null,siblingIndex:s.p9(),data:s.kq()})}else t.layers[s.g9().toString()]=s.kq();return t}Dq(t){this.Z7=t.sx,this.Q7=t.sy,this.Y7=t.s,this.K7=t.a,this.ag=t.w,this.lg=t.h,this.Hq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.zq=t.vpX),t.hasOwnProperty("vpY")&&(this.Jq=t.vpY),this.gX=!!t.fv,this.pX=t.persist,this.wz.Jv(t.fx),this.Gz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.FX(e);h&&h.Dq(i)}if(t.hasOwnProperty("dynamicLayers")){this.B5(),this.wf.a5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.SX(),!this.AX(l)&&!this.FX(a)){let t,s;if(null===u)t=null,s=this.aX;else{if(!(t=this.FX(u)))continue;s=t.K5()}const d=M.dr(M.P7,this,t,{name:l,sid:a,v7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({lN:d,siblingIndex:c}),d.Dq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.lN,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.d9(),this._X(),this.GX()}wD(){return this.yX}Sk(){return this.wX}tY(t){t.layout=this.wD();const s=this.wf,i=s.sY()&&!s.xk().n5();i&&e.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),i&&e.AddScriptTime()}S$(t){return t.layout=this.wD(),this.wX.r0(t)}b$(t){return t.layout=this.wD(),this.wf.S$(t)}iY(){this.eY(this.aX)}eY(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.uf()),this.eY(e.K5(),s+1)}}}{const Cr=self.Ws;Cr.hY=class extends Cr.ur{#XV;#rY=[];#nY=new Map;#aY=new Map;#lY=null;#uY=[];#cY=null;#fY=0;#dY=null;constructor(t){super(),this.#XV=t}pr(){this.#XV=null,this.#lY=null,this.#cY=null,this.#dY=null,Cr.Hn(this.#rY),this.#nY.clear(),this.#aY.clear(),Cr.Hn(this.#uY)}Cx(t){const s=Cr.dr(Cr.Nq,this,this.#rY.length,t);this.#rY.push(s),this.#nY.set(s.uf().toLowerCase(),s),this.#aY.set(s.g9(),s)}nO(){return this.#XV}pY(t){this.#cY=t}mY(){if(this.#cY)return this.#cY;if(this.#rY.length)return this.#rY[0];throw new Error("no first layout")}gY(t){return this.#nY.get(t.toLowerCase())||null}yY(t){return this.#aY.get(t)||null}wY(t){return t=Cr.Gr(Math.floor(t),0,this.#rY.length-1),this.#rY[t]}vD(t){return"number"==typeof t?this.wY(t):this.gY(t.toString())}xD(){return this.#rY}h$(t){this.#lY=t}yD(){return this.#lY}SY(t){if(this.#uY.includes(t))throw new Error("layout already running");this.#uY.push(t)}bY(t){const s=this.#uY.indexOf(t);if(-1===s)throw new Error("layout not running");this.#uY.splice(s,1)}*vY(){this.#lY&&(yield this.#lY),this.#uY.length&&(yield*this.#uY)}MY(t){return this.#lY===t||this.#uY.includes(t)}D$(t){if(t)this.#fY++;else{if(this.#fY<=0)throw new Error("already unset");this.#fY--}}o5(){return 0<this.#fY}_D(t){this.#dY=t}f$(){this.#dY=null}TD(){return!!this.#dY}xY(){return this.#dY}GY(){const t=this.yD();t&&t._X()}TY(){const t=this.yD();t&&t.GX()}}}{const Pr=self.Ws,Rr=new RegExp("<(.+?)>","g");Pr._Y=class extends Pr.ur{constructor(t){super(),this.wf=t,this.IY=Pr.dr(Pr.CY),this.PY=null,this.RY=[],this.EY=new Map,this.AY=new Map,this.FY=new Map,this.kY=[],this.DY=[],this.OY=[],this.LY=!1,this.BY=!1,this.NY=!1,this.WY=()=>this.jY(),this.VY=()=>this.UY(),this.HY=()=>this.zY(),this.JY=()=>this.qY(),this.XY=t=>this.$Y(t.U6),this.YY=t=>this.KY(),this.ZY=t=>this.QY(),this.tK=t=>this.sK(),this.iK=[],this.eK=0}pr(){this.hK(),this.WY=null,this.VY=null,this.HY=null,this.JY=null,this.XY=null,this.ZY=null;for(const t of this.RY)t.WW(),t.pr();Pr.Hn(this.RY),this.RY=null,this.IY.pr(),this.IY=null,Pr.Hn(this.kY),this.kY=null,Pr.Hn(this.DY),this.DY=null,Pr.Hn(this.OY),this.OY=null,this.EY.clear(),this.EY=null,this.AY.clear(),this.AY=null,this.FY.clear(),this.FY=null,Pr.Hn(this.iK),this.iK=null,this.wf=null}rK(){const t=this.wf.Kf();t.addEventListener("pretick",this.WY),t.addEventListener("tick2",this.VY),t.addEventListener("beforelayoutchange",this.HY),t.addEventListener("layoutchange",this.JY),t.addEventListener("instancedestroy",this.XY),t.addEventListener("beforeload",this.YY),t.addEventListener("afterload",this.ZY),t.addEventListener("afterlayoutstart",this.tK)}hK(){const t=this.wf.Kf();t.removeEventListener("pretick",this.WY),t.removeEventListener("tick2",this.VY),t.removeEventListener("beforelayoutchange",this.HY),t.removeEventListener("layoutchange",this.JY),t.removeEventListener("instancedestroy",this.XY),t.removeEventListener("beforeload",this.YY),t.removeEventListener("afterload",this.ZY),t.removeEventListener("afterlayoutstart",this.tK)}Cx(t){this.IY.xc(t);const s=Pr.oK.nK(t,this);this.xc(s),this.aK(s),this.FY.set(s.uf(),0)}lK(t){const s=this.uK(),i=t.l4(),e=s.ri(i),h=Pr.oK.lK(i+":"+this.FY.get(i),e,this);return this.cK(i),this.xc(h),h}cK(t){this.FY.set(t,this.FY.get(t)+1)}fK(){for(const t of this.RY)if(!t.dK()){const s=t.l4();this.cK(s)}}pK(){for(const t of this.FY.keys())this.FY.set(t,0)}xc(t){this.RY.push(t),this.EY.set(t.uf().toLowerCase(),t)}R0(t){t.mK(),t.dK()||(Pr.Yn(this.RY,t),Pr.Yn(this.kY,t),Pr.Yn(this.DY,t),Pr.Yn(this.OY,t),this.EY.delete(t.uf().toLowerCase()),this.gK(t),t.BW())||t.pr()}F4(t){this.wf.F4(t,this.PY,null)}nO(){return this.wf}uK(){return this.IY}yK(t){this.PY=t}wK(){return this.PY}*SK(){for(const t of this.RY)yield t}*bK(){for(const t of this.DY)yield t}vK(t,s){this.AY.has(t)||this.AY.set(t,new Set),this.AY.get(t).add(s)}aK(t){for(const s of t.MK())this.vK(s,t)}gK(t){for(const[s,i]of this.AY.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.AY.delete(s)}xK(t){if(this.AY.has(t))return this.AY.get(t)}GK(t,s){if(s)for(const i of this.RY){const e=s.every(t=>i.TK(t.U6,t.trackId));if(e&&i.uf().includes(t.uf()))return i}}_K(t){return this.EY.get(t.toLowerCase())||null}IK(t){for(const s of this.kY)if(s.uf()===t)return s;for(const i of this.DY)if(i.uf()===t)return i;return null}*CK(i){if(Rr.test(i)){Rr.lastIndex=0;let t,s=new Set;do{if(t=Rr.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this._K(r);n&&(yield n)}s.clear()}else{const t=this._K(i);t&&(yield t)}}*PK(t){for(const s of this.RY)s.VW(t)&&(yield s)}RK(t){this.kY.includes(t)||this.kY.push(t),this.EK()}AK(t){Pr.Yn(this.DY,t),this.FK()}kK(t){this.DY.includes(t)?(t.DK(!0),t.LK(!1),t.BK(!1)):(t.DK(!1),t.LK(!0),t.BK(!1),this.kY.includes(t)||this.kY.push(t)),this.EK()}NK(t){t.DK(!1),t.LK(!1),t.WK(),Pr.Yn(this.kY,t),this.FK()}jK(t){t.DK(!1),t.LK(!1),this.DY.includes(t)&&(t.BK(!0),this.OY.push(t),Pr.Yn(this.DY,t)),this.kY.includes(t)&&t.BK(!0)}VK(t){t.DK(!1),t.LK(!1),t.BK(!1),t.YW(1),Pr.Yn(this.DY,t)}UK(t){this.jK(t),t.WK()}jY(){if(!this.nO().p$()&&this.LY&&!this.BY){for(this.NY=!0;this.kY.length;){const t=this.kY.pop();(t.HK()?(t.zK(),this.OY):(t.JK(),this.DY)).push(t),0!==t.qK()&&(this.eK=1)}const s=this.wf.XK(),i=this.wf.$K(),e=this.wf.Zk();for(let t=this.DY.length-1;0<=t;t--){const h=this.DY[t];h&&h.YK(s,e,i)}this.NY=!1,0!==this.eK&&this.nO().JD()}}UY(){if(!this.nO().p$()&&this.LY&&!this.BY){let i;for(let t=0,s=this.OY.length;t<s;t++){const e=this.OY[t];i=i||new Set,e.mK(),this.KK(e),i.add(e)}if(i){Pr.Qn(this.OY,i);for(let t=this.eK=0,s=this.DY.length;t<s;t++)if(0!==this.DY[t].qK()){this.eK=1;break}}this.FK()}}KK(t){t.BW()||t.ZK()&&t.QK()&&t.tZ()&&t.sZ()}EK(){this.LY||(this.LY=!0)}FK(){this.OY.length||this.DY.length||this.kY.length||this.NY||(this.LY=!1)}zY(){for(this.BY=!0;this.kY.length;)this.NK(this.kY.pop());const t=new Set;for(const s of this.DY){const i=s.zY();i&&(s.mK(),t.add(s))}Pr.Qn(this.DY,t),t.clear();for(const e of this.OY){const h=e.zY();h&&(e.mK(),t.add(e))}Pr.Qn(this.OY,t),this.FK();for(const r of this.RY)r.iZ()}qY(){this.BY=!1}$Y(t){const s=t.qB(),i=this.xK(s);if(i)if(this.wf.p$())this.iK.push(t);else for(const e of i)e.dK()||(e.BW()?this.R0(e):e.ZK()||(this.KK(e),this.R0(e)))}KY(){for(const t of this.kY.map(t=>t))this.KK(t),this.R0(t);for(const s of this.DY.map(t=>t))this.KK(s),this.R0(s)}QY(){for(const t of this.iK)this.$Y(t);Pr.Hn(this.iK);for(const s of this.RY)s.QY()}sK(){const t=this.wf.bD(),s=t.yD();if(s)for(const i of this.RY){const e=i.eZ();e&&s.uf()===e&&this.kK(i)}}kq(){return{timelinesJson:this.hZ(),scheduledTimelinesJson:this.rZ(),playingTimelinesJson:this.nZ(),markedForRemovalTimelinesJson:this.oZ(),hasRuntimeListeners:this.LY,changingLayout:this.BY,isTickingTimelines:this.NY}}Dq(t){t&&(this.pK(),this.aZ(t.timelinesJson),this.lZ(t.scheduledTimelinesJson),this.uZ(t.playingTimelinesJson),this.cZ(t.markedForRemovalTimelinesJson),this.LY=!t.hasRuntimeListeners,this.BY=!!t.changingLayout,this.NY=!!t.isTickingTimelines,this.fK(),this.EK(),this.FK())}hZ(){return this.RY.map(t=>t.kq())}aZ(t){for(const s of t){let t=this._K(s.name);if(t)t.Dq(s);else{const i=this.fZ(s);if(!i)continue;const e=this._K(i);(t=this.lK(e)).Dq(s)}t.dZ()||this.R0(t)}}fZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}rZ(){return this.pZ(this.kY)}lZ(t){this.mZ(t,this.kY)}nZ(){return this.pZ(this.DY)}uZ(t){this.mZ(t,this.DY)}oZ(){return this.pZ(this.OY)}cZ(t){this.mZ(t,this.OY)}gZ(t,s){if(s)for(const i of s)if(i===t.uf())return!0;return!1}pZ(t){return t.map(t=>t.uf())}mZ(t,s){const i=new Set;for(const e of s)this.gZ(e,t)||i.add(e);if(Pr.Qn(s,i),t)for(const h of t){const r=this._K(h);if(r){const n=s.find((s=>t=>t.uf()===s)(h));n||s.push(r)}}}}}{const Er=self.Ws,Ar=[0,0],Fr=[0,0],kr=[0,0],Dr=[0,0,0,0,0],Or=new Array(4),Lr=[{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0}],Br={x:0,y:0,t:0,Et:0};Er.yZ=class{constructor(t,s){this.wZ=!1,this.SZ=t,this.bZ=[];let i=null;if(i=s?this.SZ.vZ(s):Er.first(this.SZ.MZ())){const e=i.mj("offsetX"),h=i.mj("offsetY");if(e&&h){this.xZ=e,this.GZ=h;const r=e.TZ(),n=h.TZ();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o._Z(),o.IZ()),l=n[t],u=(l._Z(),l.IZ());a&&"cubic-bezier"===a.CZ()&&u&&"cubic-bezier"===u.CZ()?this.bZ.push(Er.dr(Er.PZ,a,u,o,l,this.bZ.length)):(a&&"line"===a.CZ()&&u&&u.CZ(),this.bZ.push(Er.dr(Er.RZ,o,l,this.bZ.length)))}this.wZ=!0}}}pr(){for(const t of this.bZ)t.pr();Er.Hn(this.bZ),this.bZ=null,this.SZ=null,this.xZ=null,this.GZ=null}EZ(){return this.wZ}AZ(){return this.bZ}FZ(t){const s="relative"===this.xZ.kZ()?t.Av():0,i="relative"===this.GZ.kZ()?t.Dv():0;for(const e of this.bZ)e.FZ(s,i)}_y(s,i,t){let e=NaN,h=this.bZ.length;for(let t=0;t<h;t++){const r=this.bZ[t];if("cubic-bezier"===r.EG()){const n=r._y(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],kr[0]=n[2],kr[1]=r.HF())}}return kr}DZ(s,i,t){const e=t.tRange;Er.we(e[0])||(e[0]=0),Er.we(e[1])||(e[1]=1);let h=NaN,r=this.bZ.length;for(let t=0;t<r;t++){const n=this.bZ[t];if("cubic-bezier"===n.EG()){const o=n.OZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],kr[0]=o[2],kr[1]=n.HF())}}return kr}LZ(t,s){return this.bZ[s].LZ(t)}BZ(t,s){return this.bZ[s].BZ(t)}},Er.PZ=class{constructor(t,s,i,e,h){this.wy=h;const r=t.NZ("cubic-bezier"),n=i.NZ("cubic-bezier"),o=s.NZ("cubic-bezier"),a=e.NZ("cubic-bezier");this.WZ=t.jZ(),this.VZ=s.jZ(),this.UZ=t.jZ()+r.HZ(),this.zZ=s.jZ()+o.HZ(),this.JZ=i.jZ()+n.qZ(),this.XZ=e.jZ()+a.qZ(),this.$Z=i.jZ(),this.YZ=e.jZ(),this.KZ=0,this.ZZ=0,this.QZ=0,this.tQ=0,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=0,this.rQ=0,this.nQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=0,this.gQ=0,this.yQ=NaN,this.wZ=!1,this.wQ=100,this.SQ=new Array(this.wQ+1),this.SQ[0]=0,this.bQ=0,this.vQ=[],this.MQ=[];for(let t=0;t<100;t++)this.MQ.push({x:0,y:0,t:0,Et:0});this.xQ()}pr(){Er.Hn(this.SQ),this.SQ=null,Er.Hn(this.vQ),this.vQ=null,Er.Hn(this.MQ),this.MQ=null}EG(){return"cubic-bezier"}HF(){return this.wy}GQ(){return Math.floor(this.bQ/25)}TQ(){return 1/this.GQ()}FZ(t,s){this._Q=t,this.IQ=s,this.SQ=new Array(this.wQ+1),this.SQ[0]=0,this.xQ(),this.KZ=this.WZ+this._Q,this.ZZ=this.VZ+this.IQ,this.QZ=this.UZ+this._Q,this.tQ=this.zZ+this.IQ,this.sQ=this.JZ+this._Q,this.iQ=this.XZ+this.IQ,this.eQ=this.$Z+this._Q,this.hQ=this.YZ+this.IQ,this.rQ=3*(this.QZ-this.KZ),this.nQ=3*(this.tQ-this.ZZ),this.oQ=3*(this.sQ-this.QZ),this.aQ=3*(this.iQ-this.tQ),this.lQ=3*(this.eQ-this.sQ),this.uQ=3*(this.hQ-this.iQ),this.cQ=3*(this.QZ-this.KZ),this.fQ=3*(this.KZ+this.sQ-2*this.QZ),this.dQ=this.eQ-this.KZ+3*(this.QZ-this.sQ),this.pQ=3*(this.tQ-this.ZZ),this.mQ=3*(this.ZZ+this.iQ-2*this.tQ),this.gQ=this.hQ-this.ZZ+3*(this.tQ-this.iQ)}Map(t){if(!this.wZ)return NaN;const s=this.CQ(t);return Fr[0]=this.PQ(s),Fr[1]=this.RQ(s),Fr}_y(t,s){const i=this.EQ(100),e=this.AQ(t,s,i),h=this.FQ(t,s,i,e);return Dr[0]=h.x,Dr[1]=h.y,Dr[2]=h.t,Dr[3]=h.Et,Dr}OZ(t,s,i){const e=this.EQ(100),h=this.kQ(t,s,e,i),r=this.FQ(t,s,e,h);return Dr[0]=r.x,Dr[1]=r.y,Dr[2]=r.t,Dr[3]=r.Et,Dr}LZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.rQ+e*this.oQ+h*this.lQ,n=i*this.nQ+e*this.aQ+h*this.uQ,o=Math.hypot(r,n);return Ar[0]=r/o,Ar[1]=n/o,Ar}BZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.rQ+e*this.oQ+h*this.lQ,n=i*this.nQ+e*this.aQ+h*this.uQ;return Math.atan2(n,r)}CQ(h){if(this.wZ){let t=h*this.SQ[this.wQ],s=0,i=this.wQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.SQ[e]<t?s=e+1:i=e;this.SQ[e]>t&&e--;const r=this.SQ[e];return r===t?e/this.wQ:(e+(t-r)/(this.SQ[e+1]-r))/this.wQ}}PQ(t){return this.wZ?self._c.jc("cubicbezier")(t,this.WZ+this._Q,this.UZ+this._Q,this.JZ+this._Q,this.$Z+this._Q):NaN}RQ(t){return this.wZ?self._c.jc("cubicbezier")(t,this.VZ+this.IQ,this.zZ+this.IQ,this.XZ+this.IQ,this.YZ+this.IQ):NaN}EQ(s){if(!(this.vQ.length>=(s=s||100))){this.vQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.cQ*i,n=this.fQ*e,o=this.dQ*h,a=this.pQ*i,l=this.mQ*e,u=this.gQ*h,c=this.KZ+r+n+o,f=this.ZZ+a+l+u;this.MQ[t].x=c,this.MQ[t].y=f,this.MQ[t].t=i,this.MQ[t].Et=0,this.vQ[t]=this.MQ[t]}}return this.vQ}AQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.yQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.Et=o*o+a*a,n.Et<h&&(h=n.Et,r=t)}else{for(let t=this.yQ;t<this.yQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Et=u*u+c*c,l.Et<h&&(h=l.Et,r=t)}for(let t=this.yQ;t>this.yQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Et=d*d+p*p,f.Et<h&&(h=f.Et,r=t)}}return this.yQ=r}kQ(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.yQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Et=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.Et<r&&(r=o.Et,n=t)}else{for(let t=this.yQ;t<this.yQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Et=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.Et<r&&(r=u.Et,n=t)}for(let t=this.yQ;t>this.yQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Et=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Et<r&&(r=d.Et,n=t)}}return this.yQ=n}FQ(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.cQ*f,g=this.fQ*d,y=this.dQ*p,w=this.pQ*f,S=this.mQ*d,b=this.gQ*p,v=this.KZ+m+g+y,M=this.ZZ+w+S+b,x=v-n,G=M-o,T=x*x+G*G;if(T<c){c=T,l=t,Br.x=v,Br.y=M,Br.t=f,Br.Et=T,u=Br;break t}const _=Lr[t-1];_.x=v,_.y=M,_.t=f,_.Et=T,Or[t]=_}Or[3]=a[i],a=Or}while(t++<20);return u}xQ(){this.wZ=!0;let s=this.PQ(0),i=this.RQ(0),e=0;for(let t=1;t<=this.wQ;t++){const h=this.PQ(.01*t),r=this.RQ(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.SQ[t]=e,s=h,i=r}this.bQ=e}},Er.RZ=class{constructor(t,s,i){this.wy=i,this.DQ=t.jZ(),this.OQ=s.jZ(),this._Q=0,this.IQ=0}pr(){}EG(){return"line"}HF(){return this.wy}FZ(t,s){this._Q=t,this.IQ=s}Av(){return this.DQ+this._Q}Dv(){return this.OQ+this.IQ}}}{const b=self.Ws;b.oK=class extends b.ur{constructor(t,s,i){super(),this.wf=i.nO(),this.LQ=i,this.BQ=s,this.vr=t,this.NQ=[],this.WQ=0,this.jQ=null,this.VQ=0,this.UQ(),this.HQ=null,this.zQ=null,this.JQ=0,this.qQ=0,this.XQ=1,this.$Q=0,this.YQ=1,this.KQ=!1,this.ZQ=!1,this.QQ=!1,this.ttt=!0,this.stt=!1,this.itt=!1,this.ett=-1,this.htt=!1,this.ntt=!1,this.ott=!1,this.att=!1,this.ltt=NaN,this.utt=[""],this.ctt="",this.ftt=!1,this.eK=0,this.dtt=0,this.ptt=null}static nK(t,s){const i=s.uK(),e=i.mtt(),h=i.ri(t[e]),r=b.dr(b.oK,t[e],h,s);return r.gtt(!0),r}static lK(t,s,i){return b.dr(b.oK,t,s,i)}pr(){if(!this.BW()){const t=this.wf.Kf();this.LQ.NK(this),this.LQ.UK(this);for(const s of this.NQ)s.pr();b.Hn(this.NQ),this.NQ=null,this.wf=null,this.LQ=null,this.BQ=null,this.stt=!0,this.HQ=null,this.zQ=null,this.ytt(t)}}ytt(t){const s=b.dr(b.Event,"timelinestatereleased");s.wtt=this,t.dispatchEvent(s)}EG(){return 0}UQ(){for(const t of this.BQ.btt().Stt())this.WQ=this.NQ.push(b.vtt.Cx(this,t))}Mtt(){return this.LQ}nO(){return this.wf}MZ(){return this.NQ}xtt(e,h,r,n){if(this.dtt){let i;for(let s=0;s<this.NQ.length;s++){let t=this.NQ[s];if(e===t.lj()){const o=t.mj(r);o&&h.constructor===o.Gtt().constructor&&o.kZ()===n.kZ()&&(i=i||[]).push(o)}}return i}}dZ(){return!!this.NQ.length}vZ(t){for(const s of this.NQ)if(b.Mh(s.dj(),t))return s;return null}Ttt(t){for(const s of this.NQ)if(!s._tt()&&b.Mh(s.uf(),t))return s;return null}h8(t){this.vr=t}uf(){return this.vr}Itt(){return this.BQ}l4(){return this.BQ.uf()}zW(){return this.BQ.zW()}HW(t){this.BQ.HW(t)}Ctt(){return this.BQ.Ctt()}Ptt(t){this.BQ.Ptt(t)}Rtt(){return this.BQ.Rtt()}Ett(t){this.BQ.Ett(t)}kZ(){return this.BQ.kZ()}Att(t){this.BQ.kZ(t)}aj(t){for(const s of this.MZ())s.aj(t)}qW(){return this.BQ.qW()}JW(t){return this.BQ.JW(t)}$W(){return this.BQ.$W()}XW(t){return this.BQ.XW(t)}hW(){return this.BQ.hW()}Ftt(t){return this.BQ.Ftt(t)}YW(t){return this.XQ=t}KW(){return this.XQ}eZ(){return this.BQ.eZ()}ktt(){return this.BQ.ktt()}Dtt(){return this.BQ.Dtt()}Ott(){return this.$Q}Ltt(){return!this.IsPlaying()||0<this.XQ}QW(){return this.HQ||(this.HQ=new Promise(t=>{this.zQ=t})),this.HQ}WK(){this.HQ&&(this.zQ(),this.HQ=null,this.zQ=null)}Btt(t){this.utt=b.oK.Ntt(t),this.ftt=!0}ZW(){return this.utt}Wtt(){return this.ftt&&(this.ctt=this.utt.join(" ")),this.ftt=!1,this.ctt}VW(t){if(!this.utt)return!1;if(!this.utt.length)return!1;const s=b.oK.Ntt(t);return!!s&&!!s.length&&s.every(b.oK.jtt,this)}Vtt(){b.G$.Timeline&&this.constructor===b.oK&&(b.G$.Timeline.M$.PushTriggerTimeline(this),this.LQ.F4(b.G$.Timeline.M$.OnTimelineStarted),this.LQ.F4(b.G$.Timeline.M$.OnTimelineStartedByName),this.LQ.F4(b.G$.Timeline.M$.OnTimelineStartedByTags),this.LQ.F4(b.G$.Timeline.M$.OnAnyTimelineStarted),b.G$.Timeline.M$.PopTriggerTimeline())}Utt(){this.ett=this.wf.Htt()}sZ(){this.ott||(this.ott=!0,b.G$.Timeline&&this.constructor===b.oK&&(b.G$.Timeline.M$.PushTriggerTimeline(this),this.LQ.F4(b.G$.Timeline.M$.OnTimelineFinished),this.LQ.F4(b.G$.Timeline.M$.OnTimelineFinishedByName),this.LQ.F4(b.G$.Timeline.M$.OnTimelineFinishedByTags),this.LQ.F4(b.G$.Timeline.M$.OnAnyTimelineFinished),b.G$.Timeline.M$.PopTriggerTimeline()))}DK(t){this.KQ=t}ztt(){return this.ett===this.wf.Htt()}IsPlaying(t=!1){return!!this.ztt()||!(!this.Jtt()||t)||this.KQ}qtt(){return this.IsPlaying(!0)}sj(){return this.Xtt()}Xtt(){return!(this.BW()||this.Jtt()||this.qtt()||this.QK())}LK(t){this.ZQ=t}Jtt(){return this.ZQ}$tt(t){this.ttt=t;const s=this.xA();(s<=0||s>=this.zW())&&(this.ttt=!0)}QK(){return this.ttt}BW(){return this.stt}BK(t){this.itt=t}HK(){return this.itt}Ytt(t){this.htt=t}Ktt(){return this.htt}gtt(t){this.ntt=!!t}dK(){return this.ntt}tZ(){return this.QQ}xA(){return this.JQ}UW(t){const s=this.xA();this.Ztt(t),this.$tt(!1),this.QK()||this.Ytt(!0),!this.qtt()&&!this.Jtt()&&this.QQ||(this.qtt()||this.Jtt()||this.QQ?this.qtt()?this.WW():this.Jtt()&&(this.LQ.NK(this),this.Qtt()):this.Qtt()),this.tst(),this.sst(this.xA(),!1,!0,!0,s),this.ist(),this.eK&&this.nO().JD(),this.est()}Ztt(t){(t=b.we(t)?t:this.zW())<0?this.JQ=0:t>=this.zW()?this.JQ=this.zW():this.JQ=t}hst(t){(t=b.we(t)?t:this.zW())<0?this.JQ=0:t>=this.zW()?this.JQ=this.zW():this.JQ=t;for(const s of this.NQ)s.rst()}est(){b.G$.Timeline&&this.constructor===b.oK&&(b.G$.Timeline.M$.PushTriggerTimeline(this),this.LQ.F4(b.G$.Timeline.M$.OnTimeSet),this.LQ.F4(b.G$.Timeline.M$.OnTimeSetByName),this.LQ.F4(b.G$.Timeline.M$.OnTimeSetByTags),b.G$.Timeline.M$.PopTriggerTimeline())}nst(){if(!this.qW())if(this.$W()&&1===this.$Q){if(this.Ltt()){if(this.xA()>=this.zW())return!1}else if(this.xA()<=0)return!1}else if(!this.qW()&&!this.$W())if(this.Ltt()){if(this.xA()>=this.zW())return!1}else if(this.xA()<=0)return!1;return!0}jW(){this.BW()||this.nst()&&this.Play(!0)}Play(t=!1){return!this.BW()&&!this.Jtt()&&(this.qtt()&&this.ztt()?this.ost():!this.qtt()&&!!(this.QK()||t||this.Ktt())&&this.ast())}ost(){return this.Ytt(!1),this.LQ.AK(this),this.LQ.kK(this),this.QW(),!0}ast(){return this.Ytt(!1),this.LQ.kK(this),this.QW(),!0}WW(t=!1){this.BW()||(this.$tt(t),this.LQ.jK(this),this.QK()&&this.WK())}w0(t=!0,s=!1){if(!this.BW()){if(!this.qtt()&&this.Jtt())return this.LQ.NK(this);if(!this.QK()){this.WW(!0),this.Ltt()?this.Ztt(0):this.Ztt(this.zW());const i=this.xA();this.tst(),s?this.lst(i):this.sst(i,!1,!1,!0),t&&this.est(),this.ist(),this.eK&&t&&this.nO().JD()}}}ust(){this.w0(!1,!0)}lst(t){this.sst(t,!1,!1,!0,NaN,!1,!0)}zY(){if(!this.BW()){if(!this.nO().p$()&&this.cst())return!1;this.LQ.VK(this),this.nO().p$()||this.ust()}return!0}Qtt(){this.JK(!0)}zK(){this.JK(!1,!0),this.DK(!1),this.LK(!1)}JK(t=!1,s=!1){if(!this.HK()||s){if(t){this.ott=!1,this.QQ=!0,this.att=!0,this.tst();for(const i of this.NQ)i.JK()}else if(this.DK(!0),this.LK(!1),this.Vtt(),this.QK()){this.ett=-1,0!==this.$Q&&(this.XQ=Math.abs(this.XQ)),this.$Q=0,this.YQ=1,this.ttt=!1,this.ott=!1,this.QQ=!0,this.att=!0,this.Ltt()?this.Ztt(0):this.Ztt(this.zW()),this.tst();for(const e of this.NQ)e.JK()}else{this.att=!0,this.ott=!1,this.tst();for(const h of this.NQ)h.fst()}this.ist()}}qK(){return this.eK}tst(){this.dtt=0;for(const t of this.NQ)t.mP()&&(this.dtt=1)}ist(){this.eK=0;for(const t of this.NQ)t.dst(),0===this.eK&&1===t.qK()&&(this.eK=1),this.jQ||1!==t.pst()||(this.jQ||(this.jQ=[]),this.VQ=this.jQ.push(t))}YK(t,s,i){if(this.Dtt()){if(0===t&&0===this.ltt)return;this.ltt=t,t=i}else{if(0===i&&0===this.ltt)return;t=this.ltt=i,s=1}const e=this.JQ+this.qQ,h=t*s*this.XQ,r=e+h,n=this.BQ.mst;r<0?(this.JQ=0,this.qQ=-r):n<=r?(this.JQ=n,this.qQ=this.JQ-r):(this.JQ=r,this.qQ=0);let o=!1,a=!1,l=this.qW(),u=this.$W();l||u?l&&!u?0<this.XQ?this.JQ>=n&&(this.hst(0),a=!0):this.JQ<=0&&(this.hst(n),a=!0):!l&&u?0<this.XQ?this.JQ>=n&&(this.Ztt(n),this.YW(-1*this.KW()),a=!0,1===this.$Q?this.YQ<this.hW()?(this.YQ++,this.$Q=0):o=!0:0===this.$Q&&(this.$Q=1)):this.JQ<=0&&(this.Ztt(0),this.YW(-1*this.KW()),a=!0,1===this.$Q?this.YQ<this.hW()?(this.YQ++,this.$Q=0):o=!0:0===this.$Q&&(this.$Q=1)):l&&u&&(0<this.XQ?this.JQ>=n&&(this.Ztt(n),this.YW(-1*this.KW()),a=!0,this.$Q++,b.wrap(this.$Q,0,2)):this.JQ<=0&&(this.Ztt(0),this.YW(-1*this.KW()),a=!0,this.$Q++,b.wrap(this.$Q,0,2))):0<this.XQ?this.JQ>=n&&(this.YQ<this.hW()?(this.YQ++,this.hst(0),a=!0):(this.Ztt(n),o=!0)):this.JQ<=0&&(this.YQ<this.hW()?(this.YQ++,this.hst(n),a=!0):(this.Ztt(0),o=!0));let c,f=this.WQ;if(o){for(c=0;c<f;c++)this.NQ[c].gst();this.WW(!0),this.Utt()}else{const d=this.VQ;for(c=0;c<d;c++)this.jQ[c].yst();if(1===this.dtt)for(c=0;c<f;c++){const p=this.NQ[c],m=p.wst(),g=this.JQ-m,y=e-m;g<0&&0<y?(this.JQ=m<0?0:n<=m?n:m,p.Kc(m,!0,!1,a,this.att,!1)):p.Kc(this.JQ,!0,!1,a,this.att,!1)}else for(c=0;c<f;c++)this.NQ[c].Kc(this.JQ,!0,!1,a,this.att,!1);for(c=0;c<d;c++)this.jQ[c].Sst();this.att&&(this.att=!1)}}sst(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.NQ)o.yst();for(const a of this.NQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.xA(),u=l-a.wst(),c=r-a.wst();u<0&&0<c&&(t=a.wst(),this.Ztt(t))}a.Kc(t,i,e,h,this.att,n)}for(const f of this.NQ)f.Sst();this.att&&t&&(this.att=!1)}bst(){const t=this.BQ.btt().vst(),s=b.vtt.Cx(this,t);return this.WQ=this.NQ.push(s),s}mK(){if(!this.BW())for(const t of this.NQ)t.Mst()}iZ(){for(const t of this.NQ)t.iZ()}xst(){for(const t of this.NQ)t.Gst()}Tst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.NQ[i];return e?(e._st(s),void this.LQ.vK(s.qB(),this)):void 0}for(const h of this.NQ)if(h._tt())if(t){if(h.dj()===t){h._st(s),this.LQ.vK(s.qB(),this);break}}else if(!h.Ist()){h._st(s),this.LQ.vK(s.qB(),this);break}}}TK(t,s){for(const i of this.NQ)if(i._tt())if(s){if(s===i.dj()&&t===i.lj())return!0}else if(t===i.lj())return!0;return!1}ZK(){return this.NQ.some(t=>!t._tt()||t.Cst())}cst(){return this.NQ.some(t=>{if(t._tt()){if(!t.Cst())return!1;const s=t.qB();return!!s&&s.Xz()}return!1})}mj(t){for(const s of this.MZ())for(const i of s.Pst())if(i.Rst()===t)return i}Est(t){for(const s of this.NQ)if(t===s.lj())return s;return null}Ast(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.MZ())for(const h of e.Fst()){const r=s.every(t=>h.kst(t));if(r)return h}}MK(){const t=[];for(const s of this.MZ())t.push(s.qB());return t.filter(t=>t)}QY(){for(const t of this.MZ())t.QY()}kq(){return{tracksJson:this.Dst(),name:this.vr,playheadTime:this.xA(),playbackRate:this.XQ,pingPongState:this.$Q,currentRepeatCount:this.YQ,isPlaying:this.KQ,isScheduled:this.ZQ,initialStateSet:this.QQ,finishedTriggers:this.ott,complete:this.ttt,released:this.stt,markedForRemoval:this.itt,completedTick:this.ett,implicitPause:this.htt,isTemplate:this.ntt,tags:this.utt.join(" "),stringTags:this.ctt,tagsChanged:this.ftt,firstTick:this.att}}Dq(t){t&&(this.Ost(t.tracksJson),this.vr=t.name,this.JQ=t.playheadTime,this.XQ=t.playbackRate,this.$Q=t.pingPongState,this.YQ=t.currentRepeatCount,this.KQ=!!t.isPlaying,this.ZQ=!!t.isScheduled,this.QQ=!!t.initialStateSet,this.ott=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.ttt=!!t.complete,this.stt=!!t.released,this.itt=!!t.markedForRemoval,this.ett=t.completedTick,this.htt=!!t.implicitPause,this.ntt=!!t.isTemplate,this.utt=t.tags.split(" "),this.ctt=t.stringTags,this.ftt=!!t.tagsChanged,this.att=!!t.firstTick)}Dst(){return this.NQ.map(t=>t.kq())}Ost(t){this.xst(),t.forEach((t,s)=>{const i=this.NQ[s];i.Dq(t)}),this.NQ.filter(t=>t.Cst())}static jtt(t){const s=this.ZW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ntt(t){if(b.Ue(t))return t.slice(0);if(b.Ce(t))return t.split(" ");throw new Error("invalid tags")}Lst(){return this.ptt||(this.ptt=b.dr(self.ej,this)),this.ptt}}}{const Nr=self.Ws;Nr.vtt=class extends Nr.ur{constructor(t,s){super(),this.SZ=t,this.Bst=s,this.Nst=s.btt(),this.Wst=NaN,this.jst=NaN,this.Vst=null,this.Ust=null,this.Hst=!1,this.lP=0<s.wst(),this.zst=!1,this.Jst=!1,this.qst=NaN,this.Xst=null,this.$st=this.Bst.Kst().Yst(),this.Zst=[],this.Qst(),this.tit=0,this.eK=0,this.sit=0}static Cx(t,s){return Nr.dr(Nr.vtt,t,s)}pr(){this.$st=null;for(const t of this.Zst)t.pr();Nr.Hn(this.Zst),this.Zst=null,this.SZ=null,this.Vst=null,this.Ust=null,this.Bst=null,this.Xst=null}Qst(){for(const t of this.Bst.eit().iit())this.Zst.push(Nr.hit.Cx(this,t))}Mst(){for(const t of this.Zst)t.Mst()}iZ(){for(const t of this.Zst)t.iZ();this.Vst=null,this.Ust=null}rit(){return this.SZ}nO(){return this.SZ.nO()}Fst(){return this.$st||(this.$st=this.Bst.Kst().Yst()),this.$st}Pst(){return this.Zst}mj(s){for(let t=0;t<this.Zst.length;t++){const i=this.Zst[t];if(i.Rst()===s)return i}}nit(){this.Vst||this.lj()}oit(){return!!this.Vst&&!this.Vst.dV()}Cst(){if(!this._tt())return!1;const t=this.ait(),s=this.nO().kD(t);return!!s&&!s.dV()}qB(){if(this._tt()){const t=this.lit();if(-1!==t)return this.nO().Lz(t)}}uit(){return this.SZ.MZ().indexOf(this)}Gst(){this.Vst=null,this.Wst=NaN,this.Ust=null,this.jst=NaN,this.Hst=!0}Ist(){return!!this.Vst}lj(){if(!this.Hst){if(!this.Vst||!this.oit()){const t=this.ait();this.Vst=this.nO().kD(t)}return this.Vst}}_st(t){if(this.Hst=!1,this.Vst!==t){this.iZ(),this.Vst=t,this.jst=t.qB().HF(),this.Wst=t.o4(),this.Ust=t.ND();for(const s of this.cit()){const i=s.dit,e=s.pit,h=i.mit();switch(h){case"instance-variable":{e.git();const r=t.qB(),n=r.yit(s.name),o=r.wit(n),a=r.Sit(n);o===s.name&&a===s.type&&e.bit(n);break}case"behavior":{const l=s.W6,u=this.qB(),c=t.qB(),f=e.V6(c);if(l&&f){const d=l.uf();u.vit(d),c.vit(d),e.git(),e.Mit(f.g9())}break}}}}}*cit(){for(const t of this.Zst){const s=t.Gtt(),i=this.qB(),e={dit:t,pit:s};switch(t.mit()){case"world-instance":e.property=t.Rst();break;case"instance-variable":{const h=s.git();e.name=i.wit(h),e.type=i.Sit(h);break}case"effect":{const r=i.u5(),n=s.xit(r);e.Git=n;break}case"behavior":{const o=s.V6(i);e.W6=o;break}case"plugin":e.NL=i.WL()}yield e}}ND(){if(!this.Ust||!this.oit()){const t=this.lj();t&&(this.Ust=t.ND())}return this.Ust}Tit(){return this.Bst}ait(){return isNaN(this.Wst)?this.Bst.ait():this.Wst}_it(t){this.Bst._it(t)}Rtt(){return this.Bst.Rtt()}Ett(t){this.Bst.Ett(t)}kZ(){return this.Bst.kZ()}dj(){return this.Bst.dj()}wst(){return this.Bst.wst()}Iit(){return this.Bst.Iit()}Cit(t){this.Bst.Cit(t)}Att(t){this.Bst.Att(t)}aj(t){for(const s of this.Fst())s.aj(t);for(const i of this.Pst())i.aj(t)}Pit(){return this.Bst.Pit()}Rit(t){this.Bst.Rit(t)}lit(){return isNaN(this.jst)?this.Bst.lit():this.jst}Eit(t){this.Bst.Eit(t)}Ait(t){this.Bst.Ait(t)}Fit(){const t=this.lj();if(t){const s=t.A6();if(s.kit())return t.A6().Fit()}return this.Bst.Fit()}Dit(t){this.Bst.Dit(t)}Oit(){const t=this.lj();if(t){const s=t.A6();if(s.kit())return t.A6().Oit()}return this.Bst.Oit()}EG(){return this.Bst.EG()}uf(){return this.Bst.uf()}_tt(){return 0===this.EG()}Lit(){return 1===this.EG()}Bit(){return 2===this.EG()}Nit(){return this.tit}qK(){return this.eK}pst(){return this.sit}mP(){return this.lP}rst(){for(const t of this.Zst)t.rst()}JK(){if(this.nit(),this.oit()||!this._tt()){const t=this.rit(),s=t.Ltt(),i=s?0:this.Iit();for(const h of this.Zst)h.JK(i),0===this.tit&&1===h.Nit()&&(this.tit=1),0===this.eK&&1===h.qK()&&(this.eK=1);this.sit=0;const e=this.Zst.some(t=>t.pst());e&&(this.sit=1),this.Xst=this.Wit(i),this.zst=!1,this.Jst=!1,this.Kc(i),this.jit(this.Wit(i))}}fst(){if(this.nit(),this.oit()||!this._tt()){this.SZ.Ltt();const t=this.SZ.xA()-this.wst();this.Xst=this.Wit(t);for(const s of this.Zst)s.fst(t)}}gst(){if(!this.rit().QK()&&(this.nit(),this.oit()||!this._tt())&&!this.lP){const t=this.SZ.xA(),s=this.wst()+this.Iit();s<=t?this.Kc(this.Iit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Kc(0,!0,!1,!0,!1,!1,!0)}}dst(){for(let t=0,s=this.Zst.length;t<s;t++){const i=this.Zst[t];i.dst(),0===this.tit&&1===i.Nit()&&(this.tit=1),0===this.eK&&1===i.qK()&&(this.eK=1)}}yst(){const s=this.Zst.length;for(let t=0;t<s;t++)this.Zst[t].yst()}Kc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.Vst||this.lj();const o=this.Vst&&!this.Vst.dV(),a=0===this.Bst._f;if((o||!a)&&!(r&&a&&this.qB().Xz()||(i-=this.wst())<0)){this.Vit(i,t),this.Uit(i,t,s);for(let t=0,s=this.Zst.length;t<s;t++)this.Zst[t].Kc(i,e,h,n);this.Hit(i,t),0!==this.tit&&(this.Ust||(this.Ust=this.Vst.ND()),this.Ust)&&this.Ust.uN()}}Sst(){const s=this.Zst.length;for(let t=0;t<s;t++)this.Zst[t].Sst()}Vit(t,s){if(s&&this.lP&&!this.zst){const i=this.rit();if(i.Ltt()){if(t<0)return}else if(t>this.Iit())return;for(const e of this.Zst)e.JK();this.zst=!0}}Hit(t,s){if(s&&this.lP&&!this.Jst){const i=this.rit();if(i.Ltt()){if(t>=this.Iit()){for(const e of this.Zst)e.Kc(this.Iit(),!1,!0);this.Jst=!0}}else if(t<=0){for(const h of this.Zst)h.Kc(0,!1,!0);this.Jst=!0}}}Uit(t,s,i){if(!i&&s&&Nr.G$.Timeline){const e=this.rit(),h=this.Xst._Z(),r=this.Xst.xA(),n=h?h.xA():e.zW();if(t<=r||n<=t)if(this.Xst=this.Nst.zit(t,this.Bst),e.Ltt())h&&this.jit(this.Xst);else{const o=this.Xst._Z();o&&this.jit(o)}}}Wit(t){const s=this.Nst.Jit(t,this.Bst);return s||this.Nst.zit(t,this.Bst)}jit(t){if(Nr.G$.Timeline){const s=this.rit(),i=s.Mtt();Nr.G$.Timeline.M$.PushTriggerTimeline(s),Nr.G$.Timeline.M$.PushTriggerKeyframe(t),i.F4(Nr.G$.Timeline.M$.OnAnyKeyframeReached),i.F4(Nr.G$.Timeline.M$.jit),Nr.G$.Timeline.M$.PopTriggerTimeline(s),Nr.G$.Timeline.M$.PopTriggerKeyframe(t)}}qit(){const t=this.Bst.Kst(),s=t.Xit();return s}$it(){const t=this.Bst.eit(),s=t.Yit(),i=Nr.hit.Cx(this,s);return this.Zst.push(i),i}Kit(t){const s=this.Bst.Kst();s.Zit(t)}Qit(t){for(const s of this.Zst)s.Qit(t)}tet(){for(const t of this.Zst)t.tet()}iet(){if(this.nit(),this.oit()||!this._tt())for(const t of this.Zst)t.iet()}eet(){if(this.nit(),this.oit()||!this._tt()){let t=!1;for(const s of this.Zst){const i=s.eet();!t&&i&&(t=!0)}if(t){const e=this.qit();e.UW(this.rit().xA()),e.aj("noease"),e.Rit(!0),e.Btt("")}}}QY(){isNaN(this.qst)||this.het(this.qst),this.qst=NaN}kq(){const t=this.lj(),s=t?t.o4():this.ait();return{propertyTracksJson:this.ret(),lastKeyframeDataItemJson:this.net(),initialStateOfNestedSet:this.zst,endStateOfNestedSet:this.Jst,instanceUid:s,cleared:this.Hst}}Dq(t){if(t){this.oet(t.propertyTracksJson),this.aet(t.lastKeyframeDataItemJson),this.qst=t.instanceUid,this.zst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.zst=t.initialStateOfNestedSet),this.Jst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Jst=t.endStateOfNestedSet),this.Hst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Zst)0===this.tit&&1===s.Nit()&&(this.tit=1),0===this.eK&&1===s.qK()&&(this.eK=1);this.sit=0,this.Zst.some(t=>t.pst())&&(this.sit=1)}}net(){const t=this.Bst.Kst();return t.let(this.Xst)}ret(){return this.Zst.map(t=>t.kq())}oet(t){t.forEach((t,s)=>{const i=this.Zst[s];i.Dq(t)})}het(t){if(Nr.we(t)){const s=this.nO().kD(t);if(s){const i=this.rit();i.Tst(this.Bst.dj(),s,this.uit())}}}aet(t){const s=this.Bst.Kst();this.Xst=s.uet(t)}}}{const Wr=self.Ws;Wr.hit=class extends Wr.ur{constructor(t,s){super(),this.cet=t,this.fet=s,this.det=s.eit(),this.tit=0,this.eK=0,this.sit=0,this.pet=this.Gtt(),this.met=this.fet.wet().yet(),this.bet=null,this.vet=null}static Cx(t,s){return Wr.dr(Wr.hit,t,s)}pr(){this.cet=null,this.pet&&(this.pet.pr(),this.pet=null),this.met=null,this.fet=null,this.det=null}Nit(){return this.tit}qK(){return this.eK}pst(){return this.sit}Met(){return!!this.vet}xet(t){this.vet=t}Get(){return this.vet}Tet(){return this.cet}_et(){return this.fet}eit(){return this.det}rit(){return this.cet.rit()}nO(){return this.cet.nO()}lj(){return this.cet.lj()}Gtt(){if(!this.pet){let t=this.fet.mit(),s;switch(t){case"behavior":s=new Wr.hit.Iet(this);break;case"effect":s=new Wr.hit.Cet(this),this.eK=1;break;case"instance-variable":s=new Wr.hit.Pet(this);break;case"plugin":s=new Wr.hit.Ret(this),this.eK=1;break;case"world-instance":s=new Wr.hit.Eet(this),this.eK=1,this.tit=1;break;case"value":s=new Wr.hit.Aet(this);break;case"audio":s=new Wr.hit.Fet(this)}this.pet=s}return this.pet}mit(){return this.fet.mit()}ket(t){this.fet.ket(t)}Det(){return this.fet.Oet()}Let(t){this.fet.Bet(t)}pj(){return this.Gtt().Net()}Rst(){return this.fet.Wet()}jet(t){this.fet.Vet(t)}Uet(){return this.fet.EG()}Het(t){this.fet.zet(t)}Jet(){return this.eit().qet(this.fet).EG()}Xet(){return this.fet.Xet()}$et(t){this.fet.$et(t)}Yet(){return this.fet.Yet()}Ket(t){this.fet.Ket(t)}Pit(){return this.fet.Pit()}Rit(t){this.fet.Rit(t)}Rtt(){return this.fet.Rtt()}Ett(t){this.fet.Ett(t)}kZ(){return this.fet.kZ()}Att(t){this.fet.Att(t)}aj(t){for(const s of this.Zet())s.aj(t)}Qet(){return this.fet.Qet()}Zet(){return this.met||(this.met=this.fet.wet().yet()),this.met}TZ(){return this.fet.wet().TZ()}tht(t){return this.det.tht(t,this.fet)}sht(t){return this.det.sht(t,this.fet)}iht(t){let s=this.det.tht(t,this.fet),i;return i=s?this.det.eht(t,this.fet):(s=this.det.sht(t,this.fet),this.det.hht(t,this.fet)),{start:s,end:i}}*rht(){for(const t of this.Zet())yield t.jZ()}*nht(){for(const t of this.Zet())yield t.xA()}Mst(){this.Gtt().Mst()}iZ(){this.Gtt().iZ()}oht(){return this.Gtt().oht()}rst(){this.Gtt().rst()}JK(t){this.Gtt().JK(),this.bet=this.aht(t),this.dst()}fst(t){this.Gtt().fst(),this.bet=this.aht(t)}dst(){const t=this.Tet();if(this.sit=0,t._tt()){const s=this.rit(),i=t.lj(),e=this.Gtt(),h=this.Rst(),r=e.lht();if(r){const n=s.xtt(i,e,h,this);n&&n.length&&(this.sit=1)}else this.sit=0}}aht(t){const s=this.rit(),i=this.det.tht(t,this.fet);return i||(s.Ltt()?this.det.sht(t,this.fet):this.det.hht(t,this.fet))}yst(){this.pet.yst()}Kc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.det.sht(t,this.fet);else{if(this.bet){const o=this.rit(),a=this.bet._Z(),l=this.bet.xA(),u=a?a.xA():o.zW();(t<=l||u<=t)&&(this.bet=this.det.sht(t,this.fet),n=!0)}else this.bet=this.det.sht(t,this.fet),n=!0;h=this.bet}h&&(r=h._Z()),this.pet.Kc(t,h,r,s,i,e,n)}uht(t){if(this.bet){const e=this.rit(),h=this.bet._Z(),r=this.bet.xA(),n=h?h.xA():e.zW();(t<=r||n<=t)&&(this.bet=this.det.sht(t,this.fet))}else this.bet=this.det.sht(t,this.fet);const s=this.bet,i=s._Z();return this.pet.uht(t,s,i)}cht(t,s,i){return this.pet.uht(t,s,i)}Sst(){this.pet.Sst()}static fht(t,s){const i=s._et(),e=s.det;return e.sht(t,i)}static dht(t,s){const i=s._et(),e=s.det;return e.hht(t,i)}pht(){const t=this.fet.wet(),s=t.mht();return this.bet=null,s}Qit(t){this.bet=null;const s=this.fet.wet();s.ght(t)}tet(){this.Gtt().tet()}iet(){const t=this.Gtt().iet();if(t){const s=this.det.qet(this.fet),i=this.Gtt().oht();s.yht(i)}}eet(){const t=this.Gtt().eet();return t&&this.wht(),this.Gtt().Sht(),t}wht(){const t=this.rit().xA(),s=this.Gtt(),i=Wr.hit.fht(t,this),e=this.pht();e.zet(i.EG()),e.UW(t),e.aj(i.bht()),e.Rit(!0),e.vht(s.Mht()),e.yht(s.oht())}kq(){return{sourceAdapterJson:this.Gtt().kq()}}Dq(t){t&&this.Gtt().Dq(t.sourceAdapterJson)}}}{const jr=self.Ws,Vr=jr.hit;Vr.Eet=class{constructor(t){this.xht=t,this.Ght=null,this.Tht()}pr(){this.Ght&&(this.Ght.pr(),this.Ght=null),this.xht=null}lht(){return this.Ght.lht()}mj(){return this.xht}Mst(){this.Ght&&this.Ght.Mst()}iZ(){this.Ght&&this.Ght.iZ()}Tht(){return this.Ght||(this.Ght=this._ht()),this.Ght}git(){}HF(){return this.git()}Iht(){}rst(){this.Tht().rst()}JK(){this.Tht().JK()}fst(){this.Tht().fst()}yst(){this.Ght.Cht()}Kc(t,s,i,e,h,r,n){let o=this.xht.Jet(),a;switch(o){case"numeric":a=Vr.Pht.Kc(t,s,i,this.xht);break;case"angle":a=Vr.Rht.Kc(t,s,i,this.xht);break;case"boolean":a=Vr.Eht.Kc(t,s,i,this.xht);break;case"color":a=Vr.Aht.Kc(t,s,i,this.xht);break;case"text":a=Vr.Fht.Kc(t,s,i,this.xht)}this.Ght.kht(t,a,s,i,e,h,r,n)}uht(t,s,i){switch(this.xht.Jet()){case"numeric":return Vr.Pht.Kc(t,s,i,this.xht);case"angle":return Vr.Rht.Kc(t,s,i,this.xht);case"boolean":return Vr.Eht.Kc(t,s,i,this.xht);case"color":return Vr.Aht.Kc(t,s,i,this.xht);case"text":return Vr.Fht.Kc(t,s,i,this.xht)}}Sst(){this.Ght.Dht()}tet(){this.Tht().Oht()}Sht(){this.Tht().Sht()}oht(){return this.Tht().oht()}iet(){return this.Tht().iet()}eet(){return this.Tht().eet()}Mht(){const t=this.xht,s=t.Tet(),i=s.rit().xA(),e=Vr.fht(i,t),h=e._Z(),r=t.Jet();switch(r){case"numeric":return Vr.Pht.Kc(i,e,h,t);case"angle":return Vr.Rht.Kc(i,e,h,t);case"boolean":return Vr.Eht.Kc(i,e,h,t);case"color":return Vr.Aht.Kc(i,e,h,t);case"text":return Vr.Fht.Kc(i,e,h,t)}}_ht(){const t=this.xht,s=t.Qet()?t.Jet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Vr.Bht.Lht(this);case"numeric":case"number":case"angle":return new("combo"===this.xht.Uet()?Vr.Bht.Lht:Vr.Bht.Nht)(this);case"color":case"offsetColor":return new Vr.Bht.Wht(this);default:return new Vr.Bht.Nht(this)}}kq(){return{propertyAdapterJson:this.Tht().kq()}}Dq(t){t&&this.Tht().Dq(t.propertyAdapterJson)}}}{const Ur=self.Ws;class Hr extends Ur.hit.Eet{constructor(t){super(t),this.jht=NaN}git(){return this.xht._et().Oet()[0]}HF(){return this.jht||super.HF()}Iht(){return this.xht.Tet().lj()}bit(t){const s=this.xht._et().Oet()[0];s!==t&&(this.jht=t)}Kc(t,s,i,e,h,r,n){this.Tht().Vht(s.Net())&&super.Kc(t,s,i,e,h,r,n)}uht(t,s,i){if(this.Tht().Vht(s.Net()))return super.uht(t,s,i)}kq(){return Object.assign(super.kq(),{index:this.jht})}Dq(t){t&&(super.Dq(t),this.jht=t.index)}}Ur.hit.Pet=Hr}{const zr=self.Ws;class Jr extends zr.hit.Eet{constructor(t){super(t),this.k7=NaN}git(){const t=this.xht._et();return t.Oet()[1]}Iht(){const t=this.xht._et(),s=this.xht.Tet(),i=this.k7||t.Oet()[0],e=s.lj(),h=e.Uht(i),r=e.Hht()[h];return r.A6()}V6(t){const s=this.xht._et(),i=s.Oet()[2];return t.zht(i)}Mit(t){const s=this.xht._et();s.Oet()[0]!==t&&(this.k7=t)}Kc(t,s,i,e,h,r,n){const o=this.xht.Tet(),a=o.lj();this.V6(a.qB())&&super.Kc(t,s,i,e,h,r,n)}uht(t,s,i){const e=this.xht.Tet(),h=e.lj();if(this.V6(h.qB()))return super.uht(t,s,i)}kq(){return Object.assign(super.kq(),{sid:this.k7})}Dq(t){t&&(super.Dq(t),this.k7=t.sid)}}zr.hit.Iet=Jr}{const qr=self.Ws;class Xr extends qr.hit.Eet{constructor(t){super(t)}git(){return this.xht._et().Oet()[1]}Iht(){const t=this.xht,s=t.Tet(),i=s.ND(),e=i.aN(),h=e.u5(),r=this.xit(h),n=r.HF();return e.X6(n)?e.Jht(n):null}xit(t){const s=this.xht,i=s._et().Oet()[0];return t.qht(i)}Kc(t,s,i,e,h,r,n){this.Xht()&&super.Kc(t,s,i,e,h,r,n)}uht(t,s,i){if(this.Xht())return super.uht(t,s,i)}Xht(){const t=this.xht,s=t.Tet(),i=s.ND(),e=i.aN(),h=e.u5(),r=this.xit(h);if(r){const n=r.HF();return e.X6(n)}}}qr.hit.Cet=Xr}{const $r=self.Ws;class Yr extends $r.hit.Eet{constructor(t){super(t)}git(){return this.xht._et().Oet()[0]}Iht(){return this.xht.Tet().lj().A6()}Kc(t,s,i,e,h,r,n){const o=this.xht.Tet(),a=o.qB().WL(),l=o.lj().qB().WL();a===l&&super.Kc(t,s,i,e,h,r,n)}uht(t,s,i){const e=this.xht.Tet(),h=e.qB().WL(),r=e.lj().qB().WL();if(h===r)return super.uht(t,s,i)}$ht(){const t=this.xht.Tet(),s=t.qB().WL();if($r.G$.Yht&&s instanceof $r.G$.Yht&&("initial-frame"===this.xht.Rst()||"initial-animation"===this.xht.Rst()))switch(this.xht.kZ()){case"relative":case"absolute":return null}}}$r.hit.Ret=Yr}{const Kr=self.Ws;class Zr extends Kr.hit.Eet{constructor(t){super(t),this.Kht=0,this.Zht=!1}lht(){return!1}JK(){let t=this.xht.eit(),s=this.xht._et();s=t.qet(s),this.Kht=s.jZ()}fst(){}Net(){return this.Zht||this.xht.Kc(0),this.Kht}Kc(t,s,i,e,h,r,n){this.Kht=Kr.hit.Pht.Kc(t,s,i,this.xht),this.Zht=!0}tet(){}Sht(){}oht(){return this.Kht}iet(){return!1}eet(){return!1}kq(){return{value:this.Kht,init:this.Zht}}Dq(t){t&&(this.Kht=t.value,this.Zht=!t.hasOwnProperty("init")||t.init)}}Kr.hit.Aet=Zr}{const Qr=self.Ws;class tn extends Qr.hit.Eet{constructor(t){super(t),this.Qht=!1,this.trt=null,this.srt=null,this.irt=null,this.SZ=this.xht.rit(),this.cet=this.xht.Tet(),this.ert=this.xht.Det(),this.hrt=this.ert[0],this.rrt=this.ert[1],this.ert[3]?this.nrt=this.ert[3]:this.nrt=Math.random().toString(36).slice(2),this.ort=NaN,this.art=NaN,this.lrt=NaN,this.urt=null,this.crt()}pr(){super.pr(),this.trt=null,this.srt=null,this.irt=null,this.SZ=null,this.cet=null,this.ert=null,this.hrt=null,this.urt=null}crt(){if(self.Ws.G$.Audio){const t=this.xht.nO(),s=t.frt(self.Ws.G$.Audio);s&&(this.trt=s.LL().A6()),this.srt=self.Ws.G$.Audio.drt,this.irt=self.Ws.G$.Audio.prt}}mrt(){if(!this.urt){const t=this.xht.Tet(),s=t.mj("audioSource");s&&(this.urt=s.Gtt())}}grt(){const t=this.xht.Tet(),s=t.mj("volume");return(s?s.Gtt():this).art}Mst(){super.Mst(),this.Qht=!1,this.trt&&(this.irt&&(this.ort=this.irt.PlaybackTime.call(this.trt,this.nrt),this.art=this.irt.Volume.call(this.trt,this.nrt)),this.srt)&&this.srt.WW.call(this.trt,this.nrt)}yrt(){return this.nrt}wrt(){return this.lrt}Srt(t){this.lrt=t}JK(){super.JK(),this.ort=NaN,this.Qht=!1}fst(){super.fst();const t=this.xht.rit(),s=t.xA();switch(this.ort=s-this.rrt,this.xht.Rst()){case"audioSource":break;case"volume":this.art=this.xht.uht(s)}this.Qht=!1}Kc(t,s,i,e,h,r,n){if(this.trt)switch(this.xht.Rst()){case"audioSource":{if(!this.SZ.Ltt())return;if(e)return void(this.srt&&this.srt.WW.call(this.trt,this.nrt));if(t<this.rrt)return void(this.Qht=!1);const o=this.irt.brt.call(this.trt,this.nrt),a=this.SZ.KW();if(a!==o&&this.srt.YW.call(this.trt,this.nrt,a),this.Qht)return;if(!this.xht.rit().IsPlaying())return;if(this.Qht=!0,isNaN(this.ort)){const l=self.performance.now(),u=t-this.rrt,c=this.trt.GetAudioContextState();if("suspended"===c)return void(this.Qht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.srt){let t=this.wrt();isNaN(t)?(this.Srt(0),t=0):this.Srt(t),this.srt.PlayFromTimeline.call(this.trt,this.hrt,t,this.nrt,p)}}else{const m=this.ort,g=(this.ort=NaN,this.grt()),y=(this.art=NaN,this.trt.GetAudioContextState());if("suspended"===y)return void(this.Qht=!1);this.srt&&(this.Srt(g),this.srt.PlayFromTimeline.call(this.trt,this.hrt,g,this.nrt,m))}break}case"volume":this.mrt(),super.Kc(t,s,i,e,h,r,n)}}uht(t,s,i){if(this.trt)switch(this.xht.Rst()){case"audioSource":return;case"volume":return this.mrt(),super.uht(t,s,i)}}vrt(t,s){return this.urt?this.urt.wrt():0}Mrt(t,s,i,e){this.urt&&this.urt.Srt(this.vrt()+s),this.srt&&this.urt&&this.srt.Srt.call(this.trt,this.urt.yrt(),this.urt.wrt())}xrt(t,s,i){this.urt&&this.urt.Srt(s),this.srt&&this.urt&&this.srt.Srt.call(this.trt,this.urt.yrt(),this.urt.wrt())}Grt(){return!0}kq(){return{audioPlaybackStarted:this.Qht,audioTag:this.nrt,pauseTime:this.ort,pauseVolume:this.art,volume:this.lrt}}Dq(t){t&&(this.Qht=t.audioPlaybackStarted,this.nrt=t.audioTag,this.ort=t.pauseTime,this.art=t.pauseVolume,this.lrt=t.volume,this.crt())}}Qr.hit.Fet=tn}{const sn=self.Ws;sn.hit.Bht=class{constructor(t){this.pet=t,this.xht=t.mj(),this.Ust=this.xht.Tet().ND(),this.Trt=this.xht.Rst(),this._rt=!1,this.Irt=null,this.Crt=null}pr(){this.pet=null,this.xht=null,this.Ust=null,this.Irt=null,this.Crt=null}lht(){return!1}Mst(){}iZ(){this.Ust=null,this.Irt=null,this.Crt=null}Gtt(){return this.pet}mj(){return this.xht}ND(){return this.Ust||(this.Ust=this.xht.Tet().ND()),this.Ust}Prt(t){this._rt=!!t}Rrt(){return this._rt}rst(){}JK(){}fst(){}Oht(){this.Irt=this.oht()}Sht(){this.Irt=null}oht(){}iet(){}eet(){}Vht(t){const s=typeof this.Ert(),i=typeof t;return s==i}Cht(){}kht(t,s,i,e,h,r,n,o){}Dht(){}Art(){const t=this.Frt(()=>{const t=this.xht._et(),s=this.xht.eit();return s.qet(t)},()=>{const t=this.xht._et(),s=this.xht.eit();return s.krt(t)});return t.Drt()}Ort(){const t=this.xht.rit(),e=t.xA()-this.xht.Tet().wst(),s=this.Frt(()=>{const t=this.xht._et(),s=this.xht.eit();return s.sht(e,t)},()=>{const t=this.xht._et(),s=this.xht.eit(),i=s.hht(e,t);return i||s.krt(t)});return s.Drt()}Frt(t,s){const i=this.xht.rit();return(i.Ltt()?t:s)()}Lrt(t,s){const i=this.xht.kZ();return("relative"===i?t:s)()}Brt(t,s){return(this.Rrt()?(this.Prt(!1),t):s)()}Nrt(t){}Wrt(){return this.pet.HF()}jrt(){return this.Crt||(this.Crt=this.pet.Iht()),this.Crt}Vrt(t,s,i,e,h,r){const n=this.xht.mit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}kq(){return{firstAbsoluteUpdate:this._rt,saveState:this.Irt}}Dq(t){t&&(this._rt=t.firstAbsoluteUpdate,this.Irt=t.saveState)}Urt(t,s=!1){const i=[];for(const e of t){const h=e.Tet().wst();for(const r of e.Zet())(s&&0===r.xA()||!s)&&i.push({time:h+r.xA(),value:r.Drt()})}return i.sort((t,s)=>t.time-s.time)}Hrt(t,s,i){return this.zrt(s,i)}zrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Ws,hn=new Map,rn=[0,0,0];class nn extends en.hit.Bht{constructor(t){super(t)}rst(){}JK(){}fst(){}oht(){const t=this.xht.mit(),s=this.jrt(),i=this.Wrt();switch(t){case"behavior":return this.Jrt(s.qrt(i));case"effect":return this.Jrt(s[i]);case"plugin":return this.Jrt(s.qrt(i));case"world-instance":return this.Jrt(this.Ert())}}iet(){const t=this.Art();return!this.Xrt(t,this.Ert())}eet(){return!en.Me(this.Irt)&&!this.Xrt(this.Irt,this.Ert())}Xrt(t,s){return t=this.$rt(t),s=this.$rt(s),t.Ga(s)}Art(){const t=super.Art();return this.$rt(t)}Ort(){const t=super.Ort();return this.$rt(t)}Nrt(t){}Jrt(t){return(en.hh(t,en.Yo)?t.toArray():t).slice(0,3)}$rt(t){return en.hh(t,en.Yo)?t:new en.Yo(t[0],t[1],t[2],1)}Vht(t){return!0}lht(){return!0}Cht(){const t=this.xht.rit(),s=this.xht.lj(),i=this.xht.Gtt(),e=t.xtt(s,i,this.Trt,this.xht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.xht.mit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Trt)||n.set(this.Trt,{Yrt:!1,color:new en.Yo(0,0,0,1)})}}Krt(t,s,i){const e=hn.get(t).get(s).get(i);return e.Yrt=!0,e.color}kht(t,s,i,e,h,r,n,o){const a=this.xht.rit(),l=this.xht.Tet(),u=this.xht.lj(),c=this.xht.Gtt(),f=this.xht.mit(),d=this.Trt,p=a.xtt(u,c,d,this.xht);if(p&&1<p.length){const m=this.Urt(p,!0),g=this.Hrt(a,a.xA(),m);if(g){const y=l.wst(),w=g.time-y;if(0==w)this.Krt(u,f,this.Trt).na(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.xht.Kc(w,!1,!0),x=en.Yo.sl(S,M[0]),G=en.Yo.sl(b,M[1]),T=en.Yo.sl(v,M[2]);this.Krt(u,f,this.Trt).na(x,G,T)}}}else this.Zrt(s[0],s[1],s[2])}Dht(){const t=this.xht.lj();if(hn.has(t)){const s=hn.get(t),i=this.xht.mit();if(s.has(i)){const e=s.get(i);if(e.has(this.Trt)){const h=e.get(this.Trt),r=h.Yrt,n=h.color;r&&this.Zrt(n.ga(),n.ya(),n.wa()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Ert(){const t=this.xht.mit(),s=this.jrt(),i=this.Wrt();switch(t){case"behavior":return this.$rt(s.qrt(i));case"effect":return s[i].clone();case"plugin":return this.$rt(s.qrt(i));case"world-instance":return this.ND().GN().clone()}}Zrt(t,s,i){const e=this.xht.mit(),h=this.jrt(),r=this.Wrt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.Qrt(r,rn);break;case"effect":h[r].ra(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.Qrt(r,rn);break;case"world-instance":this.ND().tnt(t,s,i)}}kq(){}Dq(t){}}en.hit.Bht.Wht=nn}{const on=self.Ws,an=on.hit;class ln extends on.hit.Bht{constructor(t){super(t)}rst(){}JK(){}fst(){}oht(){return this.Ert()}iet(){const t=this.Art();return t!==this.oht()}eet(){return!on.Me(this.Irt)&&this.Irt!==this.oht()}lht(){return!1}kht(t,s,i,e,h,r,n,o){const a=this.xht,l=a.Tet(),u=a.mit(),c=a.rit(),f=l.lj(),d=a.Gtt(),p=this.Trt,m=c.xtt(f,d,p,a);if(m&&1<m.length){const y=this.Urt(m),w=t+l.wst(),S=this.Hrt(c,w,y);S&&(s=S.value)}const g=a.Jet();switch(g){case"numeric":if(an.Pht.snt(this.Wrt(),this.jrt(),s,u))break;return;case"angle":if(an.Rht.snt(this.Wrt(),this.jrt(),s,u))break;return;case"boolean":if(an.Eht.snt(this.Wrt(),this.jrt(),s,u))break;return;case"color":if(an.Aht.snt(this.Wrt(),this.jrt(),s,u))break;return;case"text":if(!an.Fht.snt(this.Wrt(),this.jrt(),s,u))return}this.Zrt(s)}Ert(){const t=this.xht.mit(),s=this.jrt(),i=this.Wrt();switch(t){case"behavior":return s.qrt(i);case"effect":return s[i];case"instance-variable":return s.int(i);case"plugin":return s.qrt(i)}}Zrt(t){const s=this.xht.mit(),i=this.jrt(),e=this.Wrt();switch(s){case"behavior":i.Qrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.ent(e,t);break;case"plugin":i.Qrt(e,t)}}}on.hit.Bht.Lht=ln}{const un=self.Ws,cn=(un.hit.Bht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{hnt:s,rnt:i,nnt:e,round:h,ont:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.xht.kZ()?t.ant(s,i.rit().ktt()):t.ant(s)},(t,s)=>t.Fv(s),t=>t.Av(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.xht.kZ()?t.lnt(s,i.rit().ktt()):t.lnt(s)},(t,s)=>t.Ov(s),t=>t.Dv(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.xht.kZ(),l=1===i.unt.EG();if((h||l)&&s.KN()&&s.h6()){if(isNaN(i.cnt)){let e=[],t=s.BN();for(;t;)e.push(t),t=t.BN();e.reverse();let a=(t,s)=>s.rit().Est(t.lj()),h=(t,s)=>{const i=a(t,s);if(i)return i.Fit();const e=t.lj().A6();return e.kit()?e.Fit():t.dnt().fnt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.mj(i);if(!r)return e;const n=r._et().wet();if(!n)return e;const o=n.krt();return o?o.Net():e},n;if(l){let t=e[e.length-1];n=t._m()}else{let s=e[0],t=s.dnt().fnt(),i=s.dnt().pnt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).dnt().pnt();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.cnt=0===n?Number.EPSILON:n}e||s.hg(t/i.cnt,!0)}else s.hg(t)}},(t,s)=>t.Fm(s),t=>t._m(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.xht.kZ(),a=1===i.unt.EG();if((h||a)&&s.KN()&&s.n6()){if(isNaN(i.cnt)){let e=[],t=s.BN();for(;t;)e.push(t),t=t.BN();e.reverse();let h=(t,s)=>{e=t;const i=s.rit().Est(e.lj());var e;if(i)return i.Oit();const h=t.lj().A6();return h.kit()?h.Oit():t.dnt().mnt()},r=(t,s,i,e=0)=>{const h=s.rit().Est(t.lj());if(!h)return e;const r=h.mj(i);if(!r)return e;const n=r._et().wet();if(!n)return e;const o=n.krt();return o?o.Net():e},n;if(a){let t=e[e.length-1];n=t.Om()}else{let s=e[0],t=s.dnt().mnt(),i=s.dnt().gnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).dnt().gnt();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.cnt=0===n?Number.EPSILON:n}e||s.ynt(t/i.cnt,!0)}else s.ynt(t)}},(t,s)=>t.Im(s),t=>t.Om(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.wnt(s)},(t,s)=>t.y5(s),t=>t.w5(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.Snt||1,n=(s/=r,t.qR()),o=n+s;if(0===e.bnt)1<o?e.bnt+=o-1:o<0&&(e.bnt+=o),t.vnt(s);else{const a=t.qR()+s;0<s&&0<e.bnt?1<a&&(e.bnt+=a-1):0<s&&e.bnt<0?(e.bnt+=s,0<e.bnt&&(t.vnt(e.bnt),e.bnt=0)):s<0&&0<e.bnt?(e.bnt+=s,e.bnt<0&&(t.vnt(e.bnt),e.bnt=0)):s<0&&e.bnt<0&&a<0&&(e.bnt+=a)}},(t,s)=>{t.YR(s)},t=>t.qR(),!1,!0,(r,h,n)=>{switch(r.bnt=0,r.xht.kZ()){case"relative":{r.xht.eit();let t=r.xht._et(),s=t.wet(),i=s.yet(),e=r.ND().qR(),h=e;for(const o of i){const a=o.xA(),l=r.xht.uht(a);h=e+l,h=un.Gr(h,0,1)}r.Mnt=e-h,r.Mnt=Math.round(100*(r.Mnt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].xA(),c=r.xht.uht(u);h-=c,h=un.Gr(h,0,1)}r.xnt=h,r.xnt=Math.round(100*(r.xnt+Number.EPSILON))/100;break}}const t="relative"===r.xht.kZ(),s=1===r.unt.EG();if((t||s)&&h.KN()&&h.f6()){let s=[],t=h.BN();for(;t;)s.push(t),t=t.BN();s.reverse();let i=(t,s,i)=>{const e=s.rit().Est(t.lj());if(!e)return 0;const h=e.mj(i);if(!h)return 0;const r=h._et().wet();if(!r)return 0;const n=r.krt();return n?n.Net():0},e=s[0].dnt().Gnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.Snt=0===e?1:e}},i=>{switch(i.xht.kZ()){case"relative":{i.bnt=0;let t=i.ND(),s=t.qR();s=Math.round(100*(s+Number.EPSILON))/100,i.xht.rit().Ltt()?(t.YR(s+i.Mnt),i.ST=0):(t.YR(s-i.xnt),i.ST=i.Gtt().Mht());break}}}),fn("offsetOriginX",(t,s)=>t.Tnt(s),(t,s)=>t._nt(s),t=>t.bW(),!1),fn("offsetOriginY",(t,s)=>t.Int(s),(t,s)=>t.Cnt(s),t=>t.MW(),!1),fn("offsetZElevation",(t,s)=>t.Pnt(s),(t,s)=>t.Bv(s),t=>t.Lv(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t._m()<0?-1:1;if("relative"===e.xht.kZ()&&t.KN()&&t.h6()){const r=i.Fit()*h*s;isNaN(e.cnt)&&cn.get("offsetWidth").hnt(t,1,i,e,!0),t.hg(r/e.cnt,!0)}else t.hg(i.Fit()*h*s)}},(t,s,i)=>{t.Fm(i.Fit()*s)},(e,h)=>{const r=e._m()<0?-1:1;if(e.h6()){let t=e.BN(),s=h.rit().Est(t.lj()),i=NaN;if(s)i=t._m()/s.Fit();else{const n=t.lj().A6();i=n.kit()?t._m()/n.Fit():1}return e._m()*r/(h.Fit()*i)}return e._m()*r/h.Fit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Om()<0?-1:1;if("relative"===e.xht.kZ()&&t.KN()&&t.n6()){const r=i.Oit()*h*s;isNaN(e.cnt)&&cn.get("offsetHeight").hnt(t,1,i,e,!0),t.ynt(r/e.cnt,!0)}else t.ynt(i.Oit()*h*s)}},(t,s,i)=>{t.Im(i.Oit()*s)},(e,h)=>{const r=e.Om()<0?-1:1;if(e.n6()){let t=e.BN(),s=h.rit().Est(t.lj()),i=NaN;if(s)i=t.Om()/s.Oit();else{const n=t.lj().A6();i=n.kit()?t.Om()/n.Oit():1}return e.Om()*r/(h.Oit()*i)}return e.Om()*r/h.Oit()},!1);class dn extends un.hit.Bht{constructor(t){super(t),this.ST=0,this.bnt=0,this.Mnt=0,this.xnt=0,this.Snt=NaN,this.cnt=NaN,this.Rnt=void 0,this.Ent=void 0,this.Ant=null,this.Fnt=null,this.knt=null,this.Dnt=null,this.Ont=null,this.Lnt=null,this.Bnt=null,this.Nnt=null,this.Wnt=!1,this.jnt=!1,un.hh(this.xht.rit(),un.Vnt)?this.unt=new un.hit.Bht.Unt(this):this.unt=new un.hit.Bht.Hnt(this);const s=this.xht.Rst();switch(this.xht.mit()){case"world-instance":{const i=cn.get(s);this.Ant=i.nnt,this.Fnt=i.hnt,this.knt=i.rnt,this.Wnt=i.round,this.jnt=i.ont,this.Ont=i.init,this.Dnt=i.reset;break}case"audio":this.Lnt=t.vrt,this.Bnt=t.Mrt,this.Nnt=t.xrt,this.Wnt=!!t.Grt(),this.jnt=!1}}pr(){this.unt=null,this.Ant=null,this.Fnt=null,this.knt=null,this.Dnt=null,this.Ont=null,this.Lnt=null,this.Bnt=null,this.Nnt=null,super.pr()}lht(){return this.unt.lht()}znt(){return this.ST}Jnt(t){this.ST=t}rst(){this.Dnt&&this.Dnt(this)}JK(){const t=this.unt.JK();if("number"==typeof t&&(this.ST=t),this.Ont){const s=this.ND(),i=this.xht.Tet();this.Ont(this,s,i)}}fst(){const t=this.unt.fst();"number"==typeof t&&(this.ST=t)}oht(){return this.Ert()}iet(){const t=this.Art();return t!==this.oht()}eet(){return!un.Me(this.Irt)&&this.Irt!==this.oht()}Cht(){this.unt.Cht()}kht(t,s,i,e,h,r,n,o){return this.unt.kht(t,s,i,e,h,r,n,o)}Dht(){this.unt.Dht()}Ert(){const t=this.jrt(),s=this.Wrt(),i=this.ND(),e=this.xht.Tet(),h=this.xht.mit();switch(h){case"behavior":return t.qrt(s);case"effect":return t[s];case"instance-variable":return t.int(s);case"plugin":return t.qrt(s);case"world-instance":return this.Ant(i,e);case"audio":return this.Lnt.call(this.Gtt(),i,e)}}Zrt(t,s,i){const e=this.jrt(),h=this.Wrt(),r=this.ND(),n=this.xht.Tet(),o=this.xht.mit();switch(o){case"behavior":e.qnt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Xnt(h,t);break;case"plugin":e.qnt(h,t,this.Gtt().$ht());break;case"world-instance":this.Fnt(r,t,n,this);break;case"audio":this.Bnt.call(this.Gtt(),r,t,n,this)}}$nt(t,s,i){let e=this.xht.Rtt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.xht.rit(),u=l.xA(),c=this.xht.tht(u);if(!c)return}const h=this.jrt(),r=this.Wrt(),n=this.ND(),o=this.xht.Tet(),a=this.xht.mit();switch(a){case"behavior":h.Qrt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.ent(r,t);break;case"plugin":h.Qrt(r,t,this.Gtt().$ht());break;case"world-instance":this.knt(n,t,o);break;case"audio":this.Nnt.call(this.Gtt(),n,t,o)}}}Ynt(t,s,i,e,h,r,n,o){this.unt.Ynt(t,s,i,e,h,r,n,o)}Knt(t,s,i,e,h){let r=(t="angle"===this.xht.Uet()?un.Ir(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Ert(),l;switch(l=0===o?this.Wnt?Math.round(a):this.jnt?"angle"===this.xht.Uet()?un._r(Math.round(un.Ir(a))):Number(un.toFixed(a,2)):a:this.Wnt?Number(un.toFixed(a,o)):(this.jnt,a),this.Zrt(l-a,s,i),this.xht.Rst()){case"offsetWidth":case"offsetScaleX":{const u=this.ND(),c=u._m(),f=Number(un.toFixed(c,2));u.hg(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.ND(),p=d.Om(),m=Number(un.toFixed(p,2));d.ynt(m-p);break}}}kq(){return Object.assign(super.kq(),{v:this.ST,a:this.bnt,fod:this.Mnt,bod:this.xnt,of:this.Snt,sf:this.cnt,armorf:this.Rnt,armandf:this.Ent})}Dq(t){t&&(super.Dq(t),this.ST=t.v,this.bnt=t.a,this.Mnt=un.we(t.fod)?t.fod:0,this.xnt=un.we(t.bod)?t.bod:0,this.Snt=un.we(t.of)?t.of:NaN,this.cnt=un.we(t.sf)?t.sf:NaN,this.Rnt=un.we(t.armorf)?t.armorf:void 0,this.Ent=un.we(t.armandf)?t.armandf:void 0)}}un.hit.Bht.Nht=dn}{const pn=self.Ws;class mn{constructor(t){this.Znt=!1,this.Kht=0,this.Qnt=!1,this.tot=!1,this.Zst=t;for(let t=0,s=this.Zst.length;t<s;t++)this.Zst[t].xet(this)}Pst(){return this.Zst}sot(){this.Znt=!0}iot(){return this.Znt}vht(t){this.Kht=t}Net(){return this.Kht}eot(t){this.Qnt=t}hot(){return this.Qnt}gst(t){this.tot=t}rot(){return this.tot}w0(){this.Znt=!1,this.Kht=0,this.Qnt=!1,this.tot=!1}}class gn{constructor(t){this.not=t}pr(){this.not=null}EG(){return 0}JK(){const t=this.not;return this.not.mj(),t.Lrt(()=>t.Frt(()=>0,()=>t.Gtt().Mht()),()=>{})}fst(){}lht(){this.not;const t=this.not.mj();switch(t.kZ()){case"relative":return!1;case"absolute":return!0}}Cht(){this.not;const t=this.not.mj(),s=t.Rst();switch(t.kZ()){case"relative":break;case"absolute":if(t.Met()){const i=t.Get();i.w0()}else{const e=t.rit(),h=t.lj(),r=t.Gtt(),n=e.xtt(h,r,s,t);n&&1<n.length&&new mn(n)}}}kht(t,s,i,e,h,r,n,o){const a=this.not,l=this.not.mj();switch(l.kZ()){case"relative":{const u=a.znt();a.Zrt(s-u,i,e),r&&this.Ynt(t,i,e,h,u,s),a.Jnt(s);break}case"absolute":{const c=l.rit(),f=l.Tet();if(l.lj(),l.Gtt(),l.Met()){const d=l.Get(),p=d.Pst(),m=a.Urt(p,!0),g=a.Hrt(c,c.xA(),m);if(g){const y=f.wst(),w=g.time-y;if(0==w)d.gst(n),d.eot(o),d.sot(),d.vht(d.Net()+s);else{if(w<0)return;const S=l.uht(w);d.gst(n),d.eot(o),d.sot(),d.vht(d.Net()+(s-S))}}}else a.$nt(s,o,n);break}}}Dht(){const t=this.not,s=this.not.mj();switch(s.kZ()){case"relative":break;case"absolute":if(s.Met()){const i=s.Get();i.iot()&&t.$nt(i.Net(),i.hot(),i.rot())}}}Ynt(t,s,i,e,h,r){const n=this.not;e||(s&&t===s.xA()?n.Knt(s.jZ(),s,i):i&&t===i.xA()?n.Knt(i.jZ(),s,i):r-h==0&&n.Knt(s.jZ(),s,i))}}pn.hit.Bht.Hnt=gn}{const yn=self.Ws;class wn{constructor(t){this.not=t}pr(){this.not=null}EG(){return 1}JK(){const t=this.not;return t.Prt(!0),this.Nrt(t.Art())}fst(){const t=this.not;if(t.Art()!==t.Ort())return t.Prt(!0),this.Nrt(t.Ort())}lht(){return!1}Cht(){}kht(t,s,i,e,h,r,n,o){const a=this.not,l=a.znt();switch(a.mj().kZ()){case"relative":a.Zrt(s-l,i,e),r&&this.Ynt(t,i,e,h,l,s,!1,n);break;case"absolute":a.Rrt()?(a.Prt(!1),a.Zrt(l,i,e)):0===t&&0===a.mj().rit().zW()?a.$nt(s,!0,!1):(a.Zrt(s-l,i,e),r&&this.Ynt(t,i,e,h,l,s,this.oot(),n))}a.Jnt(s)}Dht(){}Nrt(t){const s=this.not;return t-s.oht()}oot(){let t=this.not,s=t.ND().lj(),i=t.mj().nO(),e=i.Mtt(),h=0;for(const r of e.bK())0===r.EG()?r.TK(s)&&h++:1===r.EG()&&r.lj()===s&&h++;return h<=1}Ynt(t,s,i,e,h,r,n,o){const a=this.not;e?s&&t===s.xA()?a.Knt(s.jZ(),s,i,n,o):i&&t===i.xA()?a.Knt(i.jZ(),s,i,n,o):i||a.Knt(s.jZ(),s,i,n,o):s&&t===s.xA()?a.Knt(s.jZ(),s,i,n,o):i&&t===i.xA()?a.Knt(i.jZ(),s,i,n,o):r-h==0&&a.Knt(s.jZ(),s,i,n,o)}}yn.hit.Bht.Unt=wn}{const Sn=self.Ws,bn=self._c;Sn.hit.Pht=class{constructor(){}static snt(t,s,i,e){let h;switch(e){case"behavior":h=s.qrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.int(t);break;case"plugin":h=s.qrt(t)}return h!==i}static Kc(r,n,o,a){if(!o){let t=a._et(),s=a.eit();return(t=s.krt(t)).jZ()}let l=a.Rtt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Uet()?"discrete":l))return n.jZ();if("continuous"===l||"step"===l){const u=a.rit().Ctt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.jZ(),f=o.jZ(),d=n.NZ("cubic-bezier"),p=o.NZ("cubic-bezier"),m=d&&d.aot()&&p&&p.lot();if(!m&&c===f)return c;let t=n.xA(),s=o.xA(),i=("step"===l&&0!==u&&(r=Sn.Gr(r,t,s)),Sn.normalize(r,t,s)),e=n.bht(),h;if(m){const y=s-t;h=bn.jc(e)(y*i,0,1,y),h=bn.jc("cubicbezier")(h,c,c+d.HZ(),f+p.qZ(),f)}else h=bn.jc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Uet()?Math.floor(h):h}}}}{const vn=self.Ws;vn.hit.Rht=class{constructor(){}static snt(t,s,i,e){let h;switch(e){case"behavior":h=s.qrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.int(t);break;case"plugin":h=s.qrt(t)}return h!==i}static Kc(t,s,i,e){if(!i){let t=e._et(),s=e.eit();return(t=s.krt(t)).jZ()}let h=e.Rtt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Uet()?"discrete":h))return s.jZ();if("continuous"===h||"step"===h){const r=e.rit().Ctt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.xA(),o=i.xA(),a=s.jZ(),l=i.jZ(),u=("step"===h&&0!==r&&(t=vn.Gr(t,n,o)),s.NZ("angle"));if(!u){if(a===l)return a;const f=vn.normalize(t,n,o),d=self._c.jc(s.bht());return vn.kr(a,l,d(f,0,1,1))}{const p=u.uot();if(a===l&&0===p)return a;const m=vn.normalize(t,n,o),g=self._c.jc(s.bht()),y=g(m,0,1,1);switch(u.cot()){case"closest":return vn.kr(a,l,y,p);case"clockwise":return vn.Dr(a,l,y,p);case"anti-clockwise":return vn.Or(a,l,y,p)}}}}}}{const Mn=self.Ws;Mn.hit.Eht=class{constructor(){}static snt(t,s,i,e){let h;switch(e){case"behavior":h=s.qrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.int(t);break;case"plugin":h=s.qrt(t)}return!!h!=!!i}static Kc(t,s,i,e){if(i)return s.jZ()?1:0;{let t=e._et(),s=e.eit();return(t=s.krt(t)).jZ()?1:0}}}}{const xn=self.Ws,Gn=[0,0,0],Tn=[0,0,0],_n=[0,0,0];xn.hit.Aht=class{constructor(){}static snt(t,s,i,e){let h;switch(e){case"behavior":h=s.qrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.int(t);break;case"plugin":h=s.qrt(t)}return Array.isArray(i)?(Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2]):(_n.Na(i),Gn[0]=Math.floor(255*_n.ga()),Gn[1]=Math.floor(255*_n.ya()),Gn[2]=Math.floor(255*_n.wa())),Array.isArray(h)?(Tn[0]=h[0],Tn[1]=h[1],Tn[2]=h[2]):(_n.Na(h),Tn[0]=Math.floor(255*_n.ga()),Tn[1]=Math.floor(255*_n.ya()),Tn[2]=Math.floor(255*_n.wa())),Gn[0]!==Tn[0]||Gn[1]!==Tn[1]||Gn[2]!==Tn[2]}static Kc(t,s,i,e){if(!i){let t=e._et(),s=e.eit(),i=(t=s.krt(t)).jZ();return Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2],Gn}let h=e.Rtt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.jZ();return Gn[0]=r[0],Gn[1]=r[1],Gn[2]=r[2],Gn}if("continuous"===h||"step"===h){const n=e.rit().Ctt();if("step"===h&&0!==n){const M=1/n;t=Math.floor(t*M)/M}const o=s.xA(),a=i.xA(),l=s.jZ(),u=i.jZ(),c=("step"===h&&0!==n&&(t=xn.Gr(t,o,a)),xn.normalize(t,o,a)),f=s.bht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self._c.jc(f),b=a-o,v=b*c;return Gn[0]=d===g?d:S(v,d,g-d,b),Gn[1]=p===y?p:S(v,p,y-p,b),Gn[2]=m===w?m:S(v,m,w-m,b),Gn}}}}{const In=self.Ws;In.hit.Fht=class{constructor(){}static snt(t,s,i,e){let h;switch(e){case"behavior":h=s.qrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.int(t);break;case"plugin":h=s.qrt(t)}return h!==i}static Kc(t,s,i,e){if(i)return s.jZ();{let t=e._et(),s=e.eit();return(t=s.krt(t)).jZ()}}}}{const Cn=self.Ws;Cn.CY=class{constructor(){this.dot=new Map}pr(){for(const t of this.dot.values())t.pr();this.dot.clear(),this.dot=null}xc(t){const s=new Cn.pot(t),i=s.uf();this.dot.set(i,s)}ri(t){return this.dot.get(t)}mtt(){return 0}static mot(t,s,i,e){if(s)for(const h of s)Cn.CY.got("create",h,t,i,e)}static yot(t,s,i,e){if(s)for(const h of s)Cn.CY.got("create-including-disabled",h,t,i,e)}static wot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Dq(t)}):t.forEach(t=>{Cn.CY.got("load",t,i,s,e)})}static got(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.Dq(s),i.push(r);break;case"create":if("function"==typeof r.Pit&&!r.Pit())return r.pr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Pn=self.Ws;Pn.pot=class{constructor(t){this.vr="",this.mst=NaN,this.Sot=0,this.bot="default",this.vot="default",this.Mot=!1,this.xot=!1,this.Got=1,this.Nst=null,this.Tot="",this._ot=!1,this.Iot=!0,t&&(this.vr=t[0],this.mst=t[1],this.Sot=t[2],this.bot=t[3],this.vot=t[4],this.Mot=!!t[6],this.xot=!!t[7],this.Got=t[8],this.Tot=t[9],this._ot=!!t[10],this.Iot=!!t[11],this.Nst=new Pn.Cot(t[5],this))}pr(){this.Nst.pr(),this.Nst=null}btt(){return this.Nst||(this.Nst=new Pn.Cot(null,this)),this.Nst}uf(){return this.vr}h8(t){this.vr=t}zW(){return this.mst}HW(t){this.mst=t}Ctt(){return this.Sot}Ptt(t){this.Sot=t}Rtt(){return this.bot}Ett(t){this.bot=t}kZ(){return this.vot}Att(t){this.vot=t}qW(){return this.Mot}JW(t){this.Mot=t}$W(){return this.xot}XW(t){this.xot=t}hW(){return this.Got}Ftt(t){this.Got=t}eZ(){return this.Tot}ktt(){return this._ot}Dtt(){return this.Iot}kq(){return{trackDataJson:this.Nst.kq(),name:this.vr,totalTime:this.mst,step:this.Sot,interpolationMode:this.bot,resultMode:this.vot,loop:this.Mot,pingPong:this.xot,repeatCount:this.Got,startOnLayout:this.Tot,transformWithSceneGraph:!!this._ot,useSystemTimescale:this.Iot}}Dq(t){t&&(this.btt().Dq(t.trackDataJson),this.vr=t.name,this.mst=t.totalTime,this.Sot=t.step,this.bot=t.interpolationMode,this.vot=t.resultMode,this.Mot=t.loop,this.xot=t.pingPong,this.Got=t.repeatCount,this.Tot=t.startOnLayout,this._ot=!!t.transformWithSceneGraph,this.Iot=!!t.useSystemTimescale)}}}{const Rn=self.Ws;class En{constructor(t,s){this.Nst=s,this.Pot=null,this.Rot=null,this.Wst=NaN,this.jst=NaN,this.bot="default",this.vot="default",this.zu=!1,this.Eot=null,this.det=null,this.bf="",this.Aot=null,this.Fot=0,this.kot=this.Nst.Itt().zW(),this._f=0,this.vr="",t&&(t[0]&&(this.Pot=t[0],this.Wst=t[0][2],this.jst=t[0][1]),this.bot=t[1],this.vot=t[2],this.zu=!!t[3],t[6]&&(this.bf=t[6]),t[7]&&(this.Aot=t[7],this.Fot=t[7][0],this.kot=t[7][1]),t[8]&&(this.Rot=t[8]),t[8]&&(this.Rot=t[8]),t[9]&&(this._f=t[9]),t[10]&&(this.vr=t[10]),this.Eot=new Rn.Dot(t[4],this),this.det=new Rn.Oot(t[5],this))}pr(){this.Pot=null,this.Nst=null,this.Eot&&(this.Eot.pr(),this.Eot=null),this.det&&(this.det.pr(),this.det=null),this.Aot=null}btt(){return this.Nst}Kst(){return this.Eot||(this.Eot=new Rn.Dot(null,this)),this.Eot}eit(){return this.det||(this.det=new Rn.Oot(null,this)),this.det}Lot(){return this.Pot}lit(){return this.jst}Eit(t){this.jst=t}ait(){return this.Wst}_it(t){this.Wst=t}Rtt(){return this.bot}Ett(t){this.bot=t}kZ(){return this.vot}Att(t){this.vot=t}Pit(){return this.zu}Rit(t){this.zu=!!t}dj(){return this.bf}wst(){return this.Fot}Iit(){return this.kot}Cit(t){this.kot=t}Fit(){return this.Rot[0]}Ait(t){this.Rot||(this.Rot=[]),this.Rot[0]=t}Oit(){return this.Rot||(this.Rot=[]),this.Rot[1]}Dit(t){this.Rot||(this.Rot=[]),this.Rot[1]=t}EG(){return this._f}uf(){return this.vr}kq(){return{keyframeDataJson:this.Eot.kq(),propertyTrackDataJson:this.det.kq(),instanceData:this.Pot,additionalInstanceData:this.Rot,instanceUid:this.Wst,objectClassIndex:this.jst,interpolationMode:this.bot,resultMode:this.vot,enabled:this.zu,id:this.bf,nestedData:this.Aot,type:this._f,name:this.vr}}Dq(t){t&&(this.Pot=t.instanceData,this.Wst=t.instanceUid,this.jst=t.objectClassIndex,this.bot=t.interpolationMode,this.vot=t.resultMode,this.zu=t.enabled,this.bf=t.id,this._f=t.type||0,this.vr=t.name||"",this.kot=this.Nst.Itt().zW(),t.nestedData&&(this.Aot=t.nestedData,this.Fot=this.Aot[0],this.kot=this.Aot[1]),t.additionalInstanceData&&(this.Rot=t.additionalInstanceData),this.Kst().Dq(t.keyframeDataJson),this.eit().Dq(t.propertyTrackDataJson))}}Rn.Cot=class{constructor(t,s){this.BQ=s,this.Bot=[],Rn.CY.mot(this.Bot,t,En,this)}pr(){this.BQ=null;for(const t of this.Bot)t.pr();Rn.Hn(this.Bot),this.Bot=null}Itt(){return this.BQ}vst(){const t=new En(null,this);return this.Bot.push(t),t}Not(t){return t.Kst().Yst()[0]}Wot(t){const s=t.Kst().Yst();return s.at(-1)}Jit(s,t){const i=t.Kst().Yst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.xA()===s)return h}}jot(s,t){const i=t.Kst().Yst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.xA()>s)return h}}Vot(s,t){const i=t.Kst().Yst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.xA()>=s)return h}}zit(s,t){const i=t.Kst().Yst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.xA()<=s)return e}}*Stt(){for(const t of this.Bot)yield t}kq(){return{trackDataItemsJson:this.Bot.map(t=>t.kq())}}Dq(t){t&&Rn.CY.wot(this.Bot,t.trackDataItemsJson,En,this)}}}{const An=self.Ws;class Fn{constructor(t,s){this.det=s,this.Uot="",this.Hot=null,this.Trt=null,this._f=null,this.zot=NaN,this.Jot=NaN,this.bot="default",this.vot="default",this.zu=!1,this.qot=null,this.Xot=!0,t&&(this.Uot=t[0][0],this.Hot=t[0].slice(1),this.Trt=t[1],this._f=t[2],this.zot=t[3],this.Jot=t[4],this.bot=t[5],this.vot=t[6],this.zu=!!t[7],this.qot=new An.$ot(t[8],this),this.Xot=t[9])}pr(){this.qot.pr(),this.qot=null,this.det=null,this.Hot=null}eit(){return this.det}wet(){return this.qot||(this.qot=new An.$ot(null,this)),this.qot}mit(){return this.Uot}ket(t){this.Uot=t}Oet(){return this.Hot}Bet(t){this.Hot=t}Wet(){return this.Trt}Vet(t){this.Trt=t}EG(){return this._f}zet(t){this._f=t}Xet(){return this.zot}$et(t){this.zot=t}Yet(){return this.Jot}Ket(t){this.Jot=t}Rtt(){return this.bot}Ett(t){this.bot=t}kZ(){return this.vot}Att(t){this.vot=t}Pit(){return this.zu}Rit(t){this.zu=!!t}Qet(){return!!this.Xot}kq(){return{propertyKeyframeDataJson:this.qot.kq(),sourceAdapterId:this.Uot,sourceAdapterArguments:this.Hot,property:this.Trt,type:this._f,min:this.zot,max:this.Jot,interpolationMode:this.bot,resultMode:this.vot,enabled:this.zu,canHavePropertyKeyframes:this.Xot}}Dq(t){t&&(this.Uot=t.sourceAdapterId,this.Hot=t.sourceAdapterArguments,this.Trt=t.property,this._f=t.type,this.zot=t.min,this.Jot=t.max,this.bot=t.interpolationMode,this.vot=t.resultMode,this.zu=t.enabled,this.Xot=t.canHavePropertyKeyframes,this.wet().Dq(t.propertyKeyframeDataJson))}}An.Oot=class{constructor(t,s){this.Bst=s,this.Yot=[],An.CY.mot(this.Yot,t,Fn,this)}pr(){this.Bst=null;for(const t of this.Yot)t.pr();An.Hn(this.Yot),this.Yot=null}Tit(){return this.Bst}Yit(){const t=new Fn(null,this);return this.Yot.push(t),t}qet(t){const s=t.wet();return s.yet()[0]}krt(t){const s=t.wet(),i=s.yet();return i.at(-1)}tht(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.xA()===s)return r}}eht(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.xA()>s)return r}}hht(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.xA()>=s)return r}}sht(s,t){const i=t.wet(),e=i.yet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.xA()<=s)return h}}*iit(){for(const t of this.Yot)yield t}kq(){return{propertyTrackDataItemsJson:this.Yot.map(t=>t.kq())}}Dq(t){t&&An.CY.wot(this.Yot,t.propertyTrackDataItemsJson,Fn,this)}}}{const kn=self.Ws;class Dn{constructor(t,s){if(this.Eot=s,this.v3=-1,this.Kot="noease",this.Zot=!1,this.utt=null,this.Qot=null,t){this.v3=t[0],this.Kot=t[1],this.Zot=!!t[2];const i=t[3];this.utt=i?i.split(" "):[],this.Qot=new Set(this.utt.map(t=>t.toLowerCase())),this.tat=null}}pr(){this.Eot=null,kn.Hn(this.utt),this.utt=null,this.Qot.clear(),this.Qot=null,this.tat=null}Kst(){return this.Eot}_Z(){return this.tat}sat(t){this.tat=t}xA(){return this.v3}UW(t){this.v3=t,this.Eot.iat()}bht(){return this.Kot}aj(t){this.Kot=t}Pit(){return this.Zot}Rit(t){this.Zot=!!t}ZW(){return this.utt}Btt(t){this.utt=t?t.split(" "):[],this.Qot=new Set(this.utt.map(t=>t.toLowerCase()))}eat(){return this.Qot}kst(t){return this.Qot.has(t.toLowerCase())}kq(){return{time:this.v3,ease:this.Kot,enable:this.Zot,tags:this.utt}}Dq(t){t&&(this.v3=t.time,this.Kot=t.ease,this.Zot=t.enable,this.utt=t.tags,this.Qot=new Set(this.utt.map(t=>t.toLowerCase())))}}kn.Dot=class{constructor(t,s){this.Bst=s,this.$st=[],kn.CY.mot(this.$st,t,Dn,this),this.iat()}pr(){this.Bst=null;for(const t of this.$st)t.pr();kn.Hn(this.$st),this.$st=null}iat(){this.$st.sort((t,s)=>t.xA()-s.xA());for(let t=0;t<this.$st.length;t++){const s=this.$st[t];s.sat(this.$st[t+1])}}Tit(){return this.Bst}hat(){return this.$st.length}Yst(){return this.$st}Xit(){const t=new Dn(null,this);return this.$st.push(t),this.iat(),t}Zit(t){for(const s of this.$st)if(t(s)){const i=this.$st.indexOf(s);-1!==i&&(s.pr(),this.$st.splice(i,1))}this.rat(),this.iat()}rat(){this.$st.sort((t,s)=>t.xA()-s.xA())}let(t){return this.$st.indexOf(t)}uet(t){return this.$st[t]}*nat(){for(const t of this.$st)yield t}*oat(){for(let t=this.$st.length-1;0<=t;t--)yield this.$st[t]}kq(){return{keyframeDataItemsJson:this.$st.map(t=>t.kq())}}Dq(t){t&&(kn.CY.wot(this.$st,t.keyframeDataItemsJson,Dn,this),this.iat())}}}{const On=self.Ws;class Ln{constructor(t,s){this.qot=s,this.Kht=null,this.aat=null,this._f="",this.v3=NaN,this.Kot="noease",this.Zot=!1,this.lat=null,this.uat=void 0,this.cat="line",t&&(this.Kht=t[0][0],this.aat=t[0][1],this._f=t[0][2],this.v3=t[1],this.Kot=t[2],this.Zot=!!t[3],this.cat=t[5],this.lat=null,t[4]&&(this.lat=new On.fat(t[4],this)),this.tat=null,this.dat=null)}pr(){this.qot=null,this.lat&&(this.lat.pr(),this.lat=null),this.tat=null,this.dat=null}pat(){return this.lat}sat(t){this.tat=t}_Z(){return this.tat}mat(t){this.dat=t}IZ(){return this.dat}Net(){return this.Kht}vht(t){"color"===this._f&&On.we(t)?(this.Kht[0]=On.Zr(t),this.Kht[1]=On.Qr(t),this.Kht[2]=On.tn(t)):this.Kht=t}Drt(){return this.aat}yht(t){"color"===this._f&&On.we(t)?(this.aat[0]=On.Zr(t),this.aat[1]=On.Qr(t),this.aat[2]=On.tn(t)):this.aat=t}jZ(){const t=this.qot._et().kZ();return"relative"===t?this.Net():"absolute"===t?this.Drt():void 0}EG(){return this._f}zet(t){this._f=t}xA(){return this.v3}UW(t){this.v3=t,this.qot.gat()}bht(){return this.Kot}aj(t){this.Kot=t}Pit(){return this.Zot}Rit(t){this.Zot=!!t}CZ(){return this.cat}NZ(s){if(this.lat){if(!this.uat&&null!==this.uat){const i=this.lat.yat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.dj()===s)return this.uat=h,this.uat}}this.uat=null}return this.uat}}kq(){const t=this.lat;return{addonDataJson:t&&t.kq(),value:this.Kht,aValue:this.aat,type:this._f,time:this.v3,ease:this.Kot,enable:this.Zot}}Dq(t){t&&(t.addonDataJson&&this.lat._SetFromJson(t.addonDataJson),this.Kht=t.value,this.aat=t.aValue,this._f=t.type,this.v3=t.time,this.Kot=t.ease,this.Zot=t.enable)}}On.$ot=class{constructor(t,s){this.fet=s,this.met=[],this.wat=[],On.CY.mot(this.met,t,Ln,this),On.CY.yot(this.wat,t,Ln,this),this.gat()}pr(){this.fet=null;for(const t of this.met)t.pr();On.Hn(this.met),this.met=null;for(const s of this.wat)s.pr();On.Hn(this.wat),this.wat=null}gat(){let s=this.met;s.sort((t,s)=>t.xA()-s.xA());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.sat(s[t+1]),0<=t-1&&i.mat(s[t-1])}(s=this.wat).sort((t,s)=>t.xA()-s.xA());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.sat(s[t+1]),0<=t-1&&e.mat(s[t-1])}}mht(){const t=new Ln(null,this);return this.met.push(t),this.gat(),t}ght(t){for(const s of this.met)if(t(s)){const i=this.met.indexOf(s);-1!==i&&(s.pr(),this.met.splice(i,1))}this.Sat(),this.gat()}Sat(){this.met.sort((t,s)=>t.xA()-s.xA())}_et(){return this.fet}bat(){return this.met.length}krt(){return this.met[this.met.length-1]}yet(){return this.met}TZ(){return this.wat}*vat(){for(const t of this.met)yield t}*Mat(){for(let t=this.met.length-1;0<=t;t--)yield this.met[t]}kq(){const t=this.met,s=this.wat;return{propertyKeyframeDataItemsJson:t.map(t=>t.kq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.kq())}}Dq(t){t&&(On.CY.wot(this.met,t.propertyKeyframeDataItemsJson,Ln,this),On.CY.wot(this.wat,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.gat())}}}{const Bn=self.Ws;class Nn{constructor(t,s){this.lat=s,this.bf=t[0],this.xat=t[1]}pr(){this.lat=null,this.xat=null}pat(){return this.lat}dj(){return this.bf}kq(){return{id:this.bf,data:this.xat}}Dq(t){t&&(this.bf=t.id,this.xat=t.data)}}class Wn extends Nn{constructor(t,s){super(t,s),this.Gat=this.xat[0],this.Tat=!!this.xat[1],this._at=this.xat[2],this.Iat=!!this.xat[3]}pr(){super.pr()}HZ(){return this.Gat}aot(){return this.Tat}qZ(){return this._at}lot(){return this.Iat}kq(){return Object.assign(super.kq(),{startAnchor:this.Gat,startEnable:!!this.Tat,endAnchor:this._at,endEnable:!!this.Iat})}Dq(t){t&&(super.Dq(t),this.Gat=t.startAnchor,this.Tat=!!t.startEnable,this._at=t.endAnchor,this.Iat=!!t.endEnable)}}class jn extends Nn{constructor(t,s){super(t,s),this.Cat=this.xat[0],this.Pat=this.xat[1]}pr(){super.pr()}cot(){return this.Cat}uot(){return this.Pat}kq(){return Object.assign(super.kq(),{direction:this.Cat,revolutions:this.Pat})}Dq(t){t&&(super.Dq(t),this.Cat=t.direction,this.Pat=t.revolutions)}}Bn.fat=class{constructor(t,s){this.Rat=s,this.Eat=[],Bn.CY.mot(this.Eat,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}pr(){this.Rat=null;for(const t of this.Eat)t.pr();Bn.Hn(this.Eat),this.Eat=null}Aat(){return this.Rat}yat(){return this.Eat}*Fat(){for(const t of this.Eat)yield t}kq(){return{addonDataItemsJson:this.Eat.map(t=>t.kq())}}Dq(t){t&&Bn.CY.wot(this.Eat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}}}{let m=self.Ws,i=0;m.Vnt=class extends m.oK{constructor(t,s){super("tween-"+i++,t,s),this.bf="",this.kat=!1,this.Dat="start-value",this.Vst=null,this.Oat=null,this.Lat=null,this.cet=null,this.Bat=null}ytt(t){const s=m.dr(m.Event,"tweenstatereleased");s.Nat=this,t.dispatchEvent(s)}EG(){return 1}UQ(){for(const t of this.BQ.btt().Stt())this.NQ.push(m.Wat.Cx(this,t));this.cet=this.NQ[0]}bst(){const t=this.BQ.btt().vst(),s=m.Wat.Cx(this,t);return this.NQ.push(s),this.jat(),s}jat(){this.cet=this.NQ[0]}mj(t){return this.cet.Pst()[0]}Het(t){this.Vat=t}lj(){const t=this.MZ();if(t&&t.length){const s=t[0];if(this.cet=s){const i=s.lj();return s.oit()?i:void 0}}}Uat(t){this.Lat||(this.Lat=[]),this.Lat.push(t)}Hat(t){this.Oat||(this.Oat=[]),this.Oat.push(t)}zat(t){if(this.Lat){const s=this.Lat.indexOf(t);-1!==s&&this.Lat.splice(s,1)}}Jat(t){if(this.Oat){const s=this.Oat.indexOf(t);-1!==s&&this.Oat.splice(s,1)}}qat(t,s){for(const i of this.NQ)for(const e of i.Zst)if(e.Rst()===s){const h=e.eit(),r=e._et(),n=h.qet(r);n.vht(t),n.yht(t)}}Xat(t){for(const s of this.NQ)for(const i of s.Zst)if(i.Rst()===t)return i}$at(t){for(const s of t){const i=this.Xat(s);this.qat(i.oht(),s)}if(this.Ltt()){const e=this.zW()-this.xA();this.HW(e);for(const h of this.NQ)h.Cit(e);this.Ztt(0)}else{const r=this.xA();this.HW(r);for(const n of this.NQ)n.Cit(r);this.Ztt(r)}this.Qtt()}Yat(t,s){const i=this.Xat(s),e=i.eit(),h=i._et(),r=e.krt(h);r.UW(this.zW()),r.vht(t),r.yht(t)}Kat(t){this.bf=t}dj(){return this.bf}Zat(t){this.Dat=t}Qat(){return this.Dat}fj(t){this.kat=t}cj(){return this.kat}Vtt(){if(this.Lat)for(const t of this.Lat)t(this);if(!this.QK())for(const s of this.NQ)s.eet()}Utt(){this.ett=this.wf.Htt()}sZ(){if(!this.ott&&(this.ott=!0,this.Oat))for(const t of this.Oat)t(this)}UW(t){this.tlt(),super.UW(t)}hst(t){(t=m.we(t)?t:this.zW())<0?this.JQ=0:t>=this.zW()?this.JQ=this.zW():this.JQ=t,this.cet.rst()}JK(t){if(!this.tZ()&&"current-state"===this.Qat())for(const s of this.NQ)s.iet();super.JK(t)}WW(t=!1){if(super.WW(t),!this.QK())for(const s of this.NQ)s.tet()}w0(t=!0,s=!1){this.tlt(),super.w0(t,s)}tlt(){for(const t of this.NQ){const s=t=>{const s=t.xA(),i=this.zW();return 0!==s&&s!==i};t.Kit(s),t.Qit(s)}}zY(){if(!this.BW()){const t=this.lj();if(t&&t.qB().Xz())return!1;this.LQ.VK(this),this.ust()}return!0}YK(h,t,s){if(this.Vst||(this.Vst=this.lj()),!this.Vst||this.Vst.dV())this.WW(!0),this.Utt();else{const i=this.Vst.Zk();if(0!==(h=-1!==i?s*i:h)||0!==this.ltt){this.ltt=h;const r=this.JQ+this.qQ,n=h*this.XQ,o=r+n,a=this.BQ.mst;o<0?(this.JQ=0,this.qQ=-o):a<=o?(this.JQ=a,this.qQ=this.JQ-o):(this.JQ=o,this.qQ=0);let t=!1,s=!1,i=this.qW(),e=this.$W();i||e?i&&!e?0<this.XQ?this.JQ>=a&&(this.hst(0),this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),s=!0):this.JQ<=0&&(this.hst(a),this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),s=!0):!i&&e?0<this.XQ?this.JQ>=a&&(this.Ztt(a),this.YW(-1*this.KW()),s=!0,1===this.$Q?this.YQ<this.hW()?(this.YQ++,this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt),this.$Q=0):(this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt),t=!0):0===this.$Q&&(this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt),this.$Q=1)):this.JQ<=0&&(this.Ztt(0),this.YW(-1*this.KW()),s=!0,1===this.$Q?this.YQ<this.hW()?(this.YQ++,this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt),this.$Q=0):(t=!0,this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt)):0===this.$Q&&(this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt),this.$Q=1)):i&&e&&(0<this.XQ?this.JQ>=a&&(this.Ztt(a),this.YW(-1*this.KW()),s=!0,0===this.$Q&&(this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt)),1===this.$Q&&(this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt)),this.$Q++,this.$Q=m.wrap(this.$Q,0,2)):this.JQ<=0&&(this.Ztt(0),this.YW(-1*this.KW()),s=!0,0===this.$Q&&(this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt)),1===this.$Q&&(this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),this.slt(m.hlt.elt.M$.nlt),this.slt(m.hlt.elt.M$.olt)),this.$Q++,this.$Q=m.wrap(this.$Q,0,2))):0<this.XQ?this.JQ>=a&&(this.YQ<this.hW()?(this.YQ++,this.hst(0),this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),s=!0):(this.Ztt(a),t=!0)):this.JQ<=0&&(this.YQ<this.hW()?(this.YQ++,this.hst(a),this.slt(m.hlt.elt.M$.ilt),this.slt(m.hlt.elt.M$.rlt),s=!0):(this.Ztt(0),t=!0)),t?(this.cet.gst(),this.WW(!0),this.Utt()):(this.cet.Kc(this.JQ,!0,!1,s,this.att,!1),this.att&&(this.att=!1))}}}slt(t){const s=this.lj(),i=s.llt(m.hlt.elt);i.ult(this),this.wf.F4(t,s,i.V6()),i.clt()}kq(){const t=super.kq(),s=this.Itt();return Object.assign(t,{tweenDataItemJson:s.kq(),id:this.bf,destroyInstanceOnComplete:this.kat,initialValueMode:this.Dat})}Dq(t){if(t){const s=this.Itt();s.Dq(t.tweenDataItemJson),super.Dq(t),this.bf=t.id,this.kat=t.destroyInstanceOnComplete,this.Dat=t.initialValueMode,this.jat()}}static IsPlaying(t){return t.IsPlaying()}static sj(t){return t.sj()}static flt(t){return!!t.$W()&&0===t.Ott()}static dlt(t){return!!t.$W()&&1===t.Ott()}static plt(t){const s=t.runtime.Mtt(),i=new m.pot;if(t.json){i.Dq(t.json.tweenDataItemJson);const e=new m.Vnt(i,s);return e.Dq(t.json),e}{const h=new m.Vnt(i,s),r=(m.Ue(t.mlt)||(t.mlt=[t.mlt]),h.Kat(t.id),h.Btt(t.tags),h.Zat(t.initialValueMode),h.fj(t.glt),h.JW(t.loop),h.XW(t.pingPong),h.HW(t.time),h.Ptt(0),h.Ett("default"),h.Att(t.mlt[0].resultMode),h.Ftt(t.repeatCount),h.bst()),n=(r._it(t.U6.o4()),r.Ett("default"),r.Att(t.mlt[0].resultMode),r.Rit(!0),r.Eit(t.U6.qB().HF()),t.U6.A6()),o=n.kit()?n.Fit():t.U6.ND()._m(),a=n.kit()?n.Oit():t.U6.ND().Om(),l=(r.Ait(o),r.Dit(a),r.qit()),u=(l.UW(0),l.aj("noease"),l.Rit(!0),l.Btt(""),r.qit());u.UW(t.time),u.aj("noease"),u.Rit(!0),u.Btt("");for(const c of t.mlt){const f=r.$it(),d=(f.ket(c.ylt),f.Let(c.wlt),f.jet(c.property),f.Het(c.type),f.$et(NaN),f.Ket(NaN),f.Ett("default"),f.Att(c.resultMode),f.Rit(!0),f.pht()),p=(d.zet(c.valueType),d.UW(0),d.aj(c.ease),d.Rit(!0),d.vht(c.Slt),d.yht(c.Slt),f.pht());p.zet(c.valueType),p.UW(t.time),p.aj(c.ease),p.Rit(!0),p.vht(c.blt),p.yht(c.blt),f.Gtt()}return h}}static _it(t,s){if(!isNaN(s))for(const i of t.MZ())i._it(s)}vlt(t,s){return this.Bat||(this.Bat=m.dr(self.hj,this,t,s)),this.Bat}}}{const Vn=self.Ws;Vn.Wat=class extends Vn.vtt{constructor(t,s){super(t,s),this.Mlt=null,this.xlt=null}static Cx(t,s){return Vn.dr(Vn.Wat,t,s)}Glt(){1===this.Zst.length?this.Mlt=this.Zst[0]:(this.Mlt=this.Zst[0],this.xlt=this.Zst[1])}Qst(){for(const t of this.Bst.eit().iit())this.Zst.push(Vn.Tlt.Cx(this,t));this.Glt()}$it(){const t=this.Bst.eit(),s=t.Yit(),i=Vn.Tlt.Cx(this,s);return this.Zst.push(i),this.Glt(),i}JK(){if(this.nit(),this.oit()||!this._tt()){const t=this.rit(),s=t.Ltt(),i=s?0:this.Iit();for(const h of this.Zst)h.JK(i),0===this.tit&&1===h.Nit()&&(this.tit=1),0===this.eK&&1===h.qK()&&(this.eK=1);this.sit=0;const e=this.Zst.some(t=>t.pst());e&&(this.sit=1),this.Xst=this.Wit(i),this.zst=!1,this.Jst=!1,this.Kc(i)}}yst(){}Kc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.Vst||this.lj(),this.Vst){const o=!this.Vst.dV();return o&&(!r||!this.qB().Xz())&&((this.xlt?(this.Mlt.Kc(t,i,e,n),this.xlt):this.Mlt).Kc(t,i,e,n),void(0!==this.Mlt.Nit()&&(this.Ust||(this.Ust=this.Vst.ND()),this.Ust)&&this.Ust.uN()))}}Sst(){}Dq(t){super.Dq(t),this.Glt()}}}{const Un=self.Ws;Un.Tlt=class extends Un.hit{constructor(t,s){super(t,s),this._lt=!1}static Cx(t,s){return Un.dr(Un.Tlt,t,s)}Kc(t,s=!1,i=!1,e=!1){let h,r;if(this._lt)h=this.met[0],r=this.met[1];else{if(s)h=this.det.sht(t,this.fet);else{if(this.bet){const n=this.rit(),o=this.bet._Z(),a=this.bet.xA(),l=o?o.xA():n.zW();(t<=a||l<=t)&&(this.bet=this.det.sht(t,this.fet))}else this.bet=this.det.sht(t,this.fet);h=this.bet}r=h._Z()}this.pet.Kc(t,h,r,s,i,e)}pht(){const t=this.fet.wet(),s=t.mht();return this.bet=null,this._lt=this.Zet().length<=2,s}Qit(t){this.bet=null;const s=this.fet.wet();s.ght(t),this._lt=this.Zet().length<=2}kq(){return{sourceAdapterJson:this.Gtt().kq(),basic:this._lt}}Dq(t){t&&(this.Gtt().Dq(t.sourceAdapterJson),this._lt=t.basic)}}}{const Hn=self.Ws,zn=self._c;Hn.Zc=class extends Hn.ur{constructor(t,s=!0){super(),this.vr=t[0],this.Ilt=t[2],this.Clt=[];for(const i of t[1]){const e=Hn.Plt.Cx(this,i);this.Clt.push(e)}for(let t=0;t<this.Clt.length;t++){const h=this.Clt[t],r=this.Clt[t+1],n=this.Clt[t-1];h.sat(r),h.mat(n)}this.Rlt=new Map,this.Elt=new Map,this.Alt(),s&&zn.tf(this.vr,(t,s,i,e)=>this.Kc(t,s,i,e),null,{transition:this})}static Cx(t){return Hn.dr(Hn.Zc,t)}pr(){for(const t of this.Clt)t.pr();Hn.Hn(this.Clt),this.Clt=null,this.Rlt.clear(),this.Rlt=null,this.Elt.clear(),this.Elt=null}Qc(t){this.Ilt=!!t}Flt(t){const s=this.Elt.get(t);if(s)return s;for(const i of this.Clt)if(i.klt()===t)return this.Elt.set(t,i),i}Dlt(s){for(let t=this.Clt.length-1;0<=t;t--){const i=this.Clt[t],e=i.klt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.IZ();if(!h)break;if(h.klt()!==t.klt())break;t=h}return t}}}}Kc(t,s,i,e){let h=t/e;if(this.Ilt){const w=this.Flt(0),S=this.Flt(1),b=s+(s+i)*w.Olt(),v=(s+i)*S.Olt(),M=v-b;return 0===e?b+M:zn.ef(t,b,M,e)}0===e&&(h=1);let r=this.Dlt(h),n=r._Z();if(!n){const x=r.IZ(),G=r;r=x,n=G}const o=n.klt()-r.klt(),a=Hn.Mr(h,r.klt(),n.klt(),0,o);if(r.Llt()||0==o){const T=s+(s+i)*r.Olt(),_=(s+i)*n.Olt(),I=_-T;return 0==o?1===a?T+I:T:zn.ef(a,T,I,o)}let l=r.klt(),u=r.Olt(),c=r.klt()+r.Blt(),f=r.Olt()+r.Nlt(),d=n.klt()+n.Wlt(),p=n.Olt()+n.jlt(),m=n.klt(),g=n.Olt(),y=zn.jc("spline")(a,l,u,c,f,d,p,m,g,this.Rlt.get(r));return(1-(y+=r.Olt()))*s+y*(s+i)}Alt(){this.Rlt.clear();for(let t=0;t<this.Clt.length-1;t++){const s=this.Clt[t];if(s.aot()){const i=s,e=this.Clt[t+1];if(e.lot()){const h=i.klt(),r=i.klt()+i.Blt(),n=e.klt()+e.Wlt(),o=e.klt();this.Rlt.set(i,zn.hf(h,r,n,o))}}}}}}{const Jn=self.Ws;Jn.Plt=class extends Jn.ur{constructor(t,s){super(),this.Vlt=t,this.Ult=s[0],this.Hlt=s[1],this.zlt=s[2],this.Jlt=s[3],this.qlt=s[4],this.Xlt=s[5],this.Tat=s[6],this.Iat=s[7],this.$lt=s[8],this.tat=null,this.dat=null}pr(){this.Vlt=null}static Cx(t,s){return Jn.dr(Jn.Plt,t,s)}sat(t){this.tat=t}_Z(){return this.tat}mat(t){this.dat=t}IZ(){return this.dat}klt(){return this.Ult}Olt(){return this.Hlt}Blt(){return this.zlt}Nlt(){return this.Jlt}Wlt(){return this.qlt}jlt(){return this.Xlt}aot(){return this.Tat}lot(){return this.Iat}Llt(){return"linear"===this.$lt}Ylt(){return"cubic"===this.$lt}}}{const qn=self.Ws;qn.Klt=class extends qn.ur{constructor(t){super(),this.wf=t,this.Zlt=[]}pr(){for(const t of this.Zlt)t.pr();qn.Hn(this.Zlt),this.Zlt=null}Cx(t){this.Zlt.push(qn.Zc.Cx(t))}}}{const Xn=self.Ws;Xn.Qlt=class extends Xn.ur{constructor(t){super(),this.wf=t,this.tut=null,this.sut=null,this.XY=t=>this.$Y(t.U6)}pr(){if(this.hK(),this.tut){for(const t of this.tut.values())t.clear();this.tut.clear()}this.tut=null,this.wf=null}Cx(t){if(this.tut||(this.tut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.tut.has(e)||this.tut.set(e,new Map),this.tut.get(e));h.set(i,t)}}rK(){const t=this.wf.Kf();t&&t.addEventListener("instancedestroy",this.XY)}hK(){const t=this.wf.Kf();t&&t.removeEventListener("instancedestroy",this.XY)}iut(){return!!this.tut&&0!==this.tut.size}eut(t,s){let i;if(i=t instanceof Xn.hut?t.HF():t,this.tut.has(i)){const e=this.tut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}rut(t,s){this.sut||(this.sut=new WeakMap),this.sut.has(t)||this.sut.set(t,s)}nut(t){if(!this.sut)return"";const s=this.sut.get(t);return s||""}$Y(t){this.sut&&this.sut.has(t)&&this.sut.delete(t)}}}{const $n=self.Ws;$n.out=class{constructor(t){this.wf=t,this.aut=new $n.lut}pr(){this.aut.pr(),this.aut=null,this.wf=null}nO(){return this.wf}Cx(t){this.aut.xc(t)}uut(t){return this.aut.ri(t)}cut(){return this.aut.cut()}}}{const g=self.Ws;g.fut=class{constructor(t,s,i,e,h,r,n){this.wf=h.nO(),this.dut=h,this.mut=t,this.gut=i,this.yut=e,this.Sy=s,this.PY=r,this.wut=n??r.lj().o4(),this.Sut(),this.but=this.Mut?.vut()??-1,this.xut=[],this.Gut=null,this.Tut=NaN,this._ut=null,this.Iut=null,this.Cut=null,this.Put="",this.Rut=null,this.Eut="",this.Aut="",this.Fut=0,this.kut=!1,this.stt=!1}pr(){this.stt||(g.Hn(this.xut),this.xut=null,this.wf=null,this.dut=null,this.yut=null,this.PY=null,this.Gut=null,this.Tut=NaN,this._ut&&this._ut.clear(),this._ut=null,this.Iut=null,this.Cut=null,this.Put="",this.Rut=null,this.Eut="",this.Aut="",this.stt=!0)}Sr(){return this.stt}Dut(){return this.dut}nO(){return this.wf}uf(){return this.mut}Out(){return this.yut}LW(){return this.Sy}wK(){return this.PY||(this.PY=this.wf.kD(this.wut).A6()),this.PY}Lut(){return this.But(this.but)}Nut(){const t=this.Lut();return t?t.LW():""}Wut(){const t=this.Lut();return t?t.ZW():[]}jut(t){const s=this.Wut();if(!s)return!1;if(!s.length)return!1;const i=g.fut.Ntt(t);return!(!i||!i.length)&&i.every(g.fut.jtt,s)}Vut(t,s){const i=this.Wut();if(!i)return!1;if(!i.length)return!1;const e=g.fut.Ntt(t);return!(!e||!e.length)&&e.every(t=>g.fut.Uut.call(i,t,s))}static jtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ntt(t){return t.trim().split(" ")}static Uut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>g.compare(t.trim(),i,s.trim()))}Hut(t){const s=this.Lut();if(s){if(g.we(t)){const i=s.zut(),e=i?i[t]:void 0;if(g.we(e))return this.But(e)}if("string"==typeof t)for(const h of s.zut()){const r=this.But(h);if(r.VW(t))return this.But(r.vut())}}}Jut(t){const s=this.Hut(t);return s?s.LW():""}qut(t){const s=this.Hut(t);return s?s.ZW():""}Xut(t){const s=this.Lut();if(!s)return-1;const i=s.zut();if(!i)return-1;const e=this.Hut(t);return e?i.indexOf(e.vut()):-1}$ut(){const t=this.Lut();if(!t)return 0;const s=t.zut();return s?s.length:0}But(t){return this.yut.But(t)}w0(){const t=this.Yut();t.Kut(!0)}Kut(t){if(this.Zut()){for(const[s,i]of this.Zut().entries())i.Kut(!1);this.Zut().clear()}if(this._ut=null,this.Gut=null,this.Qut=null,this.Iut=null,this.Put="",this.Rut=null,this.Eut="",this.Aut="",this.xut=[],t){this.dut.tct(this);const e=this.Mut.vut();e!==this.but&&this.sct(e)}else this.but=this.Mut.vut()}ict(){const t=this.yut.But(this.but);return t?t.hct().ect():0}rct(t){const s=this.nct(t);return s?s.uf():""}oct(t){let s;return g.we(t)&&(s=this.nct(t)),"string"==typeof t&&(s=this.uct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Net():""}cct(t){let s;if(g.we(t)&&(s=this.nct(t)),s="string"==typeof t?this.uct(t):s){const i=s.fct();g.we(i)&&(this.xut.push(this.but),this.sct(i))}}dct(t){const s=this.yut.pct(t);if(s){const i=this.yut.But(s.vut());i&&(this.xut.push(this.but),this.sct(i.vut()))}}mct(){const t=this.xut.pop();g.we(t)?this.sct(t):this.gct()&&(this.dut.tct(this.gct(),!0,!1,!1),this.gct().sct(this.yct()),this.Yut().wct(this.gct()))}Sct(t){const s=this.Lut();if(s){s.vut();const i=this.Hut(t);i&&(this.xut.push(this.but),this.sct(i.vut()))}}bct(s){if(g.we(s)){const t=this.yut.But(this.but),i=t.hct().vct();return!!i[s]}if("string"==typeof s){const e=this.yut.But(this.but),h=e.hct().vct();for(let t=0;t<h.length;t++)if(h[t].uf()===s)return!0}return!1}Mct(){this.kut=!0}xct(){return 0<this.Fut}Gct(){this.Fut++}Tct(){this.Fut--,0===this.Fut&&this.kut&&this.dut._ct(this)}sct(t){const i=this.but,s=this.wK().lj();if(this.Gct(),this.dut.Ict(this),this.wf.F4(g.G$.Flowchart.M$.OnBeforeAnyNodeChange,s),this.wf.F4(g.G$.Flowchart.M$.OnBeforeTaggedNodeChange,s),this.wf.F4(g.G$.Flowchart.M$.OnBeforeAnyNodeChangeInFlowchart,s),this.wf.F4(g.G$.Flowchart.M$.OnBeforeTaggedNodeChangeInFlowchart,s),this.but=t,this.wf.F4(g.G$.Flowchart.M$.OnAnyNodeChange,s),this.wf.F4(g.G$.Flowchart.M$.OnTaggedNodeChange,s),this.wf.F4(g.G$.Flowchart.M$.OnAnyNodeChangeInFlowchart,s),this.wf.F4(g.G$.Flowchart.M$.OnTaggedNodeChangeInFlowchart,s),this.dut.Cct(),this.Tct(),!this.Sr()){const e=this.But(this.but);if("reference"===e.EG()){const h=e.Pct();if(this.Rct(e)){this.xut.pop();const r=this.Ect(e),n=(this.dut.tct(r,!0,!0,!1),r.Act(this,i),this.Yut());n.wct(r)}else{const o=e.Fct();if(h){this.xut.pop();let s=e.kct();if(s){let t=this.dut.Dct(s);for(;t;)s=g.lp(s),t=this.dut.Dct(s)}else{s=h+"-ref";let t=this.dut.Dct(s);for(;t;)s=g.lp(s),t=this.dut.Dct(s)}const a=this.dut.Oct(h,o,s,this.PY,!0),l=(a.Act(this,i),this.Lct(e,a),this.Yut());a.Bct(l),l.wct(a)}}}}}nct(t){const s=this.yut.But(this.but);if(!s)return null;const i=s.hct().vct();if(!i)return null;const e=i[t];return e||null}uct(t){const s=this.yut.But(this.but);if(!s)return null;const i=s.hct().Nct(t);return i||null}Sut(s){if("number"==typeof s){let t=this.But(s);t=t||this.yut.Wct(),this.Mut=t}else{let t=this.yut.pct(this.gut);t=t||this.yut.Wct(),this.Mut=t}}kq(){return this.kut?null:{flowchartName:this.mut,flowchartTag:this.Sy,startNodeTag:this.gut,currentNodeId:this.but,previousNodeIds:this.xut,pluginUID:this.PY.lj().o4(),reference:{previousFlowchartTag:this.gct()?this.gct().LW():"",previousStartNodeId:g.we(this.yct())?this.yct():NaN,referencesJson:this.jct(),currentReferenceFlowchartTag:this.Vct()?this.Vct().LW():"",rootFlowchartTag:this.Yut()?this.Yut().LW():""}}}jct(){if(!this.Uct())return null;const t=[];for(const[s,i]of this.Zut().entries())t.push({flowchartElementId:s.vut(),flowchartStateTag:i.LW()});return t.length?t:null}Dq(t){if(t){if(this.mut=t.flowchartName,this.Sy=t.flowchartTag,this.gut=t.startNodeTag,this.but=t.currentNodeId,this.xut=t.previousNodeIds,this.wut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Put=s.previousFlowchartTag,this.Tut=s.previousStartNodeId,this.Rut=s.referencesJson,this.Eut=s.currentReferenceFlowchartTag,this.Aut=s.rootFlowchartTag}this.Sut()}}gct(){return"string"==typeof this.Put&&this.Put&&(this.Gut=this.dut.Dct(this.Put),this.Put=""),this.Gut}yct(){return this.Tut}Act(t,s){this.Gut=t,this.Tut=s}Vct(){return"string"==typeof this.Eut&&this.Eut&&(this.Iut=this.dut.Dct(this.Eut),this.Eut=""),this.Iut}wct(t){this.Iut=t,this.Iut===this&&(this.Iut=null)}Yut(){return"string"==typeof this.Aut&&this.Aut&&(this.Cut=this.dut.Dct(this.Aut),this.Aut=""),this.Cut||this}Bct(t){this.Cut=t}Uct(){return this.Hct(),!!this._ut}Rct(t){return this.Hct(),this._ut&&this._ut.has(t)}Hct(){if(this.Rut){this._ut&&this._ut.clear(),this._ut||(this._ut=new Map);for(const t of this.Rut){const s=this.dut.Dct(t.flowchartStateTag),i=s.But(t.flowchartElementId);this._ut.set(i,s)}this.Rut=null}}Zut(){return this.Hct(),this._ut}Ect(t){return this.Hct(),this._ut.get(t)}Lct(t,s){this._ut||(this._ut=new Map),this._ut.set(t,s)}}}{const Yn=self.Ws;Yn.zct=class{constructor(t){this.wf=t,this.Jct=new Map,this.qct=null,this.Xct=[],this.$ct=()=>this.QY(),this.Yct=null}pr(){Yn.Hn(this.Xct),this.Xct=null,this.Jct.clear(),this.Jct=null,this.qct=null,this.wf=null,this.Yct=null}nO(){return this.wf}Oct(t,s,i,e,h,r){const n=this.wf.Dut().uut(t);if(n){if(!this.Jct.has(i)){const o=new Yn.fut(t,i,s,n,this,e,r);return this.Jct.set(i,o),h&&this.tct(o,!0),o}{const a=this.Jct.get(i);a&&this._ct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}_ct(t){if(t.Mct(),!t.xct()){const s=t.LW();this.Jct.delete(s),t.pr(),this.qct===t&&(this.qct=null)}}Kct(t){t.w0()}Dct(t){return this.Jct.get(t)}Ict(t){this.Xct.push(t)}Cct(){this.Xct.pop()}tct(t,s=!1,i=!1,e=!0){if(e){const h=t.Vct();t=h||t}t!==this.qct&&(this.Zct(),this.Qct(t,s,i))}tft(t){return"string"==typeof t?this.Dct(t):this.Xct.length?this.Xct[this.Xct.length-1]:this.qct}Zct(){if(this.qct&&!this.qct.Sr()){const t=this.qct.wK().lj();this.qct.Gct(),this.Ict(this.qct),this.wf.F4(Yn.G$.Flowchart.M$.OnBeforeFlowchartChange,t),this.Cct(),this.qct.Tct()}}Qct(t,s=!1,i=!1){if(this.qct=t,this.qct&&!this.qct.Sr()){const e=this.qct.wK().lj();this.qct.Gct(),this.Ict(this.qct),this.wf.F4(Yn.G$.Flowchart.M$.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.qct.Sut(i),s&&(this.wf.F4(Yn.G$.Flowchart.M$.OnAnyNodeChange,e),this.wf.F4(Yn.G$.Flowchart.M$.OnTaggedNodeChange,e)),this.Cct(),this.qct.Tct()}}kq(){return{flowchartJsonObjects:[...this.Jct.values()].map(t=>t.kq()),currentFlowchartTag:this.qct?this.qct.LW():null}}Dq(t){if(t){this.Yct=t;const s=new Map;for(const i of this.Yct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Jct.has(e)){const h=this.Jct.get(e);h.Dq(i),s.set(e,h)}else{const r=this.Oct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.Dq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Jct.entries())s.has(n)||o.pr();this.Jct.clear(),this.Jct=s,this.wf.p$()?this.wf.Kf().addEventListener("afterload",this.$ct):this.QY()}}QY(){this.wf.Kf().removeEventListener("afterload",this.$ct);const t=this.Jct.get(this.Yct.currentFlowchartTag);t&&this.tct(t,!0),this.Yct=null}}}{const Kn=self.Ws;Kn.lut=class{constructor(){this.ift=new Map}pr(){for(const t of this.ift.values())t.pr();this.ift.clear(),this.ift=null}xc(t){const s=new Kn.eft(t),i=s.uf();this.ift.set(i,s)}ri(t){return this.ift.get(t)}cut(){return!!this.ift.size}static hft(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Zn=self.Ws;Zn.eft=class{constructor(t){this.vr=t[0],this.rft=new Zn.nft(t[1],this)}pr(){this.rft.pr(),this.rft=null}oft(){return this.rft}But(t){return this.rft.But(t)}pct(t){return this.rft.pct(t)}Wct(){return this.rft.Wct()}uf(){return this.vr}}}{const Qn=self.Ws;class to{constructor(t,s){this.rft=s,this._f=t[7],this.aft=t[0],this.Sy=t[1],this.Sy?this.utt=this.Sy.trim().split(" ").map(t=>t.trim()):this.utt=[],this.lft=t[2],this.uft=null,this.cft=null,"dictionary"===this._f&&(this.uft=t[3],this.cft=t[4]),this.fft=t[6],this.dft=null,this.pft=null,this.mft=null,"reference"===this._f&&(this.dft=t[8],this.pft=t[9],this.mft=t[10]),this.gft=new Qn.yft(t[5],this)}pr(){this.rft=null}oft(){return this.rft}hct(){return this.gft}vut(){return this.aft}LW(){return this.Sy}ZW(){return this.utt}VW(t){if(!this.utt)return!1;if(!this.utt.length)return!1;const s=Qn.fut.Ntt(t);return!(!s||!s.length)&&s.every(Qn.fut.jtt,this.utt)}wft(){return this.fft}zut(){return this.lft}Sft(){return this.uft}bft(){return this.cft}EG(){return this._f}Pct(){return this.dft}Fct(){return this.pft}kct(){return this.mft}}Qn.nft=class{constructor(t,s){this.yut=s,this.vft=[],this.Mft=new Map,this.xft=new Map,this.Gft=null,Qn.lut.hft(this.vft,t,to,this);for(const i of this.vft){const e=i.vut(),h=i.LW(),r=i.ZW(),n=i.wft();if(this.Mft.set(e,i),h)for(const a of r)this.xft.has(a)||this.xft.set(a,new Set),this.xft.get(a).add(i);n&&(this.Gft=i);const o=i.hct();for(const l of o.Tft()){const u=l.vut();this.Mft.set(u,l)}}}pr(){this.yut=null;for(const t of this.vft)t.pr();Qn.Hn(this.vft),this.vft=null}Out(){return this.yut}But(t){return this.Mft.get(t)}pct(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.xft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Wct(){return this.Gft}*_ft(){for(const t of this.vft)yield t}}}{const so=self.Ws;class io{constructor(t,s){this.gft=s,this.aft=t[0],this.vr=t[1],this.Kht=t[2],this.Ift=t[3]}pr(){this.gft=null}hct(){return this.gft}vut(){return this.aft}uf(){return this.vr}Net(){return this.Kht}fct(){return this.Ift}}so.yft=class{constructor(t,s){this.Cft=s,this.Pft=[],this.Rft=new Map,so.lut.hft(this.Pft,t,io,this);for(const i of this.Pft)this.Rft.set(i.uf(),i)}pr(){this.Cft=null;for(const t of this.Pft)t.pr();so.Hn(this.Pft),this.Pft=null}Eft(){return this.Cft}ect(){return this.Pft.length}vct(){return this.Pft}Nct(t){return this.Rft.get(t)}*Tft(){for(const t of this.Pft)yield t}}}{const eo=self.Ws;eo.Aft=class extends eo.ur{constructor(t){super(),this.Fft=t,this.kft=[],this.kft.push(eo.dr(eo.Dft,this)),this.wy=0,this.Oft=this.kft[0]}pr(){for(const t of this.kft)t.pr();eo.Hn(this.kft),this.Oft=null,this.Fft=null}qB(){return this.Fft}ZL(){return this.Oft}Lft(){return this.kft[this.wy-1]}lc(){this.ZL().lc()}Bft(){const t=this.kft,s=++this.wy;if(s===t.length){const i=eo.dr(eo.Dft,this);t.push(i),this.Oft=i}else{const e=t[s];e.w0(),this.Oft=e}}Nft(){const t=this.kft,s=++this.wy,i=(s===t.length&&t.push(eo.dr(eo.Dft,this)),t[s]);i.L0(t[s-1]),this.Oft=i}d8(){this.Oft=this.kft[--this.wy]}Wft(i){const e=this.kft;for(let t=0,s=e.length;t<s;++t)e[t].Wft(i)}}}{const ho=self.Ws;ho.Dft=class extends ho.ur{constructor(t){super(),this.kft=t,this.Fft=this.kft.qB(),this.jft=this.Fft.nO().Ok(),this.Vft=!0,this.i7=[],this.Uft=[]}pr(){this.Hft(),this.kft=null,this.Fft=null,this.jft=null}Hft(){ho.Hn(this.i7),ho.Hn(this.Uft)}qB(){return this.Fft}zft(){return this.Vft}Jft(){return this.Vft?!!this.Fft.t5():!!this.i7.length}KL(){return this.Vft?this.Fft.KL():this.i7}qft(){return!!this.Uft.length}Xft(){return this.Uft}$ft(){const t=this.KL();return t.length?t:this.Uft}w0(){this.Vft=!0,ho.Hn(this.Uft)}lc(){this.Vft=!0}L0(t){t.zft()?this.w0():(this.Vft=!1,ho.Xn(this.i7,t.i7),ho.Hn(this.Uft))}Yft(t){this.i7.push(t)}Kft(t){this.Uft.push(t)}Zft(t){this.Vft=!!t}Qft(){return this.i7}t0t(){return this.Uft}s0t(t){this.Vft=!1,ho.Hn(this.i7),this.i7.push(t)}i0t(t){this.Vft=!1,ho.Xn(this.i7,t)}e0t(t){this.Vft=!1,ho.Hn(this.i7);for(const s of t)this.i7.push(s)}h0t(t,s){for(const i of s)t.has(i)||this.Uft.push(i)}r0t(t){for(const s of t)this.i7.push(s);ho.Qn(this.Uft,t)}n0t(){ho.Hn(this.Uft)}o0t(t){if(t)if(this.jft.s8().Pk().a0t()){this.zft()&&(ho.Hn(this.i7),ho.Xn(this.Uft,t.qB().KL()),this.Vft=!1);const s=this.Uft.indexOf(t);-1!==s&&(this.i7.push(this.Uft[s]),this.Uft.splice(s,1))}else this.s0t(t)}Wft(t){ho.Qn(this.i7,t),ho.Qn(this.Uft,t)}}}{const ro=self.Ws;ro.l0t=class extends ro.ur{constructor(t){super(),this.u0t=t,this.wf=this.u0t.nO(),this.kft=[],this.kft.push(ro.dr(ro.c0t,this,null)),this.wy=0,this.f0t=[]}pr(){for(const t of this.kft)t.pr();ro.Hn(this.kft),ro.Hn(this.f0t),this.u0t=null,this.wf=null}xk(){return this.u0t}nO(){return this.wf}s8(){return this.kft[this.wy]}d0t(){return this.kft}p0t(){return this.wy}i8(t){const s=this.kft,i=++this.wy;if(i===s.length){const e=ro.dr(ro.c0t,this,t);return s.push(e),e}{const h=s[i];return h.w0(t),h}}d8(){--this.wy}m0t(t){this.f0t.push(t)}g0t(){this.f0t.pop()}Dk(){const t=this.f0t;return 0===t.length?null:t.at(-1)}}}{const no=self.Ws;no.c0t=class extends no.ur{constructor(t,s){super(),this.kft=t,this.wf=this.kft.nO(),this.y0t=s,this.w0t=0,this.S0t=0,this.b0t=!1,this.v0t=!1,this.M0t=null,this.x0t=0,this.G0t=0,this.T0t=null}pr(){this.w0(null),this.kft=null,this.wf=null}w0(t){this.y0t=t,this.w0t=0,this.S0t=0,this.b0t=!1,this.v0t=!1,this.T0t=null}_0t(t,s){this.y0t=t,this.w0t=0,this.S0t=s}I0t(){this.w0t=0,this.S0t=0}Pk(){return this.y0t}C0t(t){this.y0t=t}P0t(){return this.w0t}R0t(t){this.w0t=t}E0t(){return this.S0t}A0t(t){this.S0t=t}F0t(t){this.b0t=!!t}k0t(){return this.b0t}D0t(t){this.v0t=!!t}O0t(){return this.v0t}L0t(t){this.M0t=t}B0t(){return this.M0t}N0t(t,s){this.x0t=t,this.G0t=s}Lk(){return this.x0t}Bk(t){this.G0t=t}W0t(){return this.G0t}j0t(){const t=this.y0t;return!!t.V0t()||this.w0t<t.U0t()-1&&!!t.t8().length}H0t(t){this.T0t=t}z0t(){return this.T0t}}}{const oo=self.Ws;oo.J0t=class extends oo.ur{constructor(t){super(),this.u0t=t,this.wf=this.u0t.nO(),this.kft=[],this.wy=-1,this.Oft=null,this.q0t=[]}pr(){oo.Hn(this.kft),this.u0t=null,this.wf=null}X0t(t){this.q0t=t;const s=this.q0t.slice(0);this.kft.push(s),this.wy=0,this.Oft=s}xk(){return this.u0t}nO(){return this.wf}$0t(){return this.Oft}i8(){const t=++this.wy,s=this.kft;t===s.length?s.push(this.q0t.slice(0)):oo.Xn(s[t],this.q0t),this.Oft=s[t]}d8(){this.Oft=this.kft[--this.wy]}}}{const ao=self.Ws;ao.Y0t=class extends ao.ur{constructor(t){super(),this.u0t=t,this.wf=this.u0t.nO(),this.kft=[],this.wy=-1}pr(){ao.Hn(this.kft),this.u0t=null,this.wf=null}xk(){return this.u0t}nO(){return this.wf}K0t(){return 0<=this.wy}$0t(){return this.kft[this.wy]}i8(){if(++this.wy,this.wy===this.kft.length){const t=ao.dr(ao.Z0t,this);return this.kft.push(t),t}{const s=this.kft[this.wy];return s.w0(),s}}d8(){--this.wy}Q0t(s){const i=this.kft;for(let t=this.wy;0<=t;--t){const e=i[t];if(e.uf()===s)return e}return null}tdt(){return this.kft.slice(0,this.wy+1)}}}{const lo=self.Ws;lo.Z0t=class extends lo.ur{constructor(t){super(),this.sdt=t,this.vr="",this.wy=0,this.idt=!1,this.edt=NaN}w0(){this.vr="",this.wy=0,this.idt=!1,this.edt=NaN}h8(t){this.vr=t}uf(){return this.vr}u8(t){this.wy=t}HF(){return this.wy}WW(){this.idt=!0}f8(){return this.idt}hdt(t){this.edt=t}rdt(){return this.edt}}}{const uo=self.Ws;uo.ndt=class extends uo.ur{constructor(){super(),this.kft=[],this.wy=-1}pr(){uo.Hn(this.kft)}$0t(){return this.kft[this.wy]}i8(){if(++this.wy,this.wy!==this.kft.length)return this.kft[this.wy];{const t=[];return this.kft.push(t),t}}d8(){--this.wy}}}{let t=function(t,s){return t.HF()-s.HF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const co=self.Ws;co.odt=class extends co.ur{constructor(t){super(),this.wf=t,this.adt=[],this.ldt=new Map,this.udt=[],this.cdt=new Map,this.fdt=new Map,this.ddt=new Map,this.pdt=new Map,this.mdt=new Map,this.gdt=new Map,this.ydt=0,this.wdt=[],this.Sdt=[],this.bdt=[],this.vdt=new Map,this.Mdt=new Map,this.jft=co.dr(co.l0t,this),this.xdt=co.dr(co.J0t,this),this.sdt=co.dr(co.Y0t,this),this.Gdt=[],this.Tdt=[],this._dt=[],this.Idt=0,this.Cdt=0,this.Pdt=0,this.Rdt=[],this.Edt=[],this.Adt=[],this.Fdt=new Map,this.kdt=new Map,self.c3_callFunction=(t,s)=>this.Ddt(t,s)}pr(){this.O$(),this.jft.pr(),this.jft=null,this.xdt.pr(),this.xdt=null,co.Hn(this.Tdt),co.Hn(this._dt),this.wf=null,co.Hn(this.adt),this.ldt.clear()}Cx(t){const s=co.dr(co.Odt,this,t);this.adt.push(s),this.ldt.set(s.uf().toLowerCase(),s)}Ldt(t){this.Gdt.push(t)}Bdt(){for(const t of this.Mdt.values())t.Ndt();for(const s of this.vdt.values())s.Bdt();for(const i of this.Mdt.values())i.Bdt();for(const e of this.adt)e.Bdt();for(const h of this.adt)h.e$();for(const r of this.Gdt)r.Bdt(!1);co.Hn(this.Gdt),this.xdt.X0t(this.bdt)}nO(){return this.wf}i$(t){return this.ldt.get(t.toLowerCase())||null}Wdt(t){this.udt.push(t),this.cdt.set(t.jdt(),t)}Vdt(t){this.fdt.set(t.g9(),t)}Udt(t){this.ddt.set(t.g9(),t)}Hdt(t){this.pdt.set(t.g9(),t)}zdt(t){switch(t.Jdt()){case 0:this.vdt.set(t.qdt().toLowerCase(),t);break;case 1:this.Mdt.set(t.qdt().toLowerCase(),t)}}Xdt(t){this.gdt.set(t.g9(),t),(t.Xz()?this.wdt:this.Sdt).push(t)}$dt(i){2<=i.length&&i.sort(t);let e=this.mdt.get(i.length);e||(e=[],this.mdt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}Ydt(t){return this.bdt.push(t.Kdt()),this.ydt++}Ok(){return this.jft}Zdt(){return this.Ok().s8()}Pk(){return this.Zdt().Pk()}Qdt(){const t=this.Zdt(),s=t.Pk();return s.t1t(t.P0t())}s1t(){const t=this.Zdt(),s=t.Pk();return s.i1t(t.E0t())}e1t(){return this.xdt}e8(){return this.sdt}h1t(t){const s=[];for(t=t.r1t();t;)co.Kh(s,t.n1t()),t=t.r1t();return s}o1t(t){const s={};for(const i of this.h1t(t))s[i.a1t()]=i.l1t();return Object.create(Object.prototype,s)}u1t(t){return this.gdt.get(t)||null}c1t(t){return this.fdt.get(t)||null}f1t(t){return this.ddt.get(t)||null}d1t(t){return this.pdt.get(t)||null}Gk(t){return this.vdt.get(t.toLowerCase())||null}p1t(t,s){let i=this.Mdt.get((t.uf()+"."+s).toLowerCase());if(i)return i;if(!t.a9())for(const e of t.m1t())if(i=this.Mdt.get((e.uf()+"."+s).toLowerCase()))return i;return null}g1t(){return this.wdt}y1t(){return this.Sdt}w1t(t){for(const s of this.wdt)s.S1t();if(t)for(const i of this.Sdt)i.g2()&&i.S1t()}b1t(t){return this.cdt.get(t.toLowerCase())||null}v1t(t){const s=this.fdt.get(t);return s&&s.M1t()?s:null}x1t(){return this.udt}G1t(){for(const t of this.udt)t.T1t()}_1t(){for(const t of this.adt)t.I1t()}C1t(t){this._1t(),this.Idt++;for(const s of t.vY()){const i=s.RX();i&&(this.wf.P1t(s),i.q_(),this.wf.R1t())}this.Idt--}async E1t(t){this._1t(),this.Idt++;for(const s of this.A1t(t))await this.wf.F1t(s);this.Idt--}*A1t(t){for(const s of t.vY()){const i=s.RX();i&&(this.wf.P1t(s),yield*i.k1t(),this.wf.R1t())}}D1t(t,s,i,e){let h=!1;if(!t.yD())return this.O1t(s,i,e);this.Cdt++;for(const r of t.vY()){const n=r.RX();if(n){this.wf.P1t(r);for(const a of n.L1t()){const l=a.D1t(s,i,e);h=h||l}const o=n.D1t(s,i,e);h=h||o,this.wf.R1t()}}return this.Cdt--,h}*B1t(t,s,i,e){let h=!1;if(!t.yD())return this.O1t(s,i,e);this.Cdt++;for(const r of t.vY()){const n=r.RX();if(n){this.wf.P1t(r);for(const a of n.L1t()){const l=yield*a.B1t(s,i,e);h=h||l}const o=yield*n.B1t(s,i,e);h=h||o,this.wf.R1t()}}return this.Cdt--,h}O1t(t,s,i){return this.Tdt.push([t,s,i]),!1}N1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this._dt.push([t,s,i,e]),h}*W1t(){if(this.wf.j1t())throw new Error("should not be in breakpoint");const t=this.wf.bD();for(;this._dt.length;){const[s,i,e,h]=this._dt.shift(),r=yield*this.B1t(t,s,i,e);h(r)}}async V1t(){for(const t of this.W1t())await this.wf.F1t(t)}U1t(t,i,e,h){let r=!1,s=t.yD(),n=s.RX();if(n){this.Cdt++,this.wf.P1t(s);const o=n.L1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].U1t(i,e,h);r=r||l}const a=n.U1t(i,e,h);return r=r||a,this.wf.R1t(),this.Cdt--,r}}*H1t(t,i,e,h){let r=!1,s=t.yD(),n=s.RX();if(n){this.Cdt++,this.wf.P1t(s);const o=n.L1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].H1t(i,e,h);r=r||l}const a=yield*n.H1t(i,e,h);return r=r||a,this.wf.R1t(),this.Cdt--,r}}z1t(){return this.Cdt}J1t(){return 0<this.z1t()}q1t(){return++this.Cdt}X1t(){--this.Cdt}$1t(){return 0<this.Idt}n5(){return this.$1t()||this.J1t()}T$(t){for(const[s,i,e]of this.Tdt)this.D1t(t,s,i,e);co.Hn(this.Tdt)}h5(t){t?this.Pdt++:this.Pdt--}s4(){return 0<this.Pdt}Y1t(i){for(let t=0,s=i.length;t<s;++t)i[t].K1t().lc()}Z1t(i){for(let t=0,s=i.length;t<s;++t)i[t].K1t().Bft()}o8(i){for(let t=0,s=i.length;t<s;++t)i[t].K1t().Nft()}l8(i){for(let t=0,s=i.length;t<s;++t)i[t].K1t().d8()}Rk(s){const i=new Set,e=this.jft.d0t(),h=this.jft.p0t();for(let t=0;t<=h;++t){const r=e[t].z0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}Q1t(t){const s=new Set([...t]),i=this.Rk(s);if(0<i.size){for(const e of i)e.K1t().Bft();return[...i]}return null}tpt(){const t=co.dr(co.spt,this);return this.Rdt.push(t),t}ipt(){return this.Rdt}ept(){if(this.Rdt.length){let i=this.Zdt(),e=!1;this.Idt++;for(let t=0,s=this.Rdt.length;t<s;++t){const h=this.Rdt[t];h.hpt()&&h.rpt(i),h.npt()&&(e=!0)}e&&(this.opt(),i.w0(null)),this.Idt--}}async apt(){if(this.Rdt.length){let i=this.Zdt(),e=!1;this.Idt++;for(let t=0,s=this.Rdt.length;t<s;++t){const h=this.Rdt[t];h.hpt()&&await h.lpt(i),h.npt()&&(e=!0)}e&&(this.opt(),i.w0(null)),this.Idt--}}opt(){const t=co.Zn(this.Rdt,t=>t.npt());for(const s of t)s.pr()}O$(){for(const t of this.Rdt)t.pr();co.Hn(this.Rdt)}upt(t){for(const s of this.Rdt)s.Wft(t);for(const i of t){const e=this.kdt.get(i);if(this.kdt.delete(i),e)for(const{resolve:h}of e.cpt.values())h(!0)}}fpt(t){this.Edt.push({promise:t,dpt:this.z1t()})}ppt(){co.Hn(this.Edt)}mpt(){const s=this.z1t();this.Edt=this.Edt.filter(t=>t.dpt<=s)}gpt(){const t=Promise.all(this.Edt.map(t=>t.promise));return this.Edt=[],t}Nk(t){const s=t.toLowerCase();this.Adt.push(s),this.wf.F4(co.G$.x$.M$.ypt,null),this.Adt.pop();for(const e of this.wf.xk().ipt())e.wpt()&&e.Spt()===s&&e.bpt();const i=this.Fdt.get(s);i&&(i.resolve(),this.Fdt.delete(s))}jk(t){const i=t.toLowerCase(),s=this.Fdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.Fdt.set(i,{promise:t,resolve:s}),t}}vpt(){if(0===this.Adt.length)throw new Error("not in a signal");return this.Adt.at(-1)}Mpt(t){let s=this.kdt.get(t);return s||(s={xpt:[],cpt:new Map},this.kdt.set(t,s)),s}S4(t,s){const i=this.Mpt(t),e=s.toLowerCase();i.xpt.push(e),this.wf.F4(t.WL().Tpt().M$.Gpt,t),i.xpt.pop();for(const r of this.wf.xk().ipt())r._pt()&&r.Spt()===e&&r.Ipt(t);const h=i.cpt.get(e);h&&(h.resolve(!1),i.cpt.delete(e)),0===i.xpt.length&&0===i.cpt.size&&this.kdt.delete(t)}b4(t,s){const i=this.Mpt(t),e=s.toLowerCase(),h=i.cpt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.cpt.set(e,{promise:t,resolve:s}),t}}Cpt(t){const s=this.Mpt(t);if(s&&0!==s.xpt.length)return s.xpt.at(-1);throw new Error("not in a signal")}kq(){return{groups:this.Ppt(),cnds:this.Rpt(),acts:this.Ept(),vars:this.Apt(),waits:this.Fpt()}}Dq(t){this.kpt(t.groups),this.Dpt(t.cnds),this.Opt(t.acts),this.Lpt(t.vars),this.Bpt(t.waits)}Ppt(){const t={};for(const s of this.x1t())t[s.g9().toString()]=s.Npt();return t}kpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.v1t(e);h&&h.Wpt(i)}}Rpt(){const t={};for(const[s,i]of this.ddt){const e=i.kq();e&&(t[s.toString()]=e)}return t}Dpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.ddt)r.Dq(s.get(h)||null)}Ept(){const t={};for(const[s,i]of this.pdt){const e=i.kq();e&&(t[s.toString()]=e)}return t}Opt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.pdt)r.Dq(s.get(h)||null)}Apt(){const t={};for(const[s,i]of this.gdt)i.jpt()||!i.Xz()&&!i.g2()||(t[s.toString()]=i.Net());return t}Lpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.u1t(e);h&&h.vht(i)}}Fpt(){return this.Rdt.filter(t=>!t.Vpt()).map(t=>t.kq())}Bpt(t){this.O$();for(const s of t){const i=co.spt.Upt(this,s);i&&this.Rdt.push(i)}}Hpt(){return[...this.wf.bD().vY()].map(t=>t.RX()).filter(t=>t).map(t=>t.zpt())}Jpt(t){for(;t;){const s=t.r1t();if(s instanceof co.qpt)return s;t=s}return null}Ddt(t,s){Array.isArray(s)||(s=[]);const i=this.Gk(t.toLowerCase());if(!i)return null;if(!i.nc())return i.Tk();const e=i.Xpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Kdt()),s.length<e.length;);const h=i.Ik();return h.Ek(h.Ck(),!1,i.Fk(),i.Tk(),...s)}}}{const fo=self.Ws;fo.Odt=class extends fo.ur{constructor(t,s){super(),this.u0t=t,this.wf=t.nO(),this.vr=s[0],this.$pt=[],this.Ypt=new Map,this.Kpt=new Map,this.Zpt=new Map,this.Qpt=!1,this.tmt=[],this.smt=[],this.imt=new Set;for(const i of s[1])this.emt(i,null,this.$pt);this.hmt=this.wf.sY()?{type:"sheet",name:this.vr,rmt:0,children:[]}:null}pr(){this.u0t=null,this.wf=null}emt(t,s,i){switch(t[0]){case 0:case 3:this.nmt(t,s,i);break;case 1:this.omt(t,s,i);break;case 2:this.amt(t,s,i);break;case 4:this.lmt(t,s);break;case 5:this.umt(t,s,i);break;case 6:this.cmt(t,s);break;default:throw new Error("invalid event type")}}nmt(t,s,i){const e=fo.fmt.Cx(this,s,t);if(e.a0t()){i.push(e);const h=e.dmt();for(let t=0,s=h.length;t<s;++t)h[t].pmt()&&this.mmt(e,t)}else e.pmt()?this.mmt(e,0):i.push(e)}lmt(t,s){const i=fo.qpt.gmt(this,s,t);this.u0t.zdt(i)}cmt(t,s){const i=fo.qpt.ymt(this,s,t);this.u0t.zdt(i)}omt(t,s,i){const e=fo.wmt.Cx(this,s,t);i.push(e)}amt(t,s,i){const e=fo.Smt.Cx(this,s,t);i.push(e)}umt(t,s,i){const e=fo.bmt.Cx(this,s,t);i.push(e)}mmt(h,r){h.a0t()||this.u0t.Ldt(h);const n=h.t1t(r),o=n.vmt(),a=n.qB();if(n.Mmt()){let t=this.Kpt.get(a),s=(t||(t=new Map,this.Kpt.set(a,t)),n.xmt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.Ypt.get(a),s=(t||(t={Gmt:new Map,Tmt:new Map},this.Ypt.set(a,t)),n.V6()),i,e=(s?(i=t.Tmt.get(s))||(i=new Map,t.Tmt.set(s,i)):i=t.Gmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Bdt(){const i=this.$pt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof fo.fmt&&i[t+1]._mt();i[t].Bdt(e)}}Imt(t){this.tmt.push(t)}e$(){fo.Hn(this.smt),this.Cmt(this),this.imt.clear()}Cmt(t){const s=t.smt,i=t.imt;for(const e of this.tmt){const h=e.Pmt();e.Rmt()&&t!==h&&!i.has(h)&&(i.add(h),h.Cmt(t),s.push(h))}}L1t(){return this.smt}xk(){return this.u0t}nO(){return this.wf}uf(){return this.vr}Emt(t,s){this.Zpt.set(s,t)}Amt(t){return this.Zpt.get(t)||null}I1t(){this.Qpt=!1}q_(){if(!this.Qpt){const t=this.wf,s=t.Fmt(),i=s?performance.now():0,e=(this.Qpt=!0,this.xk()),h=e.Zdt();for(const r of this.$pt)r.q_(h),e.Y1t(r.t8()),e.ppt(),t.a5();h.w0(null),s&&(this.hmt.rmt+=performance.now()-i)}}*k1t(){if(!this.Qpt){this.Qpt=!0;const t=this.wf,s=this.xk(),i=s.Zdt();for(const e of this.$pt)yield*e.k1t(i),s.Y1t(e.t8()),s.ppt(),t.a5();i.w0(null)}}D1t(e,h,r){if(!h)return this.kmt(e,h,null,null);{let t=h.qB(),s=!1,i=this.kmt(e,h,t,r);s=s||i;for(const n of t.m1t())i=this.kmt(e,h,n,r),s=s||i}}kmt(t,s,i,e){const h=this.Ypt.get(i);if(!h)return!1;const r=e?h.Tmt.get(e):h.Gmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Dmt(s,a,l);o=o||u}return o}*B1t(e,h,r){if(!h)return yield*this.Omt(e,h,null,null);{let t=h.qB(),s=!1,i=yield*this.Omt(e,h,t,r);s=s||i;for(const n of t.m1t())i=yield*this.Omt(e,h,n,r),s=s||i}}*Omt(t,s,i,e){const h=this.Ypt.get(i);if(!h)return!1;const r=e?h.Tmt.get(e):h.Gmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Lmt()?this.Dmt(s,a,l):yield*this.Bmt(s,a,l),o=o||t}return o}U1t(t,s,i){const e=s.qB(),h=this.Kpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Dmt(null,a[0],a[1]);o=o||l}return o}*H1t(t,s,i){const e=s.qB(),h=this.Kpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Lmt()?this.Dmt(null,s,i):yield*this.Bmt(null,s,i),o=o||e}return o}Dmt(t,s,i){let e=this.wf,h=this.u0t,r=h.Pk(),n=h.Ok(),o=h.z1t(),a=!1;r&&h.Z1t(r.Ck()),h.Z1t(s.Ck());const l=1<o,u=(l&&h.e1t().i8(),n.i8(s));if(t){const f=s.dmt()[i].qB(),d=f.ZL();d.s0t(t),t.r4()&&t.Nmt()}let c=!0;if(s.BN()){const p=s.Wmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].jmt(u)){c=!1;break}}return c&&(s.a0t()?s.Vmt(u,i):s.q_(u),a=u.k0t()),n.d8(),l&&h.e1t().d8(),h.l8(s.Ck()),r&&h.l8(r.Ck()),r||1!==o||(h.ppt(),h.s4())||e.a5(),a}*Bmt(t,s,i){let e=this.wf,h=this.u0t,r=h.Pk(),n=h.Ok(),o=h.z1t(),a=!1;r&&h.Z1t(r.Ck()),h.Z1t(s.Ck());const l=1<o,u=(l&&h.e1t().i8(),n.i8(s));if(t){const f=s.dmt()[i].qB(),d=f.ZL();d.s0t(t),t.r4()&&t.Nmt()}let c=!0;if(s.BN()){const p=s.Wmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Umt(u))){c=!1;break}}return c&&(s.a0t()?yield*s.Hmt(u,i):yield*s.k1t(u),a=u.k0t()),n.d8(),l&&h.e1t().d8(),h.l8(s.Ck()),r&&h.l8(r.Ck()),r||1!==o||(h.ppt(),h.s4())||e.a5(),a}zpt(){return this.hmt}}}{let u=function(t,s){return!0};u;const po=self.Ws,mo=[];function*N(t,s){return!0}po.fmt=class extends po.ur{constructor(t,s,i){super(),this.Xq=t,this.wf=t.nO(),this.zmt=s,this.Jmt=null,this.jft=this.wf.xk().Ok(),this.qmt=[],this.Xmt=[],this.$mt=!1,this.Ymt=!1,this.Kmt=!1,this.Zmt=!1,this.Qmt=!!i[2],this.tgt=!1,this.sgt=null,this.igt=[],this.srt=[],this.egt=[],this.hgt=u,this.rgt=N,this.ngt=!1,this.ogt=!1,this.agt="",this.lgt=!1,this.ugt=null,this.hmt=null,this.k7=i[4],this.cgt=i[5],this.Xq.Emt(this,this.cgt),this.fgt=this.wf.sY()?{dgt:i[3][0],pgt:i[3][1],mgt:!1,ggt:!1,ygt:!1,wgt:!1}:null,this.xk().Vdt(this),3===i[0]&&this.Sgt(i[1]);let e=0;for(const h of i[6]){const r=po.bgt.Cx(this,h,e++);this.igt.push(r),this.vgt(r.qB())}e=0;for(const n of i[7]){const o=po.Mgt.Cx(this,n,e++);this.srt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Xq.emt(l,this,this.egt)}this.igt.length&&(this.tgt=null===this.igt[0].qB()&&this.igt[0].vmt()===po.G$.x$.M$.xgt),0===this.igt.length&&(this.igt=mo),0===this.srt.length&&(this.srt=mo),0===this.egt.length&&(this.egt=mo)}static Cx(t,s,i){return po.dr(po.fmt,t,s,i)}Sgt(t){this.ngt=!0,this.ogt=!!t[0],this.lgt=this.ogt,this.agt=t[1].toLowerCase(),this.ugt=[],this.xk().Wdt(this),this.wf.sY()&&(this.hmt={type:"group",name:t[1],rmt:0,children:[]})}Ggt(t){this.ugt.push(t)}Tgt(t,s){for(const i of t.UX().C$())s.includes(i)||s.push(i)}_gt(t,s){if(t)if(s.includes(t)||s.push(t),t.a9())for(const i of t.Igt())i.r4()&&this.Tgt(i,s);else t.r4()&&this.Tgt(t,s)}vgt(t){this._gt(t,this.qmt)}Cgt(t){this._gt(t,this.Xmt)}Pgt(){this.qmt=this.wf.o9()}Bdt(t){this.Zmt=!!t,this.Rgt(),this.Egt();for(const s of this.igt)s.Bdt();if(0<this.srt.length){let t=!1;for(const e of this.srt)e.Bdt(),e.Agt()&&(t=!0);t?(this.hgt=this.Fgt,this.rgt=this.kgt):(this.hgt=this.Dgt,this.rgt=this.Ogt)}const i=this.egt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof po.fmt&&i[t+1]._mt();i[t].Bdt(h)}this.fgt&&this.Lgt(),this.hmt&&this.Bgt().zpt().children.push(this.hmt)}zpt(){return this.hmt}Bgt(){let t=this.BN();for(;t;){if(t.M1t())return t;t=t.BN()}return this.Xq}Lgt(){const t=this.fgt;t.mgt=this.igt.every(t=>t.Lmt()),t.ggt=this.srt.every(t=>t.Lmt()),t.ygt=this.egt.every(t=>t.Lmt()),t.wgt=t.mgt&&t.ggt&&t.ygt}Ngt(){let t=this;for(;t.Lgt(),t=t.BN(););}Rgt(){if(this.M1t()){let t=this.BN();for(this.Kmt=!0;t;){if(!t.M1t()){this.Kmt=!1;break}t=t.BN()}}}Wgt(){const t=this.wf.o9();if(this.qmt===t)this.Xmt=t;else{this.Xmt=po.ro(this.qmt);let t=this.BN();for(;t;){for(const i of t.qmt)this.Cgt(i);t=t.BN()}const s=this.xk();this.qmt=s.$dt(this.qmt),this.Xmt=s.$dt(this.Xmt)}}Egt(){if(this.jgt()){this.sgt=[];let t=this.BN();for(;t;)this.sgt.push(t),t=t.BN();this.sgt.reverse()}}Vgt(){this.Ymt=!0,this.zmt&&this.zmt.Vgt()}V0t(){return this.Ymt}t8(){return this.qmt}Ck(){return this.$mt||(this.$mt=!0,this.Wgt()),this.Xmt}Ugt(t){return this.qmt.includes(t)}Wmt(){return this.sgt}RX(){return this.Xq}xk(){return this.Xq.xk()}nO(){return this.wf}BN(){return this.zmt}Hgt(t){this.Jmt=t}r1t(){return this.Jmt||this.zmt}zgt(){return this.cgt}Jgt(){return this.fgt&&this.fgt.pgt}qgt(){return this.Jgt()&&this.fgt.dgt}Xgt(t){this.fgt.dgt=!!t,this.Ngt()}M1t(){return this.ngt}$gt(){return this.Kmt}_mt(){return this.tgt}Ygt(){return this.Zmt}jdt(){return this.agt}Npt(){return this.lgt}T1t(){this.Wpt(this.ogt)}Wpt(t){if(t=!!t,!this.ngt)throw new Error("not a group");if(this.lgt!==t){this.lgt=t;for(const s of this.ugt)s.Kgt();if(this.ugt.length){const i=this.wf.LD(),e=i.RX();e&&e.e$()}}}g9(){return this.k7}a0t(){return this.Qmt}pmt(){return this.igt.length&&this.igt[0].pmt()}Zgt(){return this.Jmt&&this.Jmt instanceof po.qpt}jgt(){return this.Zgt()||this.igt.some(t=>t.pmt())}dmt(){return this.igt}U0t(){return this.igt.length}t1t(t){if((t=Math.floor(t))<0||t>=this.igt.length)throw new RangeError("invalid condition index");return this.igt[t]}Qgt(t){return this.t1t(t)}tyt(t){let s=t.HF();if(0!==s){--s;const i=t.syt()?t.iyt():t.qB();for(;0<=s;--s){const e=this.igt[s];if(i===e.qB()||e.syt()&&e.iyt()===i)return!1}}return!0}eyt(){return this.srt}hyt(){return this.srt.length}i1t(t){if((t=Math.floor(t))<0||t>=this.srt.length)throw new RangeError("invalid action index");return this.srt[t]}ryt(s){s=Math.floor(s);const t=this.srt.find(t=>t.nyt()===s);if(t)return t;throw new RangeError("invalid action debug index")}oyt(t){return 0<=(t=Math.floor(t))&&t<this.srt.length}ayt(){return this.egt}n1t(){return this.egt.filter(t=>t instanceof po.wmt)}jmt(i){i.C0t(this);let e=this.igt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.R0t(t),r.eW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.q_())h=!0;else if(!this.Qmt)return!1}return!this.Qmt||h}Vmt(t,s){t.C0t(this),t.R0t(s),this.igt[s].q_()&&(this.hgt(t,0)&&this.lyt(t),t.F0t(!0))}*Umt(i){i.C0t(this);let e=this.igt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.R0t(t),r.eW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Lmt()?r.q_():yield*r.k1t())h=!0;else if(!this.Qmt)return!1}return!this.Qmt||h}*Hmt(t,s){t.C0t(this),t.R0t(s);let i=this.igt[s];if(i.Lmt()?i.q_():yield*i.k1t())(this.uyt()?this.hgt(t,0):yield*this.rgt(t,0))&&(this.cyt()?this.lyt():yield*this.fyt()),t.F0t(!0)}q_(t){t.C0t(this),this.tgt||t.D0t(!1),this.Qmt?this.dyt(t):this.pyt(t)}*k1t(t){(this.qgt()||this.wf.myt())&&(yield this),t.C0t(this),this.tgt||t.D0t(!1),this.Qmt?yield*this.gyt(t):yield*this.yyt(t)}dyt(i){let e=this.igt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.pmt()){i.R0t(t);const n=r.q_();h=h||n}}i.F0t(h),h&&(this.hgt(i,0)&&this.lyt(i),this.Zmt)&&i.D0t(!0)}*gyt(i){let e=this.igt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.pmt()){i.R0t(s);let t;t=r.Lmt()?r.q_():yield*r.k1t(),h=h||t}}if(i.F0t(h),h)(this.uyt()?this.hgt(i,0):yield*this.rgt(i,0))&&(this.cyt()?this.lyt():yield*this.fyt()),this.Zmt&&i.D0t(!0)}pyt(i){const e=this.igt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.R0t(t),h.q_());if(!r)return void i.F0t(!1)}i.F0t(!0),this.hgt(i,0)&&this.lyt(i),i.k0t()&&this.Zmt&&i.D0t(!0)}*yyt(i){const e=this.igt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.R0t(t);if(!(h.Lmt()?h.q_():yield*h.k1t()))return void i.F0t(!1)}i.F0t(!0);(this.uyt()?this.hgt(i,0):yield*this.rgt(i,0))&&(this.cyt()?this.lyt():yield*this.fyt()),i.k0t()&&this.Zmt&&i.D0t(!0)}Dgt(i,e){const h=this.srt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.A0t(t),r.q_()}return!0}*Ogt(i,e){const h=this.srt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.A0t(t),r.Lmt()?r.q_():yield*r.k1t()}return!0}Fgt(i,e){const h=this.xk(),r=this.srt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.A0t(t),n.q_());if(n.wyt()&&!0===o)return!1;n.Syt()&&o instanceof Promise&&h.fpt(o)}return!0}*kgt(i,e){const h=this.xk(),r=this.srt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.A0t(s);let t;if(t=n.Lmt()?n.q_():yield*n.k1t(),n.wyt()&&!0===t)return!1;n.Syt()&&t instanceof Promise&&h.fpt(t)}return!0}byt(t){this.hgt(t,t.E0t())&&this.lyt()}*vyt(t){(yield*this.rgt(t,t.E0t()))&&(yield*this.fyt())}lyt(){if(this.egt.length){const t=this.M1t()&&this.wf.Fmt(),s=t?performance.now():0,i=this.jft,e=i.i8(this);this.Ymt?this.Myt(e):this.xyt(e),i.d8(),t&&(this.hmt.rmt+=performance.now()-s)}}Myt(e){const h=this.ngt,r=this.Kmt,n=this.xk(),o=this.egt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.t8(),u=!r||!h&&t<i;u&&n.o8(l),a.q_(e),u?n.l8(l):n.Y1t(l)}}xyt(i){const e=this.egt;for(let t=0,s=e.length;t<s;++t)e[t].q_(i)}*fyt(){if(this.egt.length){const t=this.jft,s=t.i8(this);this.Ymt?yield*this.Gyt(s):yield*this.Tyt(s),t.d8()}}*Gyt(e){const h=this.ngt,r=this.Kmt,n=this.xk(),o=this.egt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.t8(),u=!r||!h&&t<i;u&&n.o8(l),yield*a.k1t(e),u?n.l8(l):n.Y1t(l)}}*Tyt(i){const e=this.egt;for(let t=0,s=e.length;t<s;++t)yield*e[t].k1t(i)}a8(i,e){e.I0t();const h=this.igt;if(!this.a0t())for(let t=i.P0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.R0t(t),r.q_());if(!n)return!1}return this.hgt(e,0)&&this.lyt(e),!0}*_yt(i,e){e.I0t();const h=this.igt;if(!this.a0t())for(let t=i.P0t()+1,s=h.length;t<s;++t){const r=h[t];e.R0t(t);if(!(r.Lmt()?r.q_():yield*r.k1t()))return!1}return(this.uyt()?this.hgt(e,0):yield*this.rgt(e,0))&&(this.cyt()?this.lyt():yield*this.fyt()),!0}Lmt(){return!this.qgt()&&!this.wf.myt()&&this.fgt.wgt}uyt(){return!this.wf.myt()&&this.fgt.ggt}cyt(){return!this.wf.myt()&&this.fgt.ygt}Iyt(i){if(this.BN()){const e=this.Wmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].jmt(i))return!1}return!0}*Cyt(i){if(this.BN()){const e=this.Wmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Umt(i)))return!1}return!0}Pyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ri(0));t.e1t().i8(),this.Jmt.Ryt(e)}else this.Jmt.Eyt(s);else i&&t.e1t().i8()}Ayt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.wf,l=this.jft,u=a.xk(),c=this.Jmt,f=c.Syt(),d=u.q1t(),p=1<d;if(this.Pyt(u,s,p),n&&(i?u.o8(t):u.Z1t(t)),null!==e){if(e.Fyt){const g=i?e.Fyt.ZL():e.Fyt.K1t().Lft(),y=e.kyt.ZL();y.i0t(g.KL()),y.n0t(),i||e.kyt.Dyt()}else if(e.Oyt){const w=e.Oyt.ZL();w.i0t(e.Lyt),w.n0t()}e.Byt&&(o=u.Q1t(t))}const m=l.i8(this);return i&&m.H0t(t),this.Iyt(m)&&(m.C0t(this),f&&([r,h]=c.Nyt()),this.pyt(m),f)&&c.Wyt(r),l.d8(),p&&u.e1t().d8(),null!==o&&u.l8(o),n&&u.l8(t),u.X1t(),f||u.mpt(),h}*jyt(t,s,i,e){let h,r,n=((this.qgt()||this.wf.myt())&&(yield this),0<t.length),o=null,a=this.wf,l=this.jft,u=a.xk(),c=this.Jmt,f=c.Syt(),d=u.q1t(),p=1<d;if(this.Pyt(u,s,p),n&&(i?u.o8(t):u.Z1t(t)),null!==e){if(e.Fyt){const g=i?e.Fyt.ZL():e.Fyt.K1t().Lft(),y=e.kyt.ZL();y.i0t(g.KL()),y.n0t(),i||e.kyt.Dyt()}else if(e.Oyt){const w=e.Oyt.ZL();w.i0t(e.Lyt),w.n0t()}e.Byt&&(o=u.Q1t(t))}const m=l.i8(this);return i&&m.H0t(t),(yield*this.Cyt(m))&&(m.C0t(this),f&&([r,h]=c.Nyt()),yield*this.yyt(m),f)&&c.Wyt(r),l.d8(),p&&u.e1t().d8(),null!==o&&u.l8(o),n&&u.l8(t),u.X1t(),f||u.mpt(),h}Vyt(t,s){const i=this.Ck(),e=0<i.length,h=this.wf,r=this.jft,n=h.xk(),o=n.q1t(),a=1<o,l=(a&&n.e1t().i8(),this.Jmt.Ryt(t),e&&(s?n.o8(i):n.Z1t(i)),r.i8(this));this.Iyt(l)&&(l.C0t(this),this.pyt(l)),r.d8(),a&&n.e1t().d8(),e&&n.l8(i),n.X1t(),n.mpt()}*Uyt(t,s){(this.qgt()||this.wf.myt())&&(yield this);const i=this.Ck(),e=0<i.length,h=this.wf,r=this.jft,n=h.xk(),o=n.q1t(),a=1<o,l=(a&&n.e1t().i8(),this.Jmt.Ryt(t),e&&(s?n.o8(i):n.Z1t(i)),r.i8(this));(yield*this.Cyt(l))&&(l.C0t(this),yield*this.yyt(l)),r.d8(),a&&n.e1t().d8(),e&&n.l8(i),n.X1t(),n.mpt()}Ek(t,s,i,e,...h){let r,n,o=0<t.length,a=this.wf,l=this.jft,u=a.xk(),c=this.Jmt,f=c.Syt(),d=u.q1t(),p=1<d,m=(p&&u.e1t().i8(),0<h.length&&this.Jmt.Ryt(h),o&&(s?u.o8(t):u.Z1t(t)),l.i8(this));return m.N0t(i,e),l.m0t(m),a.r8(!1),this.Iyt(m)&&(m.C0t(this),f&&([n,r]=c.Nyt()),this.pyt(m),f)&&c.Wyt(n),a.r8(!0),l.d8(),l.g0t(),p&&u.e1t().d8(),o&&u.l8(t),u.X1t(),f||u.mpt(),r||m.W0t()}}}{let e=self.Ws,t=[],s=!1;e.bmt=class extends e.ur{constructor(t,s,i){super();const e=t.nO(),h=t.xk(),r=(this.Xq=t,this.u0t=h,this.wf=t.nO(),this.zmt=s,e.Hyt(i[1]));this.zyt=r,this.cgt=i[2],this.Xq.Emt(this,this.cgt),this.fgt=e.sY()?{dgt:i[3][0],pgt:i[3][1]}:null}static Cx(t,s,i){return e.dr(e.bmt,t,s,i)}Bdt(){const t=this.zyt,s=this.wf.xk().o1t(this);this.zyt=t.bind(null,this.wf.dL(),s)}BN(){return this.zmt}r1t(){return this.zmt}RX(){return this.Xq}zgt(){return this.cgt}Jgt(){return this.fgt&&this.fgt.pgt}qgt(){return this.Jgt()&&this.fgt.dgt}Xgt(t){this.fgt.dgt=!!t}_mt(){return!1}t8(){return t}Ck(){return this.zmt?this.zmt.Ck():t}q_(t){t.C0t(this),this.u0t.fpt(this.Jyt())}async Jyt(){try{await this.zyt()}catch(t){console.error(`Unhandled exception running script %c${this.RX().uf()}, event ${this.zgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*k1t(t){t.C0t(this),(this.qgt()||this.wf.myt())&&(yield this),this.q_(t)}Lmt(){return!this.qgt()&&!this.wf.myt()}static qyt(){return s}static Xyt(){s=!0}}}{const go=self.Ws;go.qpt=class extends go.ur{constructor(t,s,i){super(),this.Xq=t,this.wf=t.nO(),this.zmt=s,this.$yt=0,this.Yyt="",this.Kyt=0,this.Zyt=[],this.Qyt=!0,this.twt="",this.Fft=null,this.swt=!1,this.iwt=[],this.ewt=!1,this.hwt=!1,this.rwt=0,this.nwt=-1,this.owt=new Map,this.awt=go.fmt.Cx(t,s,i),this.awt.Hgt(this)}lwt(t){this.$yt=0,this.Yyt=t[0],this.Kyt=t[1],this.Zyt=t[2].map(t=>go.wmt.Cx(this.Xq,this,t)),this.Qyt=t[3],this.hwt=t[4],this.ewt=t[5]}uwt(t){this.$yt=1,this.twt=t[1],this.Fft=this.wf.Lz(t[2]),this.awt.vgt(this.Fft),this.Yyt=this.Fft.uf()+"."+this.twt,this.Kyt=t[3],this.Zyt=t[4].map(t=>go.wmt.Cx(this.Xq,this,t)),this.Qyt=t[5],this.hwt=t[6],this.ewt=t[7],this.Fft.cwt(this)}static gmt(t,s,i){const e=go.dr(go.qpt,t,s,i),h=i[1];return e.lwt(h),e}static ymt(t,s,i){const e=go.dr(go.qpt,t,s,i),h=i[1];return e.uwt(h),e}Ndt(){if(this.Fft&&this.Fft.a9())for(const t of this.Fft.Igt())if(t.fwt(this.twt)){this.swt=!0;break}}Bdt(){for(const t of this.Zyt)t.Bdt();this.awt.Bdt(!1)}Jdt(){return this.$yt}n1t(){return this.Zyt}Xpt(){return this.Zyt}_k(){return this.Zyt.length}dwt(t){this.iwt.push(t)}pwt(){return this.iwt}Eyt(i){const e=this.Zyt;for(let t=0,s=e.length;t<s;++t)e[t].vht(i[t].ri(0))}Ryt(i){const e=this.Zyt;for(let t=0,s=e.length;t<s;++t)e[t].vht(i[t])}mwt(){return this.Zyt.map(t=>t.Net())}BN(){return this.zmt}r1t(){return this.zmt}qdt(){return this.Yyt}gwt(){return this.twt}ywt(){return this.swt}Fk(){return this.Kyt}qB(){return this.Fft}nc(){return this.Qyt}Tk(){switch(this.Kyt){case 0:return null;case 2:return"";default:return 0}}Ik(){return this.awt}Ak(){return this.ewt}Syt(){return this.hwt}Nyt(){const t=this.rwt++;this.nwt=t;let s,i=new Promise(t=>s=t);return this.owt.set(t,{resolve:s,wwt:0}),[t,i]}Wyt(t){const s=this.owt.get(t);0===s.wwt&&(s.resolve(),this.owt.delete(t)),this.nwt=-1}Swt(){const t=this.owt.get(this.nwt);return t.wwt++,this.nwt}bwt(t){this.nwt=t;const s=this.owt.get(t);s.wwt--}vwt(t,s){const i=new Map,e=[];for(const h of this.Fft.ZL().KL()){const r=h.qB();if(r.fwt(this.twt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.awt.Ayt(t,s,this.ewt,{Oyt:this.Fft,Lyt:e}),0<i.size)for(const[o,a]of i){const l=o.Mwt(this.twt).Ik(),u=[...new Set([...t,...l.t8()])];l.Ayt(u,s,this.ewt,{Oyt:o,Lyt:a})}}*xwt(t,s){const i=new Map,e=[];for(const h of this.Fft.ZL().KL()){const r=h.qB();if(r.fwt(this.twt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.awt.jyt(t,s,this.ewt,{Oyt:this.Fft,Lyt:e})),0<i.size)for(const[o,a]of i){const l=o.Mwt(this.twt).Ik(),u=[...new Set([...t,...l.t8()])];yield*l.jyt(u,s,this.ewt,{Oyt:o,Lyt:a})}}}}{const yo=self.Ws,wo=[];yo.wmt=class extends yo.ur{constructor(t,s,i){super();const e=t.xk();this.Xq=t,this.u0t=e,this.wf=t.nO(),this.zmt=s,this.xdt=e.e1t(),this.vr=i[1],this._f=i[2],this.Gwt=i[3],this.NM=!!i[4],this.Twt=!!i[5],this._wt=s instanceof yo.qpt,this.k7=i[6],this.Iwt=this.wf.a1t(i[8]),this.Cwt=t=>this.vht(t),this.Pwt=()=>this.Net(),this.Rwt=!this.zmt||this.NM||this.Twt,this.Kht=this.Gwt,this.Ewt=-1,this.Awt()&&(this.Kht=this.Kht?1:0),!this.Fwt()||this.g2()||this.jpt()||(this.Ewt=e.Ydt(this)),e.Xdt(this)}static Cx(t,s,i){return yo.dr(yo.wmt,t,s,i)}Bdt(){if(this.Fwt()&&!this.g2()&&!this.jpt()&&!this.kwt()){const t=this.u0t.Jpt(this);t&&t.dwt(this)}}uf(){return this.vr}a1t(){return this.Iwt}BN(){return this.zmt}r1t(){return this.BN()}Xz(){return!this.BN()}Fwt(){return!this.Xz()}kwt(){return this._wt}g2(){return this.NM}jpt(){return this.Twt}ye(){return 0===this._f}Ce(){return 1===this._f}Awt(){return 2===this._f}_mt(){return!1}g9(){return this.k7}Kdt(){return this.Gwt}t8(){return wo}q_(t){!this.Fwt()||this.g2()||this.jpt()||this.vht(this.Kdt())}Lmt(){return!0}*k1t(t){this.q_(t)}vht(t){this.ye()?"number"!=typeof t&&(t=parseFloat(t)):this.Ce()?"string"!=typeof t&&(t=t.toString()):this.Awt()&&(t=t?1:0),this.Rwt?this.Kht=t:this.xdt.$0t()[this.Ewt]=t}Net(){return this.Rwt?this.Kht:this.xdt.$0t()[this.Ewt]}Dwt(){let t=this.Net();return this.Awt()?!!t:t}S1t(){this.Kht=this.Gwt}l1t(){return{configurable:!1,enumerable:!0,get:this.Pwt,set:this.Cwt}}}}{const So=self.Ws,bo=[];So.Smt=class extends So.ur{constructor(t,s,i){super();const e=t.xk();this.Xq=t,this.u0t=e,this.wf=t.nO(),this.zmt=s,this.Owt=null,this.Lwt=i[1],this.y0=!0}static Cx(t,s,i){return So.dr(So.Smt,t,s,i)}Bdt(){this.Owt=this.u0t.i$(this.Lwt),this.Xq.Imt(this);let t=this.BN();for(;t;)t instanceof So.fmt&&t.M1t()&&t.Ggt(this),t=t.BN();this.Kgt(),this.wf.sY()&&this.Xq.zpt().children.push(this.Owt.zpt())}BN(){return this.zmt}t8(){return bo}Pmt(){return this.Owt}q_(t){const s=!!this.BN(),i=this.wf.o9();s&&this.u0t.Z1t(i),this.Owt.q_(),s&&this.u0t.l8(i)}*k1t(t){const s=!!this.BN(),i=this.wf.o9();s&&this.u0t.Z1t(i),yield*this.Owt.k1t(),s&&this.u0t.l8(i)}Lmt(){return!1}Rmt(){return this.y0}Kgt(){let t=this.BN();for(;t;){if(t instanceof So.fmt&&t.M1t()&&!t.Npt())return void(this.y0=!1);t=t.BN()}this.y0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Ws;vo.Bwt=class extends vo.ur{constructor(t){super(),this.Qv=t,this.wf=t.nO()}Bdt(){}static Nwt(t,s){const i=s[0],e=[_o,Go,To,Io,Mo,xo];return vo.dr(e[i],t,s)}};class Mo extends vo.Bwt{constructor(t,s){super(t),this.Wwt=this.wf.jwt(),this.zyt=this.wf.Hyt(s[1]),this.zyt!==vo.G$.x$.prt.random&&this.zyt!==vo.G$.x$.prt.Vwt||this.Qv.Uwt()}Hwt(){return this.Wwt.zwt(this.zyt,this.Wwt)}}class xo extends vo.Bwt{constructor(t,s){super(t),this.Jwt=null,this.Yyt=s[1],this.Qv.Uwt()}Bdt(){const t=this.wf.xk(),s=(this.Jwt=t.Gk(this.Yyt),this.Yyt=null,this.Qv.Ik()),i=this.Jwt.Ik();this.qwt=[...new Set([...s.Ck(),...i.Ck()])],this.qwt=t.$dt(this.qwt)}Hwt(){const t=this.Jwt;if(t.nc()){const s=t.Ik();return vo.fmt.prototype.Ek.bind(s,this.qwt,t.Ak(),t.Fk(),t.Tk())}{const i=t.Tk();return()=>i}}}class Go extends vo.Bwt{constructor(t,s){super(t),this.Fft=this.wf.Lz(s[1]),this.zyt=this.wf.Hyt(s[2]),this.Xwt=!!s[3],this.jft=this.wf.xk().Ok(),this.Qv.$wt(this.Fft)}Hwt(){return this.Fft.WL().zwt(this.zyt,this.Fft.LL().A6())}Ywt(...t){const s=this.Fft,i=s.ZL().$ft(),e=i.length;if(0===e)return this.Xwt?"":0;const h=a(this.Qv.Kwt(),e);return this.jft.s8().L0t(s),this.zyt.apply(i[h].A6(),t)}Zwt(t,...s){const i=this.Fft,e=i.KL(),h=e.length;if(0===h)return this.Xwt?"":0;const r=a(t,h);return this.jft.s8().L0t(i),this.zyt.apply(e[r].A6(),s)}}class To extends vo.Bwt{constructor(t,s){super(t),this.Fft=this.wf.Lz(s[1]),this.Qwt=s[3],this.Xwt=!!s[2],this.Qv.$wt(this.Fft)}tSt(){const t=this.Fft.ZL().$ft(),s=t.length;if(0===s)return this.Xwt?"":0;const i=a(this.Qv.Kwt(),s);return t[i].sSt(this.Qwt)}iSt(){const t=this.Fft,s=t.ZL().$ft(),i=s.length;if(0===i)return this.Xwt?"":0;const e=a(this.Qv.Kwt(),i),h=s[e],r=h.qB().eSt(t.hSt());return h.sSt(this.Qwt+r)}rSt(t){const s=this.Fft,i=s.KL(),e=i.length;if(0===e)return this.Xwt?"":0;let h=a(t,e),r=i[h],n=0;return s.a9()&&(n=r.qB().eSt(s.hSt())),r.sSt(this.Qwt+n)}}class _o extends vo.Bwt{constructor(t,s){super(t),this.Fft=this.wf.Lz(s[1]),this.nSt=this.Fft.zht(s[2]),this.oSt=this.Fft.vit(s[2]),this.zyt=this.wf.Hyt(s[3]),this.Xwt=!!s[4],this.jft=this.wf.xk().Ok(),this.Qv.$wt(this.Fft)}aSt(...t){const s=this.Fft,i=s.ZL().$ft(),e=i.length;if(0===e)return this.Xwt?"":0;let h=a(this.Qv.Kwt(),e),r=(this.jft.s8().L0t(s),i[h]),n=0;return s.a9()&&(n=r.qB().lSt(s.hSt())),this.zyt.apply(r.Hht()[this.oSt+n].A6(),t)}uSt(t,...s){const i=this.Fft,e=i.KL(),h=e.length;if(0===h)return this.Xwt?"":0;let r=a(t,h),n=(this.jft.s8().L0t(i),e[r]),o=0;return i.a9()&&(o=n.qB().lSt(i.hSt())),this.zyt.apply(n.Hht()[this.oSt+o].A6(),s)}}class Io extends vo.Bwt{constructor(t,s){super(t),this.cSt=null,this.fSt=s[1]}Bdt(){this.cSt=this.wf.xk().u1t(this.fSt)}dSt(){return this.cSt}}}{let r=function(t){const s=self.pSt[t];if(s)return s;throw new Error("invalid expression number")};r;const Co=self.Ws;Co.mSt=class extends Co.ur{constructor(t,s,i){super(),this.Qv=t,this.wy=i,this._f=s,this.ri=null,this.gSt=!1,this.Twt=!1}static Cx(t,s,i){const e=s[0],h=[Po,Ro,Lo,Ao,ko,Eo,Do,Po,Ao,Ao,Bo,No,Lo,jo,Ro,Oo,Fo,Wo,Vo,Uo,Ho,zo];return Co.dr(h[e],t,e,i,s)}Bdt(){}Uwt(){this.gSt=!0}$wt(t){this.gSt||!t||t.WL().mL()||(this.gSt=!0)}ySt(){return this.gSt}HF(){return this.wy}nO(){return this.Qv.nO()}Ik(){return this.Qv.Ik()}jpt(){return this.Twt}wSt(){return 4===this._f}};class Po extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.SSt=0;const h=e[1];this.bSt=h[0],this.vSt=[],this.MSt=null;for(let t=1,s=h.length;t<s;++t)this.vSt.push(Co.Bwt.Nwt(this,h[t]));this.vSt.length?this.ri=this.xSt:(this.ri=r(this.bSt),this.Twt=!0)}GSt(t){if(t<0||t>=this.vSt.length)throw new RangeError("invalid numbered node");return this.vSt[t]}Bdt(){for(const s of this.vSt)s.Bdt();const t=r(this.bSt);this.vSt.length?this.MSt=t(this):this.MSt=t}Kwt(){return this.SSt}xSt(t){return this.SSt=t,this.MSt()}}class Ro extends Po{constructor(t,s,i,e){super(t,s,i,e),this.ri=this.TSt,14===s&&(this.Ik().Pgt(),this.Qv instanceof Co.Mgt)&&this.Ik().Vgt()}TSt(t){this.SSt=t;const s=this.MSt();return"string"==typeof s?s:""}_St(){return r(this.bSt)()}}class Eo extends Po{constructor(t,s,i,e){super(t,s,i,e),2<=t.ISt()?this.ri=this.T5:this.ri=this.WD,this.Twt=!1}WD(t){this.SSt=t;const s=this.MSt(),i=this.nO().LD();return i.WD(s)}T5(t){const s=this.WD(t);return s?s.T5():null}}class Ao extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.CSt=e[1],this.ri=this.PSt,this.Twt=!0}PSt(){return this.CSt}}class Fo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.RSt=e[1],this.ri=this.ESt,this.Twt=!0}ESt(){return this.RSt}}class ko extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.Fft=this.nO().Lz(e[1]),2<=t.ISt()?this.ri=this.kL:this.ri=this.qB;const h=this.Ik();h.vgt(this.Fft),this.Qv instanceof Co.Mgt?h.Vgt():h.BN()&&h.BN().Vgt(),this.Twt=!0}qB(){return this.Fft}kL(){return this.Fft?this.Fft.kL():null}}class Do extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.R7=this.nO().bD().gY(e[1]),2<=t.ISt()?this.ri=this.wD:this.ri=this.vD,this.Twt=!0}vD(){return this.R7}wD(){return this.R7?this.R7.wD():null}}class Oo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.SZ=this.nO().Mtt()._K(e[1]),2<=t.ISt()?this.ri=this.Lst:this.ri=this.rit,this.Twt=!0}rit(){return this.SZ}Lst(){return this.SZ?this.SZ.Lst():null}}class Lo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.ASt=e[1],this.ri=this.FSt,this.Twt=!0}FSt(){return this.ASt}}class Bo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.kSt=e[1];const h=this.Qv.qB();this.Qv instanceof Co.bgt&&this.Qv.g2()||!h||!h.a9()?(this.ri=this.DSt,this.Twt=!0):(this.ri=this.OSt,this.Uwt())}DSt(){return this.kSt}OSt(t){t=t||0;let s=this.Qv.qB(),i=s.ZL(),e=i.KL(),h=null;if(e.length)h=e[t%e.length].qB();else if(i.qft()){const r=i.Xft();h=r[t%r.length].qB()}else{if(!(0<s.t5()))return 0;{const n=s.KL();h=n[t%n.length].qB()}}return this.kSt+h.eSt(s.hSt())}}class No extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.fSt=e[1],this.cSt=null,2<=t.ISt()?this.ri=this.LSt:this.ri=this.BSt,this.Twt=!0}Bdt(){this.cSt=this.nO().xk().u1t(this.fSt)}BSt(){return this.cSt}LSt(){return null}}class Wo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.NSt=e[1],this.Jwt=null,2<=t.ISt()?this.ri=this.WSt:this.ri=this.jSt,this.Twt=!0}Bdt(){this.Jwt=this.nO().xk().Gk(this.NSt),this.NSt=null}jSt(){return this.Jwt}WSt(){return null}}class jo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.VSt=[],this.USt=[],this.Twt=!0;for(let t=1,s=e.length;t<s;++t){const h=Co.mSt.Cx(this.Qv,e[t],0);this.VSt.push(h),this.USt.push(0),h.jpt()||(this.Twt=!1)}this.ri=this.HSt}Bdt(){for(const t of this.VSt)t.Bdt()}HSt(){const i=this.VSt,e=this.USt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0);return e}}class Vo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.zSt=e[1],this.ri=this.bht,this.Twt=!0}bht(){return this.zSt}}class Uo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.JSt=e[1],this.ri=this.qSt,this.Twt=!0}qSt(){return this.JSt}}class Ho extends Po{constructor(t,s,i,e){super(t,s,i,e),this.ri=this.l4,this.Twt=!1}l4(){return this.MSt()}}class zo extends Co.mSt{constructor(t,s,i,e){super(t,s,i),this.yut=this.nO().Dut().uut(e[1]),this.ri=this.XSt,this.Twt=!0}XSt(){return this.yut.uf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0)};e;const Jo=self.Ws,qo=[],Xo=function(){};Jo.bgt=class extends Jo.ur{constructor(t,i,s){if(super(),this.awt=t,this.wf=t.nO(),this.wy=s,this.zyt=this.wf.Hyt(i[1]),this.$St=0<i[3],this.YSt=2===i[3],this.KSt=!!i[4],this.ZSt=!!i[5],this.NM=!!i[6],this.k7=i[7],this.QSt=this.awt.a0t(),this.Fft=null,this.nSt=null,this.oSt=-1,this.Wwt=null,this.q_=Xo,this.k1t=Xo,this.Qs=[],this.tbt=[],this.sbt=!1,this.ibt=null,this.ebt=null,this.fgt=this.wf.sY()?{dgt:i[8][0],hbt:i[8][1]}:null,-1===i[0]?this.Wwt=this.wf.jwt():(this.Fft=this.wf.Lz(i[0]),i[2]&&(this.nSt=this.Fft.zht(i[2]),this.oSt=this.Fft.vit(i[2])),this.awt.BN()&&this.awt.BN().Vgt()),10===i.length){let s=i[9];for(let t of s)this.Qs.push(Jo.mSt.Cx(this,t,this.Qs.length)),this.tbt.push(0)}0===this.Qs.length&&(this.Qs=qo,this.tbt=qo),this.awt.xk().Udt(this)}static Cx(t,s,i){return Jo.dr(Jo.bgt,t,s,i)}Bdt(){for(const t of this.Qs)t.Bdt(),t.ySt()&&(this.sbt=!0);this.YSt?(this.q_=this.rbt,this.k1t=this.nbt):this.Wwt?(this.obt(),this.k1t=this.abt):this.Fft.WL().mL()?(this.lbt(),this.k1t=this.ubt):this.NM?(this.q_=this.cbt,this.k1t=this.fbt):(this.q_=this.dbt,this.k1t=this.pbt)}obt(){const t=this.Wwt,s=this.Wwt;this.mbt(t,s,this.gbt)}lbt(){const t=this.Fft.WL(),s=this.Fft.LL().A6();this.mbt(t,s,this.ybt)}mbt(t,s,i){const e=this.zyt,h=this.ZSt,r=this.Qs;if(0===r.length){const n=t.zwt(e,s);h?this.q_=function(){return Jo.xor(n(),h)}:this.q_=n}else if(1===r.length){const o=r[0];if(!h&&o.jpt())this.q_=t.wbt(e,s,o.ri(0));else{const a=t.zwt(e,s);this.q_=function(){return Jo.xor(a(o.ri(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.jpt()&&u.jpt())this.q_=t.Sbt(e,s,l.ri(0),u.ri(0));else{const c=t.zwt(e,s);this.q_=function(){return Jo.xor(c(l.ri(0),u.ri(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.jpt()&&d.jpt()&&p.jpt())this.q_=t.bbt(e,s,f.ri(0),d.ri(0),p.ri(0));else{const m=t.zwt(e,s);this.q_=function(){return Jo.xor(m(f.ri(0),d.ri(0),p.ri(0)),h)}}}else this.q_=i}g9(){return this.k7}vmt(){return this.zyt}qB(){return this.Fft}V6(){return this.nSt}vbt(){return this.nSt?this.nSt.N6():this.Fft?this.Fft.WL():null}ISt(){const t=this.vbt();return t?t.Mbt():1}Ik(){return this.awt}nO(){return this.wf}HF(){return this.wy}nyt(){return this.HF()}pmt(){return this.$St}Mmt(){return this.YSt}xbt(){return this.ZSt}eW(){return this.KSt}g2(){return this.NM}Gbt(){return this.fgt.dgt}Tbt(){return!!this.Wwt}syt(){return this.Tbt()||this.Fft.WL().mL()}iyt(){for(const t of this.Qs)if(t.wSt())return t.qB();return null}_bt(t){this.fgt.dgt=!!t,this.awt.Ngt()}Ibt(){return this.fgt.hbt}Lmt(){return!this.Gbt()&&!this.wf.myt()&&!this.Ibt()}Cbt(){return this.ibt||(this.ibt=new Map),this.ibt}Pbt(){return this.ebt||(this.ebt=new Map),this.ebt}gbt(){const t=this.tbt;return e(this.Qs,t),Jo.xor(this.zyt.apply(this.Wwt,t),this.ZSt)}*abt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const s=this.tbt;e(this.Qs,s);let t=this.zyt.apply(this.Wwt,s);return Jo.Xo(t)&&(t=yield*t),Jo.xor(t,this.ZSt)}return this.q_()}ybt(){const t=this.tbt,s=(e(this.Qs,t),this.Fft.LL().A6());return Jo.xor(this.zyt.apply(s,t),this.ZSt)}*ubt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){let t=this.tbt,s=(e(this.Qs,t),this.Fft.LL().A6()),i=this.zyt.apply(s,t);return Jo.Xo(i)&&(i=yield*i),Jo.xor(i,this.ZSt)}return this.q_()}rbt(){return!0}*nbt(){return(this.Gbt()||this.wf.myt())&&(yield this),!0}Rbt(){if(this.nSt){if(2<=this.nSt.N6().Mbt())throw new Error("not yet implemented");return this.nSt}return 2<=this.Fft.WL().Mbt()?this.Fft.kL():this.Fft}cbt(){const t=this.tbt,s=(e(this.Qs,t),this.zyt.apply(this.Rbt(),t));return this.Fft.Dyt(),s}*fbt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const s=this.tbt;e(this.Qs,s);let t=this.zyt.apply(this.Rbt(),s);return Jo.Xo(t)&&(t=yield*t),this.Fft.Dyt(),t}return this.q_()}dbt(){const i=this.Qs,e=this.tbt,t=this.Fft.ZL();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.ySt()||(e[t]=h.ri(0))}return t.zft()?this.Ebt(t):this.Abt(t)}*pbt(){return(this.Gbt()||this.wf.myt())&&(yield this),this.dbt()}Fbt(i){const e=this.Qs,h=this.tbt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.ySt()&&(h[t]=r.ri(i))}}Ebt(i){const t=this.Fft,e=t.a9(),h=t.hSt(),r=this.oSt,n=0<=r,o=t.KL(),a=this.sbt,l=this.tbt,u=this.zyt,c=this.ZSt,f=this.QSt&&!this.$St;i.Hft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Fbt(s);let t;if(n){const p=e?d.qB().lSt(h):0;t=u.apply(d.Hht()[r+p].A6(),l)}else t=u.apply(d.A6(),l);Jo.xor(t,c)?i.Yft(d):f&&i.Kft(d)}return t.kbt(!0),i.Zft(!1),t.Dyt(),i.Jft()}Abt(t){let s=this.Fft,i=s.a9(),e=s.hSt(),h=s.r4(),r=this.oSt,n=0<=r,o=this.sbt,a=this.tbt,l=this.zyt,u=this.ZSt,c=this.QSt&&!this.$St,f=t.Qft(),d=t.t0t(),p=c&&!this.awt.tyt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.Fbt(s);let t;if(n){const b=i?S.qB().lSt(e):0;t=l.apply(S.Hht()[r+b].A6(),a)}else t=l.apply(S.A6(),a);Jo.xor(t,u)?(y=!0,p?(f.push(S),h&&S.Dbt()):(m[g]=S,h&&S.Obt(g),++g)):p?(m[g]=S,h&&S.Lbt(g),++g):c&&(d.push(S),h)&&S.Bbt()}Jo.Un(m,g),h&&s.Nbt(p,g);const w=y;return p&&!y&&(y=this.Wbt(f)),s.kbt(w||c),c?y:t.Jft()}Wbt(i){const t=this.Fft,e=t.a9(),h=t.hSt(),r=this.sbt,n=this.oSt,o=0<=n,a=this.tbt,l=this.zyt,u=this.ZSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Fbt(s);let t;if(o){const f=e?c.qB().lSt(h):0;t=l.apply(c.Hht()[n+f].A6(),a)}else t=l.apply(c.A6(),a);if(Jo.xor(t,u))return!0}return!1}jbt(t,s){return this.Qs[t].ri(s)}xmt(){const t=this.Qs;if(t.length)return t[0]._St();throw new Error("no parameters")}kq(){if(!this.ibt||!this.ibt.size)return null;const s={};for(const[i,e]of this.ibt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].o4(),t[1].o4(),t[2]])),s[i]=t}return{ex:s}}Dq(t){if(this.ibt&&(this.ibt.clear(),this.ibt=null),t){const s=this.wf,i=t.ex;if(i){const e=this.Cbt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Jo.dr(Jo.oc,r.map(t=>[s.kD(t[0]),s.kD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0)};h;const $o=self.Ws,Yo=[],Ko=function(){},Zo=function*(){};$o.Mgt=class extends $o.ur{constructor(t,s,i){super();const e=(this.awt=t).nO(),h=(this.wf=e,this.wy=i,this.k7=4<=s.length?s[3]:-1,this.Vbt=5<=s.length?255&s[4]:0,this.Ubt=5<=s.length?s[4]>>8:0,this.zyt=null,this.Fft=null,this.nSt=null,this.oSt=-1,this.Wwt=null,this.Hbt="",this.zbt=null,this.Jbt=null,this.q_=Ko,this.k1t=Ko,this.Qs=[],this.tbt=[],this.sbt=!1,this.ibt=null,this.ebt=null,-3===s[0]),r=h?s[2]:s[5];if(this.fgt=e.sY()||h?{dgt:r[0],hbt:r[1],index:r[2]}:null,-1===s[0])this.Wwt=e.jwt(),this.zyt=e.Hyt(s[1]);else if(-2===s[0])this.Hbt=s[1];else if(h){const n=e.Hyt(s[1]);this.zyt=n,this.q_=this.qbt,this.k1t=this.Xbt,this.Ubt|=8}else this.Fft=e.Lz(s[0]),4&this.Ubt?(this.Hbt=s[1],this.zbt=e.Lz(s[2])):(s[2]&&(this.nSt=this.Fft.zht(s[2]),this.oSt=this.Fft.vit(s[2])),this.zyt=e.Hyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Qs.push($o.mSt.Cx(this,a,this.Qs.length)),this.tbt.push(0)}0===this.Qs.length&&(this.Qs=Yo,this.tbt=Yo),this.$bt()&&(this.awt.Pgt(),this.awt.Vgt()),this.awt.xk().Hdt(this)}static Cx(t,s,i){return $o.dr($o.Mgt,t,s,i)}Bdt(){for(const t of this.Qs)t.Bdt(),t.ySt()&&(this.sbt=!0);if(this.Wwt)this.obt(),this.k1t=this.abt;else if(this.Hbt)4&this.Ubt?this.Ybt():this.Kbt(),this.Hbt="",this.zbt=null;else if(this.q_===this.qbt){const s=this.zyt,i=this.wf.xk().o1t(this.awt);this.zyt=s.bind(null,this.wf.dL(),i)}else this.nSt?this.Syt()?(this.q_=this.Zbt,this.k1t=this.Qbt):(this.q_=this.tvt,this.k1t=this.svt):this.Fft.WL().mL()?(this.lbt(),this.k1t=this.ubt):this.g2()?(this.q_=this.ivt,this.k1t=this.evt):this.Syt()?(this.q_=this.hvt,this.k1t=this.rvt):this.nvt()?(this.q_=this.ovt,this.k1t=this.avt):this.Qs.length?this.Qs.every(t=>t.ySt())?(this.q_=this.lvt,this.k1t=this.uvt):this.sbt?(this.q_=this.cvt,this.k1t=this.fvt):this.Qs.every(t=>t.jpt())?(h(this.Qs,this.tbt),this.q_=this.dvt,this.k1t=this.pvt):(this.q_=this.mvt,this.k1t=this.gvt):(this.q_=this.dvt,this.k1t=this.pvt)}obt(){const t=this.Wwt,s=this.Wwt;this.mbt(t,s,this.gbt)}lbt(){const t=this.Fft.WL(),s=this.Fft.LL().A6();this.mbt(t,s,this.ybt)}Kbt(){const t=this.awt.xk(),i=t.Gk(this.Hbt);if(i.nc()){const e=0!=(2&this.Ubt);this.Jbt=i.Ik();let s=[...new Set([...this.awt.Ck(),...this.Jbt.Ck()])];s=t.$dt(s);const h=!i.Ak()&&this.yvt()?{Byt:!0}:null;if(this.q_=$o.fmt.prototype.Ayt.bind(this.Jbt,s,this.Qs,e,h),this.wf.sY()){const r=this;this.k1t=function*(){(r.Gbt()||r.wf.myt())&&(yield r);const t=yield*r.Jbt.jyt(s,r.Qs,e,h);return t}}else this.k1t=Zo}else this.q_=Ko,this.k1t=Zo}Ybt(){const r=this.awt.xk(),n=r.p1t(this.zbt,this.Hbt);if(n.nc()){const o=0!=(2&this.Ubt);this.Jbt=n.Ik();let s=[...new Set([...this.awt.Ck(),...this.Jbt.Ck(),this.Fft,n.qB()])],t=(s=r.$dt(s),!this.Fft.a9()&&!n.qB().a9()),i=!this.Fft.a9()&&n.qB().a9(),e=this.Fft.a9(),h=null;if(!n.Ak()&&this.yvt()&&((h=h||{}).Byt=!0),!i&&o||((h=h||{}).Fyt=this.Fft,h.kyt=n.qB()),t||i||e&&!n.ywt()?this.q_=$o.fmt.prototype.Ayt.bind(this.Jbt,s,this.Qs,o,h):e&&(this.q_=$o.qpt.prototype.vwt.bind(n,s,this.Qs)),this.wf.sY()){const a=this;t||i||e&&!n.ywt()?this.k1t=function*(){(a.Gbt()||a.wf.myt())&&(yield a);const t=yield*a.Jbt.jyt(s,a.Qs,o,h);return t}:e&&(this.k1t=function*(){(a.Gbt()||a.wf.myt())&&(yield a);const t=yield*n.xwt(s,a.Qs);return t})}else this.k1t=Zo}else this.q_=Ko,this.k1t=Zo}mbt(t,s,i){const e=this.zyt,h=this.Qs;if(0===h.length)this.q_=t.zwt(e,s);else if(1===h.length){const r=h[0];if(r.jpt())this.q_=t.wbt(e,s,r.ri(0));else{const n=t.zwt(e,s);this.q_=function(){return n(r.ri(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.jpt()&&a.jpt())this.q_=t.Sbt(e,s,o.ri(0),a.ri(0));else{const l=t.zwt(e,s);this.q_=function(){return l(o.ri(0),a.ri(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.jpt()&&c.jpt()&&f.jpt())this.q_=t.bbt(e,s,u.ri(0),c.ri(0),f.ri(0));else{const d=t.zwt(e,s);this.q_=function(){return d(u.ri(0),c.ri(0),f.ri(0))}}}else this.q_=i}g9(){return this.k7}Syt(){return 0!=(8&this.Ubt)}wyt(){return 0!=(16&this.Ubt)}nvt(){return 1===this.Vbt}g2(){return 2===this.Vbt}$bt(){return 0!=(1&this.Ubt)}Agt(){return this.Syt()||this.wyt()}qB(){return this.Fft}vbt(){return this.nSt?this.nSt.N6():this.Fft?this.Fft.WL():null}ISt(){const t=this.vbt();return t?t.Mbt():1}Ik(){return this.awt}yvt(){let t=this.awt;do{if(t instanceof $o.qpt&&t.Ak())return!0}while(t=t.r1t());return!1}nO(){return this.wf}HF(){return this.wy}nyt(){return this.fgt.index}Gbt(){return this.fgt.dgt}_bt(t){this.fgt.dgt=!!t,this.awt.Ngt()}Ibt(){return this.fgt.hbt}Lmt(){return!this.Gbt()&&!this.wf.myt()&&!this.Ibt()}Cbt(){return this.ibt||(this.ibt=new Map),this.ibt}Pbt(){return this.ebt||(this.ebt=new Map),this.ebt}gbt(){const t=this.tbt;return h(this.Qs,t),this.zyt.apply(this.Wwt,t)}*abt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const t=this.tbt,s=(h(this.Qs,t),yield*this.zyt.apply(this.Wwt,t));return s}return this.q_()}ybt(){const t=this.tbt;return h(this.Qs,t),this.zyt.apply(this.Fft.LL().A6(),t)}*ubt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const t=this.tbt,s=(h(this.Qs,t),yield*this.zyt.apply(this.Fft.LL().A6(),t));return s}return this.q_()}dvt(){const i=this.tbt,e=this.Fft.ZL().KL();for(let t=0,s=e.length;t<s;++t)this.zyt.apply(e[t].A6(),i)}*pvt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const i=this.tbt,e=this.Fft.ZL().KL();for(let t=0,s=e.length;t<s;++t)yield*this.zyt.apply(e[t].A6(),i)}else this.dvt()}mvt(){const i=this.tbt,e=(h(this.Qs,i),this.Fft.ZL().KL());for(let t=0,s=e.length;t<s;++t)this.zyt.apply(e[t].A6(),i)}*gvt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const i=this.tbt,e=(h(this.Qs,i),this.Fft.ZL().KL());for(let t=0,s=e.length;t<s;++t)yield*this.zyt.apply(e[t].A6(),i)}else this.mvt()}lvt(){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);s.apply(n.A6(),h)}}*uvt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);yield*s.apply(n.A6(),h)}}else this.lvt()}cvt(){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ySt()||(h[t]=i.ri(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ySt()&&(h[t]=o.ri(i))}s.apply(n.A6(),h)}}*fvt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.ySt()||(h[t]=i.ri(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.ySt()&&(h[t]=o.ri(i))}yield*s.apply(n.A6(),h)}}else this.cvt()}ovt(){const e=this.Qs,h=this.tbt,s=this.zyt,t=this.Fft,i=t.wvt(),r=t.ZL().KL();i.Svt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);s.apply(n.A6(),h)}i.bvt(s)}*avt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const e=this.Qs,h=this.tbt,s=this.zyt,t=this.Fft,i=t.wvt(),r=t.ZL().KL();i.Svt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);yield*s.apply(n.A6(),h)}i.bvt(s)}else this.ovt()}ivt(){const t=this.tbt;return h(this.Qs,t),this.zyt.apply(this.nSt||this.Fft,t)}*evt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const s=this.tbt;h(this.Qs,s);let t=this.zyt.apply(this.nSt||this.Fft,s);return $o.Xo(t)?yield*t:t}return this.ivt()}tvt(){const t=this.Fft,s=t.a9(),e=t.hSt(),h=this.Qs,r=this.sbt,n=this.tbt,o=this.zyt,a=this.oSt,l=t.ZL().KL();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ySt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ySt()&&(n[t]=f.ri(i))}const c=s?u.qB().lSt(e):0;o.apply(u.Hht()[a+c].A6(),n)}}*svt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const t=this.Fft,s=t.a9(),e=t.hSt(),h=this.Qs,r=this.sbt,n=this.tbt,o=this.zyt,a=this.oSt,l=t.ZL().KL();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.ySt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.ySt()&&(n[t]=f.ri(i))}const c=s?u.qB().lSt(e):0;yield*o.apply(u.Hht()[a+c].A6(),n)}}else this.tvt()}hvt(){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);n.push(s.apply(o.A6(),h))}return Promise.all(n)}*rvt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const e=this.Qs,h=this.tbt,s=this.zyt,r=this.Fft.ZL().KL(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);n.push(yield*s.apply(o.A6(),h))}return Promise.all(n)}return this.hvt()}Zbt(){const t=this.Fft,s=t.a9(),e=t.hSt(),h=this.Qs,r=this.tbt,n=this.zyt,o=this.oSt,a=t.ZL().KL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ri(i);const c=s?u.qB().lSt(e):0;l.push(n.apply(u.Hht()[o+c].A6(),r))}return Promise.all(l)}*Qbt(){if((this.Gbt()||this.wf.myt())&&(yield this),this.Ibt()){const t=this.Fft,s=t.a9(),e=t.hSt(),h=this.Qs,r=this.tbt,n=this.zyt,o=this.oSt,a=t.ZL().KL(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ri(i);const c=s?u.qB().lSt(e):0;l.push(yield*n.apply(u.Hht()[o+c].A6(),r))}return Promise.all(l)}return this.Zbt()}async qbt(){try{await this.zyt()}catch(t){console.error(`Unhandled exception running script %c${this.awt.RX().uf()}, event ${this.awt.zgt()}, action ${this.nyt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.bmt.qyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.bmt.Xyt())}}*Xbt(){return(this.Gbt()||this.wf.myt())&&(yield this),this.qbt()}kq(){return this.ibt&&this.ibt.size?{ex:$o.zo(this.ibt)}:null}Dq(t){if(this.ibt&&(this.ibt.clear(),this.ibt=null),t){const s=t.ex;s&&(this.ibt=$o.Jo(s))}}}}{let d=function(t){return t instanceof n?w.E5(t):t.lj()},u=function(t){return d(t).ND()},h=function(t){return w.E5(t)},C=function(t,s,i,e){const h=s.o4(),r=i.o4();h<r?t.Set(s,i,e):t.Set(i,s,e)},P=function(t,s,i){const e=s.o4(),h=i.o4();e<h?t.cc(s,i):t.cc(i,s)},R=function(t,s){t.fc(s)},E=function(t,s,i){const e=s.o4(),h=i.o4();return e<h?t.ri(s,i):t.ri(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.ND(),n=w.KF(),o=w.Qdt(),a=o.Ik().a0t(),l=o.qB(),u=o.xbt(),c=s.ZL(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.zft()?(S.I(r.wN()),S.offset(i,e),n.vvt(r.WD(),s,S,b),d=b):!a||w.Mvt()&&!c.t0t().length&&c.Qft().length?d=c.Qft():(d=c.t0t(),I=!0),h&&(p=r.Av(),m=r.Dv(),r.pN(i,e),r.uN());for(const y of d)if(n.CO(t,y)){if(g=!0,u)break;f&&k.add(y)}return h&&(r.cN(p,m),r.uN()),A.Hn(b),g},i=function(t){const s=w.Pk().a0t(),i=_.ZL(),e=i.Qft(),h=i.t0t();i.zft()?(i.e0t(k),s&&(A.Hn(h),i.h0t(k,_.KL()))):s?I?i.r0t(k):(i.h0t(k,e),i.e0t(k)):i.e0t(k),_.Dyt()},v=function(t,s){T&&(s&&i(),k.clear(),_=null,T=!1)},s=function(t,s){const i=w.kD(s);if(i){const e=t.ZL();if(e.zft()||e.Qft().includes(i))if(t.a9()){if(i.qB().xvt(t))return e.o0t(i),t.Dyt(),!0}else if(i.qB()===t)return e.o0t(i),t.Dyt(),!0}return!1},r=function(t,h){const r=t.ZL();if(r.zft()){r.Zft(!1),r.Hft();const i=t.KL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.o4()===h?r.Kft(e):r.Yft(e)}return t.Dyt(),!!r.Qft().length}{let i=r.Qft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).o4()===h?r.Kft(n):++e}return A.Un(i,e),t.Dyt(),!!i.length}},A=(d,u,h,C,P,R,E,e,i,v,s,r,self.Ws),l=new A.Yo,M={},x={},G={},w=null,n=(A.Gvt=function(t){w=t},self.zB),S=(x.Tvt=function(t,s){return A.compare(this.ND().Av(),t,s)},G.Tvt=function(t,s){return A.compare(this.x,t,s)},x._vt=function(t,s){return A.compare(this.ND().Dv(),t,s)},G._vt=function(t,s){return A.compare(this.y,t,s)},x.Ivt=function(){return this.ND().MN()},G.Ivt=function(){return this.vN()},M.Cvt=function(){const t=u(this),s=t.vD(),i=t.wN();return i.Fl()<0||i.kl()<0||i.El()>s._m()||i.Al()>s.Om()},M.Pvt=function(i,e,h){const t=this.ZL(),r=t.KL();if(!r.length)return!1;let n=r[0],o=n.ND(),a=n,l=A.Pr(o.Av(),o.Dv(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.ND();const u=A.Pr(o.Av(),o.Dv(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return t.o0t(a),!0},x.Fv=function(t){const s=this.ND();s.Av()!==t&&(s.Fv(t),s.uN())},G.Fv=function(t){this.x=+t},x.Ov=function(t){const s=this.ND();s.Dv()!==t&&(s.Ov(t),s.uN())},G.Ov=function(t){this.y=+t},x.Rvt=function(t,s){const i=this.ND();i.Evt(t,s)||(i.cN(t,s),i.uN())},G.Rvt=function(t,s){this.setPosition(t,s)},M.Avt=function(t,s){if(t){const i=d(this),e=t.$L(i);if(e){const[h,r]=e.Fvt(s),n=i.ND();n.Av()===h&&n.Dv()===r||(n.cN(h,r),n.uN())}}},M.kvt=function(t){if(0!==t){const s=u(this);s.pN(s.Dvt()*t,s.Ovt()*t),s.uN()}},x.Lvt=function(t,s){if(0!==s){const i=this.ND();t=A._r(t),i.pN(Math.cos(t)*s,Math.sin(t)*s),i.uN()}},G.Lvt=function(t,s){0!==s&&(t=A._r(t),this.dN(Math.cos(t)*s,Math.sin(t)*s))},x.Av=function(){return this.ND().Av()},G.Av=function(){return this.x},x.Dv=function(){return this.ND().Dv()},G.Dv=function(){return this.y},M.Hk=function(){return w.Hk(d(this))},x.Bvt=function(t,s){return A.compare(this.ND()._m(),t,s)},G.Bvt=function(t,s){return A.compare(this.width,t,s)},x.Nvt=function(t,s){return A.compare(this.ND().Om(),t,s)},G.Nvt=function(t,s){return A.compare(this.height,t,s)},x.Fm=function(t){const s=this.ND();s._m()!==t&&(s.Fm(t),s.uN())},G.Fm=function(t){this.width=t},x.Im=function(t){const s=this.ND();s.Om()!==t&&(s.Im(t),s.uN())},G.Im=function(t){this.height=t},x.wC=function(t,s){const i=u(this);i._m()===t&&i.Om()===s||(i.wC(t,s),i.uN())},G.wC=function(t,s){this.p5(t,s)},x._m=function(){return this.ND()._m()},G._m=function(){return this.width},x.Om=function(){return this.ND().Om()},G.Om=function(){return this.height},M.Wvt=function(){return u(this).wN().El()},M.jvt=function(){return u(this).wN().Al()},M.Vvt=function(){return u(this).wN().Fl()},M.Uvt=function(){return u(this).wN().kl()},M.Hvt=function(){const t=u(this).wN();return(t.El()+t.Fl())/2},M.zvt=function(){const t=u(this).wN();return(t.Al()+t.kl())/2},M.Jvt=function(t,s){return A.Er(u(this).w5(),A._r(s))<=A._r(t)},M.qvt=function(t){return A.Fr(u(this).w5(),A._r(t))},M.Xvt=function(t,s){const i=A._r(t),e=A._r(s),h=u(this).w5(),r=!A.Fr(e,i);return r?!(!A.Fr(h,i)&&A.Fr(h,e)):A.Fr(h,i)&&!A.Fr(h,e)},x.y5=function(t){const s=this.ND(),i=A.Tr(A._r(t));isNaN(i)||s.w5()===i||(s.y5(i),s.uN())},G.y5=function(t){this.yN=t},M.$vt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.y5(s.w5()+A._r(t)),s.uN()}},M.Yvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.y5(s.w5()-A._r(t)),s.uN()}},M.Kvt=function(t,s){const i=u(this),e=i.w5(),h=A.Ar(e,A._r(s),A._r(t));isNaN(h)||e===h||(i.y5(h),i.uN())},M.Zvt=function(t,s,i){const e=u(this),h=e.w5(),r=s-e.Av(),n=i-e.Dv(),o=Math.atan2(n,r),a=A.Ar(h,o,A._r(t));isNaN(a)||h===a||(e.y5(a),e.uN())},M.Qvt=function(t,s){const i=u(this),e=i.w5(),h=t-i.Av(),r=s-i.Dv(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.y5(n),i.uN())},x.w5=function(){return A.Ir(this.ND().w5())},G.w5=function(){return this.yN},M.tMt=function(t,s){return A.compare(A.qr(100*u(this).qR(),6),t,s)},x.eB=function(){return this.ND().eB()},G.eB=function(){return this.isVisible},M.sB=function(t){const s=u(this);t=2===t?!s.eB():0!==t,s.eB()!==t&&(s.sB(t),w.JD())},M.YR=function(t){const s=A.Gr(t/100,0,1),i=u(this);if(i.f6()){if(i.dnt().sMt()===s)return}else if(i.qR()===s)return;i.YR(s),w.JD()},M.iMt=function(t){l.Aa(t);const s=u(this);s.GN().Ga(l)||(s.TN(l),w.JD())},M.ZR=function(){const t=u(this).GN();return A.Yr(t.ga(),t.ya(),t.wa(),t.Sa())},M.qR=function(){return A.qr(100*u(this).qR(),6)},M.eMt=function(t){return!!t&&u(this).WD()===t},M.hMt=function(i){const t=this.ZL(),e=t.KL();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.ND(),o=h.ND(),a=n.WD().HF(),l=o.WD().HF();0===i?(l<a||a===l&&n.jD()>o.jD())&&(h=r):(a<l||a===l&&n.jD()<o.jD())&&(h=r)}return t.o0t(h),!0},x.rMt=function(t,s,i){const e=this.ND(),h=0===t?e.Lv():e.gN();return A.compare(h,s,i)},G.rMt=function(t,s,i){const e=0===t?this.bB:this.mN;return A.compare(e,s,i)},x.nMt=function(){this.ND().IN()},G.nMt=function(){this._N()},x.oMt=function(){this.ND().PN()},G.oMt=function(){this.CN()},M.aMt=function(t){t&&u(this).EN(t)},M.lMt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.uMt(e);h&&e.ND().FN(h,i)}},x.Bv=function(t){const s=this.ND();s.Lv()!==t&&(s.Bv(t),w.JD())},G.Bv=function(t){this.bB=t},M.cMt=function(){return u(this).WD().HF()},M.fMt=function(){return u(this).WD().uf()},x.dMt=function(){return this.ND().jD()},G.dMt=function(){return this.zIndex},x.pMt=function(){return this.ND().Lv()},G.pMt=function(){return this.bB},x.mMt=function(){return this.ND().gN()},G.mMt=function(){return this.mN},M.gMt=function(t){const s=d(this),i=s.qB().u5().qht(t);if(i){const e=i.HF(),h=s.ND().aN();return h.X6(e)}},M.yMt=function(t,s){const i=d(this),e=i.qB().u5().qht(s);if(e){const h=e.HF(),r=1===t,n=i.ND().aN();n.X6(h)!==r&&(n.Y6(h,r),n.K6(),w.JD())}},M.wMt=function(t,s,i){const e=d(this),h=e.qB().u5().qht(t);if(h){s=Math.floor(s);const r=h.IG().PG(s);if(r){"color"===r?(l.Aa(i),i=l):"percent"===r&&(i/=100);const n=h.HF(),o=e.ND().aN(),a=o.Q6(n,s,i);a&&o.X6(n)&&w.JD()}}},A.dr(A.Rect)),F=[],b=[],T=!1,_=null,I=!1,k=new Set;M.SMt=function(w){if(this.wf.bMt())return function*(w){if(w){let t=this.wf,s=t.KF(),e=t.xk(),i=e.Ok(),h=e.Qdt(),r=h.qB(),n=h.Cbt(),o=h.Pbt(),a=i.s8(),l=t.Htt(),u=l-1,c=a.Pk(),f=i.i8(c),d=n.get("collmemory"),p=(d||(d=A.dr(A.oc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Kf().addEventListener("instancedestroy",t=>R(d,t.U6))),r.ZL()),m=w.ZL(),g=p.KL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.zft()?(s.vvt(S.ND().WD(),w,S.ND().wN(),F),y=F,s.vMt(S,w,y)):y=m.KL();for(let t=0;t<y.length;++t){const b=y[t];if(s.CO(S,b)||s.MMt(S,b)){let t=E(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.t8(),x=(e.o8(M),r.ZL()),G=w.ZL();if(x.Zft(!1),G.Zft(!1),r===w){const T=x.Qft();A.Hn(T),T.push(S),T.push(b),r.Dyt()}else{const _=x.Qft(),I=G.Qft();A.Hn(_),A.Hn(I),_.push(S),I.push(b),r.Dyt(),w.Dyt()}yield*c._yt(a,f),e.l8(M)}}else P(d,S,b)}A.Hn(F)}i.d8()}return!1}.call(this,w);if(w){let t=this.wf,s=t.KF(),e=t.xk(),i=e.Ok(),h=e.Qdt(),r=h.qB(),n=h.Cbt(),o=h.Pbt(),a=i.s8(),l=t.Htt(),u=l-1,c=a.Pk(),f=i.i8(c),d=n.get("collmemory"),p=(d||(d=A.dr(A.oc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Kf().addEventListener("instancedestroy",t=>R(d,t.U6))),r.ZL()),m=w.ZL(),g=p.KL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.zft()?(s.vvt(S.ND().WD(),w,S.ND().wN(),F),y=F,s.vMt(S,w,y)):y=m.KL();for(let t=0;t<y.length;++t){const b=y[t];if(s.CO(S,b)||s.MMt(S,b)){let t=E(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.t8(),x=(e.o8(M),r.ZL()),G=w.ZL();if(x.Zft(!1),G.Zft(!1),r===w){const T=x.Qft();A.Hn(T),T.push(S),T.push(b),r.Dyt()}else{const _=x.Qft(),I=G.Qft();A.Hn(_),A.Hn(I),_.push(S),I.push(b),r.Dyt(),w.Dyt()}c.a8(a,f),e.l8(M)}}else P(d,S,b)}A.Hn(F)}i.d8()}return!1},M.xMt=function(t){return e(d(this),t,0,0)},M.GMt=function(t,s,i){return e(d(this),t,s,i)},M.KN=function(){return u(this).KN()},M.Bq=function(){return u(this).Bq()},M.TMt=function(i,e){const t=this.ZL(),h=t.KL();if(0===h.length)return!1;let s=i.ZL(),r=s.KL();if(s.zft()){const a=[...this.wf._Mt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.zft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];if(1===e)for(const u of l.jN())u.IMt(i)&&(null===n||n.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.BN()))continue}else t=l.WN();t.IMt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.e0t(o),i.Dyt(),!0)},M.CMt=function(i,e){const t=this.ZL(),h=t.KL();if(0===h.length)return!1;let s=i.ZL(),r=s.KL();if(s.zft()){const a=[...this.wf._Mt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.zft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];2!==e||l.Bq()||!l.IMt(i)||null!==n&&!n.has(l)||o.add(l);for(const u of 0===e?l.children():l.JN())2===e&&u.Bq()||u.IMt(i)&&(null===n||n.has(u))&&o.add(u)}return 0!==o.size&&(s.e0t(o),i.Dyt(),!0)},M.PMt=function(i,e,h){const t=this.ZL(),r=t.KL();if(0===r.length)return!1;let s=i.ZL(),n=s.KL();if(s.zft()){const l=[...this.wf._Mt(i)];0<l.length&&(n=n.concat(l))}if(0===n.length)return!1;const o=s.zft()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const u=r[t];if(0===e){const c=u.zN(h);null!==c&&c.IMt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.IMt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.i0t(a),i.Dyt(),!0)},M.RMt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.UN(),s,i);case 1:return A.compare(e.EMt(),s,i)}},M.XN=function(t,s,i,e,h,r,n,o,a,l){const u=d(this),c=w.s1t().qB();for(const f of t.AMt(u,c)){if(!f.WL().IL())return;u.XN(f,{QN:s,s6:i,e6:e,r6:h,o6:r,c6:n,l6:o,d6:a,m6:l})}},M.$N=function(t){const s=d(this),i=w.s1t().qB();for(const e of t.AMt(s,i))s.$N(e)},M.FMt=function(){const t=d(this);if(t.KN()){const s=t.BN();s.$N(t)}},M.kMt=function(){return d(this).UN()},M.DMt=function(){return d(this).EMt()},M.OMt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.b6(),i.uN()):i.w6(t,s)},M.M6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.M6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,bB:r,u:n,v:o});l&&a.uN()},M.LMt=function(){const t=u(this);return t.G6()?t.T6().oM():0},M.BMt=function(){const t=u(this);return t.G6()?t.T6().aM():0},M.NMt=function(t){const s=u(this);t=2===t?!s.eB():0!==t,s.eB()!==t&&s.sB(t)},M.O6=function(t,s){this instanceof self.zB?this.wV(t,s):this.O6(t,s)},M.WMt=function(t,s){this instanceof self.zB?this.SV(t,""+s):this.WMt(t,""+s)},M.jMt=function(t){this instanceof self.zB?this.bV(t):this.jMt(t)},M.VMt=function(){this instanceof self.zB?this.mV():this.F6()},M.UMt=function(){this instanceof self.zB?this.gV():this.k6()},M.HMt=function(){return this instanceof self.zB?this.yV():this.HMt()},M.zMt=function(t){this instanceof self.zB?this._setEnabled(0!==t):this.JMt(0!==t)},M.qMt=function(){return this instanceof self.zB?this.Qyt():this.XMt()},x.$Mt=function(t,s,i){return A.compare(this.lj().int(t),s,i)},G.$Mt=function(t,s,i){return A.compare(h(this).int(t),s,i)},x.YMt=function(t){return!!this.lj().int(t)},G.YMt=function(t){return!!h(this).int(t)},M.KMt=function(i,e){const t=this.ZL(),h=t.KL();if(!h.length)return!1;let r=this.a9(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=r?a.qB().eSt(this.hSt()):0,u=a.int(l+e);(null===n||0===i&&u<o||1===i&&u>o)&&(o=u,n=a)}return t.o0t(n),!0},M.ZMt=function(t){return(this.wf.Qdt().xbt()?r:s)(this,t)},M.VW=function(t){const s=new Set(A.lo(t)),i=d(this).m4();return s.me(i)},M.QMt=function(){return d(this).t2t()},M.s2t=function(){return d(this).m4().size},M.i2t=function(t){return d(this).e2t(t)},M.h2t=function(t,s){const i=A.lo(s);if(0!==i.length){const e=d(this),h=new Set(e.m4());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.y4(h)}},M.r2t=function(){w.t4(d(this))},M.n2t=function(){return!0},M.o2t=function(){return!0},x.a2t=function(t,s){this.lj().ent(t,s)},G.a2t=function(t,s){h(this).ent(t,s)},x.l2t=function(t,s){const i=this.lj(),e=i.int(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ent(t,e+s)},G.l2t=function(t,s){const i=h(this),e=i.int(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ent(t,e+s)},x.u2t=function(t,s){const i=this.lj(),e=i.int(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ent(t,e-s))},G.u2t=function(t,s){const i=h(this),e=i.int(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ent(t,e-s))},x.c2t=function(t,s){this.lj().ent(t,s?1:0)},G.c2t=function(t,s){h(this).ent(t,s?1:0)},x.f2t=function(t){const s=this.lj();s.ent(t,0===s.int(t)?1:0)},G.f2t=function(t){const s=h(this);s.ent(t,0===s.int(t)?1:0)},M.d2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.p2t(),i.KY("state"),i.Jv(s,"state"),w.m2t("state",{g2t:!0})},M.y2t=function(){return JSON.stringify(d(this).zv("state"))},M.w2t=function(){return d(this).qB().uf()},M.S2t=function(){let t=w.Zdt().B0t(),s=t.t5();for(const i of w._Mt(t))++s;return s},M.b2t=function(){return w.Zdt().B0t().ZL().KL().length},x.I$=function(){return this.lj().I$()},G.I$=function(){return h(this).I$()},x.o4=function(){return this.lj().o4()},G.o4=function(){return h(this).o4()},M.Gpt=function(t){const s=d(this);return t.toLowerCase()===w.xk().Cpt(s)},M.S4=function(t){const s=d(this);w.xk().S4(s,t)},M.v2t=function(t){return w.xk().tpt().M2t(this.ZL().KL(),t),!0},M.x2t=function(){return d(this).l4()},A.G2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.M$,w=s.drt,S=s.prt,b=Object.assign({},M,2<=i?G:x);h&&(y.Tvt=b.Tvt,y._vt=b._vt,y.Ivt=b.Ivt,y.Cvt=b.Cvt,y.Pvt=b.Pvt,w.Fv=b.Fv,w.Ov=b.Ov,w.Rvt=b.Rvt,w.Avt=b.Avt,w.kvt=b.kvt,w.Lvt=b.Lvt,S.T2t=b.Av,S._2t=b.Dv,S.dt=b.Hk),r&&(y.Bvt=b.Bvt,y.Nvt=b.Nvt,w.Fm=b.Fm,w.Im=b.Im,w.wC=b.wC,S.I2t=b._m,S.C2t=b.Om,S.P2t=b.Wvt,S.R2t=b.jvt,S.E2t=b.Vvt,S.A2t=b.Uvt,S.F2t=b.Hvt,S.k2t=b.zvt),n&&(y.D2t=b.Jvt,y.O2t=b.qvt,y.Xvt=b.Xvt,w.y5=b.y5,w.$vt=b.$vt,w.Yvt=b.Yvt,w.Kvt=b.Kvt,w.Zvt=b.Zvt,w.Qvt=b.Qvt,S.L2t=b.w5),o&&(y.eB=b.eB,y.tMt=b.tMt,w.sB=b.sB,w.YR=b.YR,w.iMt=b.iMt,S.Opacity=b.qR,S.B2t=b.ZR),a&&(y.eMt=b.eMt,y.hMt=b.hMt,y.rMt=b.rMt,w.nMt=b.nMt,w.oMt=b.oMt,w.aMt=b.aMt,w.lMt=b.lMt,w.Bv=b.Bv,S.cMt=b.cMt,S.fMt=b.fMt,S.dMt=b.dMt,S.pMt=b.pMt,S.mMt=b.mMt),l&&(y.gMt=b.gMt,w.yMt=b.yMt,w.wMt=b.wMt),d&&(y.KN=b.KN,y.Bq=b.Bq,y.TMt=b.TMt,y.CMt=b.CMt,y.PMt=b.PMt,y.RMt=b.RMt,w.XN=b.XN,w.$N=b.$N,w.FMt=b.FMt,S.kMt=b.kMt,S.DMt=b.DMt),p&&(w.OMt=b.OMt,w.M6=b.M6,S.LMt=b.LMt,S.BMt=b.BMt),u&&(y.eB=b.eB,w.sB=b.NMt,w.N2t=b.O6,w.W2t=b.WMt,w.j2t=b.jMt),c&&(y.V2t=b.HMt,w.U2t=b.VMt,w.H2t=b.UMt),f&&(y.nc=b.qMt,w.z2t=b.zMt),m&&(y.SMt=b.SMt,y.xMt=b.xMt,y.GMt=b.GMt,s.J2t=v),e||(y.$Mt=b.$Mt,y.YMt=b.YMt,y.KMt=b.KMt,y.ZMt=b.ZMt,y.VW=b.VW,w.a2t=b.a2t,w.l2t=b.l2t,w.u2t=b.u2t,w.c2t=b.c2t,w.f2t=b.f2t,w.h2t=b.h2t,y.n2t=b.n2t,y.o2t=b.o2t,w.r2t=b.r2t,w.d2t||(w.d2t=b.d2t),S.y2t||(S.y2t=b.y2t),S.S2t=b.S2t,S.b2t=b.b2t,S.q2t=b.I$,S.X2t=b.o4,S.w2t=b.w2t,S.QMt=b.QMt,S.s2t=b.s2t,S.i2t=b.i2t,y.Gpt=b.Gpt,w.S4=b.S4,w.v2t=b.v2t),g&&(S.x2t=b.x2t)}}{const Qo=self.Ws;Qo.spt=class extends Qo.ur{constructor(t){super(),this.u0t=t,this._f="",this.v3=-1,this.$2t="",this.Y2t=!1,this.K2t=null,this.S0t=0,this.qmt=[],this.T0t=null,this.Z2t=new Map,this.Q2t=null,this.txt=null,this.sxt=-1,this.Zyt=null,this.ixt=null,this.hxt=!1}pr(){this._f="",this.v3=-1,this.$2t="",this.K2t=null,this.txt=null,this.Zyt=null,this.ixt=null,this.sxt=-1,Qo.Hn(this.qmt),this.T0t&&(this.T0t.clear(),this.T0t=null);for(const t of this.Z2t.values())t.pr();this.Z2t.clear(),this.Q2t=null}Ev(){const t=this.u0t,s=t.nO().o9(),i=t.Zdt(),e=(this.K2t=i.Pk(),this.S0t=i.E0t()+1,t.Jpt(this.K2t));e&&(this.txt=e,this.Zyt=e.mwt(),this.ixt=e.pwt().map(t=>t.Net()),e.Syt())&&(this.sxt=e.Swt());for(const r of s){const n=r.ZL();n.zft()&&!this.K2t.Ugt(r)||(this.qmt.push(r),this.Z2t.set(r,Qo.dr(Qo.rxt,n)))}const h=t.Rk();this.T0t=0<h.size?h:null}nxt(t){this._f="timer",this.Ev(),this.v3=this.u0t.nO().Xk()+t}oxt(t){this._f="signal",this.Ev(),this.$2t=t.toLowerCase()}M2t(t,s){this._f="instance-signals",this.Ev(),this.$2t=s.toLowerCase(),this.Q2t=new Set(t)}axt(t){this._f="promise",this.Ev(),t.then(()=>this.bpt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.bpt()})}lxt(){return"timer"===this._f}wpt(){return"signal"===this._f}_pt(){return"instance-signals"===this._f}Vpt(){return"promise"===this._f}Spt(){return this.$2t}uxt(){return this.Y2t}bpt(){this.Y2t=!0}Ipt(t){this.Q2t.delete(t),0===this.Q2t.size&&this.bpt()}hpt(){return this.lxt()?this.v3<=this.u0t.nO().Xk():this.uxt()}cxt(t){t._0t(this.K2t,this.S0t);for(const[i,e]of this.Z2t.entries()){const h=i.ZL();e._0t(h)}this.T0t&&t.H0t([...this.T0t]);const s=this.txt;s&&(s.Ryt(this.Zyt),s.pwt().map((t,s)=>t.vht(this.ixt[s])),s.Syt())&&s.bwt(this.sxt)}rpt(t){this.cxt(t),this.K2t.byt(t),this.txt&&this.txt.Syt()&&this.txt.Wyt(this.sxt),this.u0t.Y1t(this.qmt),this.hxt=!0}async lpt(t){this.cxt(t);for(const s of this.K2t.vyt(t))await this.u0t.nO().F1t(s);this.txt&&this.txt.Syt()&&this.txt.Wyt(this.sxt),this.u0t.Y1t(this.qmt),this.hxt=!0}npt(){return this.hxt}Wft(t){for(const s of this.Z2t.values())s.Wft(t);if("instance-signals"===this._f){for(const i of t)this.Q2t.delete(i);0===this.Q2t.size&&this.bpt()}}kq(){const t={},s={wt:this._f,t:this.v3,st:this.$2t,s:this.Y2t,ev:this.K2t.g9(),sm:this.qmt.map(t=>t.g9()),dsm:this.T0t?[...this.T0t].map(t=>t.g9()):null,sols:t};this.K2t.oyt(this.S0t)&&(s.act=this.K2t.i1t(this.S0t).g9());for(const[i,e]of this.Z2t)t[i.g9().toString()]=e.kq();return"instance-signals"===this._f&&(s.pi=[...this.Q2t].map(t=>t.o4())),s}static Upt(t,s){const i=t.nO(),e=t.c1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.d1t(s.act);if(!n)return null;h=n.HF()}const r=Qo.dr(Qo.spt,t);r.v3=s.t,s.hasOwnProperty("wt")?r._f=s.wt:r._f=-1===r.v3?"signal":"timer",r.$2t=s.st,r.Y2t=s.s,r.K2t=e,r.S0t=h;for(const o of s.sm){const a=i.qV(o);a&&r.qmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.qV(l);u&&(r.T0t||(r.T0t=new Set),r.T0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.qV(d);if(p){const m=Qo.dr(Qo.rxt,null);m.Dq(t,f),r.Z2t.set(p,m)}}if("instance-signals"===r._f){r.Q2t=new Set;for(const g of s.pi){const y=i.kD(g);y&&r.Q2t.add(y)}}return r}}}{const ta=self.Ws;ta.rxt=class extends ta.ur{constructor(t){super(),this.Fft=null,this.fxt=!0,this.i7=[],t&&(this.Fft=t.qB(),this.fxt=t.zft(),ta.Xn(this.i7,t.Qft()))}pr(){this.Fft=null,ta.Hn(this.i7)}_0t(t){t.Zft(this.fxt),ta.Xn(t.Qft(),this.i7)}Wft(t){ta.Qn(this.i7,t)}kq(){return{sa:this.fxt,insts:this.i7.map(t=>t.o4())}}Dq(t,s){const i=t.nO();this.fxt=!!s.sa,ta.Hn(this.i7);for(const e of s.insts){const h=i.kD(e);h&&this.i7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const sa=self.Ws;sa.dxt=class extends sa.ur{constructor(t){super(),this.wf=t.runtime,this.pxt=!!t.pL,this.mxt=!!t.gxt,this.yxt=!!t.bL,this.wxt=!!t.Sxt,this.bxt=!!t.ML,this.vxt=!!t.Mxt,this.xxt=!!t.CL,this.Gxt=!!t.wL,this.Txt=!!t.GL,this._xt=t.Ixt,this.Cxt=null,this.Pxt=new Map,this.Rxt=new Map,this.Ext=new Map,this.Axt=new Map,this.Fxt=t.kxt,this.Dxt=null}pr(){this.wf=null}nO(){return this.wf}Oxt(){}Tpt(){return(2<=this.Mbt()?this.Dxt:this).constructor}Mbt(){return this._xt}Lxt(t=!1){let s=this.Fxt;return t&&"function"!=typeof s&&2<=this.Mbt()?globalThis.gj:s}mL(){return this.pxt}yL(){return this.mxt}SL(){return this.Gxt}TL(){return this.Txt}vL(){return this.yxt}hv(){return this.wxt}xL(){return this.bxt}IL(){return this.vxt}PL(){return this.xxt}zwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Pxt.get(t);return i||(i=t.bind(s),this.Pxt.set(t,i)),i}wbt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.Rxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}Sbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Ext,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}bbt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this.Axt,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Bxt(t){if(!this.mL())throw new Error("must be single-global plugin");this.Cxt=t}DL(){if(this.mL())return this.Cxt;throw new Error("must be single-global plugin")}LL(){if(this.mL())return this.Cxt.LL();throw new Error("must be single-global plugin")}Nxt(){const t=this.Mbt(),s=(sa.fL.Wxt(this,t),this.Lxt(!0));if(s){if(this.Dxt=new s,!(this.Dxt instanceof self.lL))throw new TypeError("plugin class must derive from IPlugin")}else this.Dxt=new self.lL;sa.fL.jxt(t)}AL(){return this.Dxt}}}{const ia=self.Ws;ia.Vxt=class extends ia.dxt{constructor(t,s){super(t),this.Uxt=s,this.Hxt=0,this.zxt=new Map,this.Jxt("elem-focused",t=>t.qxt()),this.Jxt("elem-blurred",t=>{t&&t.Xxt()})}pr(){super.pr()}$xt(t){const s=this.Hxt++;return this.zxt.set(s,t),s}Yxt(t){this.zxt.delete(t)}Jxt(t,i){this.wf.B4(this.Uxt,t,t=>{const s=this.zxt.get(t.elementId);i(s,t)})}}}{const ea=self.Ws;ea.Kxt=class extends ea.ur{constructor(t){super(),this.Fft=t,this.wf=t.nO(),this.Zxt=t.WL()}pr(){this.Fft=null,this.wf=null,this.Zxt=null}qB(){return this.Fft}nO(){return this.wf}WL(){return this.Zxt}yW(){return this.Fft.yW()}Oxt(){}kbt(t){}Svt(t){}bvt(t){}JX(t){}ZX(){}$X(){}w$(t){}Qxt(){}Lxt(){return null}tGt(t,s,i){const e=ea.dr(ea.Event,t,s);e.sGt=this,i&&Object.assign(e,i),this.qB().tY(e)}}}{const ha=self.Ws;ha.iGt=class extends ha.ur{constructor(t,s){super(),this.Ii=t,this.Uxt=s,this.eGt=null,this.wf=t.nO(),this.Fft=this.Ii.qB(),this.hGt=this.Fft.wvt(),this.WY=null,this.VY=null,this.H4=!1,this.J4=!1,this.P0=null,this.UI=!1}pr(){this.UI=!0,this.rGt(),this.nGt(),this.WY=null,this.VY=null,this.P0&&(this.P0.pr(),this.P0=null),this.Ii=null,this.wf=null,this.Fft=null,this.hGt=null}Sr(){return this.UI}lj(){return this.Ii}nO(){return this.wf}qB(){return this.Fft}WL(){return this.hGt.WL()}wvt(){return this.hGt}oGt(){return this.Ii.DD()}F4(t){return this.wf.F4(t,this.Ii,null)}aGt(t){return this.wf.aGt(t,this.Ii,null)}O4(t){return this.wf.O4(t,this.Ii,null)}lGt(t,s){return this.wf.lGt(t,this.Ii,s)}uGt(t,s){return this.wf.uGt(t,this.Ii,s)}cGt(t){return this.wf.cGt(t)}fGt(t,s){this.wf.B4(this.Uxt,t,s)}dGt(t){for(const[s,i]of t)this.fGt(s,i)}pGt(t,s){this.wf.vf(this.Uxt,t,s)}mGt(t,s){return this.wf.XD(this.Uxt,t,s)}gGt(t,s){if(!this.wf.nk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Uxt,handler:t,data:s,responseId:null});this.pGt(t,s)}yGt(t){if(!t)throw new Error("cannot set empty component id");this.eGt=t}wGt(){if(this.eGt)return this.wf.Z4(this.eGt);throw new Error("wrapper extension component id not set")}tN(t,s){if(!this.eGt)throw new Error("wrapper extension component id not set");this.wf.tN(this.eGt,t,s)}SGt(t){for(const[s,i]of t)this.tN(s,i)}LV(t,s){if(!this.eGt)throw new Error("wrapper extension component id not set");this.wf.LV(this.eGt,t,s)}BV(t,s){if(this.eGt)return this.wf.BV(this.eGt,t,s);throw new Error("wrapper extension component id not set")}YK(){}bGt(){}vGt(){this.H4||(this.WY||(this.WY=()=>this.YK()),this.wf.Kf().addEventListener("tick",this.WY),this.H4=!0)}rGt(){this.H4&&(this.wf.Kf().removeEventListener("tick",this.WY),this.H4=!1)}MGt(){return this.H4}xGt(){this.J4||(this.VY||(this.VY=()=>this.bGt()),this.wf.Kf().addEventListener("tick2",this.VY),this.J4=!0)}nGt(){this.J4&&(this.wf.Kf().removeEventListener("tick2",this.VY),this.J4=!1)}GGt(){return this.J4}TGt(){return[]}zv(){return null}Jv(t){}qrt(t){}Qrt(t,s){}qnt(t,s,i){if(0!==s){const e=this.qrt(t);if("number"!=typeof e)throw new Error("expected number");this.Qrt(t,e+s,i)}}_Gt(t,s,i,e){}IGt(t,...s){t.call(this,...s)}CGt(t,...s){return t.call(this,...s)}Lxt(){return null}tGt(t,s,i){if(this.Ii.PGt()){const e=this.oGt(),h=ha.dr(ha.Event,t,s);h.U6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}hv(){return!1}}}{const ra=self.Ws;ra.RGt=class extends ra.iGt{constructor(t,s){super(t,s),this.Ust=t.ND(),this.EGt=null,this.AGt=null}pr(){if(this.EGt){const t=this.wf.Kf();t.removeEventListener("renderercontextlost",this.EGt),t.removeEventListener("renderercontextrestored",this.AGt),this.EGt=null,this.AGt=null}this.Ust=null,super.pr()}FGt(){this.kGt()}DGt(){}OGt(){}kGt(){if(!this.EGt){this.EGt=()=>this.XH(),this.AGt=()=>this.LGt();const t=this.wf.Kf();t.addEventListener("renderercontextlost",this.EGt),t.addEventListener("renderercontextrestored",this.AGt)}}XH(){this.DGt()}LGt(){this.OGt()}ND(){return this.Ust}kit(){return!1}Fit(){if(!this.kit())throw new Error("original size not known");const t=this.BGt();if(t)return t._m()}Oit(){if(!this.kit())throw new Error("original size not known");const t=this.BGt();if(t)return t.Om()}BGt(){return null}NGt(){const t=this.BGt();if(t){const s=t.K2();if(s)return[s._m(),s.Om()]}return[100,100]}WGt(){const t=this.BGt();return t?t.$C():null}jGt(){const t=this.BGt();return t?t.VGt():null}UGt(){const t=this.BGt();return!!t&&t.HGt()}Fvt(t){const s=this.Ii.ND();return[s.Av(),s.Dv(),s.gN()]}Qxt(t,s,i){}zGt(t,s){}cq(){return!0}}}{const na=self.Ws,oa=na.dr(na.Rect);na.JGt=class extends na.RGt{constructor(t,s){super(t,s),this.qGt=this.WL().$xt(this),this.XGt=!0,this.$Gt=!1,this.YGt=!1,this.KGt=-.2,this.ZGt=na.dr(na.Rect,0,0,-1,-1);const i=this.wf.$O();this.QGt=i.Qj(),this.tTt=i.tV(),this.sTt=-1,this.iTt=-1,this.eTt=!1,this.vGt()}pr(){this.WL().Yxt(this.qGt),this.hTt("destroy"),this.qGt=-1,super.pr()}E6(){if(this.wf.nk())throw new Error("not valid in worker mode");return this.rTt("get-element")}hTt(t,s){(s=s||{}).elementId=this.qGt,this.pGt(t,s)}rTt(t,s){return(s=s||{}).elementId=this.qGt,this.gGt(t,s)}nTt(t,s){return(s=s||{}).elementId=this.qGt,this.mGt(t,s)}oTt(t){t=t||{};const s=this.ND();t.elementId=this.qGt,t.isVisible=s.eB(),t.htmlIndex=s.WD().nV(),t.htmlZIndex=s.oV(),Object.assign(t,this.aTt()),this.XGt=!!t.isVisible,this.gGt("create",t),this.lTt(!0)}NMt(t){this.XGt!==(t=!!t)&&(this.XGt=t,this.hTt("set-visible",{isVisible:t}))}YK(){this.lTt(!1)}uTt(){const t=this.wf.$O().fV();return"Android"===na.fi.di&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}lTt(u){if(!this.lj().dV()){let t=this.ND(),s=t.WD(),i=t.wN(),[e,h]=s.BB(i.El(),i.Al()),[r,n]=s.BB(i.Fl(),i.kl()),o=this.wf.$O(),a=o.QO(),l=o.sL();if(t.eB()&&s.eB())if(!this.uTt()&&(r<=0||n<=0||a<=e||l<=h))this.NMt(!1);else{oa.set(e,h,r,n);const c=o.Qj(),f=o.tV(),d=s.nV(),p=t.oV();if(!u&&oa.equals(this.ZGt)&&this.QGt===c&&this.tTt===f&&this.sTt===d&&this.iTt===p)this.NMt(!0);else{this.ZGt.I(oa),this.QGt=c,this.tTt=f,this.sTt=d,this.iTt=p,this.NMt(!0);let t=null;this.YGt&&(t=s.pV()+this.KGt),this.hTt("update-position",{left:Math.round(this.ZGt.El()),top:Math.round(this.ZGt.Al()),width:Math.round(this.ZGt.width()),height:Math.round(this.ZGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.NMt(!1)}}F6(){this.rTt("focus",{focus:!0})}k6(){this.rTt("focus",{focus:!1})}qxt(){this.$Gt=!0}Xxt(){this.$Gt=!1}HMt(){return this.$Gt}O6(t,s){this.hTt("set-css-style",{prop:na.qo(t),val:s})}WMt(t,s){this.hTt("set-attribute",{name:t,val:s})}jMt(t){this.hTt("remove-attribute",{name:t})}cTt(){this.eTt||(this.eTt=!0,Promise.resolve().then(()=>{this.eTt=!1,this.hTt("update-state",this.aTt())}))}aTt(){}fTt(){return this.qGt}}}{const aa=self.Ws,la=self.J6;aa.dTt=class extends aa.ur{constructor(t){super(),this.wf=t.runtime,this.pTt=aa.dr(aa.wc),this.mTt=aa.dr(aa.wc),this._xt=t.Ixt,this.Fxt=t.kxt,this.gTt=null}pr(){this.mTt.pr(),this.pTt.pr(),this.wf=null}nO(){return this.wf}Oxt(){}Mbt(){return this._xt}Lxt(t=!1){let s=this.Fxt;return t&&"function"!=typeof s&&2<=this.Mbt()?globalThis.xV:s}yTt(t){this.pTt.xc(t)}MK(){return this.pTt.Gc()}$z(t){this.mTt.xc(t)}Zz(t){this.mTt.cc(t)}KL(){return this.mTt.Gc()}Nxt(){const t=this.Mbt(),s=(aa.fL.Wxt(this,t),this.Lxt(!0));if(s){if(this.gTt=new s,!(this.gTt instanceof la))throw new TypeError("behavior class must derive from IBehavior")}else this.gTt=new la;aa.fL.jxt(t)}B6(){return this.gTt}}}{const ua=self.Ws;ua.wTt=class extends ua.ur{constructor(t){super(),this.wf=t.nO(),this.nSt=t,this.Fft=t.qB(),this.STt=t.N6(),this.STt.yTt(this.Fft)}pr(){this.wf=null,this.nSt=null,this.Fft=null,this.STt=null}Oxt(){}V6(){return this.nSt}qB(){return this.Fft}nO(){return this.wf}N6(){return this.STt}}}{const ca=self.Ws;ca.bTt=class extends ca.ur{constructor(t,s){super(),this.vTt=t,this.Uxt=s,this.Ii=t.H6(),this.wf=t.nO(),this.nSt=t.V6(),this.hGt=this.nSt.wvt(),this.H4=!1,this.J4=!1,this.DV=!1,this.P0=null}pr(){this.rGt(),this.nGt(),this.MTt(),this.P0&&(this.P0.pr(),this.P0=null),this.vTt=null,this.Ii=null,this.wf=null,this.nSt=null,this.hGt=null}N6(){return this.nSt.N6()}xTt(){return this.vTt}H6(){return this.Ii}qB(){return this.Ii.qB()}ND(){return this.Ii.ND()}nO(){return this.wf}V6(){return this.nSt}wvt(){return this.hGt}oGt(){return this.vTt.oGt()}F4(t){return this.wf.F4(t,this.Ii,this.nSt)}aGt(t){return this.wf.aGt(t,this.Ii,this.nSt)}O4(t){return this.wf.O4(t,this.Ii,this.nSt)}GTt(){}YK(){}bGt(){}TTt(){}vGt(){this.H4||(this.wf.PV(this),this.H4=!0)}rGt(){this.H4&&(this.wf.RV(this),this.H4=!1)}MGt(){return this.H4}xGt(){this.J4||(this.wf.EV(this),this.J4=!0)}nGt(){this.J4&&(this.wf.AV(this),this.J4=!1)}GGt(){return this.J4}_Tt(){this.DV||(this.wf.FV(this),this.DV=!0)}MTt(){this.DV&&(this.wf.kV(this),this.DV=!1)}ITt(){return this.DV}TGt(){return[]}fGt(t,s){this.wf.B4(this.Uxt,t,s)}CTt(t,s){}zv(){return null}Jv(t){}qrt(t){}Qrt(t,s){}qnt(t,s){if(0!==s){const i=this.qrt(t);if("number"!=typeof i)throw new Error("expected number");this.Qrt(t,i+s)}}_Gt(t,s,i,e){}IGt(t,...s){t.call(this,...s)}CGt(t,...s){return t.call(this,...s)}Lxt(){return null}tGt(t,s,i){if(this.vTt.PGt()){const e=this.oGt(),h=ca.dr(ca.Event,t,s);h.PTt=e,h.U6=e.U6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Ws),i=(r.G$={},r.hlt={},r.js()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.fL=class extends r.ur{constructor(t,s){super(),this.wf=t,this.RTt=[],this.Wwt=null,this.ETt=[],this.ATt=new Map,this.FTt=null,this.kTt=null,this.DTt=new Set(s)}OTt(t){const s=t[19],i=this.wf.Hyt(t[0]);if(!i)throw new Error("missing plugin");r.G2t(t,i,s);const e=2<=s?r.dxt:i,h=r.dr(e,{runtime:this.wf,pL:t[1],gxt:t[2],bL:t[5],ML:t[8],Sxt:t[9],Mxt:t[13],CL:t[14],wL:t[17],GL:t[18],Ixt:s,kxt:2<=s?i:null});h.Oxt(),this.RTt.push(h),u.set(i,h)}LTt(){this.Wwt=r.dr(r.G$.x$,{runtime:this.wf,pL:!0}),this.Wwt.Oxt()}BTt(t){const i=t[1],e=this.wf.Hyt(t[0]);if(!e)throw new Error("missing behavior");this.ATt.set(e,()=>{const t=2<=i?r.dTt:e,s=r.dr(t,{runtime:this.wf,Ixt:i,kxt:2<=i?e:null});s.Oxt(),this.ETt.push(s),c.set(e,s),!this.FTt&&r.hlt.NTt&&s instanceof r.hlt.NTt?this.FTt=s:!this.kTt&&r.hlt.jumpthru&&s instanceof r.hlt.jumpthru&&(this.kTt=s),s.Nxt()})}WTt(t){const s=this.ATt.get(t);s&&(s(),this.ATt.delete(t))}static Wxt(t,s=1){if(r.fL.Wxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static jxt(t=1){if(r.fL.jxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static KB(){if(r.fL.KB!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static cL(t){if(r.fL.cL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static jTt(t){n.push(t)}static VTt(){n.pop()}static E4(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}UTt(){for(const t of this.RTt)t.Nxt()}static EL(t){return u.get(t)||null}static q6(t){return c.get(t)||null}jwt(){return this.Wwt}HTt(){return this.FTt}zTt(){return this.kTt}Z4(t){return this.DTt.has(t)}},o=r.fL.Wxt,a=r.fL.jxt,t=r.fL.KB,l=r.fL.cL}{const fa=self.Ws,da=new Set;fa.JTt=class extends fa.ur{constructor(){super(),this.qTt=0,this.LH="",this.BH=0,this.XTt=0,this.$Tt=0,this.ag=0,this.lg=0,this.YTt=!1,this.KTt=!1,this.ZTt=null,this.QTt="",this.LI=fa.dr(fa.Rect),this.t_t=fa.dr(fa.ou),this.s_t="",this.i_t=new self.hO(this),da.add(this)}pr(){this.WI(),this.ZTt&&0===this.ZTt.KH()&&this.ZTt.pr(),this.ZTt=null,da.delete(this),this.e_t()}static XH(){for(const t of da)t.QTt="",t.LI.set(0,0,0,0),t.t_t.Cu(t.LI)}h_t(t){this.LH=t[0],this.BH=t[1],this.XTt=t[2],this.$Tt=t[3],this.ag=t[4],this.lg=t[5],this.YTt=t[6],this.KTt=!0}r_t(t,s){if(this.ZTt)throw new Error("already loaded asset");this.LH=s;const i={};return fa.To(s)&&(i.fH="remote"),this.rO(t,i),this.ZTt.mH()}n_t(t,s){if(this.ZTt)throw new Error("already loaded asset");this.LH="",this.BH=s.size,this.ZTt=fa.dr(fa.dH,t.XF(),{blob:s,size:this.BH,fH:"local"})}o_t(t){if(t===this)throw new Error("cannot replace with self");this.qTt++,this.WI(),this.LH=t.LH,this.BH=t.BH,this.XTt=t.XTt,this.$Tt=t.$Tt,this.ag=t.ag,this.lg=t.lg,this.YTt=t.YTt,this.KTt=t.KTt,this.ZTt=t.ZTt,this.QTt=t.QTt,this.LI=t.LI,this.t_t=t.t_t,this.e_t()}pH(){return this.LH}mc(){return this.BH}a_t(){return this.XTt}l_t(){return this.$Tt}HGt(){return this.YTt}_m(){return this.ag}Om(){return this.lg}u_t(){return this.ZTt._m()}c_t(){return this.ZTt.Om()}rO(t,s){if(this.ZTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.pH(),size:this.mc()}),this.ZTt=t.cH(s)}VH(){return this.ZTt&&this.ZTt.VH()}async J8(t,s){if(!this.ZTt)throw new Error("no asset");if(this.QTt)throw new Error("already loaded texture");const i=this.qTt,e=(this.QTt="loading",await this.ZTt.J8(t,s));if(this.qTt!==i)return null;if(!e)return this.QTt="",null;this.QTt="loaded",this.KTt||(this.ag=e._m(),this.lg=e.Om(),this.KTt=!0);const h=this.YTt?this.lg:this.ag,r=this.YTt?this.ag:this.lg;return this.LI.set(this.XTt,this.$Tt,this.XTt+h,this.$Tt+r),this.LI.Pt(e._m(),e.Om()),this.t_t.Cu(this.LI),this.YTt&&this.t_t.ku(),e}WI(){this.QTt&&(this.ZTt&&this.ZTt.WI(),this.QTt="",this.LI.set(0,0,0,0),this.t_t.Cu(this.LI))}K2(){return this.ZTt&&"loaded"===this.QTt?this.ZTt.K2():null}$C(){return this.LI}VGt(){return this.t_t}Pj(){return this.i_t}f_t(){return this.ZTt}async d_t(t){t=t||await this.ZTt.ZH();const s=fa.Bo(this.ag,this.lg),i=s.getContext("2d");return this.YTt?(i.rotate(Math.PI/-2),i.translate(-this.lg,0),i.drawImage(t,this.XTt,this.$Tt,this.lg,this.ag,0,0,this.lg,this.ag)):i.drawImage(t,this.XTt,this.$Tt,this.ag,this.lg,0,0,this.ag,this.lg),s}async p_t(t){if(!this.s_t){const s=await this.d_t(t),i=await fa.No(s);this.s_t=URL.createObjectURL(i)}return this.s_t}e_t(){this.s_t&&(URL.revokeObjectURL(this.s_t),this.s_t="")}}}{const pa=self.Ws;pa.m_t=class extends pa.ur{constructor(t){super(),this.vr=t[0],this.g_t=t[1],this.KSt=!!t[2],this.Got=t[3],this.y_t=t[4],this.w_t=!!t[5],this.k7=t[6],this.S_t=t[7].map(t=>pa.dr(pa.b_t,t)),this.v_t=new self.tW(this)}static M_t(t,s){const i=pa.dr(pa.m_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.S_t.push(pa.b_t.M_t(t)),i}pr(){for(const t of this.S_t)t.pr();pa.Hn(this.S_t)}x_t(t){for(const s of this.S_t)s.yW().rO(t)}G_t(s,i){return Promise.all(this.S_t.map(t=>t.yW().J8(s,i)))}T_t(){for(const t of this.S_t)t.yW().WI()}uf(){return this.vr}g9(){return this.k7}lW(){return this.S_t.length}cW(){return this.S_t}__t(t){if((t=Math.floor(t))<0||t>=this.S_t.length)throw new RangeError("invalid frame");return this.S_t[t]}I_t(t,s){(s=Math.floor(s))<0?this.S_t.unshift(t):s>=this.S_t.length?this.S_t.push(t):this.S_t.splice(s,0,t)}C_t(t){if((t=Math.floor(t))<0||t>=this.S_t.length)throw new RangeError("invalid frame");this.S_t[t].pr(),this.S_t.splice(t,1)}P_t(i){for(let t=0,s=this.S_t.length;t<s;++t)if(pa.Mh(this.S_t[t].LW(),i))return t;return-1}R_t(t){if("string"!=typeof t)return t;{const s=this.P_t(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}sW(){return this.g_t}eW(){return this.KSt}hW(){return this.Got}nW(){return this.y_t}aW(){return this.w_t}E_t(){return this.v_t}}}{const ma=self.Ws,ga=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ma.b_t=class extends ma.ur{constructor(t){super(),this.A_t=ma.dr(ma.JTt),this.A_t.h_t(t),this.F_t=t[7],this.k_t=ma.dr(ma.ol,t[8],t[9]),this.D_t=t[10].map(t=>ma.dr(ma.O_t,this,t)),this.L_t=new Map;for(const i of this.D_t)this.L_t.set(i.uf().toLowerCase(),i);this.B_t=null;const s=t[11];6<=s.length&&(this.B_t=ma.dr(ma.ju,s)),this.Sy=t[12]||"",this.N_t=new self.gW(this)}static M_t(t){const s=ma.dr(ma.b_t,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.A_t.n_t(t,ga),s}pr(){this.B_t&&(this.B_t.pr(),this.B_t=null),this.A_t.pr(),this.A_t=null}yW(){return this.A_t}wW(){return this.F_t}bW(){return this.k_t.fl()}MW(){return this.k_t.pl()}FW(){return this.B_t}EW(t){return this.L_t.get(t.toLowerCase())||null}RW(t){return(t=Math.floor(t))<0||t>=this.D_t.length?null:this.D_t[t]}TW(){return this.D_t.length}LW(){return this.Sy}fW(){return this.N_t}}}{const ya=self.Ws;ya.O_t=class extends ya.ur{constructor(t,s){super(),this.W_t=t,this.vr=s[0],this.j_t=ya.dr(ya.ol,s[1],s[2])}pr(){}uf(){return this.vr}Av(){return this.j_t.fl()}Dv(){return this.j_t.pl()}V_t(){return this.j_t}}}{const v=self.Ws,wa=self.C3Debugger,Sa=self.BL;v.hut=class extends v.ur{constructor(s,t,i){super();const e=s.Hyt(i[1]),[h,r]=(this.wf=s,this.Zxt=v.fL.EL(e),this.hGt=null,this.U_t=e.Instance,this.wy=t,this.k7=i[11],this.vr=i[0],this.Iwt=this.wf.a1t(i[14]),this.H_t=!!i[9],this.z_t=!!i[2],this.J_t=!!i[10],this.q_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],X_t:s.a1t(t[3])})),this.$_t=i[4],this.Y_t=i[5],this.mxt=this.Zxt.yL(),this.K_t=v.dr(v.Event.Kf),this.wz=null,s.KF().DO());if(this.Z_t=v.dr(v.Q_t,h,r),this.tIt=!0,this.sIt=null,this.iIt=null,this.eIt=-1,this.hIt=null,this.rIt=null,this.nIt=null,this.oIt=null,this.aIt=null,this.lIt=!1,this.uIt=null,this.cIt=i[8].map(t=>v.fIt.Cx(this,t)),this.dIt=[],this.pIt=new Map,this.mIt=new Map,this.gIt=new Set,this.yIt=new Map,this.wIt=v.dr(v.Aft,this),this.SIt=null,this.bIt=0,this.vIt=!1,this.uIt=null,this.A_t=null,this.MIt=null,this.xIt=null,this.GIt=null,this.TIt=0,this.ibt=new Map,this.ebt=new Map,this.i7=[],this._It=new Map,this.IIt=!0,this.Zxt.xL()&&(this.wz=v.dr(v.Sz,this,i[12])),i[6]&&(this.A_t=v.dr(v.JTt),this.A_t.h_t(i[6])),i[7]){this.MIt=i[7].map(t=>v.dr(v.m_t,t)),this.xIt=new Map,this.GIt=new Map;for(const a of this.MIt)this.xIt.set(a.uf().toLowerCase(),a),this.GIt.set(a.g9(),a)}this.z_t?(this.sIt=[],this.iIt=new Set,this.eIt=this.wf.CIt()):(this.hIt=[],this.rIt=new Set,this.nIt=[],this.oIt=[],this.aIt=[]);const n=this.Zxt.Mbt();if(n<2&&(this.hGt=v.dr(e.PIt,this,i[15]),!(this.hGt instanceof v.Kxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.RIt=null,this.EIt=null,this.wX=v.dr(v.Event.Kf),v.fL.Wxt(this,n);let o;if(o=2<=n?(o=e.PIt)||globalThis._j:this.hGt.Lxt()){if(this.RIt=new o(n<2?this:null),n<2&&!(this.RIt instanceof Sa))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.RIt instanceof globalThis._j))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.RIt=new Sa;if(v.fL.jxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.hGt.Qxt(u,c,f)}}this.wf.AIt()&&!this.z_t&&!this.J_t&&this.mxt||this.Oxt(),this.Zxt.mL()&&(this.Zxt.Bxt(this),this.FIt(i)),this.kIt=null}static Cx(t,s,i){return v.dr(v.hut,t,s,i)}pr(){if(this.K_t.pr(),this.K_t=null,this.A_t&&(this.A_t.pr(),this.A_t=null),this.MIt){for(const t of this.MIt)t.pr();v.Hn(this.MIt),this.xIt.clear(),this.GIt.clear()}this.kIt=null,this.wIt.pr(),this.wIt=null,this.ibt.clear(),this.ebt.clear(),this.uIt=null,this.wf=null}DIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.wf.Lz(i[t]);this.sIt.push(e),this.iIt.add(e),e.hIt.push(this),e.rIt.add(this)}}OIt(t){this.lIt=!0,this.uIt=t}r4(){return this.lIt}UX(){return this.uIt}LIt(){let t=0;if(!this.z_t)for(const s of this.hIt)for(const i of s.BIt()){const e=i.uf().toLowerCase();this.pIt.set(e,i),this.mIt.set(e,t),this.dIt.push(i),++t}for(const h of this.BIt()){const r=h.uf().toLowerCase();this.pIt.set(r,h),this.mIt.set(r,t),this.dIt.push(h),++t}for(const n of this.dIt)this.gIt.add(n.N6().constructor);if(!this.z_t&&this.hIt.length){let t=this.wf.NIt(),s=(v.Jn(this.nIt,t,0),v.Jn(this.oIt,t,0),v.Jn(this.aIt,t,0),[]),i=0,e=0,h=0;for(const o of this.hIt){const a=o.hSt(),l=(this.nIt[a]=i,i+=o.WIt(),this.oIt[a]=e,e+=o.jIt(),this.aIt[a]=h,h+=o.VIt(),o.u5());if(l&&this.wz)for(const u of l.c5())s.push(u.UIt(this.wz))}this.wz&&this.wz.HIt(s)}}FIt(t){const s=this.wf.zIt(),i=v.dr(v.Instance,{runtime:this.wf,JB:this,uid:s});i.JIt(t[16],[]),this.wf.qIt(s,i),this.i7.push(i)}wvt(){return this.hGt}XIt(){return this.J_t}Kf(){return this.K_t}Oxt(){this.z_t||(this.hGt?this.hGt.Oxt():this.RIt.Ij())}$It(){return 0<this.TIt}async JX(t){this.z_t||(this.TIt++,1===this.TIt&&(this.hGt?await this.hGt.JX(t):await this.RIt.Rj(this.wf.$O().YIt())))}ZX(){if(!this.z_t){if(this.TIt--,this.TIt<0)throw new Error("released textures too many times");0===this.TIt&&(this.hGt?this.hGt.ZX():this.RIt.Ej(this.wf.$O().YIt()))}}$X(){if(this.z_t)throw new Error("not applicable to family");this.hGt?this.hGt.$X():this.RIt.Aj()}async w$(t){this.z_t||(this.hGt?await this.hGt.w$(t):await this.RIt.Fj(this.wf.$O().YIt()))}nO(){return this.wf}WL(){return this.Zxt}KIt(){return this.U_t}uf(){return this.vr}a1t(){return this.Iwt}HF(){return this.wy}g9(){return this.k7}a9(){return this.z_t}Xz(){return this.H_t}yL(){return this.mxt}hSt(){return this.eIt}BIt(){return this.cIt}jIt(){return this.$_t}ZIt(t){return t&&this.gIt.has(t)}WIt(){return this.q_t.length}QIt(){return this.q_t.map(t=>t.sid)}tCt(s){return this.q_t.findIndex(t=>t.sid===s)}yit(s){return this.q_t.findIndex(t=>t.name===s)}sCt(){return this.q_t.map(t=>t.name)}iCt(){return this.q_t.map(t=>t.X_t)}Sit(t){if((t=Math.floor(t))<0||t>=this.q_t.length)throw new RangeError("invalid instance variable index");return this.q_t[t].type}wit(t){if((t=Math.floor(t))<0||t>=this.q_t.length)throw new RangeError("invalid instance variable index");return this.q_t[t].name}VIt(){return this.Y_t}eCt(){return this.dIt}zht(t){return this.pIt.get(t.toLowerCase())||null}vit(t){const s=this.mIt.get(t.toLowerCase());return void 0===s?-1:s}u5(){return this.wz}xL(){return this.Zxt.xL()}hCt(){return this.wz&&this.wz.rCt()}K1t(){return this.wIt}ZL(){return this.wIt.ZL()}yW(){return this.A_t}Wz(t){this.SIt=t}Nz(){return this.SIt}jz(t){this.bIt=t}nCt(){return this.bIt}oCt(){return this.MIt}aCt(){return this.MIt.length}m1t(){return this.hIt}xvt(t){return this.rIt.has(t)}Igt(){return this.sIt}l9(t){return this.iIt.has(t)}lSt(t){return this.oIt[t]}eSt(t){return this.nIt[t]}cwt(t){this.yIt.set(t.gwt().toLowerCase(),t)}fwt(t){return!!this.Mwt(t)}Mwt(t){const s=this.yIt.get(t.toLowerCase());return s&&s.nc()?s:null}lCt(){return this.MIt}uCt(t){if(this.MIt)return this.xIt.get(t.toLowerCase())||null;throw new Error("no animations")}cCt(t){if(this.MIt)return this.GIt.get(t)||null;throw new Error("no animations")}fCt(t){if(this.uCt(t))throw new Error(`animation name '${t}' already exists`);const s=v.m_t.M_t(this.nO(),t);return this.MIt.push(s),this.xIt.set(s.uf().toLowerCase(),s),this.GIt.set(s.g9(),s),s}dCt(t){const s=this.uCt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.MIt.length)throw new Error("cannot remove last animation");const i=this.MIt.indexOf(s);this.MIt.splice(i,1),this.xIt.delete(s.uf().toLowerCase()),this.GIt.delete(s.g9()),s.pr()}pCt(){if(this.MIt)return this.MIt[0];throw new Error("no animations")}mCt(){return this.pCt().__t(0)}gCt(){if(this.MIt){const t=this.mCt().yW();return[t._m(),t.Om()]}return this.A_t?[this.A_t._m(),this.A_t.Om()]:[100,100]}LL(){if(this.Zxt.mL())return this.i7[0];throw new Error("not a single-global plugin")}KL(){return this.i7}*instances(){yield*this.i7}*YL(){yield*this.i7,yield*this.wf._Mt(this)}t5(){return this.i7.length}$z(t){this.i7.push(t)}yCt(){this.IIt=!0}R$(){if(this.IIt&&!this.z_t){let s=this.i7,i=0;for(let t=s.length;i<t;++i)s[i].wCt(i);const t=this.wf.SCt();for(const e of t)e.qB()===this&&e.wCt(i++);this.IIt=!1}}bCt(t){const s=this.i7;if(t<s.length)return s[t];t-=s.length;const i=this.wf.SCt();for(const e of i)if(e.qB()===this){if(0===t)return e;--t}return null}uMt(t){if(t&&t.r4()&&t.qB()!==this)for(const i of t.n4())if(i.qB()===this)return i;const s=this.ZL().KL();return s.length?s[0]:null}$L(t){const s=this.ZL().KL();return 0<s.length?s[t.I$()%s.length]:null}*AMt(t,s){let i=this.ZL().KL(),e=i.length,h=s.ZL(),r=s.ZL().KL(),n=r.length,o=t.I$(),a=(!s.a9()&&h.zft()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}kbt(t){this.hGt?.kbt(t)}Dyt(){if(this.lIt&&!this.z_t){this.R$();const t=this.ZL(),s=t.Qft(),i=t.zft(),e=this.wf.Zdt(),h=e&&e.Pk()&&e.Pk().a0t();for(const r of this.uIt.C$())if(r!==this){r.R$();const n=r.ZL();if(n.Zft(i),!i){const o=n.Qft();v.Hn(o);for(const a of s)o.push(r.bCt(a.I$()));if(h){const l=t.t0t(),u=n.t0t();v.Hn(u);for(const c of l)u.push(r.bCt(c.I$()))}}}}}Nbt(t,s){for(const i of this.UX().C$()){const e=i.ZL();t?v.Un(e.t0t(),s):v.Un(e.Qft(),s)}}vCt(){return this.Z_t}MCt(t){this.tIt=!!t}xCt(){if(this.tIt&&this.mxt){for(const t of this.i7)t.ND().GCt();for(const s of this.wf.SCt())s.qB()===this&&s.ND().GCt();this.tIt=!1}}TCt(s,t,i){if(t){const e=this._It.get(t);e&&(e.delete(s),0===e.size)&&this._It.delete(t)}if(i){let t=this._It.get(i);t||(t=new Set,this._It.set(i,t)),t.add(s)}}_Ct(){if(this.a9()){const t=new Set;for(const s of this.sIt)for(const i of s._Ct())t.add(i);return t.values()}return this._It.keys()}Cbt(){return this.ibt||(this.ibt=new Map),this.ibt}Pbt(){return this.ebt||(this.ebt=new Map),this.ebt}ICt(){return this.ZIt(v.hlt.NTt)}CCt(){return this.ZIt(v.hlt.jumpthru)}PCt(){return this.ZIt(v.hlt.NoSave)}Jz(){return this.ZIt(v.hlt.RCt)}kq(){const t={instances:this.i7.map(t=>t.zv())};return this.ibt&&this.ibt.size&&(t.ex=v.zo(this.ibt)),t}Dq(t,e){this.ibt&&(this.ibt.clear(),this.ibt=null);const s=t.ex,h=(s&&(this.ibt=v.Jo(s)),this.i7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].Jv(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.wf.t4(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.yL()||(s=this.wf.yD().FX(t.w.l))){const n=this.wf.qz(this.SIt||this,s,!1,0,0,!0);n.Jv(t),e&&e.add(n)}}this.kIt=r,this.yCt()}ECt(){return this.kIt}ACt(){this.kIt=null}FCt(){for(let t=0,s=this.i7;t<s;++t)this.i7[t].FCt()}kL(){return this.RIt}Sk(){return this.wX}kCt(){return this.EIt}s5(t){this.EIt=t}tY(t){const s=this.wf,i=s.sY()&&!s.xk().n5();i&&wa.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),i&&wa.AddScriptTime()}}}{const ba=self.Ws;ba.DCt=class extends ba.ur{constructor(t,s){super(),this.wf=t,this.OCt=s;for(const i of this.OCt)i.OIt(this)}pr(){this.wf=null}nO(){return this.wf}VX(){return this.OCt}C$(){return this.OCt}A$(){return this.OCt.some(t=>t.yL())}}}{let S=self.Ws,h=self.C3Debugger,n=S.fL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.ur{constructor(t){if(S.fL!==n)throw new Error("invalid addon manager");super(),this.wf=t.runtime,this.LCt=t.JB,this.Ust=null,this.BCt=null,this.NCt=null,this.WCt=0,this.jCt=t.uid,this.VCt=a++,this.Ubt=0,this.UCt=null;const s=S.lo(t.tags),i=(0<s.length&&(this.UCt=new Set(s)),this.HCt=o,this.zCt=o,this.LCt.eCt()),e=(0<i.length&&(this.zCt=i.map((t,s)=>S.dr(S.JCt,{runtime:this.wf,W6:t,U6:this,index:s}))),this.qCt=this.LCt.r4()?[]:null,this.XCt=-1,this.K_t=null,this.WL());if(e.hv()&&(this.Ubt|=4),e.yL())if(this.Ust=S.dr(S.$Ct,this,t.lN),t.YCt)this.Ust.KCt(t.YCt);else{this.Ust.ZCt();const[h,r]=this.LCt.gCt();this.Ust.wC(h,r),this.qB().hCt()&&this.Ust.aN().QCt()}t.tPt?this.sPt(t.tPt):this.iPt()}pr(){if(this.NCt&&(this.NCt.ZB(),this.NCt=null),0<this.zCt.length){for(const i of this.zCt)i.pr();S.Hn(this.zCt)}this.BCt&&(this.BCt.pr(),this.BCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.qCt&&S.Hn(this.qCt),this.K_t&&(this.K_t.pr(),this.K_t=null),this.UCt&&this.UCt.clear(),this.UCt=null,this.wf=null,this.LCt=null,0<this.HCt.length&&S.Hn(this.HCt),this.Ust&&(this.Ust.pr(),this.Ust=null)}sPt(t){0<t.length&&(this.HCt=[],S.Xn(this.HCt,t))}iPt(){const s=this.LCt.WIt();if(0!==s){this.HCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.HCt.push(i[this.LCt.Sit(t)])}}JIt(t,i){if(this.BCt)throw new Error("already got sdk instance");for(let t=0,s=this.zCt.length;t<s;++t){const e=this.zCt[t];e.JIt(i?i[t]:null)}const s=this.WL().Mbt();if(s<2){if(this.BCt=S.dr(this.LCt.KIt(),this,t),!(this.BCt instanceof S.iGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.WL().yL()&&this.LCt.kCt()&&this.DD()}else{const h=this.WL().Lxt();this.ePt(h.Instance,t)}}A6(){return this.BCt??this.NCt}ND(){return this.Ust}nO(){return this.wf}Zk(){return this.XCt}u4(){const t=this.XCt;return-1===t?this.nO().Zk():t}Qk(t){((t=+t)<0||!isFinite(t))&&(t=0),this.XCt=t,this.qB().hCt()&&this.wf.hPt(this,!0)}f4(){this.XCt=-1,this.qB().hCt()&&this.wf.hPt(this,!1)}xq(){return this.wf.rPt(this)}Kf(){return this.K_t||(this.K_t=S.dr(S.Event.Kf)),this.K_t}bM(t){this.BCt?this.BCt.bM(t):this.NCt.Wj(this.wf.$O().YIt())}Oxt(t){this.BCt.Oxt(t)}nPt(){this.Ubt|=2}oPt(){return 0!=(2&this.Ubt)}aPt(){this.Ubt|=1}dV(){return 0!=(1&this.Ubt)}hv(){return 0!=(4&this.Ubt)||this.BCt.hv()}lPt(){this.Ubt|=32}pq(){return 0!=(32&this.Ubt)}uPt(){return 0!=(8&this.Ubt)}cPt(t){t?this.Ubt|=8:this.Ubt&=-9}fPt(){return 0!=(16&this.Ubt)}dPt(t){t?this.Ubt|=16:this.Ubt&=-17}pPt(){return 0!=(64&this.Ubt)}mPt(t){t?this.Ubt|=64:this.Ubt&=-65}gPt(t,s){t<<=16,s?this.Ubt|=t:this.Ubt&=~t}yPt(t){return 0!=(this.Ubt&t<<16)}BGt(){return this.BCt.BGt()}NGt(){return this.BCt.NGt()}WGt(){return this.BCt.WGt()}jGt(){return this.BCt.jGt()}UGt(){return this.BCt.UGt()}Fvt(t){return this.BCt.Fvt(t)}qB(){return this.LCt}cq(){return this.BCt.cq()}IMt(t){return t.a9()?t.l9(this.qB()):this.qB()===t}wPt(h,t,s){const i=(t,s)=>{const i=s||t.qB(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.r4())for(const e of this.n4())i(e);if(s)for(const r of this.JN())i(r)}SPt(){if(!this.WL().IL())throw new Error("object does not support scene graph")}KN(){return null!==this.BN()}BN(){const t=this.ND();if(!t)return null;const s=t.BN();return s?s.lj():null}WN(){const t=this.ND();if(!t)return null;const s=t.WN();return s?s.lj():null}*jN(){const t=this.ND();if(t)for(const s of t.jN())yield s.lj()}bPt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Bq(){const t=this.ND();return!!t&&t.Bq()}vPt(t){const s=this.ND();if(!s)return[];const i=t.uf();return s.W$().map(t=>t.lj()).filter(t=>t.qB().uf()===i)}W$(){const t=this.ND();return t?t.W$().map(t=>t.lj()):[]}*children(){const t=this.ND();if(t)for(const s of t.children())yield s.lj()}*JN(){const t=this.ND();if(t)for(const s of t.JN())yield s.lj()}UN(){const t=this.ND();return t?t.UN():0}MPt(){return[...this.jN()].length}EMt(){const t=this.ND();return t?t.EMt():0}zN(t){const s=this.ND();if(!s)return null;const i=s.zN(t);return i?i.lj():null}xPt(){const t=this.ND();if(!t)return NaN;const s=t.BN();return s?s.GPt(t):NaN}TPt(t){for(const s of this.ND().W$())if(s.lj().o4()===t)return!0;return!1}XN(t,s){this.SPt(),t.SPt(),this.ND().XN(t.ND(),s||{})}$N(t){const s=this.ND();s&&s.$N(t.ND())}g6(){const t=this.ND();return!!t&&t.g6()}m$(){const t=this.ND();if(t){const s=t._Pt();if(s)for(const i of s){const e=this.wf.kD(i[2]);if(e){const h=i[3];this.XN(e,{QN:!!(h>>0&1),s6:!!(h>>1&1),e6:!!(h>>2&1),r6:!!(h>>3&1),o6:!!(h>>4&1),m6:!!(h>>5&1),l6:!!(h>>6&1),c6:!!(h>>7&1),d6:!!(h>>8&1)})}}}}g$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.XN(h,{QN:!!(r>>0&1),s6:!!(r>>1&1),e6:!!(r>>2&1),r6:!!(r>>3&1),o6:!!(r>>4&1),m6:!!(r>>5&1),l6:!!(r>>6&1),c6:!!(r>>7&1),d6:!!(r>>8&1)})}}}l4(){const t=this.wf.IPt();return t?t.nut(this):""}r4(){return null!==this.qCt}P$(t){this.qCt.push(t)}e4(){return this.qCt}CPt(t){return!!this.PPt(t)}PPt(t){const s=this.n4();if(null===s||0===s.length)return!1;for(const i of s)if(i.qB()===t)return i;return null}n4(){return this.qCt}Nmt(){for(const t of this.n4())t.qB().ZL().s0t(t)}Dbt(){for(const t of this.n4())t.qB().ZL().Yft(t)}Obt(t){for(const s of this.n4())s.qB().ZL().Qft()[t]=s}Bbt(){for(const t of this.n4())t.qB().ZL().Kft(t)}Lbt(t){for(const s of this.n4())s.qB().ZL().t0t()[t]=s}WL(){return this.LCt.WL()}wCt(t){this.WCt=t}I$(){return this.LCt.R$(),this.WCt}o4(){return this.jCt}RPt(){return this.VCt}EPt(t){t?this.y4(new Set(t)):this.UCt=null}y4(t){if(0===t.size)this.UCt=null;else{this.UCt?this.UCt.clear():this.UCt=new Set;for(const s of t)this.UCt.add(s)}}m4(){return this.UCt??new Set}t2t(){return Array.from(this.m4()).join(" ")}e2t(t){t=Math.floor(t);for(const s of this.m4()){if(0===t)return s;--t}return""}Hht(){return this.zCt}APt(t){if(t)for(const s of this.zCt)if(s.N6()instanceof t)return s;return null}llt(t){if(!t)return null;const s=this.APt(t);return s?s.A6():null}Uht(i){const e=this.zCt;for(let t=0,s=e.length;t<s;++t)if(e[t].V6().g9()===i)return t;return-1}FPt(){return this.HCt}sCt(){return this.LCt.sCt()}kPt(){return this.HCt.length}int(t){const s=this.HCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}sSt(t){return this.HCt[t]}DPt(t){const s=this.HCt[t];return 0===this.LCt.Sit(t)?!!s:s}ent(t,s){const i=this.HCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.LCt.Sit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Xnt(t,s){if(0!==s){const i=this.HCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Cbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}Pbt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}OPt(t){const s=this.qB();if(s.Sk().i0(t))return!0;for(const i of s.m1t())if(i.Sk().i0(t))return!0;return!!this.wf.Sk().i0(t)}r5(){const t=new Set,s=(t.add(this),this.ND());if(s&&s.Bq())for(const i of this.JN())if(t.add(i),i.r4())for(const e of i.n4())t.add(e);if(this.r4())for(const h of this.n4())t.add(h);for(const r of t.values())r.y$()}LPt(){this.LCt.kCt()&&this.DD();for(const t of this.zCt)t.GTt()}BPt(){this.LPt()}y$(){if(this.LPt(),this.OPt("instancecreate")){const t=this.qB(),s=new S.Event("instancecreate");s.U6=this.DD(),t.tY(s);for(const i of t.m1t())i.tY(s);this.wf.tY(s)}this.wf.F4(this.WL().Tpt().M$.n2t,this,null)}NPt(){this.wf.F4(this.WL().Tpt().M$.o2t,this,null)}WPt(t){if(this.NCt){const s=new S.Event("destroy");s.jPt=t,this.tY(s)}if(this.OPt("instancedestroy")){const i=this.qB(),e=new S.Event("instancedestroy");e.U6=this.DD(),e.jPt=t,i.tY(e);for(const h of i.m1t())h.tY(e);this.wf.tY(e)}}VPt(){return this.BCt?this.BCt.TGt():this.NCt.q4()}zv(t="full",s=null){const i={},e=("full"===t?i.uid=this.o4():i.c3=!0,this.m4());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=S.zo(r)),-1!==this.Zk()&&(i.mts=this.Zk()),0<this.LCt.WIt()){const n={},o=this.LCt.QIt();for(let t=0,s=this.HCt.length;t<s;++t)n[o[t].toString()]=this.HCt[t];i.ivs=n}if(this.zCt.length){const a={};for(const l of this.zCt){const u=l.zv(t);u&&(a[l.V6().g9().toString()]=u)}i.behs=a}}this.Ust&&(i.w=this.Ust.kq(t,s));const h=this.BCt?this.BCt.zv():this.NCt.X4();return h&&(i.data=h),i}KY(t="full",s){this.Ust&&this.Ust.KY(t)}QY(t,s="full",i=null){this.Ust&&this.Ust.QY(t,s,i)}UPt(t,s="full",i=null){this.Ust&&this.Ust.UPt(t,s,i)}FCt(){this.WL().yL()&&this.Ust.FCt()}Jv(s,t="full",i){if("full"===t)this.jCt=s.uid;else if(!s.c3)return;if(this.EPt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=S.Jo(h),b.set(this,t)),this.XCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.LCt.tCt(a);if(!(l<0||l>=this.HCt.length)){let t=o;null===t&&(t=NaN),this.HCt[l]=t}}}if(this.WL().yL()){const u=s.w;if(u){const c=u.l;if(this.Ust.WD().g9()!==c){const f=this.Ust.WD(),d=f.vD().FX(c);d?(this.Ust.HD(d),f.Zz(this,!0),d.$z(this,!0),d.zD(this),this.Ust.uN()):"full"===t&&this.wf.t4(this)}this.Ust.Dq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.Uht(y);w<0||w>=this.zCt.length||this.zCt[w].Jv(g,t)}}const e=s.data;e&&(this.BCt?this.BCt.Jv(e,t):this.NCt.Y4(e))}DD(){return this.NCt||this.ePt()}PGt(){return!!this.NCt}ePt(t,s){const i=this.Ust?t?self.kj:self.I6:t?self.v4:self.zB,e=t||this.BCt.Lxt(),h=this.LCt.kCt(),r=h||e||i,n=this.WL().Mbt();if(S.fL.Wxt(this,n),S.fL.jTt(s),this.NCt=new r,S.fL.VTt(),S.fL.jxt(n),e&&!(this.NCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.NCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.NCt}XB(t){if(0!==this.HCt.length){const i={},e=this.LCt.iCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.DPt.bind(this,t),set:S.Instance.prototype.ent.bind(this,t)};const s=Object.create(Object.prototype,i);t.HPt={value:s,writable:!1}}}$B(t){const s=this.zCt;if(0!==s.length){const i={};for(const h of s)i[h.V6().a1t()]={value:h.oGt(),writable:!1};const e=Object.create(Object.prototype,i);t.Tmt={value:e,writable:!1}}}tY(t){if(this.PGt()){const s=this.DD(),i=(t.U6=s,this.wf),e=i.sY()&&!i.xk().n5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const va=self.Ws;va.V$=class extends va.ur{constructor(e){super(),this.Qv=e,this.zmt=null,this.zPt=[],this.JPt=e._m(),this.qPt=e.Om(),this.XPt=1,this.$Pt=1,this.YPt=0,this.KPt=1,this.ZPt=e.qR(),this.QPt=null,this.tRt=null,this.sRt=NaN,this.iRt=!1,this.jq=NaN,this.Vq=NaN,this.eRt=t=>{if(t.U6===this.zmt.lj()){const s=e.nO(),i=(s.Kf().removeEventListener("instancecreate",this.eRt),this.zmt.lj().A6());this.iRt=!!i.kit(),this.jq=this.iRt?i.Fit():NaN,this.Vq=this.iRt?i.Oit():NaN}}}pr(){this.zmt=null,this.QPt=null,this.tRt=null,this.sRt=NaN,this.iRt=!1,this.jq=NaN,this.Vq=NaN,va.Hn(this.zPt)}hRt(t){if(this.KPt=this.Qv.qR(),this.ZPt=this.KPt,this.zmt=t,this.YPt=t?t.w5():0,this.zmt){const s=this.Qv,i=s.nO(),e=this.zmt.lj().WL().Mbt();if(e<2){const h=this.zmt.lj().A6();h?(this.iRt=!!h.kit(),this.jq=this.iRt?h.Fit():NaN,this.Vq=this.iRt?h.Oit():NaN):this.zmt.lj().dV()||i.Kf().addEventListener("instancecreate",this.eRt)}else this.iRt=!1,this.jq=NaN,this.Vq=NaN}else this.iRt=!1,this.jq=NaN,this.Vq=NaN}BN(){return this.zmt}Bq(){return 0<this.zPt.length}W$(){return this.zPt}rRt(){this.Bq()&&1!==this.zPt.length&&(this.tRt?this.zPt.sort((t,s)=>{const i=this.tRt.get(t.lj()),e=this.tRt.get(s.lj());return va.we(i)&&va.we(e)?i-e:0}):this.zPt.sort((t,s)=>{const i=t.dnt().nRt(),e=s.dnt().nRt();return va.we(i)&&va.we(e)?i-e:0}))}nRt(){return this.sRt}pnt(){return this.XPt}oRt(t){this.XPt=t}gnt(){return this.$Pt}aRt(t){this.$Pt=t}Gnt(){return this.ZPt}sMt(){return this.KPt}lRt(t){this.KPt=t}fnt(){return 0===this.JPt?Number.EPSILON:this.JPt}mnt(){return 0===this.qPt?Number.EPSILON:this.qPt}uRt(){if(this.Qv.h6()){let t=this.zmt,s=t._m(),i=t.dnt().fnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.iRt?1+s/this.jq:s/i}return 1}cRt(){if(this.Qv.n6()){let t=this.zmt,s=t.Om(),i=t.dnt().mnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.iRt?1+s/this.Vq:s/i}return 1}fRt(){return 0}dRt(){return{sw:this.JPt,sh:this.qPt,sx:this.XPt,sy:this.$Pt,psa:this.YPt,oo:this.KPt,so:this.ZPt,pi:this.Qv.lj().xPt()}}kq(t,s=null){const i=this.dRt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.pRt(t),c:this.mRt(t)})}gRt(t){let s="";return t.t6()&&(s+="x"),t.i6()&&(s+="y"),t.h6()&&(s+="w"),t.n6()&&(s+="h"),t.a6()&&(s+="a"),t.u6()&&(s+="z"),t.g6()&&(s+="d"),t.f6()&&(s+="o"),t.p6()&&(s+="v"),s}pRt(t){return this.zmt&&this.zmt.lj()&&!this.zmt.lj().dV()?this.yRt(this.zmt,this.Qv,t):null}mRt(s){return this.zPt.map(t=>this.yRt(t,t,s)).filter(t=>t)}yRt(t,s,i){const e=t.lj();if(e&&e.dV())return null;const h={};return h.uid=e.o4(),h.f=this.gRt(s),h.offsets=s.wRt(),h.data=va.V$.SRt(e),h.oci=e.qB().HF(),"state"===i?(h.inst=e.zv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.qB().KL().indexOf(e),h.inst=null),h}Dq(t){this.JPt=t.sw,this.qPt=t.sh,this.XPt=t.sx,this.$Pt=t.sy,this.YPt=t.psa,this.KPt=t.oo,this.ZPt=t.so,this.sRt=va.we(t.pi)?t.pi:NaN}bRt(t,s){if(!t&&!s&&this.QPt)for(const i of this.QPt)i.dV()||i.KN()||i.nO().t4(i);this.QPt=t,this.tRt=s}QY(t,s){const i=this.Qv,e=i.nO(),h=new Set;if(t.p&&!this.zmt){const o=t.p.uid,a=e.kD(o);if(s?.g2t,a){const l=a.ND();if(a.bPt(i.lj()))this.zmt=l;else{a.TPt(i.lj().o4())?e.t4(i.lj()):a.XN(i.lj(),this.vRt(t.p.f)),h.has(i)||(i.MRt(t.p.offsets),this.xRt(a,t.p,s)),h.add(i);const u=a.ND();u.dnt().rRt()}}else if(va.we(t.p.oci)){const c=e.Lz(t.p.oci),f=(e.jwt(),e.i5(c,i.WD(),0,0,!0));if(s?.g2t,f){const d=this.GRt(t.p,e),p=(d&&f.Jv(d),f.ND()),m=(p.WD().e5(f),f.XN(i.lj(),this.vRt(t.p.f)),f.ND());m.dnt().rRt()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.kD(y);w&&r.push(w)}let n=0;for(const S of t.c){const b=S.uid,v=e.kD(b);if(s?.g2t,v){if(this.QPt){if(this.QPt.includes(v)){const T=v;if(T.qB()!==v.qB()){n++;continue}if(T.dV()){n++;continue}const _=t.c[n];if(!s?.g2t&&this.TRt(T,r,i)){this._Rt(n,_,i,h,s),n++;continue}if(T.KN()&&T.BN()!==i.lj()){const I=this.IRt(_,s);this.CRt(I,_,h,s),n++;continue}this.CRt(T.ND(),_,h,s,!0),n++;continue}if(this.QPt[n]){const C=this.QPt[n];if(C.qB()!==v.qB()){n++;continue}if(C.dV()){n++;continue}const P=t.c[n];if(!s?.g2t&&this.TRt(C,r,i)){this._Rt(n,P,i,h,s),n++;continue}if(C.KN()&&C.BN()!==i.lj()){const R=this.IRt(P,s);this.CRt(R,P,h,s),n++;continue}this.CRt(C.ND(),P,h,s,!0),n++;continue}}const M=v.qB(),x=this.PRt(r,M),G=i.lj().vPt(M).length;if(x===G){const E=i.lj().zN(n);if(E){const A=E.ND();A&&(h.has(A)||(A.MRt(S.offsets),this.xRt(E,S,s)),h.add(A))}n++;continue}if(v.KN()&&v.BN()!==i.lj()){const F=this.IRt(S,s);this.CRt(F,S,h,s),n++;continue}this.CRt(v.ND(),S,h,s)}else if(this.QPt&&this.QPt[n]){const k=this.QPt[n],O=e.Lz(this.RRt(S));if(k.qB()!==O){n++;continue}if(k.dV()){n++;continue}const D=t.c[n];if(!s?.g2t&&this.TRt(k,r,i)){this._Rt(n,D,i,h,s),n++;continue}if(k.KN()&&k.BN()!==i.lj()){const L=this.IRt(D,s);this.CRt(L,D,h,s),n++;continue}this.CRt(k.ND(),D,h,s)}else{const B=this.IRt(S,s);this.CRt(B,S,h,s)}n++}}TRt(t,s,i){const e=t.qB(),h=this.PRt(s,e),r=i.lj().vPt(e).length;return h===r}_Rt(t,s,i,e,h){const r=i.lj().zN(t,s);if(r){const n=r.ND();n&&(e.has(n)||(n.MRt(s.offsets),this.xRt(r,s,h)),e.add(n))}}vRt(t){const s={};return s.QN=t.includes("x"),s.s6=t.includes("y"),s.e6=t.includes("w"),s.r6=t.includes("h"),s.o6=t.includes("a"),s.l6=t.includes("z"),s.m6=t.includes("d"),s.c6=t.includes("o"),s.d6=t.includes("v"),s}RRt(t){return va.we(t.oci)?t.oci:t[1]}IRt(e,h){if(va.we(e.oci)){let t=this.Qv,s=t.nO(),i;if(e.data)i=s.qz(e.data,t.WD(),!1,0,0,!1,!0);else{const r=s.Lz(e.oci);i=s.i5(r,t.WD(),0,0,!0)}if(h?.g2t,i){const n=this.GRt(e,s),o=(n&&i.Jv(n),i.ND());return o.WD().e5(i,!0),o}}}CRt(t,s,i,e,h=!0){const r=this.Qv,n=r.XN(t,this.vRt(s.f));n&&h&&(i.has(t)||(t.MRt(s.offsets),this.xRt(t.lj(),s,e)),i.add(t)),this.rRt()}xRt(t,s,i){let e=this.GRt(s,this.Qv.nO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.Jv(e))}PRt(t,s){return t.filter(t=>t.qB().uf()===s.uf()).length}GRt(t,s){if(va.we(t.instIndex)){const i=s.Lz(t.oci),e=i.ECt();return e?e[t.instIndex]:null}return va.Ce(t.inst)?JSON.parse(t.inst):t.inst||void 0}static SRt(t){let s=t.ND().WD().Vz(t.o4());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.W$()]){const h=e.ND();i.push([h.vD().g9(),h.WD().HF(),e.o4(),va.V$.j$(h),e.qB().r4()?1:0,h.jD(),va.V$.SRt(e)])}return va.Ue(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.V$.ERt(),s[0][14][1]=i,s[0][14][2]=t.ND().jD()),s}static j$(t){let s=0;return(s|=Number(t.p6())<<8)|Number(t.f6())<<7|Number(t.u6())<<6|Number(t.g6())<<5|Number(t.a6())<<4|Number(t.n6())<<3|Number(t.h6())<<2|Number(t.i6())<<1|Number(t.t6())<<0}static ERt(t){let s=0;return s,511}}}{let d=self.Ws,t=self.xs,r=(t.Es,d.dr(d.Rect)),n=d.dr(d.ou),s=d.dr(d.Event,"bboxchange",!1),f=d.dr(d.Yo,0,0,0,0),u=d.dr(d.ju),i=d.dr(d.Yo,1,1,1,1),o=d.dr(d.Rect,0,0,-1,-1),h=d.dr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.$Ct=class extends d.ur{constructor(t,s){super(),this.Ii=t,this.Fft=t.qB(),this.wf=t.nO(),this.ARt=s,this.Fft.TCt(this,null,s),this.FRt=-1,this.kRt=-1,this.Ubt=196635,this.Fft.WL().vL()&&(this.Ubt|=128),this.al=NaN,this.ll=NaN,this.Sv=NaN,this.DRt=NaN,this.ORt=NaN,this.R2=NaN,this.ta=NaN,this.LRt=NaN,this.BRt=NaN,this.NRt=NaN,this.WRt=NaN,this.jRt=d.dr(d.Rect),this.VRt=d.dr(d.ou),this.URt=h,this.HRt=o,this.zRt=null,this.JRt=null,this.qRt=null,this.wv=i,this.XRt=i,this.$Rt=null,this.YRt=null,this.Ii.qB().hCt()&&(this.YRt=d.dr(d.KRt,this.Ii,this)),this.ZRt=null,this.QPt=null,this.tRt=null,this.QRt=-1,this.tEt=null}aPt(){this.Ubt|=256}pr(){if(this.Fft.TCt(this,this.ARt,null),this.$Rt&&(this.wf.Kb().MS(this.$Rt),this.$Rt=null),this.zRt=null,this.JRt&&(this.JRt.sEt.pr(),this.JRt=null),this.qRt&&(this.qRt.clear(),this.qRt=null),this.b6(),this.YRt&&this.YRt.pr(),this.KN()&&this.BN().$N(this),this.Bq()){const t=[...this.W$()];for(const s of t)this.$N(s)}this.iEt(),this.eEt(),g.delete(this),a.delete(this),this.Ii=null,this.Fft=null,this.wf=null,this.ARt=null}KCt(t){if(m=!1,this.cN(t[0],t[1]),this.Bv(t[2]),this.wC(t[3],t[4]),this.R2=0,this.vL()?this.y5(t[6]):this.ta=0,f.Ka(t[7]),this.hEt(f),this._nt(t[8]),this.Cnt(t[9]),this.vv(t[10]),this.YRt&&this.YRt.rEt(t[12]),t[14]&&g.set(this,{nEt:t[14][1],oEt:t[14][2]}),t[15]){const s=t[15],e=(this.w6(s[0],s[1]),this.T6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.wM(t,i);o.Fv(n[0]),o.Ov(n[1]),o.Bv(n[2]),o.Wv(n[3]),o.Vv(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.wf.IPt();l&&c&&c.rut(this.lj(),a),u&&c&&c.rut(this.lj(),i)}m=!0,this.aEt()}ZCt(){this.al=0,this.ll=0,this.Sv=0,this.DRt=0,this.ORt=0,this.R2=0,this.ta=0,this.LRt=0,this.BRt=1,this.NRt=0,this.WRt=0,this.aEt()}nO(){return this.wf}qB(){return this.Fft}lj(){return this.Ii}lEt(){return this.a6()?this.uEt(this.BN().cEt()-this.ZRt.fRt()):0}Fv(t){if(t=+t,this.t6()){const s=this.ZRt,i=t-this.Av(),e=-this.lEt();0==e?this.al+=i/s.uRt():(this.al+=Math.cos(e)*i/s.uRt(),this.i6()&&(this.ll+=Math.sin(e)*i/s.cRt()))}else this.al=t}ant(t,s=!1){t=+t,!s&&this.t6()?this.Fv(this.Av()+t):this.al+=t}Av(){if(this.t6()){let t=this.al,s=this.ZRt,i=this.BN(),e=this.lEt();return 0===e?t*=s.uRt():(t=t*s.uRt()*Math.cos(e),this.i6()&&(t-=this.ll*s.cRt()*Math.sin(e))),i.Av()+t}return this.al}Ov(t){if(t=+t,this.i6()){const s=this.ZRt,i=t-this.Dv(),e=-this.lEt();0==e?this.ll+=i/s.cRt():(this.t6()&&(this.al-=Math.sin(e)*i/s.uRt()),this.ll+=Math.cos(e)*i/s.cRt())}else this.ll=t}lnt(t,s=!1){t=+t,!s&&this.i6()?this.Ov(this.Dv()+t):this.ll+=t}Dv(){if(this.i6()){let t=this.ll,s=this.ZRt,i=this.BN(),e=this.lEt();return 0===e?t*=s.cRt():(t=t*s.cRt()*Math.cos(e),this.t6()&&(t+=this.al*s.uRt()*Math.sin(e))),i.Dv()+t}return this.ll}cN(t,s){if(t=+t,s=+s,this.fEt()){const i=this.t6(),e=this.i6(),h=this.ZRt,r=t-this.Av(),n=s-this.Dv(),o=-this.lEt();if(0==o)i?this.al+=r/h.uRt():this.al=t,e?this.ll+=n/h.cRt():this.ll=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.al+=e?(l*r-a*n)/h.uRt():l*r/h.uRt():this.al=t,e?this.ll+=i?(a*r+l*n)/h.cRt():l*n/h.cRt():this.ll=s}}else this.al=t,this.ll=s}dEt(){return[this.Av(),this.Dv()]}pN(t,s){t=+t,s=+s,this.fEt()?this.cN(this.Av()+t,this.Dv()+s):(this.al+=t,this.ll+=s)}Evt(t,s){return this.Av()===t&&this.Dv()===s}Bv(t){if(t=+t,this.u6()&&(t-=this.BN().Lv()),this.Sv!==t){this.Sv=t,this.pEt();const s=this.WD();0!==this.Sv&&s.s9(),s.zD(this)}}pEt(){if(this.aEt(),this.Bq()){const i=this.W$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.u6()&&e.pEt()}}}Pnt(t){this.Bv(this.Lv()+t)}Lv(){return this.u6()?this.BN().Lv()+this.Sv:this.Sv}gN(){return this.WD().Lv()+this.Lv()}kit(){const t=this.lj().WL().Mbt();return t<2&&this.lj().A6().kit()}Fm(t){if(t=+t,this.h6()){const s=this._m();0===s?this.DRt=Number.EPSILON:this.DRt*=t/s}else this.DRt=t;this.mEt()}hg(t,s){t=+t,!s&&this.h6()?this.Fm(this._m()+t):this.DRt+=t,this.mEt()}_m(){if(this.h6()){const t=this.BN(),s=t._m(),i=t.dnt().fnt();return i===Number.EPSILON?(this.dnt().fnt()+s)*this.DRt:s*this.DRt}return this.DRt}Im(t){if(t=+t,this.n6()){const s=this.Om();0===s?this.ORt=Number.EPSILON:this.ORt*=t/s}else this.ORt=t;this.mEt()}ynt(t,s){t=+t,!s&&this.n6()?this.Im(this.Om()+t):this.ORt+=t,this.mEt()}Om(){if(this.n6()){const t=this.BN(),s=t.Om(),i=t.dnt().mnt();return i===Number.EPSILON?(this.dnt().mnt()+s)*this.ORt:s*this.ORt}return this.ORt}wC(t,s){if(t=+t,s=+s,this.h6()){const i=this._m();0===i?this.DRt=Number.EPSILON:this.DRt*=t/i}else this.DRt=t;if(this.n6()){const e=this.Om();0===e?this.ORt=Number.EPSILON:this.ORt*=s/e}else this.ORt=s;this.mEt()}mc(){return[this._m(),this.Om()]}fq(){return this.R2}gEt(t){if(t<0)throw new RangeError("invalid depth");this.R2=t}yEt(){if(this.KN()){const t=this.ZRt;return Math.min(t.uRt(),t.cRt())}return 1}vL(){return 0!=(128&this.Ubt)}y5(t){t=+t,this.vL()&&(this.a6()&&(t-=this.BN().w5()),t=d.Tr(t),this.ta!==t)&&(this.ta=t,this.mEt())}wnt(t){0!=(t=+t)&&this.vL()&&(this.ta=d.Tr(this.ta+t),this.mEt())}mEt(){if(this.Ubt|=1<<18,this.Bq()){const i=this.W$();for(let t=0,s=i.length;t<s;t++)i[t].mEt()}}w5(){return this.a6()&&this.vL()?this.uEt(d.Tr(this.BN().cEt()+this.ta)):this.ta}cEt(){return this.a6()&&this.vL()?d.Tr(this.BN().cEt()+this.ta):this.ta}uEt(t){return this.h6()&&this.WN()._m()<0&&(t=d.Tr(d.Lr(t,this.WN().w5()+Math.PI))),this.n6()&&this.WN().Om()<0?d.Lr(t,this.WN().w5()):t}wEt(){const t=this.BN();return!!(this.h6()&&t._m()<0)||!!(this.n6()&&t.Om()<0)}SEt(){const t=this.BN();return!!(this.h6()&&t._m()<0&&this.n6()&&t.Om()<0)}bEt(){const t=this.Ubt;if(0!=(t&1<<18)){const s=this.w5();this.LRt=Math.sin(s),this.BRt=Math.cos(s),this.Ubt=-262145&t}}Ovt(){return this.bEt(),this.LRt}Dvt(){return this.bEt(),this.BRt}_nt(t){this.NRt=+t}Tnt(t){this.NRt+=+t}bW(){return this.NRt}Cnt(t){this.WRt=+t}Int(t){this.WRt+=+t}MW(){return this.WRt}hEt(t){this.wv.equals(t)||(this.wv===i?(this.wv=d.dr(d.Yo,t),this.XRt=d.dr(d.Yo,t),this.XRt.Ra()):t._a(1,1,1,1)?(this.wv=i,this.XRt=i):(this.wv.set(t),this.XRt.set(t),this.XRt.Ra()),this.aEt())}YR(t){if(t=d.Gr(+t,0,1),this.f6()){if(this.dnt().sMt()===t)return;this.dnt().lRt(t),t=this.qR()}else if(this.wv.a===t)return;this.vEt(t)}MEt(){if(this.Bq()){const i=this.W$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.vEt(e.qR())}}}vEt(t){f.ma(this.wv),f.a=t,this.hEt(f),this.MEt()}vnt(t){this.f6()?this.YR(this.dnt().sMt()+t):this.YR(this.qR()+t)}qR(){return this.f6()?this.BN().qR()*this.dnt().sMt():this.wv.a}TN(t){this.wv.Ga(t)||(f.ma(t),f.a=this.qR(),this.hEt(f))}tnt(t,s,i){f.ra(t,s,i),this.TN(f)}xEt(t,s,i){0===t&&0===s&&0===i||(f.ma(this.wv),f.r+=t,f.g+=s,f.b+=i,this.TN(f))}GN(){return this.wv}vz(){return this.XRt}g6(){return 0!=(512&this.Ubt)}GEt(t){this.TEt(512,t)}t6(){return 0!=(1024&this.Ubt)}_Et(t){this.TEt(1024,t)}i6(){return 0!=(2048&this.Ubt)}fEt(){return 0!=(3072&this.Ubt)}IEt(t){this.TEt(2048,t)}h6(){return 0!=(4096&this.Ubt)}CEt(t){this.TEt(4096,t)}n6(){return 0!=(8192&this.Ubt)}PEt(t){this.TEt(8192,t)}a6(){return 0!=(16384&this.Ubt)}REt(t){this.TEt(16384,t)}u6(){return 0!=(32768&this.Ubt)}EEt(t){this.TEt(32768,t)}f6(){return 0!=(this.Ubt&1<<22)}AEt(t){this.TEt(1<<22,t)}p6(){return 0!=(this.Ubt&1<<23)}FEt(t){this.TEt(1<<23,t)}kEt(){this.Ubt&=-12647937}XN(t,s){if(t===this)return!1;if(t.KN())return!1;if(this.DEt(t))return!1;if(this.OEt(t))return!1;const i=t.Av(),e=t.Dv(),h=t._m(),r=t.Om(),n=t.w5(),o=t.Lv(),a=t.qR(),l=(t.LEt(this),t._Et(s.QN),t.IEt(s.s6),t.CEt(s.e6),t.PEt(s.r6),t.REt(s.o6),t.EEt(s.l6),t.AEt(s.c6),t.FEt(s.d6),t.GEt(s.m6),i-this.Av()),u=e-this.Dv(),c=-this.w5(),f=Math.cos(c),d=Math.sin(c);if(s.QN&&(s.o6?t.al=l*f-u*d:t.al=l,s.e6)){const p=this._m()/this.ZRt.fnt();0!=p&&(t.al/=p)}if(s.s6&&(s.o6?t.ll=l*d+u*f:t.ll=u,s.r6)){const m=this.Om()/this.ZRt.mnt();0!=m&&(t.ll/=m)}if(s.e6){const g=this._m();0===g||g===Number.EPSILON?(t.DRt=1,t.ZRt.oRt(1)):(t.DRt=h/this._m(),t.ZRt.oRt(t.DRt))}if(s.r6){const y=this.Om();0===y||y===Number.EPSILON?(t.ORt=1,t.ZRt.aRt(1)):(t.ORt=r/this.Om(),t.ZRt.aRt(t.ORt))}return s.o6&&(t.ta=n-this.w5()),s.l6&&(t.Sv=o-this.Lv()),s.c6&&t.ZRt.lRt(a),s.d6&&t.sB(this.eB()),this.BEt(t),this.uN(),this.MEt(),!0}$N(t){if(t.BN()===this){const s=t.Av(),i=t.Dv(),e=t._m(),h=t.Om(),r=t.w5(),n=t.Lv(),o=t.qR();t.LEt(null),t.kEt(),t.cN(s,i),t.wC(e,h),t.y5(r),t.Bv(n),t.YR(o),this.NEt(t),this.uN()}}WEt(){return this.QRt}jEt(){this.VEt();const t=[...this.children()];for(const i of t)this.$N(i);const s=this.BN();s&&s.$N(this),this.kEt()}VEt(){if(this.UEt(),!this.QPt){const s=[...this.children()];s.length&&(this.QPt=[],this.tRt=new WeakMap);let t=0;for(const i of s){const e=i.lj();this.QPt.push(e),this.tRt.set(e,t),t++}}const t=this.BN();t&&t.VEt()}UEt(){if(-1===this.QRt){const t=[...this.jN()];this.QRt=t.length;for(const i of t)i.UEt();const s=[...this.children()];for(const e of s)e.UEt()}}eEt(){this.QPt&&(this.QPt.length=0),this.QPt=null,this.tRt=null;const t=this.BN();t&&t.eEt(),this.QRt=-1}KN(){return null!==this.BN()}BN(){const t=this.ZRt;return null!==t?t.BN():null}WN(){let t=this;for(;t.KN();)t=t.BN();return t}*jN(){let t=this.BN();for(;t;)yield t,t=t.BN()}bPt(t){return this.W$().includes(t)}Bq(){const t=this.ZRt;return null!==t&&t.Bq()}W$(){const t=this.ZRt;return null!==t?t.W$():e}children(){return this.W$()}*JN(){for(const t of this.children())yield t,yield*t.JN()}UN(){return this.W$().length}EMt(){return[...this.JN()].length}zN(t){const s=this.W$();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}GPt(s){if(s){const i=this.W$();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}HEt(t){this.ZRt||(this.ZRt=d.dr(d.V$,this)),t&&this.ZRt.hRt(t)}dnt(){return this.ZRt}iEt(){this.ZRt&&(this.ZRt.pr(),this.ZRt=null)}LEt(t){t?(t.HEt(null),this.HEt(t)):(this.ZRt&&this.ZRt.hRt(null),this.Bq()||this.iEt())}OEt(t){if(!this.KN())return!1;const s=this.BN();return s===t||s.OEt(t)}DEt(t){if(this.bPt(t))return!0;for(const s of this.W$())if(s.DEt(t))return!0;return!1}BEt(t){this.ZRt.W$().push(t)}NEt(t){const s=this.ZRt.W$(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.KN()||this.iEt(),t.Bq()||t.iEt()}_Pt(){const t=g.get(this);return t?t.nEt:null}zEt(){const t=g.get(this);return t?t.oEt:NaN}Lq(){const t=a.get(this);return d.we(t)?t:NaN}JEt(t){a.set(this,t)}qEt(){this.TEt(1<<19,!0),this.aEt()}aEt(){if(m){const s=this.wf.Kb();this.$Rt&&s.MS(this.$Rt);let t;t=0!=(this.Ubt&1<<19)?s.hS()||"<point>":s.sS()||"<default>",this.$Rt=s.wS(t,this.IB(),this.XRt,this.Lv())}}bq(){return this.$Rt}b9(){return this.wv===i}vv(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.IB()!==t&&(this.Ubt=this.Ubt&~(31<<26)|t<<26,this.aEt())}IB(){return(this.Ubt&31<<26)>>26}HD(t,s){const i=s&&this.ARt!==t;i&&this.Qz(),this.Fft.TCt(this,this.ARt,t),this.ARt=t,i&&this.XEt(),0!==this.Lv()&&this.ARt.s9()}WD(){return this.ARt}vD(){return this.WD().vD()}e9(t){this.FRt=0|t}jD(){return this.ARt.dJ(),this.FRt}yJ(t){this.kRt=0|t}oV(){return this.ARt.mJ(),this.kRt}QH(){return this.FRt}TEt(t,s){s?this.Ubt|=t:this.Ubt&=~t}eB(){return 0!=(1&this.Ubt)}sB(t){if(this.TEt(1,t),this.Bq())for(const s of this.W$())s.p6()&&s.sB(t)}DN(){return 0!=(8&this.Ubt)}ON(t){t=!!t,this.DN()!==t&&(this.TEt(8,t),t?this.uN():this.$Et())}YEt(t,s){if(this.TEt(32,t),this.qRt&&this.qRt.clear(),s.trim()){this.qRt||(this.qRt=new Set);for(const i of s.split(" "))i&&this.qRt.add(i.toLowerCase())}else this.qRt=null}KEt(t){const s=0!=(32&this.Ubt),i=this.qRt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}uN(){if(this.Ubt|=65554,this.Fft.MCt(!0),this.wf.JD(),this.ARt.Fz()&&(this.ZEt(this.jRt,this.VRt,!0),this.Ubt&=-3,this.XEt()),0!=(4&this.Ubt)&&this.Ii.Kf().dispatchEvent(s),null!==this.ZRt){const i=this.ZRt.W$();for(let t=0,s=i.length;t<s;++t)i[t].uN()}}ZEt(t,s,i){const e=this.Av(),h=this.Dv(),r=this._m(),n=this.Om(),o=this.w5();t.xl(e-this.NRt*r,h-this.WRt*n,r,n),i&&this.G6()&&this.QEt(t),0===o?s.Cu(t):(t.offset(-e,-h),s.Ru(t,this.Ovt(),this.Dvt()),s.offset(e,h),s.Eu(t)),t.normalize()}tAt(){const t=this.Ubt;0!=(2&t)&&(this.ZEt(this.jRt,this.VRt,!0),this.Ubt=-3&t)}wN(){return this.tAt(),this.jRt}bN(){return this.tAt(),this.VRt}sAt(t){const s=this.Av(),i=this.Dv(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}iAt(t){this.jRt.I(t),this.VRt.Cu(this.jRt),this.Ubt&=-3,this.GCt(),this.XEt()}eAt(t){this.TEt(4,t)}hAt(){return 0!=(4&this.Ubt)}oq(t,s,i){return s&&0!==this.fq()?this.uq(this.WD().lq()):0===this.Lv()||i?t.su(this.wN()):this.rAt()}rAt(){const t=this.WD(),s=this.gN();return!(s>=t.B9())&&(t.O9(s,r),r.su(this.wN()))}uq(t){const s=this.wN(),i=s.El(),e=s.Fl(),h=s.Al(),r=s.kl(),n=this.gN(),o=n+this.fq();return t.Ly(i,h,n,e,r,o)}MN(){const t=this.WD();if(t.K9())return this.uq(t.lq());{const s=t.vD();return this.oq(t.EB(),s.nq(),s.z5())}}yq(t){this.TEt(1<<20,t)}gq(t){this.TEt(1<<21,t)}nAt(){return 0!=(this.Ubt&1<<20)}oAt(){return 0!=(this.Ubt&1<<21)}aAt(t){this.zRt=t,this.lAt(),this.G6()&&(this.tEt.uAt=null)}cAt(){return this.zRt}fAt(){return null!==this.zRt||this.G6()}dAt(){return this.pAt(this._m(),this.Om(),this.w5(),this.Ovt(),this.Dvt())}mAt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.pAt(t,s,i,e,h)}pAt(h,r,t,n,o){let s=this.JRt;null===s&&(s={sEt:d.dr(d.ju),width:NaN,height:NaN,angle:NaN},this.JRt=s);const a=s.sEt;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.zRt;if(this.G6()){let t=this.bW(),s=this.MW(),i=this.T6(),e=this.tEt.uAt;e||(l?(u.I(l),u.offset(t,s)):u.$u(),e=i.MM(u),this.tEt.uAt=e),i.xM(e,a),a.offset(-t,-s),a.Qu(h,r,n,o)}else l?(a.I(l),a.Qu(h,r,n,o)):a.Zu(this.bN(),-this.Av(),-this.Dv());s.width=h,s.height=r,s.angle=t}return a}lAt(){this.gAt(!0);const t=this.JRt;null!==t&&(t.width=NaN)}w6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.lj().WL().PL())throw new Error("object does not support mesh");this.b6(),this.tEt={yAt:d.dr(d.Ty.Yv,t,s),wAt:d.dr(d.Ty.Yv,t,s),uAt:null}}G6(){return null!==this.tEt}T6(){if(this.G6())return this.tEt.yAt;throw new Error("no mesh")}SAt(){if(this.G6())return this.tEt.wAt;throw new Error("no mesh")}bAt(t){this.TEt(65536,t)}vAt(){return 0!=(65536&this.Ubt)}gAt(t){this.TEt(1<<17,t)}MAt(){return 0!=(this.Ubt&1<<17)}QEt(t){const s=this.tEt.yAt,i=Math.min(s.fM(),0),e=Math.min(s.dM(),0),h=Math.max(s.pM(),1),r=Math.max(s.mM(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.jl((h-1)*n),t.Vl((r-1)*o),this.R2=s.gM()}b6(){this.tEt&&(this.tEt.yAt.pr(),this.tEt.wAt.pr(),this.tEt=null,this.lAt())}M6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.bB,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.G6())return!1;const u=this.T6(),c=u.wM(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Lv()!==o&&(c.Bv(o),f=!0),h&&(r+=t/(u.oM()-1),n+=s/(u.aM()-1)),a=-1!==a||h?(h&&(a+=t/(u.oM()-1)),d.Gr(a,0,1)):c.Nv(),l=-1!==l||h?(h&&(l+=s/(u.aM()-1)),d.Gr(l,0,1)):c.jv(),c.Av()===r&&c.Dv()===n&&c.Nv()===a&&c.jv()===l?f:(c.Fv(r),c.Ov(n),c.Wv(a),c.Vv(l),this.lAt(),!0)}oPt(){return this.Ii.oPt()}LN(t,s){return!!this.wN().eu(t,s)&&!!this.bN().eu(t,s)&&(this.oPt()?this.Ii.A6().zGt(t,s):!this.fAt()||this.dAt().eu(t-this.Av(),s-this.Dv()))}xAt(){return 0!=(16&this.Ubt)}GCt(){if(this.xAt()&&this.DN()&&0==(256&this.Ubt)){const t=this.wN(),s=this.Fft.vCt(),i=this.URt;if(r.set(s.g7(t.El()),s.y7(t.Al()),s.g7(t.Fl()),s.y7(t.kl())),!i.equals(r)){const e=this.Ii;i===h?(s.w7(e,null,r),this.URt=d.dr(d.Rect,r)):(s.w7(e,i,r),i.I(r)),this.Ubt&=-17}}}GAt(){this.Ubt|=16}$Et(){const t=this.URt;t!==h&&(this.Fft.vCt().w7(this.Ii,t,null),this.URt=h)}XEt(){const t=this.WD();if(t.Fz()&&0==(256&this.Ubt)){const s=t.M9(),i=this.wN(),e=this.HRt;if(r.set(s.g7(i.El()),s.y7(i.Al()),s.g7(i.Fl()),s.y7(i.kl())),!e.equals(r)){const h=this.Ii;e===o?(s.w7(h,null,r),this.HRt=d.dr(d.Rect,r)):(s.w7(h,e,r),e.I(r)),t.x9()}}}Qz(){const t=this.HRt;t!==o&&(this.WD().M9().w7(this.Ii,t,null),this.HRt=o)}pJ(){return this.HRt}IN(){const t=this.Ii,s=this.ARt,i=s.UD();i.length&&i.at(-1)===t||(s.Zz(t,!1),s.$z(t,!1),this.wf.JD())}PN(){const t=this.Ii,s=this.ARt,i=s.UD();i.length&&i[0]===t||(s.Zz(t,!1),s.Kz(t,!1),this.wf.JD())}EN(t){const s=this.Ii,i=this.ARt;if(i.vD()!==t.vD())throw new Error("layer from different layout");t!==i&&(i.Zz(s,!0),this.HD(t),t.$z(s,!0),this.wf.JD())}FN(t,s){let i=this.Ii,e=!1,h=this.ARt;if(t.o4()!==i.o4()){const r=t.ND();if(!r)throw new Error("expected world instance");const n=r.WD(),o=(h.HF()!==n.HF()&&(h.Zz(i,!0),this.HD(n),n.$z(i,!0),e=!0),n.bJ(i,t,!!s));(e||o)&&this.wf.JD()}}aN(){return this.YRt}TAt(t){this.TEt(64,t)}IJ(){return 0!=(64&this.Ubt)}kq(t,s=null){const i={x:this.Av(),y:this.Dv(),w:this._m(),h:this.Om(),l:this.WD().g9(),zi:this.jD()},e=(0!==this.Lv()&&(i.ze=this.Lv()),0!==this.w5()&&(i.a=this.cEt()),this.b9()||(i.c=this.wv.toJSON()),.5!==this.bW()&&(i.oX=this.bW()),.5!==this.MW()&&(i.oY=this.MW()),0!==this.IB()&&(i.bm=this.IB()),this.eB()||(i.v=this.eB()),this.DN()||(i.ce=this.DN()),this.hAt()&&(i.be=this.hAt()),this.YRt&&(i.fx=this.YRt.kq()),0!=(32&this.Ubt));return e&&(i.sfi=e),this.qRt&&(i.sft=[...this.qRt].join(" ")),this.ZRt&&"visual-state"!==t&&(i.sgi=this.ZRt.kq(t,s),g.has(this))&&(i.sgcd=g.get(this).nEt,i.sgzid=g.get(this).oEt),this.G6()&&(i.mesh=this.T6().zv()),i}wRt(){return{x:this.al,y:this.ll,z:this.Sv,w:this.DRt,h:this.ORt,a:this.ta,sgi:this.dnt()?this.dnt().dRt():null}}MRt(t){t&&(this.al=t.x,this.ll=t.y,this.Sv=t.z,this.DRt=t.w,this.ORt=t.h,this.ta=t.a,t.sgi&&this.dnt()&&this.dnt().Dq(t.sgi),this.mEt(),this.uN())}FCt(){this.eEt(),this.jEt(),this.HEt(null),this.ZRt&&this.ZRt.bRt(this.QPt,this.tRt)}KY(t){"visual-state"!==t&&this.jEt()}QY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ubt)&&this.ZRt.QY(t.sgi,i)}UPt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ubt)&&(this.ZRt.bRt(null,null),this.eEt(),this.uN())}Dq(t,s){if(m=!1,this.Fv(t.x),this.Ov(t.y),this.Fm(t.w),this.Im(t.h),this.e9(t.zi),this.Bv(t.hasOwnProperty("ze")?t.ze:0),this.y5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Ka(t.c):t.hasOwnProperty("o")?(f.ma(this.wv),f.a=t.o):f.ea(1,1,1,1),this.hEt(f),this._nt(t.hasOwnProperty("oX")?t.oX:.5),this.Cnt(t.hasOwnProperty("oY")?t.oY:.5),this.vv(t.hasOwnProperty("bm")?t.bm:0),this.sB(!t.hasOwnProperty("v")||t.v),this.ON(!t.hasOwnProperty("ce")||t.ce),this.eAt(!!t.hasOwnProperty("be")&&t.be),this.YEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.YRt&&t.hasOwnProperty("fx")&&this.YRt.Dq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.QPt)for(const i of this.QPt)i.dV()||this.wf.t4(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.HEt(null);const e=this.ZRt,h=t.sgi;e.Dq(h),e.bRt(this.QPt,this.tRt),t.sgcd&&d.we(t.sgzid)&&g.set(this,{nEt:t.sgcd,oEt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.w6(r.cols,r.rows),this.T6().Jv(r)}else this.b6();this.uN(),m=!0,this.aEt(),"visual-state"!==s&&this.wf._At(this.lj(),t)}}}{const Ma=self.Ws;Ma.fIt=class extends Ma.ur{constructor(t,s){super();const i=t.nO(),e=i.Hyt(s[1]),h=(i.IAt().WTt(e),this.wf=i,this.Fft=t,this.STt=Ma.fL.q6(e),this.hGt=null,this.CAt=null,this.U_t=e.Instance,this.k7=s[2],this.vr=s[0],this.Iwt=this.wf.a1t(s[3]),this.STt.Mbt());if(h<2&&(this.hGt=Ma.dr(e.PIt,this),!(this.hGt instanceof Ma.wTt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ma.fL.Wxt(this,h),2<=h){const r=e.PIt??globalThis.GV;if(this.CAt=new r,!(this.CAt instanceof globalThis.GV))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.CAt=new globalThis.z6;Ma.fL.jxt(h),this.Oxt()}static Cx(t,s){return Ma.dr(Ma.fIt,t,s)}pr(){this.wf=null,this.STt=null,this.hGt&&(this.hGt.pr(),this.hGt=null),this.U_t=null}wvt(){return this.hGt}Oxt(){this.hGt?this.hGt.Oxt():this.CAt&&this.CAt.Ij()}nO(){return this.wf}qB(){return this.Fft}N6(){return this.STt}KIt(){return this.U_t}uf(){return this.vr}g9(){return this.k7}j6(){return this.CAt}a1t(){return this.Iwt}}}{const xa=self.Ws,Ga=self.L6;xa.JCt=class extends xa.ur{constructor(t){super(),this.wf=t.runtime,this.nSt=t.W6,this.STt=this.nSt.N6(),this.Ii=t.U6,this.wy=t.index,this.BCt=null,this.NCt=null,this.STt.$z(this.Ii)}pr(){this.NCt&&(this.NCt.ZB(),this.NCt=null),this.STt.Zz(this.Ii),this.BCt&&(this.BCt.pr(),this.BCt=null),this.wf=null,this.nSt=null,this.STt=null,this.Ii=null}JIt(t){if(this.BCt)throw new Error("already got sdk instance");const s=this.N6().Mbt();if(s<2){if(this.BCt=xa.dr(this.nSt.KIt(),this,t),!(this.BCt instanceof xa.bTt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.N6().Lxt();this.Nxt(i.Instance,t)}}A6(){return this.BCt??this.NCt}H6(){return this.Ii}nO(){return this.wf}V6(){return this.nSt}N6(){return this.STt}Wrt(){return this.wy}GTt(){this.BCt?this.BCt.GTt():this.NCt.CV()}CTt(t,s){this.BCt&&this.BCt.CTt(t,s)}VPt(){return this.BCt?this.BCt.TGt():this.NCt.q4()}zv(t="full"){return this.BCt?this.BCt.zv(t):this.NCt.X4(t)}Jv(t,s="full"){if(this.BCt)return this.BCt.Jv(t,s);this.NCt.Y4(t,s)}static PAt(t,s,i){let e=globalThis.TV,h,r;h=s instanceof e?t.E5(s):s.xTt(),r=i instanceof e?t.E5(i):i.xTt();const n=h.H6(),o=r.H6(),a=n.qB().HF(),l=o.qB().HF();if(a!==l)return a-l;const u=n.RPt(),c=o.RPt();return u!==c?u-c:h.Wrt()-r.Wrt()}Nxt(t,s){const i=Ga,e=t??this.BCt.Lxt(),h=e||i,r=this.N6().Mbt();if(xa.fL.Wxt(this,r),xa.fL.jTt(s),this.NCt=new h,xa.fL.VTt(),xa.fL.jxt(r),!e||this.NCt instanceof i)return this.NCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}oGt(){return this.NCt||this.Nxt()}PGt(){return!!this.NCt}}}{const Ta=self.Ws;Ta.Sz=class extends Ta.ur{constructor(t,s){super(),this.Qv=t,this.RAt=[],this.EAt=[],this.AAt=new Map,this.FAt=[],this.kAt=[],this.DAt=new Set,this.Hb=!0;for(const i of s){const e=Ta.dr(Ta.OAt,this,i,this.RAt.length);this.RAt.push(e),this.AAt.set(e.uf().toLowerCase(),e),3<=i.length&&this.FAt.push(this.LAt(e,i[2]))}this.nO().BAt(this)}pr(){this.nO().NAt(this);for(const t of this.kAt)t.pr();Ta.Hn(this.kAt),Ta.Hn(this.RAt),Ta.Hn(this.EAt),this.AAt.clear(),Ta.Hn(this.FAt),this.Qv=null}WAt(t){this.DAt.add(t)}jAt(t){this.DAt.delete(t)}VAt(t){t.Xw()&&(this.kAt=this.RAt.map(t=>{const s=t.IG();return 0<s.GetCustomParametersByteSize()?Ta.dr(Ta.Ty.WebGPUEffectCustomParamsBuffer,s):null}),this.UAt());for(const s of this.DAt)s.VAt(t)}HIt(t){if(t.length){this.RAt=t.concat(this.RAt);for(const s of t)this.AAt.set(s.uf().toLowerCase(),s);for(let t=0,s=this.RAt.length;t<s;++t)this.RAt[t].c9(t)}}LAt(t,s){t.HAt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ta.dr(Ta.Yo);h.Ka(e),i[t]=h}}return i}lM(){return this.Qv}nO(){return this.Qv.nO()}K6(){Ta.Hn(this.EAt);let t=!0;for(const s of this.RAt)s.Rmt()&&(this.EAt.push(s),s.IG().rv()||(t=!1));this.Hb=t}c5(){return this.RAt}rCt(){return 0<this.RAt.length}qht(t){return this.AAt.get(t.toLowerCase())||null}zAt(t){if((t=Math.floor(+t))<0||t>=this.RAt.length)throw new RangeError("invalid effect type index");return this.RAt[t]}X6(t){return this.zAt(t).Rmt()}Y6(t,s){this.zAt(t).HAt(s)}v9(){return this.EAt}IJ(){return 0<this.EAt.length}rv(){return this.Hb}Jht(t){return this.FAt[t]}xz(t){return(t<this.kAt.length?this.kAt:this.FAt)[t]}Z6(t,s){if(t<0||t>=this.FAt.length)return null;const i=this.FAt[t];return s<0||s>=i.length?null:i[s]}Q6(t,s,i){if(t<0||t>=this.FAt.length)return!1;const e=this.FAt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ta.Yo){if(h.Ga(i))return!1;h.ma(i)}else{if(h===i)return!1;e[s]=i}return t<this.kAt.length&&this.kAt[t].SetParameterValue(s,i),!0}UAt(){const i=this.FAt,e=this.kAt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static JAt(t){return t&&t instanceof Ta.Yo?{t:"color",v:t.toJSON()}:t}static qAt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ta.dr(Ta.Yo);return i.Ka(t.v),i}}}static XAt(t){return t.map(Ta.Sz.JAt)}static $At(t){return t.map(Ta.Sz.qAt)}zv(){return this.RAt.map(t=>({name:t.uf(),active:t.Rmt(),params:Ta.Sz.XAt(this.FAt[t.HF()])}))}Jv(t){for(const s of t){const i=this.qht(s.name);i&&(i.HAt(s.active),this.FAt[i.HF()]=Ta.Sz.$At(s.params))}this.K6(),this.UAt()}}}{const _a=self.Ws;_a.OAt=class extends _a.ur{constructor(t,s,i){super(),this.wz=t,this.bf=s[0],this.vr=s[1],this.wy=i,this.pv=null,this.y0=!0}pr(){this.wz=null,this.pv=null}UIt(t){const s=_a.dr(_a.OAt,t,[this.bf,this.vr],-1);return s.pv=this.pv,s.y0=this.y0,s}VAt(t){const s=t.tS(this.bf);if(!s)throw new Error("failed to find shader program '"+this.bf+"'");this.pv=s}u5(){return this.wz}uf(){return this.vr}c9(t){this.wy=t}HF(){return this.wy}lM(){return this.wz.lM()}nO(){return this.wz.nO()}HAt(t){this.y0=!!t}Rmt(){return this.y0}IG(){return this.pv}YAt(){const i=[];for(let t=0,s=this.pv.CG();t<s;++t){const e=this.pv.PG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(_a.dr(_a.Yo,1,1,1,1))}}return i}}}{const Ia=self.Ws;Ia.KRt=class extends Ia.ur{constructor(t,s){super(),this.Ii=t,this.KAt=s,this.wz=t.qB().u5(),this.ZAt=!0,this.Tz=!0,this.QAt=!1,this.t3t=!1,this.s3t=!1,this.i3t=!1,this.WF=Ia.dr(Ia.Ty.OA,t.nO().$O().bz(),{TA:(t,s)=>{const i=s.AF(),e=i.ND();t.Mv(e.vz()),t.OS(e.gN()),i.bM(t),t.OS(0)},_A:t=>{const s=t.WGt(),[i,e]=t.NGt();return{TF:s,_F:i,IF:e}},IA:t=>this.xz(t)}),this.e3t=[],this.EAt=[],this.Hb=!0,this.FAt=[],this.kAt=[],this.VAt(t.nO().Kb());for(let t=0,s=this.wz.c5().length;t<s;++t)this.e3t.push(!0);this.K6(),this.wz.WAt(this)}pr(){this.wz.jAt(this);for(const t of this.kAt)t&&t.pr();Ia.Hn(this.kAt),this.WF.pr(),this.WF=null,Ia.Hn(this.e3t),Ia.Hn(this.EAt),Ia.Hn(this.FAt),this.Ii=null,this.wz=null}VAt(t){t.Xw()&&(this.kAt=this.wz.c5().map(t=>{const s=t.IG();return 0<s.GetCustomParametersByteSize()?Ia.dr(Ia.Ty.WebGPUEffectCustomParamsBuffer,s):null}))}rEt(t){let s=0;for(const i of t)this.FAt.push(this.LAt(s,i)),++s;this.UAt(),this.K6()}LAt(t,s){this.e3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ia.dr(Ia.Yo);h.Ka(e),i[t]=h}}return i}QCt(){for(const t of this.wz.c5())this.FAt.push(t.YAt());this.UAt()}lM(){return this.Qv}u5(){return this.wz}UF(){return this.S9(),this.WF}nO(){return this.Ii.nO()}K6(){Ia.Hn(this.EAt);let t=this.KAt,i=this.wz.c5(),e=this.EAt,h=this.e3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.IG().rv()||(r=!1)}this.Hb=r,t.TAt(!!e.length),this.ZAt=!0}S9(){const t=this.Ii,s=this.KAt,i=s.b9(),e=t.WL().TL(),h=0!==s.w5()||0!==s.WD().w5()||s._m()<0||s.Om()<0,r=t.UGt(),n=t.hv();(this.ZAt||i!==this.Tz||e!==this.QAt||h!==this.t3t||r!==this.s3t||n!==this.i3t||this.WF.C3())&&(this.WF.P3(this.EAt.map(t=>t.IG()),{PA:this.EAt.map(t=>t.HF()),RA:!i||n,AA:e,FA:r,kA:h}),this.ZAt=!1,this.Tz=i,this.QAt=e,this.t3t=h,this.s3t=r,this.i3t=n)}v9(){return this.EAt}Jht(t){return this.FAt[t]}xz(t){return(t<this.kAt.length?this.kAt:this.FAt)[t]}Z6(t,s){if(t<0||t>=this.FAt.length)return null;const i=this.FAt[t];return s<0||s>=i.length?null:i[s]}Q6(t,s,i){if(t<0||t>=this.FAt.length)return!1;const e=this.FAt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ia.Yo){if(h.Ga(i))return!1;h.ma(i)}else{if(h===i)return!1;e[s]=i}return t<this.kAt.length&&this.kAt[t].SetParameterValue(s,i),!0}UAt(){const i=this.FAt,e=this.kAt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}rv(){return this.Hb}h3t(){return this.EAt.some(t=>t.IG().av())}X6(t){return this.e3t[t]}Y6(t,s){this.e3t[t]=!!s}c5(){return this.wz.c5()}kq(){return this.wz.c5().map(t=>({name:t.uf(),active:this.e3t[t.HF()],params:Ia.Sz.XAt(this.FAt[t.HF()])}))}Dq(t){for(const s of t){const i=this.wz.qht(s.name);i&&(this.e3t[i.HF()]=s.active,this.FAt[i.HF()]=Ia.Sz.$At(s.params))}this.K6(),this.UAt()}}}{let _=self.Ws,r=[],b=[],n=[],v=_.dr(_.ju),w=_.dr(_.ju),M=_.dr(_.ou),d=_.dr(_.Rect),p=_.dr(_.Rect),m=null,g=null,y=null;_.r3t=class extends _.ur{constructor(t){super(),this.wf=t,this.n3t=0,this.o3t=0,this.a3t=[],this.l3t=0,this.u3t=0,this.c3t=0,this.f3t=0,this.d3t=new self._O(this)}pr(){this.wf=null}nO(){return this.wf}YF(){return this.d3t}p3t(){this.u3t=this.l3t,this.l3t=0,this.f3t=this.c3t,this.c3t=0}m3t(){return this.u3t}g3t(){return this.f3t}y3t(t,s){const i=t.ND(),e=s.ND();i&&e&&i.DN()&&e.DN()&&this.a3t.push([t,s])}vMt(s,i,e){for(const[h,r]of this.a3t){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.IMt(i)&&!e.includes(t)&&e.push(t)}}MMt(t,s){if(this.a3t.length)for(const[i,e]of this.a3t)if(t===i&&s===e||t===e&&s===i)return!0;return!1}w3t(){_.Hn(this.a3t)}CO(t,s){if(!t||!s||t===s)return!1;const i=t.ND(),e=s.ND();if(!i.DN()||!e.DN())return!1;this.l3t++;const h=i.WD(),r=e.WD(),n=h.lJ(r);return n?this.S3t(i,e):this.b3t(i,e)}S3t(t,s){if(!t.wN().su(s.wN()))return!1;if(this.c3t++,!t.bN().Fu(s.bN()))return!1;if(t.oPt()&&s.oPt())return!1;if(t.oPt())return this.v3t(t,s);if(s.oPt())return this.v3t(s,t);if(!t.fAt()&&!s.fAt())return!0;const i=t.dAt(),e=s.dAt();return i.tc(e,s.Av()-t.Av(),s.Dv()-t.Dv())}b3t(i,e){const t=i.oPt(),s=e.oPt();if(t&&!s)return this.M3t(i,e);if(s&&!t)return this.M3t(e,i);if(s||t)return!1;{const h=i.WD(),r=e.WD(),n=(v.I(i.dAt()),w.I(e.dAt()),v.Ju());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.BB(l+i.Av(),u+i.Dv());n[t]=c,n[a]=f}const o=w.Ju();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.BB(p+e.Av(),m+e.Dv());o[t]=g,o[d]=y}return v.Yu(),w.Yu(),this.c3t++,v.tc(w,0,0)}}M3t(t,s){const i=t.WD(),e=s.WD(),h=(m=m||_.dr(_.ju),g=g||_.dr(_.Rect),y=y||_.dr(_.ou),s.Av()),r=s.Dv(),[n,o]=e.BB(h,r),[a,l]=i.kB(n,o),u=a-h,c=l-r;if(g.I(s.wN()),g.offset(u,c),!t.wN().su(g))return!1;if(y.I(s.bN()),y.offset(u,c),this.c3t++,!t.bN().Fu(y))return!1;m.I(s.dAt());const f=m.Ju();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Yu(),this.v3t(t,s,a,l,m,g,y)}v3t(t,e,s,i,h,r,n){const o=void 0!==r?r:e.wN(),a=t.Av(),l=t.Dv(),u=t.lj().A6(),c=void 0!==s?s:e.Av(),f=void 0!==i?i:e.Dv(),d=e.fAt(),p=void 0!==n?n:e.bN(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.l3t++,o.iu(y,a,l)&&(M.Cu(y),M.offset(a,l),M.Fu(p)))if(d){let t=void 0!==h?h:e.dAt(),s=c,i=f;void 0!==h&&(s=e.Av(),i=e.Dv());const w=g.GetPoly();if(w){if(this.c3t++,w.tc(t,s-(a+y.El()),i-(l+y.Al())))return _.Hn(m),!0}else if(v.Zu(M,0,0),v.tc(t,s,i))return _.Hn(m),!0}else{const S=g.GetPoly();if(!S)return _.Hn(m),!0;if(v.Zu(p,0,0),S.tc(v,-(a+y.El()),-(l+y.Al())))return _.Hn(m),!0}}return _.Hn(m),!1}x3t(t,o,a){const l=t.ZL(),s=this.wf.Pk();if(!s)throw new Error("cannot call outside event");const u=s.a0t(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.uB(),i.set(t,s)),s};if(l.zft()){a||(l.Zft(!1),_.Hn(l.Qft())),u&&_.Hn(l.t0t());for(const e of t.KL()){let h=e.ND(),r=h.WD();if(!(!c(r)||!h.MN())&&o.some(([t,s])=>{const[i,e]=r.kB(t,s,h.gN());return h.LN(i,e)})){if(a)return!1;l.Yft(e)}else u&&l.Kft(e)}}else{let i,e=!1,n=(!u||s.tyt(this.wf.Qdt())||this.wf.Mvt()&&!l.t0t().length&&l.Qft().length?i=l.Qft():(i=l.t0t(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.ND(),r=h.WD();if(!(!c(r)||!h.MN())&&o.some(([t,s])=>{const[i,e]=r.kB(t,s,h.gN());return h.LN(i,e)})){if(a)return!1;e?l.Yft(t):i[n++]=t}else e?i[n++]=t:u&&l.Kft(t)}a||(i.length=n)}return t.Dyt(),i.clear(),!!a||l.Jft()}G3t(t,s){if(t)for(const i of s._Ct())if(!t.lJ(i))return!1;return!0}vvt(t,s,i,e){if(s.a9())for(const h of s.Igt())this.G3t(t,h)?(h.xCt(),h.vCt().S7(i,e)):_.Kh(e,h.KL());else this.G3t(t,s)?(s.xCt(),s.vCt().S7(i,e)):_.Kh(e,s.KL())}BO(t,s,i,e){for(const h of s)this.vvt(t,h,i,e)}T3t(t,s,i){const e=this.wf.HTt();e&&this.BO(t,e.MK(),s,i)}_3t(t,s,i){const e=this.wf.zTt();e&&this.BO(t,e.MK(),s,i)}KEt(t,s){return t.uPt()&&(!s||s.ND().KEt(t.Cbt().get("solidTags")))}EO(t){const s=t.ND();this.T3t(s.WD(),s.wN(),r);for(const i of r)if(this.KEt(i,t)&&this.CO(t,i))return _.Hn(r),i;return _.Hn(r),null}I3t(t,s){this.T3t(null,t,r);for(const i of r)if(this.KEt(i,s)&&this.C3t(t,i))return _.Hn(r),i;return _.Hn(r),null}P3t(t,s){let i=null;s&&(i=n,_.Hn(i));const e=t.ND();this._3t(e.WD(),e.wN(),r);for(const h of r)if(h.fPt()&&this.CO(t,h)){if(!s)return _.Hn(r),h;i.push(h)}return _.Hn(r),i}R3t(s,i,e,h,r){h=h||50;const n=s.ND(),o=n.Av(),a=n.Dv();for(let t=0;t<h;++t)if(n.cN(o+i*t,a+e*t),n.uN(),!this.CO(s,r))return!0;return n.cN(o,a),n.uN(),!1}E3t(s,i,e,h,r,n){h=h||50;let o=s.ND(),a=o.Av(),l=o.Dv(),u=null,c=null;for(let t=0;t<h;++t)if(o.cN(a+i*t,l+e*t),o.uN(),!this.CO(s,u))if(u=this.EO(s))c=u;else if(r&&(u=n?this.CO(s,n)?n:null:this.P3t(s))&&(c=u),!u)return c&&this.A3t(s,i,e,c,16,!0),!0;return o.cN(a,l),o.uN(),!1}F3t(i,e,h,t){t=t||50;let r=i.ND(),n=r.Av(),o=r.Dv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.cN(n+e*s*u,o+h*s*u),r.uN(),!this.CO(i,a)){if(!(a=this.EO(i)))return l&&this.A3t(i,e*u,h*u,l,16,!0),!0;l=a}}return r.cN(n,o),r.uN(),!1}A3t(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.ND(),u=l.Av(),c=l.Dv();for(;n<=h;){const f=1/n;n*=2,l.pN(s*f*(o?1:-1),i*f*(o?1:-1)),l.uN(),this.CO(t,e)||r&&this.EO(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.Av(),c=l.Dv())}a&&(l.cN(u,c),l.uN())}k3t(i,t=100){let e=0,h=i.ND(),r=h.Av(),n=h.Dv(),o=0,a=this.EO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.cN(Math.floor(r+t*e),Math.floor(n+s*e)),h.uN(),!this.CO(i,a)&&!(a=this.EO(i)))return!0}return h.cN(r,n),h.uN(),!1}D3t(t,s,i,e){const h=t.ND(),r=h.Av(),n=h.Dv(),o=Math.max(10,_.Cr(s,i,r,n)),a=_.Rr(s,i,r,n),l=e||this.EO(t);if(!l)return _.Tr(a+Math.PI);let u=l,c=0,f=0,d=_._r(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.cN(s+Math.cos(G)*o,i+Math.sin(G)*o),h.uN(),!this.CO(t,u)&&!(u=e?null:this.EO(t))){c=G;break}}for(36===p&&(c=_.Tr(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.cN(s+Math.cos(T)*o,i+Math.sin(T)*o),h.uN(),!this.CO(t,u)&&!(u=e?null:this.EO(t))){f=T;break}}if(36===p&&(f=_.Tr(a+Math.PI)),h.cN(r,n),h.uN(),f===c)return f;let m=_.Er(f,c)/2,g;g=_.Fr(f,c)?_.Tr(c+m+Math.PI):_.Tr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return _.Rr(0,0,M,x)}O3t(t,s,i,e,h){if(!h)return!1;const r=h.ND();if(!r.DN())return!1;if(this.l3t++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.wN().su(d))return!1;if(h.oPt())return this.L3t(t,s,i,e,h,r);if(this.c3t++,!r.bN().Au(t,s,i,e))return!1;if(!r.fAt())return!0;const n=r.dAt();return n.Au(r.Av(),r.Dv(),t,s,i,e)}L3t(i,e,h,r,t,s){const n=s.Av(),o=s.Dv(),a=t.A6(),l=b;p.set(i,e,h,r),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.l3t++,d.iu(c,n,o)&&(M.Cu(c),M.offset(n,o),M.Au(i,e,h,r))){const f=u.GetPoly();if(!f)return _.Hn(l),!0;if(this.c3t++,f.Au(n+c.El(),o+c.Al(),i,e,h,r))return _.Hn(l),!0}}return _.Hn(l),!1}C3t(t,s){if(!s)return!1;const i=s.ND();if(!i.DN())return!1;if(this.l3t++,!i.wN().su(t))return!1;if(s.oPt())return this.B3t(t,s,i);if(this.c3t++,M.Cu(t),!i.bN().Fu(M))return!1;if(!i.fAt())return!0;const e=v,h=(e.Cu(t,i.Av(),i.Dv()),i.dAt());return e.tc(h,0,0)}B3t(i,t,s){const e=s.Av(),h=s.Dv(),r=t.A6(),n=b;r.GetCollisionRectCandidates(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.GetRect();if(this.l3t++,i.iu(a,e,h)){const l=o.GetPoly();if(!l)return _.Hn(n),!0;if(this.c3t++,v.Cu(i,0,0),l.tc(v,-(e+a.El()),-(h+a.Al())))return _.Hn(n),!0}}return _.Hn(n),!1}N3t(t,s){if(t){const i=t.ND();i.DN()&&(this.l3t++,i.wN().su(s.rect))&&(t.oPt()?this.W3t(t,i,s):(this.c3t++,i.fAt()?s.j3t(t,i.Av(),i.Dv(),i.dAt()):s.V3t(t,i.bN())))}}W3t(i,e,h){const r=e.Av(),n=e.Dv(),o=b;i.A6().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.l3t++,h.rect.iu(l,r,n)){const u=a.GetPoly();this.c3t++,u?h.j3t(i,r+l.El(),n+l.Al(),u):h.U3t(i,e.Av(),e.Dv(),l)}}_.Hn(o)}FO(t,s){if(t!==this.n3t||s!==this.o3t){this.n3t=t,this.o3t=s;const i=this.wf.o9();for(const e of i)if(e.yL()){for(const h of e.YL())h.ND().$Et();e.vCt().H3t(t,s),e.MCt();for(const r of e.YL()){const n=r.ND();n.GAt(),n.GCt()}}}}DO(){return[this.n3t,this.o3t]}z3t(t,s){this.n3t=t,this.o3t=s}}}{const Ca=self.Ws;Ca.Q_t=class extends Ca.ur{constructor(t,s){super(),this.f7=t,this.d7=s,this.p7=Ca.dr(Ca.oc)}pr(){this.p7.pr(),this.p7=null}H3t(t,s){if(!this.p7.uc())throw new Error("grid not empty");this.f7=t,this.d7=s}m7(t,s,i){let e=this.p7.ri(t,s);return e||(i?(e=Ca.dr(Ca.J3t,this,t,s),this.p7.Set(t,s,e),e):null)}g7(t){const s=Math.floor(t/this.f7);return isFinite(s)?s:0}y7(t){const s=Math.floor(t/this.d7);return isFinite(s)?s:0}w7(e,h,r){if(h)for(let i=h.El(),t=h.Fl();i<=t;++i)for(let t=h.Al(),s=h.kl();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.m7(i,t,!1);n&&(n.R0(e),n.uc())&&this.p7.cc(i,t)}if(r)for(let i=r.El(),t=r.Fl();i<=t;++i)for(let t=r.Al(),s=r.kl();t<=s;++t)h&&h.eu(i,t)||this.m7(i,t,!0).a7(e)}S7(t,s){let i=this.g7(t.El()),e=this.y7(t.Al()),h=this.g7(t.Fl()),r=this.y7(t.kl());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.m7(i,t,!1);n&&n.u7(s)}}}}{const Pa=self.Ws;Pa.J3t=class extends Pa.ur{constructor(t,s,i){super(),this.s7=t,this.al=s,this.ll=i,this.i7=Pa.dr(Pa.wc)}pr(){this.i7.pr(),this.i7=null,this.s7=null}uc(){return this.i7.uc()}a7(t){this.i7.xc(t)}R0(t){this.i7.cc(t)}u7(t){Pa.Kh(t,this.i7.Gc())}}}{const Ra=self.Ws;Ra.q3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ra.Rect,this.X3t=2,this.$3t=null,this.Y3t=0,this.K3t=0,this.Z3t=0,this.Q3t=0,this.tFt=0,this.Et=0,this.sFt=1,this.iFt=0,this.eFt=1,this.hFt=0}rFt(){return this.X3t<1+1e-6}w0(){this.X3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.X3t=2,this.$3t=null,this.Y3t=0,this.K3t=0,this.Z3t=0,this.Q3t=0,this.tFt=0,this.Et=0,this.sFt=1,this.iFt=0,this.eFt=1,this.hFt=0,this}nFt(){if(!1!==this.rFt()){const t=this.dx*this.X3t,s=this.dy*this.X3t,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this.Et=i-1e-6,this.Q3t=this.x1+e*this.Et,this.tFt=this.y1+h*this.Et,this.Y3t=Math.atan2(this.Z3t,this.K3t)+Math.PI/2,this.sFt=Math.cos(this.Y3t),this.iFt=Math.sin(this.Y3t),e*this.sFt+h*this.iFt);if(this.eFt=e-2*this.sFt*r,this.hFt=h-2*this.iFt*r,0<r){const n=Math.PI;this.Y3t=Ra.Tr(this.Y3t+n),this.sFt=-this.sFt,this.iFt=-this.iFt}}}oFt(t,s,i,e,h){const r=Ra.bn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.X3t&&(this.X3t=r,this.$3t=t.o4(),this.K3t=s-e,this.Z3t=i-h)}U3t(t,s,i,e){const h=s+e.El(),r=s+e.Fl(),n=i+e.Al(),o=i+e.kl();this.oFt(t,h,n,r,n),this.oFt(t,r,n,r,o),this.oFt(t,r,o,h,o),this.oFt(t,h,o,h,n)}V3t(t,s){const i=s.un(),e=s.cn(),h=s.dn(),r=s.pn(),n=s.mn(),o=s.gn(),a=s.yn(),l=s.wn();this.oFt(t,i,e,h,r),this.oFt(t,h,r,n,o),this.oFt(t,n,o,a,l),this.oFt(t,a,l,i,e)}j3t(i,e,h,t){const r=t.Ju();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.oFt(i,o,a,l,u)}}}}{const M=self.Ws,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Aa=new Set(["high","low"]),Fa=self.xs,xh=Fa.Is,Gh=Fa.Es,ka=xh.create(),Da=M.dr(M.ou),x=M.dr(M.Rect);M.aFt=class extends M.ur{constructor(t){super(),this.wf=t,this.lFt=[],this.uFt=!1,this.cFt=null,this.fFt=null,this.dFt=null,this.pFt="high-performance",this.mFt=!1,this.gFt=0,this.yFt=0,this.wFt="",this.SFt=0,this.bFt=0,this.vFt=0,this.MFt=0,this.xFt=0,this.GFt=0,this.Jy="normalized",this.TFt=0,this._Ft=1,this.IFt=1e4,this.Iw=!0,this.CFt=0,this.o3=0,this.a3=0,this.PFt="letterbox-scale",this.RFt="letterbox-scale",this.EFt=0,this.AFt=0,this.FFt=xh.create(),this.kFt="high",this.DFt=this.kFt,this.OFt=!1,this.LFt=[],this.BFt=new Set,this.NFt=self.C3_Shaders,this.WFt=M.dr(M.Ty.cA,{oA:()=>[this.UJ(),this.HJ()],aA:()=>this.jFt(),lA:t=>this.VFt(t),getTime:()=>this.nO().Xk(),uA:()=>this.nO().JD()}),this.UFt=0,this.HFt=0,this.zFt=NaN,this.JFt=null,this.qFt=new Map,this.XFt=NaN,this.$Ft=new Map,this.YFt="",this.KFt=1,this.ZFt=M.dr(M.Rect),this.QFt="",this.tkt=null,this.skt=null,this.ikt=0,this.ekt=0,this.hkt=-1,this.rkt=0,this.nkt=t=>this.rkt=t.progress,this.okt=null,this.akt={lkt:null,ukt:null,ckt:null},this.fkt=0,this.dkt=0,this.pkt=0,this.mkt="fade-in",this.gkt=null,this.ykt=new Promise(t=>this.gkt=t)}wkt(t){this.pFt=t}Skt(t){this.uFt=!!t}bkt(t){this.Jy=t}vkt(){return this.Jy}Mkt(t){this.TFt=t}xkt(t,s){this._Ft=t,this.IFt=s}Gkt(t){this.mFt=!!t}async Bo(t){let s=t.canvas,i=(this.lFt.push({canvas:s,Tkt:null}),this.wf.B4("runtime","window-resize",t=>this._kt(t)),this.wf.B4("runtime","fullscreenchange",t=>this.Ikt(t)),this.wf.B4("runtime","fullscreenerror",t=>this.Ckt(t)),s.addEventListener("webglcontextlost",t=>this.Pkt(t)),s.addEventListener("webglcontextrestored",t=>this.Rkt(t)),this.OFt=!!t.isFullscreen,this.wFt=t.cssDisplayMode,navigator.gpu&&this.uFt),e=!1;if(i)try{await this.Ekt(!0)}catch(t){this.Akt("WebGPU",t),this.fFt=null}if(!this.Kb())try{await this.Fkt(!0)}catch(t){this.Akt("WebGL",t),this.cFt=null}if(this.Kb()||(e=!0),!this.Kb()&&i)try{await this.Ekt(!1)}catch(t){this.Akt("WebGPU",t),this.fFt=null}if(!this.Kb())try{await this.Fkt(!1)}catch(t){this.Akt("WebGL",t),this.cFt=null}const h=this.Kb();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Pb(e),this.fFt&&(this.fFt.kkt=()=>this.Dkt(),this.fFt.Okt=()=>this.Lkt()),"normalized"===this.Jy?h.Hw():(h.zw(),h.Vw(this.TFt)),this.wC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.VAt()}Akt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async Ekt(t){const s={Ny:this._Ft,Wy:this.IFt},i={powerPreference:this.pFt,depth:this.wf.Y9(),failIfMajorPerformanceCaveat:t,Bkt:this.wf.ZJ(),Nkt:this.wf.Wkt(),IP:this.wf.jkt()};this.fFt=M.dr(M.Ty.WebGPURenderer,s),await this.fFt.Cx(this.lFt[0].canvas,i)}async Fkt(t){const s={alpha:!0,powerPreference:this.pFt,_P:"xbox-uwp-webview2"!==this.wf.zO(),depth:this.wf.Y9(),IP:this.wf.jkt(),failIfMajorPerformanceCaveat:t,Ny:this._Ft,Wy:this.IFt};this.mFt&&(s.CP=1),this.cFt=M.dr(M.Ty.EP,this.lFt[0].canvas,s),await this.cFt.Aw()}async Vkt(){if(this.NFt){const t=[];for(const[s,i]of Object.entries(this.NFt)){i.src=i.wgsl;const e=M.Ty.WebGPUShaderProgram.XG();t.push(this.fFt.FR(Object.assign({Tx:e,name:s},i)))}await Promise.all(t)}}async Ukt(){if(this.NFt){const s=[];for(const[i,e]of Object.entries(this.NFt)){let t;if(e.glslWebGL2&&2<=this.cFt.YM())e.src=e.glslWebGL2,t=M.Ty.xx.$G();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=M.Ty.xx.XG()}s.push(this.cFt.FR(Object.assign({Tx:t,name:i},e)))}await Promise.all(s),this.cFt.kR(),this.cFt.iS()}this.cFt.XE()&&(this.JFt=M.dr(M.Ty.gP,this.cFt))}async VAt(){this.fFt?await this.Vkt():this.cFt&&await this.Ukt();const t=this.Kb();t.Ib(this.Iw),t.XE()&&(this.zFt=0);for(const s of this.wf.Hkt()){for(const i of s.c5())i.VAt(t);s.VAt(t),s.K6()}this.dFt=new self.p8(this.wf,t)}pr(){this.wf=null,this.cFt=null,this.lFt.length=0}nk(){return this.wf.nk()}_kt(t){const s=this.wf;if(!s.zkt()){const i=t.devicePixelRatio,e=(this.nk()&&(self.devicePixelRatio=i),s.Jkt(i),this.OFt=!!t.isFullscreen,this.wFt=t.cssDisplayMode,this.wC(t.innerWidth,t.innerHeight),s.JD(),new M.Event("window-resize")),h=(e.data=t,s.Kf().o0(e),new M.Event("resize"));h.qkt=this.QO(),h.Xkt=this.sL(),h.$kt=this.eL(),h.Ykt=this.rL(),s.tY(h),s.sY()&&(s.j1t()||self.C3Debugger.IsDebuggerPaused())&&s.W3()}}Ikt(t){this.OFt=!!t.isFullscreen,this.wC(t.innerWidth,t.innerHeight,!0),this.wf.JD()}Ckt(t){this.OFt=!!t.isFullscreen,this.wC(t.innerWidth,t.innerHeight,!0),this.wf.JD()}wC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.gFt!==t||this.yFt!==s||i){this.gFt=t,this.yFt=s;const e=this.Kkt();"letterbox-scale"===e?this.Zkt(t,s):"letterbox-integer-scale"===e?this.Qkt(t,s):"off"===e?this.tDt(t,s):this.sDt(t,s),this.iDt(e);for(const{canvas:n}of this.lFt)n.width=this.vFt,n.height=this.MFt;this.wf.vf("canvas","update-size",{marginLeft:this.xFt,marginTop:this.GFt,styleWidth:this.SFt,styleHeight:this.bFt,displayScale:this.pV()});const h=this.Kb();h.wC(this.vFt,this.MFt,!0);for(const o of this.LFt)h.VE(o);M.Hn(this.LFt),this.eDt();const r=this.wf.bD();r.GY(),r.TY()}}eDt(){this.Kb().qw(this.FFt,this.UJ()/this.HJ())}zJ(){return this.FFt}Zkt(t,s){const i=this.wf.nL(),e=this.wf.lk(),h=this.wf.ck(),r=e/h,n=t/s;if(r<n){const o=s*r;this.SFt=Math.round(o),this.bFt=s,this.xFt=Math.floor((t-this.SFt)/2),this.GFt=0}else{const a=t/r;this.SFt=t,this.bFt=Math.round(a),this.xFt=0,this.GFt=Math.floor((s-this.bFt)/2)}this.vFt=Math.round(this.SFt*i),this.MFt=Math.round(this.bFt*i),this.wf.hDt(e,h)}Qkt(t,s){let i=this.wf.nL(),e=(1!==i&&(t+=1,s+=1),this.wf.lk()),h=this.wf.ck(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.vFt=Math.round(e*o),this.MFt=Math.round(h*o),this.SFt=this.vFt/i,this.bFt=this.MFt/i,this.xFt=Math.max(Math.floor((t-this.SFt)/2),0),this.GFt=Math.max(Math.floor((s-this.bFt)/2),0),this.wf.hDt(e,h)}sDt(t,s){const i=this.wf.nL(),e=(this.SFt=t,this.bFt=s,this.vFt=Math.round(this.SFt*i),this.MFt=Math.round(this.bFt*i),this.xFt=0,this.GFt=0,this.pV());this.wf.hDt(this.SFt/e,this.bFt/e)}tDt(t,s){const i=this.wf.nL();this.SFt=this.wf.N9(),this.bFt=this.wf.W9(),this.vFt=Math.round(this.SFt*i),this.MFt=Math.round(this.bFt*i),this.rDt()?(this.xFt=Math.floor((t-this.SFt)/2),this.GFt=Math.floor((s-this.bFt)/2)):(this.xFt=0,this.GFt=0),this.wf.hDt(this.wf.N9(),this.wf.W9())}iDt(i){if("high"===this.kFt)this.o3=this.vFt,this.a3=this.MFt,this.DFt="high";else{let t,s;if(s="off"===this.Kkt()?(t=this.wf.N9(),this.wf.W9()):(t=this.wf.lk(),this.wf.ck()),this.vFt<t||this.MFt<s)this.o3=this.vFt,this.a3=this.MFt,this.DFt="high";else if(this.o3=t,this.a3=s,this.DFt="low","scale-inner"===i){const e=t/s,h=this.gFt/this.yFt;h<e?this.o3=this.a3*h:e<h&&(this.a3=this.o3/h)}else if("scale-outer"===i){const r=t/s,n=this.gFt/this.yFt;r<n?this.o3=this.a3*n:n<r&&(this.a3=this.o3/n)}}}nO(){return this.wf}nDt(){return this.lFt[0].canvas}bz(){return this.WFt}rDt(){return this.OFt}oDt(){return this.wFt}aDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.PFt=t;const s=this.wf.bD();s.GY(),s.TY()}fV(){return this.PFt}lDt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.RFt=t;const s=this.wf.bD();s.GY(),s.TY()}uDt(){return this.RFt}Kkt(){return this.rDt()?this.uDt():this.fV()}cDt(t){if(!Aa.has(t))throw new Error("invalid fullscreen scaling quality");this.kFt=t,this.wf.bD().GY()}fDt(){return this.kFt}QJ(){return this.DFt}static dDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Qj(){return this.gFt}tV(){return this.yFt}UJ(){return this.o3}HJ(){return this.a3}Ib(t){this.Iw=!!t}pDt(t){this.CFt=t}$H(){return this.CFt}mDt(){return this.Kb().qC()}Pkt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.LFt=[],this.BFt.clear(),this.WFt.xv(),this.cFt.xv(),this.wf.t$()}Dkt(){console.log("[Construct] WebGPU device lost"),this.LFt=[],this.BFt.clear(),this.WFt.xv(),this.wf.t$()}async Rkt(t){await this.cFt.Gv(),await this.VAt(),await this.wf.gDt(),console.log("[Construct] WebGL context restored")}async Lkt(){await this.VAt(),await this.wf.gDt(),console.log("[Construct] WebGPU device restored")}yDt(){return this.cFt}wDt(){return this.fFt}Kb(){return this.fFt||this.cFt}YIt(){return this.dFt}XO(){let t="";return t=this.wf.wDt()?"webgpu":"webgl"+this.wf.yDt().YM(),this.wf.Kb().Rb()&&(t+="-software"),t}KO(){return this.wf.wDt()?this.wf.wDt().GetAdapterInfoString():this.wf.yDt().eA()}HB(){return"low"===this.DFt?1/this.wf.nL():this.pV()}pV(){const t=this.Kkt();if("off"===t||"crop"===t)return 1;const s=this.wf.lk(),i=this.wf.ck(),e=s/i,h=this.vFt/this.MFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.bFt/i:this.SFt/s}Gq(){return"low"===this.QJ()?1:this.pV()}Mq(){return"low"===this.QJ()?1:this.wf.nL()}SDt(t,s){this.EFt=t,this.AFt=s}sU(s,i,e,t=!0){i=i||this.o3,e=e||this.a3;const h=i/2+this.EFt,r=e/2+this.AFt;if(t){let t=this.zJ();i===this.o3&&e===this.a3||(s.qw(ka,i/e),t=ka),s.OR(t)}const n=s.Kw(h,r,s.kw(e),h,r,0,e);s.VR(n)}bDt(t,s=!0){const i=this.QO(),e=this.sL(),h=i/2,r=e/2,n=(s&&t.OR(this.zJ()),t.Kw(h,r,t.kw(e),h,r,0,e));t.VR(n)}eL(){return this.vFt}rL(){return this.MFt}QO(){return this.SFt}sL(){return this.bFt}DB(){return this.xFt}OB(){return this.GFt}LX(){return this.lFt.length}vDt(){return"undefined"!=typeof OffscreenCanvas&&this.nDt()instanceof OffscreenCanvas&&("Chromium"!==M.fi.Si||124<=M.fi.wi)}async r$(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.lFt.length!==e){let t=this.wf.bD().yD(),s={count:e,layersDomState:t.m9().filter(t=>t.oB()).map(t=>t.SJ()),immediate:h,marginLeft:this.xFt,marginTop:this.GFt,styleWidth:this.SFt,styleHeight:this.bFt},i;if(i=this.nk()?await this.wf.XD("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.lFt.length)this.lFt.length=e;else for(const r of i.addedCanvases){r.width=this.vFt,r.height=this.MFt;const n=this.vDt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.lFt.push({canvas:r,Tkt:o})}this.wf.JD()}}K$(t){if(!(t>=this.lFt.length)){const s=this.nDt(),i=this.lFt[t].Tkt;this.vDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}tq(s){s.depth=this.wf.Y9();let t=this.LFt,i=t.findIndex(t=>t.yx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Kb().LE(s),this.BFt.add(e),e}Mz(t){if(!this.BFt.has(t))throw new Error("render target not in use");this.BFt.delete(t),this.LFt.push(t)}jFt(){const t={EM:this.wf.fk()};return"low"===this.QJ()&&(t.width=this.UJ(),t.height=this.HJ()),this.tq(t)}VFt(t){this.Mz(t)}*MDt(){for(const t of this.wf.bD().vY())for(const s of t.I5()){const i=this.qFt.get(s);i&&(yield i)}}$J(t){if(!this.Kb().XE())return null;let s=this.qFt.get(t);return s||(s={lN:t,name:t.uf(),xDt:M.dr(M.Ty.gP,this.cFt),GDt:0,TDt:0,_Dt:0},this.qFt.set(t,s)),s.xDt}IDt(){const t=this.Kb();if(t.XE()&&0===this.HFt){this.HFt=t.Tb(),this.XFt=NaN;for(const s of this.MDt())s.GDt=NaN}}CDt(){this.cFt&&this.cFt.XE()&&this.PDt(),this.fFt&&this.fFt.XE()&&this.RDt()}PDt(){if(isNaN(this.XFt)&&(this.XFt=this.JFt.xP(this.UFt,this.HFt),!isNaN(this.XFt))){if(this.wf.sY())for(const t of this.MDt())if(t.GDt=t.xDt.xP(this.UFt,this.HFt),isNaN(t.GDt))return;if(this.JFt.GP(this.HFt),this.zFt=Math.min(this.XFt,1),this.wf.sY()){const i=new Map;for(const h of this.MDt())h.xDt.GP(this.HFt),h.TDt=Math.min(h.GDt,1),i.set(h.lN,h.TDt);for(const r of this.MDt()){const n=r.lN,o=i.get(n)||0,a=o-n.K5().reduce((t,s)=>t+(i.get(s)||0),0);r._Dt=M.Gr(a,0,1)}const s=this.wf.yD(),e=this.zFt-s.m9().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Gr(e,0,1),this.zFt,[...this.MDt()])}this.UFt=this.HFt,this.HFt=0}}EDt(){return this.JFt}RDt(){if(0!==this.HFt){for(let t=this.UFt;t<this.HFt;++t){const i=this.$Ft.get(t);if(i&&!i.rP())return}let t=this.wf.yD(),n=M.$o(t.EX()+1,0),s=0;for(let t=this.UFt;t<this.HFt;++t){const o=this.$Ft.get(t);if(o){let i=o.nP(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.zFt=M.Gr(s,0,1),this.wf.sY()){const e=t.I5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of h){const S=[...y.Q5()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),r.push({name:y.uf(),_Dt:M.Gr(w,0,1),TDt:M.Gr(S,0,1)})}const m=this.zFt-t.m9().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Gr(m,0,1),this.zFt,r)}for(let t=this.UFt;t<this.HFt;++t)this.$Ft.delete(t);this.UFt=this.HFt,this.HFt=0}}ADt(t){this.$Ft.set(this.fFt.Tb(),t)}nD(){return this.zFt}FDt(t,s,i,e,h,r){return this.YFt=t,this.KFt=s,this.ZFt.xl(i,e,h,r),this.tkt||(this.tkt=new Promise(t=>{this.skt=t})),this.tkt}kDt(){if(this.YFt){let t=this.nDt(),s=this.ZFt,i=M.Gr(Math.floor(s.El()),0,t.width),e=M.Gr(Math.floor(s.Al()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:M.Gr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:M.Gr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=M.Bo(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}M.No(t,this.YFt,this.KFt).then(t=>{this.QFt&&URL.revokeObjectURL(this.QFt),this.QFt=URL.createObjectURL(t),this.tkt=null,this.skt(this.QFt)}),this.YFt="",this.KFt=1}}DDt(){return this.QFt}ODt(t){t?this.ikt++:this.ikt--}LDt(){return 0<this.ikt}BDt(t){const s=this.Kb();if(2===t)this.okt=M.dr(M.Ty.Lb,this.Kb()),this.okt.XI("Arial"),this.okt.$I(16),this.okt.lC("center"),this.okt.cC("center"),this.okt.wC(300,200);else if(0===t){const i=this.wf.NDt();i&&i.J8(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.WDt("splash-images/splash-logo.svg").then(t=>{"done"===this.mkt?s.H2(t):this.akt.lkt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.jDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.mkt?s.H2(t):this.akt.ukt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.jDt("splash-images/splash-website-512.png").then(t=>{"done"===this.mkt?s.H2(t):this.akt.ckt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async WDt(t){t=new URL(t,this.wf.VDt()).toString();const s=await M.Eo(t),i=await this.wf.UDt(s,2048,2048);return this.Kb().OE(i,{DM:"high"})}async jDt(t){t=new URL(t,this.wf.VDt()).toString();const s=await M.Eo(t);return this.Kb().OE(s,{DM:"high"})}HDt(){this.wf.vf("runtime","hide-cordova-splash")}zDt(){this.ekt=Date.now(),this.wf.Kf().addEventListener("loadingprogress",this.nkt),this.hkt=requestAnimationFrame(()=>this.JDt());const t=this.wf.qDt();3!==t&&this.HDt()}async XDt(){const t=this.Kb(),s=(this.rkt=1,this.wf.qDt());4===s&&await this.ykt,this.gkt=null,this.ykt=null,-1!==this.hkt&&(cancelAnimationFrame(this.hkt),this.hkt=-1),this.wf.Kf().removeEventListener("loadingprogress",this.nkt),this.nkt=null,this.okt&&(this.okt.pr(),this.okt=null),this.wf.$Dt(),t._E(),this.akt.lkt&&(t.H2(this.akt.lkt),this.akt.lkt=null),this.akt.ukt&&(t.H2(this.akt.ukt),this.akt.ukt=null),this.akt.ckt&&(t.H2(this.akt.ckt),this.akt.ckt=null),t.TE(0,0,0,0),t.xb(),this.mkt="done",this.UFt=t.Tb(),3===s&&this.HDt()}JDt(){if(-1!==this.hkt){const t=this.Kb(),s=(t._E(),this.hkt=-1,this.wf.XF().bH()),i=this.wf.qDt();if(3!==i&&(this.bDt(t),t.TE(0,0,0,0),t.KR(),t.iS(),t.QR(null)),0===i)this.YDt(s);else if(1===i)this.KDt(s,120,0);else if(2===i)this.ZDt(s);else if(3===i)M.Wn();else{if(4!==i)throw new Error("invalid loader style");this.QDt(s)}t.xb(),this.hkt=requestAnimationFrame(()=>this.JDt())}}ZDt(t){t?this.okt.aC(1,0,0):this.okt.aC(.6,.6,.6),this.okt.Mf(Math.round(100*this.rkt)+"%");const s=this.SFt/2,i=this.bFt/2,e=(Da.gu(s-150,i-100,150+s,100+i),this.Kb());e.QR(this.okt.K2()),e.qS(Da,this.okt.$C())}KDt(t,s,i){const e=this.Kb(),h=(e.aS(),t?e.$R(1,0,0,1):e.$R(.118,.565,1,1),this.SFt/2),r=this.bFt/2,n=s/2;x.xl(h-n,r-4+i,Math.floor(s*this.rkt),8),e.Rect(x),x.xl(h-n,r-4+i,s,8),x.offset(-.5,-.5),x.Hl(.5,.5),e.$R(0,0,0,1),e.ZS(x),x.Hl(1,1),e.$R(1,1,1,1),e.ZS(x)}YDt(t){const s=this.Kb(),i=this.wf.NDt();if(i){const e=i.K2();if(e){const h=e._m(),r=e.Om(),n=this.SFt/2,o=this.bFt/2,a=h/2,l=r/2;Da.gu(n-a,o-l,n+a,o+l),s.QR(e),s.ou(Da),this.KDt(t,h,16+l)}else this.KDt(t,120,0)}else this.KDt(t,120,0)}QDt(t){let s=this.Kb(),i=this.akt.lkt,e=this.akt.ukt,h=this.akt.ckt,r=Date.now(),n=(0===this.fkt&&(this.ekt=r),this.wf.tOt()||this.wf.sOt()&&!this.wf.iOt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.mkt?l=Math.min((r-this.ekt)/300,1):"fade-out"===this.mkt&&(l=Math.max(1-(r-this.pkt)/300,0)),s.aS(),s.$R(.231*l,.251*l,.271*l,l),x.set(0,0,this.SFt,this.bFt),s.Rect(x),Math.ceil(this.SFt)),c=Math.ceil(this.bFt),f,d;256<this.bFt?(s.$R(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),x.xl(0,.8*c-d/2,f,d),s.Rect(x),t?s.$R(l,0,0,l):s.$R(.161*l,.953*l,.816*l,l),f=u*this.rkt,x.xl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(x),s.$R(l,l,l,l),s.iS(),e&&(f=1.5*M.Gr(.22*c,105,.6*u),d=f/8,x.xl(.5*u-f/2,.2*c-d/2,f,d),s.QR(e),s.Rect(x)),i&&(f=Math.min(.395*c,.95*u),d=f,x.xl(.5*u-f/2,.485*c-d/2,f,d),s.QR(i),s.Rect(x)),h&&(f=1.5*M.Gr(.22*c,105,.6*u),d=f/8,x.xl(.5*u-f/2,.868*c-d/2,f,d),s.QR(h),s.Rect(x))):(s.$R(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),x.xl(0,.85*c-d/2,f,d),s.Rect(x),t?s.$R(l,0,0,l):s.$R(.161*l,.953*l,.816*l,l),f=u*this.rkt,x.xl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(x),s.$R(l,l,l,l),s.iS(),i&&(f=.55*c,d=f,x.xl(.5*u-f/2,.45*c-d/2,f,d),s.QR(i),s.Rect(x))),this.fkt++,"fade-in"===this.mkt&&300<=r-this.ekt&&2<=this.fkt&&(this.mkt="wait",this.dkt=r),"wait"===this.mkt&&r-this.dkt>=a&&1<=this.rkt&&(this.mkt="fade-out",this.pkt=r),("fade-out"===this.mkt&&r-this.pkt>=300+o||n&&1<=this.rkt&&r-this.ekt<500)&&this.gkt()}}}{let V=self.Ws,U=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;V.eOt=class extends V.ur{constructor(t){t=Object.assign({},i,t),super(),this.hOt=t.messagePort,this.rOt=t.runtimeBaseUrl,this.nOt=t.previewUrl,this.oOt=!!t.headless,this.aOt=!!t.hasDom,this.lOt=!!t.isInWorker,n=t.ife,this.uOt=!!t.useAudio,this.cOt=t.exportType,this.fOt=t.isNWjs,this.xU=!!t.isiOSCordova,this.dOt=!!t.isiOSWebView,this.pOt=!!t.isWindowsWebView2,this.mOt=!!t.isAnyWebView2Wrapper,this.gOt=!!t.isFBInstantAvailable,this.yOt=!("preview"!==this.cOt||!t.isDebug),this.wOt=this.yOt,this.SOt=this.yOt,this.bOt=0,this.vOt=[],this.MOt=[],this.xOt=!1,this.GOt="",this.TOt="",this._Ot="",this.IOt="",this.COt=0,this.POt=0,this.w3=self.devicePixelRatio,this.ROt=0,this.EOt=0,this.AOt=0,this.FOt=0,this.kOt=0,this.DOt=!1,this.Kg=!0,this.OOt=!1,this.LOt=!1,this.BOt=!1,this.NOt=null,this.OH=V.dr(V.SU,this,t),this.Wq=V.dr(V.hY,this),this.u0t=V.dr(V.odt,this),this.WOt=V.dr(V.fL,this,t.wrapperComponentIds),this.jOt=V.dr(V.r3t,this),this.LQ=V.dr(V._Y,this),this.VOt=V.dr(V.Klt,this),this.UOt=V.dr(V.Qlt,this),this.dut=V.dr(V.out,this),this.Jg=V.dr(V.kg,{Lg:t=>this.HOt(t),Ng:t=>this.zOt(t)}),this.JOt=new Map,this.qOt=[],this.XOt=new Map,this.$Ot=new Map,this.YOt=0,this.KOt=[],this.ZOt=new Set,this.QOt=[],this.tLt=[],this.sLt=new Map,this.iLt=!1,this.eLt=!1,this.hLt=0,this.rLt=0,this.nLt=new Map,this.oLt=new Set,this.aLt=new Set,this.lLt=[],this.uLt=[],this.cLt=null,this.fLt=!1,this.dLt="vsync",this.VM="trilinear",this.pLt=!1,this.mLt=!0,this.gLt=!1,this.yLt=!1,this.wLt=null,this.SLt={bLt:t=>{this.hkt=-1,this.vLt=-1,this.YK(t)},MLt:t=>{this.vLt=-1,this.YK(t,!1,"skip-render")},xLt:()=>{this.hkt=-1,this.W3()}},this.hkt=-1,this.vLt=-1,this.GLt=0,this.TLt=0,this._Lt=!1,this.ILt=!1,this.CLt=!1,this.PLt=!0,this.RLt=!0,this.ELt=!1,this.ALt=0,this.FLt=new V.Gd(1),this.kLt=()=>Math.random(),this.DLt=0,this.OLt=0,this.LLt=0,this.BLt=0,this.NLt=0,this.XCt=1,this.WLt=1/30,this.jLt=0,this.VLt=V.dr(V.A0),this.ULt=V.dr(V.A0),this.HLt=V.dr(V.A0),this.zLt=new Map,this.JLt=-1,this.qLt=0,this.XLt=0,this.$Lt=-1,this.YLt=0,this.KLt=0,this.ZLt=0,this.QLt=!1,this.t5t="",this.s5t=!1,this.i5t="",this.Y4=null,this.e5t="",this.h5t=null,this.r5t=null,this.K_t=V.dr(V.Event.Kf),this.n5t=new Map,this.o5t=new Map,this.a5t=0,this.l5t=!1,this.u5t=!1,this.c5t=!1,this.f5t=[],this.d5t={pretick:V.dr(V.Event,"pretick",!1),tick:V.dr(V.Event,"tick",!1),tick2:V.dr(V.Event,"tick2",!1),instancecreate:V.dr(V.Event,"instancecreate",!1),instancedestroy:V.dr(V.Event,"instancedestroy",!1),beforelayoutchange:V.dr(V.Event,"beforelayoutchange",!1),layoutchange:V.dr(V.Event,"layoutchange",!1)},this.d5t.instancecreate.U6=null,this.d5t.instancedestroy.U6=null,this.wX=V.dr(V.Event.Kf),this.p5t=null;const s=(t,s)=>V.JCt.PAt(this,t,s);this.m5t=V.dr(V.j0,s),this.g5t=V.dr(V.j0,s),this.y5t=V.dr(V.j0,s),this.w5t=V.dr(V.S5t,this,t.jobScheduler),t.canvas&&(this.cLt=V.dr(V.aFt,this)),this.hOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.B4("runtime","visibilitychange",t=>this.b5t(t)),this.B4("runtime","wrapper-extension-message",t=>this.v5t(t)),this.B4("runtime","opus-decode",t=>this.SO(t.arrayBuffer)),this.B4("runtime","get-remote-preview-status-info",()=>this.M5t()),this.B4("runtime","js-invoke-function",t=>this.Ddt(t)),this.B4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.B4("runtime","offline-audio-render-completed",t=>this.x5t(t)),this.K_t.addEventListener("window-blur",t=>this.G5t(t)),this.K_t.addEventListener("window-focus",()=>this.T5t()),this.LQ.rK(),this.UOt.rK(),this._5t=null,this.I5t=new WeakMap,this.C5t={keyboard:null,CD:null,PD:null,RD:null},this.P5t=new WeakMap,this.R5t=[]}static Cx(t){return V.dr(V.eOt,t)}pr(){V.Hn(this.qOt),this.XOt.clear(),this.$Ot.clear(),this.Wq.pr(),this.Wq=null,this.u0t.pr(),this.u0t=null,this.WOt.pr(),this.WOt=null,this.OH.pr(),this.OH=null,this.jOt.pr(),this.jOt=null,this.LQ.pr(),this.LQ=null,this.VOt.pr(),this.VOt=null,this.UOt.pr(),this.UOt=null,this.dut.pr(),this.dut=null,this.Jg.pr(),this.Jg=null,this.cLt&&(this.cLt.pr(),this.cLt=null),this.K_t.pr(),this.K_t=null,this.E5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.A5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.F5t(t)}}A5t(t){if(this.c5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new V.Event(i);l.data=e,this.K_t.o0(l)}if(n){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.tY(u)}}const a=this.n5t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.k5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.k5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.k5t(o,!1,""+t)}):this.k5t(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.f5t.push(t)}k5t(t,s,i){this.hOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}F5t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.o5t.get(s);i?h.resolve(e):h.reject(e),this.o5t.delete(s)}B4(t,s,i){let e=this.n5t.get(t);if(e||(e=new Map,this.n5t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}vf(t,s,i,e){this.hOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}XD(t,s,i,e){const h=this.a5t++,r=new Promise((t,s)=>{this.o5t.set(h,{resolve:t,reject:s})});return this.hOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}LV(t,s,i,e=-1){this.vf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}BV(t,s,i){const e=this.a5t++,h=new Promise((t,s)=>{this.o5t.set(e,{resolve:t,reject:s})});return this.LV(t,s,i,e),h}v5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.o5t.get(s);i.resolve(t.params),this.o5t.delete(s)}else this.A5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}tN(t,s,i){this.B4("wrapper-extension:"+t,s,i)}Z4(t){return this.WOt.Z4(t)}D5t(t){if(!this.sY())throw new Error("not in debug mode");this.vf("runtime","post-to-debugger",t)}async KCt(t){V.Gvt(this),this.sY()?await U.KCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.OH.Ro("data.json"),this.O5t(),this.w5t.KCt()]);if(await this.L5t(s),await this.B5t(t),this.tOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.yDt()){const i=this.yDt();console.info(`[C3 runtime] Hosted in ${this.nk()?"worker":"DOM"}, rendering with WebGL ${i.YM()} [${i.eA()}]`)}else this.wDt()&&console.info(`[C3 runtime] Hosted in ${this.nk()?"worker":"DOM"}, rendering with WebGPU [${this.wDt().GetAdapterInfoString()}]`);this.Kb().Rb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.c5t=!0;for(const e of this.f5t)this.A5t(e);V.Hn(this.f5t),this.cLt&&this.cLt.zDt();for(const h of t.runOnStartupFunctions)this.vOt.push(this.N5t(h));if(await Promise.all([this.OH.wH(),...this.vOt]),V.Hn(this.vOt),!this.OH.bH())return this.cLt&&await this.cLt.XDt(),await this.K_t.r0(new V.Event("beforeruntimestart")),await this._E(),this.hOt.postMessage({type:"runtime-ready"}),this;this.cLt&&this.cLt.HDt()}async N5t(t){try{await t(this._5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async L5t(t){const s=t.project,i=(this.GOt=s[0],this.TOt=s[16],this._Ot=s[31],this.IOt=s[38],s[39]||"loading-logo.png"),e=(this.pLt=!!s[9],this.COt=this.AOt=s[10],this.POt=this.FOt=s[11],this.jOt.z3t(this.COt,this.POt),this.ROt=this.COt/2,this.EOt=this.POt/2,this.dLt=s[37],this.fLt=!!s[40],this.VM=s[14],this.OOt=s[15],this.LOt=s[42],this.BOt=s[17],this.DOt=!!s[18],this.kOt=s[19],this.rLt=s[21],this.gLt=s[22],this.OH);if(e.$U(s[45]),e.TH(s[7],s[25]),e.KU(s[8]),e.ZU(s[32]),e.tH(s[28]),e.MH(s[29]),0===this.kOt){let t;(t="flat"===e.pO()?e.sH()+i:i)&&(this.NOt=e.cH({url:t}))}this.cLt&&(this.cLt.aDt(V.aFt.dDt(s[12])),this.cLt.cDt(s[23]?"high":"low"),this.cLt.Ib(0!==s[24]),this.cLt.wkt(s[34]),this.cLt.pDt(s[41]),this.cLt.Skt(s[13]),this.cLt.bkt(s[30]),this.cLt.xkt(s[46],s[47]),this.cLt.Mkt(s[26]),this.cLt.Gkt(s[48]));const h=s[43],r=(h&&await this.W5t(h),this.j5t(),this.WOt.LTt(),this.lLt=self.V5t(),s[2]);for(const l of r[1])this.WOt.BTt(l);for(const u of r[0])this.WOt.OTt(u);this.lLt=self.V5t(),this.U5t(),this.WOt.UTt();for(const c of s[3]){const f=V.hut.Cx(this,this.qOt.length,c);this.qOt.push(f),this.XOt.set(f.uf().toLowerCase(),f),this.$Ot.set(f.g9(),f)}for(const d of s[4]){const p=this.qOt[d[0]];p.DIt(d)}for(const m of s[27]){const g=m.map(t=>this.qOt[t]);this.KOt.push(V.dr(V.DCt,this,g))}this.H5t();for(const y of this.qOt)y.LIt();for(const w of s[5])this.Wq.Cx(w);const n=s[1];if(n){const S=this.Wq.gY(n);S&&this.Wq.pY(S)}for(const b of s[35])this.VOt.Cx(b);for(const v of s[33])this.LQ.Cx(v);for(const M of s[44])this.UOt.Cx(M);this.UOt.iut()||(this.UOt.pr(),this.UOt=null);for(const x of s[49])this.dut.Cx(x);this.dut.cut()||(this.dut.pr(),this.dut=null);for(const G of s[6])this.u0t.Cx(G);this.u0t.Bdt(),this.z5t(),V.Hn(this.lLt),this.a5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.vf("runtime","set-target-orientation",{targetOrientation:o})}async W5t(t){const s=t.format;"image-sequence"===s?this.wLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.wLt=new self.C3ExportToGIF(this,t):"webm"===s?this.wLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.wLt=new self.C3ExportToMP4Video(this,t)),this.dLt="unlimited-frame",this.cLt.aDt("off"),this.w3=1,self.devicePixelRatio=1,await this.XD("runtime","set-exporting-to-video",{message:this.wLt.GetExportingMessageForPercent(0),duration:this.wLt.wW()})}qDt(){return this.kOt}zkt(){return null!==this.wLt}J5t(){return this.wLt.wW()}q5t(){return this.wLt.GetFramerate()}X5t(){return this.wLt.KCt({width:this.cLt.eL(),height:this.cLt.rL()})}$5t(){const t=this.GLt/this.q5t();return this.wLt.AddFrame(this.cLt.nDt(),t)}Y5t(){this.wLt&&this.wLt.qit()}x5t(t){this.wLt.OnOfflineAudioRenderCompleted(t)}K5t(){return this.wLt.xb()}sOt(){return this.gOt}hy(){return this.Kg}ZD(t){this.vOt.push(t)}o$(t){this.xOt=!!t}Z5t(t){this.xOt&&this.MOt.push(t)}d$(){return this.MOt}CIt(){return this.YOt++}NIt(){return this.YOt}BAt(t){this.ZOt.add(t)}NAt(t){this.ZOt.delete(t)}Hkt(){return this.ZOt}async B5t(t){this.cLt&&(await this.cLt.Bo(t),this.cLt.BDt(this.kOt))}async O5t(){const h=this.OH;if(!h.sO("audio/webm; codecs=opus")){let t=null,s=h.YU(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.Q5t()&&h.iH()?await h.hH(e):await h.Ao(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.tBt(t,"opus-decoder-wasm"),await this.sBt([i])}}async SO(t){const s=await this.iBt("OpusDecode",{arrayBuffer:t},[t]);return s}async _E(){this._Lt=!0,this.DLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.DOt){for(const h of this.qOt)h.a9()||h.XIt()||!h.yL()||h.Oxt();(async()=>{await this.OH.wH(),await t,this.Kg=!1,this.eBt()})()}else this.Kg=!1;this.OH.SH(),this.sY()&&U.RuntimeInit(n);for(const r of this.Wq.xD())r.E$();this.zkt()&&await this.X5t();const i=this.Wq.mY(),e=(await i.zX(null,this.Kb()),await i.s$(!0),this.qLt=performance.now(),s(),this.DOt||this.eBt(),await this.XD("runtime","before-start-ticking"));e.isSuspended&&!this.zkt()?(this.ALt++,this.ELt=!0):this.YK()}eBt(){this.F4(V.G$.x$.M$.hBt,null,null),this.vf("runtime","register-sw")}Hyt(t){t=Math.floor(t);const s=this.lLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}U5t(){for(const t of self.rBt){const s=V.first(Object.keys(t));this.uLt.push(s)}}a1t(t){t=Math.floor(t);const s=this.uLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}nBt(){return this.aOt}oBt(){return this.oOt}nk(){return this.lOt}VDt(){return this.rOt}aBt(){return this.nOt}xk(){return this.u0t}Ok(){return this.u0t.Ok()}Zdt(){return this.u0t.Zdt()}Pk(){return this.u0t.Pk()}Qdt(){return this.u0t.Qdt()}Mvt(){return 0===this.Zdt().P0t()}s1t(){return this.u0t.s1t()}IAt(){return this.WOt}jwt(){return this.WOt.jwt()}Lz(t){if((t=Math.floor(t))<0||t>=this.qOt.length)throw new RangeError("invalid index");return this.qOt[t]}lBt(t){return this.XOt.get(t.toLowerCase())||null}qV(t){return this.$Ot.get(t)||null}frt(t){const s=V.fL.EL(t);return s?s.DL():null}o9(){return this.qOt}*uBt(){for(const t of this.qOt)t.a9()||(yield*t.instances())}Kf(){return this.K_t}Sk(){return this.wX}tY(t){t.runtime=this.dL();const s=this.sY()&&!this.u0t.n5();s&&U.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),s&&U.AddScriptTime()}S$(t){return t.runtime=this.dL(),this.wX.r0(t)}lk(){return this.COt}ck(){return this.POt}cBt(t,s){if(this.COt!==t||this.POt!==s){this.COt=t,this.POt=s;const i=this.bD();i.GY(),i.TY()}}N9(){return this.AOt}W9(){return this.FOt}hDt(t,s){if(this.AOt!==t||this.FOt!==s){this.AOt=t,this.FOt=s;const i=this.bD();i.GY(),i.TY()}}Jkt(t){this.zkt()||(this.w3=t)}nL(){return this.w3}OJ(){return this.ROt}LJ(){return this.EOt}$O(){return this.cLt}UJ(){return this.cLt?this.cLt.UJ():this.AOt}HJ(){return this.cLt?this.cLt.HJ():this.FOt}HB(){return this.cLt?this.cLt.HB():1}pV(){return this.cLt?this.cLt.pV():1}Gq(){return this.cLt?this.cLt.Gq():1}Mq(){return this.cLt?this.cLt.Mq():1}DB(){return this.cLt?this.cLt.DB():0}OB(){return this.cLt?this.cLt.OB():0}fBt(){return this.cLt?this.cLt.QO():0}dBt(){return this.cLt?this.cLt.sL():0}fV(){return this.cLt?this.cLt.fV():"off"}tq(t){return this.cLt?this.cLt.tq(t):null}Mz(t){this.cLt&&this.cLt.Mz(t)}ZJ(){return this.OOt}Wkt(){return this.LOt}jkt(){return this.BOt}nD(){return this.cLt?this.cLt.nD():NaN}Q2(){return"nearest"!==this.fk()}aD(){return this.dLt}lD(t){this.dLt!==t&&(this.dLt=t,-1!==this.hkt||-1!==this.vLt)&&(this.pBt(),this.mBt())}fk(){return this.VM}AIt(){return this.DOt}NDt(){return this.NOt}$Dt(){this.NOt&&(this.NOt.WI(),this.NOt.pr(),this.NOt=null)}bD(){return this.Wq}yD(){return this.Wq.yD()}Mtt(){return this.LQ}gBt(){return this.VOt}IPt(){return this.UOt}Dut(){return this.dut}XF(){return this.OH}cH(t){return this.OH.cH(t)}i5(t,s,i,e,h,r){if(r&&this.UOt){if(t instanceof V.hut&&t.a9()){const o=t.Igt(),a=Math.floor(this.gD()*o.length);return this.i5(o[a],s,i,e,h,r)}const n=this.UOt.eut(t,r);if(n){const l=this.qz(n,s,!1,i,e,!1,h,void 0,h);return this.UOt.rut(l,r),l}}return this.qz(t,s,!1,i,e,!1,h,void 0,h)}qz(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof V.hut){if((u=t).a9()){const b=u.Igt(),v=Math.floor(this.gD()*b.length);u=b[v]}l=u.Nz()}else l=t,u=this.Lz(l[1]);const c=u.WL().yL();if(this.Kg&&c&&!u.XIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.nLt.has(l[2])?l[2]:this.rLt++;const p=l?l[0]:null,m=V.dr(V.Instance,{runtime:this,JB:u,lN:s,YCt:p,tPt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.nLt.set(d,m);let g=null,y=(c&&(g=m.ND(),void 0!==e&&void 0!==h&&(g.Fv(e),g.Ov(h)),u.MCt(!0)),s&&(a||s.$z(m,!0),s.vD().qX(u)),this.hLt++,!0);if(o){const M=o.qB();if(M.r4()&&u.r4()){const x=u.UX(),G=M.UX();x===G&&(y=!1)}}if(u.r4()&&!i&&!r&&y){const T=new Set;for(const _ of u.UX().C$())if(_!==u){const I=this.yBt(_,g,T);if(I){const C=this.qz(I,f,!1,g?g.Av():e,g?g.Dv():h,!0,!1,void 0,a);m.P$(C)}else{const B=this.qz(_,f,!1,g?g.Av():e,g?g.Dv():h,!0,!1,void 0,a);m.P$(B)}}for(const P of m.n4()){P.P$(m);for(const R of m.n4())P!==R&&P.P$(R)}}if(c&&!i&&n&&this.wBt(m,p,g,s,e,h,a),u.r4()&&!i&&!r&&n)for(const E of m.n4()){const A=E.ND();if(A){const N=E.WL(),F=E.qB().Nz()[0];N.yL()?this.wBt(E,F,A,s,A.Av(),A.Dv(),a):this.wBt(E,F,A,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const k=g.WN(),W=e-g.Av()+k.Av(),j=h-g.Dv()+k.Dv();k.cN(W,j)}u.yCt();const O=l?V.ro(l[5]):null,L=l?l[4].map(t=>V.ro(t)):null,w=c&&p&&p[13];if(w&&m.nPt(),m.JIt(O,L),w){const D=p[13];m.A6().Qxt(D[2],D[0],D[1])}this.tLt.push(m),this.iLt=!0,this.sY()&&U.InstanceCreated(m);const S=this.d5t.instancecreate;return S.U6=m,this.K_t.dispatchEvent(S),m}GRt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.Wq.yY(s),n=r.WD(i);return n.Vz(e)}yBt(t,s,i){const e=s?._Pt()??[];for(const h of e){const r=this.GRt(h),n=!!h[4],o=this.Lz(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}wBt(a,t,s,l,u,c,f){const i=s.zEt(),e=s._Pt();if(a.ND().JEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.Wq.yY(t),v=b.WD(s);o=v.Vz(i)}const y=this.Lz(o[1]),w=a.CPt(y),S=d.has(y);if(w&&!S&&h){const M=a.PPt(y),x=(M.ND().KCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;M.ND().cN(x,G),M.ND().JEt(r),a.XN(M,{QN:!!(e>>0&1),s6:!!(e>>1&1),e6:!!(e>>2&1),r6:!!(e>>3&1),o6:!!(e>>4&1),m6:!!(e>>5&1),l6:!!(e>>6&1),c6:!!(e>>7&1),d6:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.qz(o,l,!1,T,_,!1,!0,a,f);I.ND().JEt(r),a.XN(I,{QN:!!(e>>0&1),s6:!!(e>>1&1),e6:!!(e>>2&1),r6:!!(e>>3&1),o6:!!(e>>4&1),m6:!!(e>>5&1),l6:!!(e>>6&1),c6:!!(e>>7&1),d6:!!(e>>8&1)})}}}}t4(i){if(!this.oLt.has(i)){let t=i.qB(),s=this.sLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.sLt.set(t,s);if(this.sY()&&U.InstanceDestroyed(i),i.aPt(),this.iLt=!0,i.r4())for(const e of i.n4())this.t4(e);for(const h of i.children())h.g6()&&this.t4(h);if(!this.Wq.o5()&&!this.QLt){const r=this.xk();r.h5(!0),i.NPt(),r.h5(!1)}i.WPt(this.Wq.o5())}}a5(){this.iLt&&(this.eLt=!0,this.SBt(),this.bBt(),this.eLt=!1,this.iLt=!1,this.JD())}SBt(){for(const t of this.tLt){const s=t.qB();s.$z(t);for(const i of s.m1t())i.$z(t),i.yCt()}V.Hn(this.tLt)}bBt(){this.K_t.Hf(!0);for(const[t,s]of this.sLt.entries())this.vBt(t,s),s.clear();this.sLt.clear(),this.K_t.Hf(!1)}vBt(t,s){for(const i of s){const e=this.d5t.instancedestroy,h=(e.U6=i,this.K_t.dispatchEvent(e),this.nLt.delete(i.o4()),this.zLt.delete(i),i.ND());h&&(h.$Et(),h.Qz(),h.aPt()),this.oLt.add(i),this.hLt--}V.Qn(t.KL(),s),t.yCt(),this.aLt.add(t);for(const r of t.m1t())V.Qn(r.KL(),s),r.yCt(),this.aLt.add(r);if(t.WL().yL()){const n=new Set([...s].map(t=>t.ND().WD()));for(const o of n)o.fJ(s)}}SCt(){return this.tLt}*_Mt(t){for(const s of this.SCt())t.a9()?s.qB().xvt(t)&&(yield s):s.qB()===t&&(yield s)}zIt(){return this.rLt++}qIt(t,s){this.nLt.set(t,s)}VV(t){this.RLt!==(t=!!t)&&(this.RLt=!!t,this.RLt)&&this.ELt&&(this.zV(!1),this.ELt=!1)}UV(){return this.RLt}t$(){this.K_t.dispatchEvent(V.dr(V.Event,"renderercontextlost")),this.zV(!0);for(const s of this.qOt)!s.a9()&&s.$It()&&s.ZX();const t=this.yD();t&&t.t$(),V.JTt.XH(),V.dH.XH()}async gDt(){await this.yD().zX(null,this.Kb()),this.K_t.dispatchEvent(V.dr(V.Event,"renderercontextrestored")),this.zV(!1),this.JD()}b5t(t){if(this.RLt){const s=t.hidden;this.zV(s),(this.ELt=s)||this.JD()}}G5t(t){this.tOt()&&this.gLt&&!V.fi.Mi&&!t.data.parentHasFocus&&(this.zV(!0),this.yLt=!0)}T5t(){this.yLt&&(this.zV(!1),this.yLt=!1)}mBt(){const t=this.SLt;"vsync"===this.dLt?-1===this.hkt&&(this.hkt=self.requestAnimationFrame(t.bLt)):"unlimited-tick"===this.dLt?(-1===this.vLt&&(this.vLt=V.So(t.MLt)),-1===this.hkt&&(this.hkt=self.requestAnimationFrame(t.xLt))):-1===this.vLt&&(this.vLt=V.So(t.bLt))}pBt(){-1!==this.hkt&&(self.cancelAnimationFrame(this.hkt),this.hkt=-1),-1!==this.vLt&&(V.bo(this.vLt),this.vLt=-1)}Uk(){return 0<this.ALt}zV(t){if(!this.zkt()){const s=this.Uk(),i=(this.ALt+=t?1:-1,this.ALt<0&&(this.ALt=0),this.Uk());if(!s&&i)console.log("[Construct] Suspending"),this.pBt(),this.K_t.dispatchEvent(V.dr(V.Event,"suspend")),this.F4(V.G$.x$.M$.MBt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.OLt=e,this.qLt=e,this.JLt=0,this.XLt=0,this.$Lt=0,this.YLt=0,this.ZLt=0,this.KLt=0,this.K_t.dispatchEvent(V.dr(V.Event,"resume")),this.F4(V.G$.x$.M$.xBt,null,null),this.j1t()||this.YK(e)}}}PV(t){this.m5t.xc(t)}FV(t){this.g5t.xc(t)}EV(t){this.y5t.xc(t)}RV(t){this.m5t.R0(t)}kV(t){this.g5t.R0(t)}AV(t){this.y5t.R0(t)}GBt(){const t=globalThis.TV;this.m5t.Md(!0);for(const s of this.m5t)s instanceof t?s.U4():s.YK();this.m5t.Md(!1)}TBt(){const t=globalThis.TV;this.g5t.Md(!0);for(const s of this.g5t)s instanceof t?s.OV():s.TTt();this.g5t.Md(!1)}_Bt(){const t=globalThis.TV;this.y5t.Md(!0);for(const s of this.y5t)s instanceof t?s.z4():s.bGt();this.y5t.Md(!1)}*IBt(){const s=globalThis.TV;this.m5t.Md(!0);for(const i of this.m5t){let t;t=i instanceof s?i.U4():i.YK(),V.Xo(t)&&(yield*t)}this.m5t.Md(!1)}*CBt(){const s=globalThis.TV;this.g5t.Md(!0);for(const i of this.g5t){let t;t=i instanceof s?i.OV():i.TTt(),V.Xo(t)&&(yield*t)}this.g5t.Md(!1)}*PBt(){const s=globalThis.TV;this.y5t.Md(!0);for(const i of this.y5t){let t;t=i instanceof s?i.z4():i.bGt(),V.Xo(t)&&(yield*t)}this.y5t.Md(!1)}async YK(a,t,s){this.CLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.bD(),f=this.$O();if(this._Lt&&(!this.Uk()||t||l)){let t=performance.now(),s=(this.ILt=!0,this.RBt(a||0),this.$Lt++,this.EBt(),this.ABt()),i=(this.bMt()&&await s,this.K_t.n0(this.d5t.pretick)),e=(i instanceof Promise&&await i,this.FBt()),h=(this.bMt()&&await e,this.kBt()&&await this.DBt(),c.TD()&&await this.OBt(),this.LBt()),r=(this.bMt()&&await h,c.yD()),n=r.BX(),o=!1;if(-1!==n&&(r.NX(),f.LX()!==n)){const d=this.$O().r$(n);this.nk()&&(o=!0,await d)}this.vf("canvas","update-html-layer-dom-state",{layersDomState:r.m9().filter(t=>t.oB()).map(t=>t.SJ())}),u&&this.W3(),o&&this.vf("canvas","cleanup-html-layers"),this.zkt()&&(await this.$5t(),this.Xk()>=this.J5t())?this.K5t():(this.Uk()||l||this.mBt(),this.GLt++,this.TLt++,this.ILt=!1,this.KLt+=performance.now()-t)}}async ABt(){const t=this.u0t,s=this.sY();this.a5(),t.h5(!0),this.P1t(this.yD()),s&&U.StartMeasuringTime(),this.bMt()?await t.apt():t.ept(),s&&U.AddEventsTime(),this.R1t(),t.h5(!1),this.a5(),t.h5(!0)}async FBt(){const t=this.sY(),s=this.bMt(),i=this.K_t,e=this.d5t,h=this.p5t;t&&U.StartMeasuringTime(),s?await this.BBt(this.IBt()):this.GBt(),s?await this.BBt(this.CBt()):this.TBt(),t&&U.AddBehaviorTickTime(),t&&U.StartMeasuringTime(),s?await this.NBt(e.tick):i.dispatchEvent(e.tick),t&&U.AddPluginTickTime(),this.u0t.h5(!1),this.tY(h.tick)}async LBt(){const t=this.u0t,s=this.K_t,i=this.d5t,e=this.sY(),h=this.bMt();e&&U.StartMeasuringTime(),h?await t.E1t(this.Wq):t.C1t(this.Wq),e&&U.AddEventsTime(),this.jOt.w3t(),this.EBt(),this.PLt=!1,t.h5(!0),e&&U.StartMeasuringTime(),h?await this.BBt(this.PBt()):this._Bt(),e&&U.AddBehaviorTickTime(),e&&U.StartMeasuringTime(),h?await this.NBt(i.tick2):s.dispatchEvent(i.tick2),e&&U.AddPluginTickTime(),t.h5(!1),h&&await t.V1t()}EBt(){if(0!==this.oLt.size){const t=this.K_t;t.Hf(!0);for(const s of this.aLt)s.K1t().Wft(this.oLt);this.aLt.clear(),this.u0t.upt(this.oLt);for(const i of this.oLt)i.pr();this.oLt.clear(),t.Hf(!1)}}async OBt(){let t=this.bD(),s=0;for(;t.TD()&&s++<10;)await this.WBt(t.xY())}RBt(t){let s=0;if(this.zkt())s=1/this.q5t(),this.LLt=s,this.BLt=s;else if(0!==this.OLt){const i=Math.max(t-this.OLt,0);.5<(s=i/1e3)&&(s=0),this.LLt=s,this.BLt=V.Gr(s,this.jLt,this.WLt)}this.OLt=t,this.NLt=this.BLt*this.XCt,this.VLt.xc(this.NLt),this.ULt.xc(s*this.XCt),this.HLt.xc(this.BLt);for(const[e,h]of this.zLt)h.xc(this.BLt*e.Zk());this.cLt&&this.cLt.CDt(),1e3<=t-this.qLt&&(this.qLt+=1e3,1e3<=t-this.qLt&&(this.qLt=t),this.XLt=this.JLt,this.JLt=0,this.YLt=this.$Lt,this.$Lt=0,this.ZLt=Math.min(this.KLt/1e3,1),this.KLt=0,this.cLt&&this.cLt.IDt(),this.jOt.p3t(),this.sY())&&U.Update1sPerfStats()}hPt(t,s){if(s){if(!this.zLt.has(t)){const i=V.dr(V.A0);i.L0(this.VLt),this.zLt.set(t,i)}}else this.zLt.delete(t)}rPt(t){const s=this.zLt.get(t);return s?s.ri():this.Xk()}async WBt(t){const s=this.K_t,i=this.bD(),e=i.yD();await e.F$(),e.QX(t,this.Kb()),e===t&&this.u0t.O$(),this.jOt.w3t(),this.EBt(),s.dispatchEvent(this.d5t.beforelayoutchange),V.Jf.l0(!0),await t.zX(e,this.Kb()),V.Jf.l0(!1),await t.s$(!1),s.dispatchEvent(this.d5t.layoutchange),this.JD(),this.PLt=!0,this.a5(),this.Y5t()}JD(){this.mLt=!0}yDt(){return this.cLt?this.cLt.yDt():null}wDt(){return this.cLt?this.cLt.wDt():null}Kb(){return this.cLt?this.cLt.Kb():null}W3(){const i=this.cLt;if(i&&!i.mDt()){const e=this.Kb(),t=e.XE(),h=t&&e.Eb(),r=t&&e.Xw();if(h&&e.kE(),this.mLt||this.zkt()){const n=this.Wq.yD(),o=(this.JLt++,e._E(),this.sY());o&&U.StartMeasuringTime(),this.mLt=!1;let t=null,s=(h&&(t=i.EDt().vP(),e.qE(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.EX())),e.StartMeasuringRenderPassTime(0,1)),this.Y9()&&"low"===i.QJ()?e.BR(i.UJ(),i.HJ()):e.NR(),this.jBt(this.Kb(),n),t&&e.$E(t),r&&(e.StopMeasuringRenderPassTime(),this.cLt.ADt(s)),e.xb(),o&&(U.AddDrawCallsTime(),U.UpdateInspectHighlight()),i&&i.kDt()}else e._b()}}J$(t){return"low"===this.$O().QJ()||t.Eb()&&(this.ZJ()||this.Y9())}jBt(s,i){s.iS(),s.eE(),s.$R(1,1,1,1),s.BE(null),s.QR(null),s.CE(this.Y9()),this.J$(s)&&i.H$(s);const e=i.LX();for(let t=1;t<e;++t)i.Y$(s,t),s.Xw()&&s.Restart();this.J$(s)||i.H$(s),i.$$(s)}F4(t,s,i){if(!this._Lt)return!1;let e=!this.ILt&&!this.u0t.J1t(),h=0;e&&(h=performance.now());const r=this.sY(),n=(r&&this.r8(!1),this.u0t.D1t(this.Wq,t,s,i));if(e){const o=performance.now()-h;this.KLt+=o,r&&U.AddTriggersTime(o)}return r&&this.r8(!0),n}aGt(t,s,i){if(!this.bMt())return this.F4(t,s,i);if(this.j1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.ILt||this.u0t.J1t())return this.u0t.B1t(this.Wq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async O4(t,s,i){if(!this.bMt())return this.F4(t,s,i);if(!this._Lt)return!1;if(this.j1t())return this.u0t.N1t(t,s,i);if(!this.yD())return this.u0t.O1t(t,s,i);let e=performance.now(),h=this.u0t.B1t(this.Wq,t,s,i),r=h.next();for(;!r.done;)await this.F1t(r.value),r=h.next();return this.Uk()||this.u0t.J1t()||(await this.u0t.V1t(),this.CLt&&!this.ILt&&this.mBt()),this.KLt+=performance.now()-e,r.value}lGt(t,s,i){const e=this.sY(),h=(e&&this.r8(!1),this.u0t.U1t(this.Wq,t,s,i));return e&&this.r8(!0),h}uGt(t,s,i){return this.u0t.H1t(this.Wq,t,s,i)}cGt(t){return this.FLt.xc(t)}P1t(t){this.QOt.push(t)}R1t(){if(!this.QOt.length)throw new Error("layout stack empty");this.QOt.pop()}LD(){return this.QOt.length?this.QOt.at(-1):this.yD()}Hk(t){return t&&-1!==t.Zk()?this.BLt*t.Zk():this.NLt}XK(){return this.NLt}$K(){return this.BLt}Jk(){return this.LLt}Zk(){return this.XCt}Qk(t){(isNaN(t)||t<0)&&(t=0),this.XCt=t}fD(t){this.jLt=Math.max(t,0)}cD(){return this.jLt}mD(t){this.WLt=Math.max(t,0)}pD(){return this.WLt}tD(){return this.XLt}iD(){return this.YLt}hD(){return this.ZLt}VBt(){return this.DLt}Xk(){return this.VLt.ri()}UBt(){return this.ULt.ri()}Yk(){return this.HLt.ri()}Htt(){return this.GLt}HBt(){return this.TLt}zBt(){return this.hLt}ik(){return this.GOt}hk(){return this.TOt}JBt(){return this._Ot}qBt(){return this.IOt}kD(t){if(this.QLt)throw new Error("cannot call while loading state - wait until afterload event");return this.nLt.get(t)||null}_$(){this.nLt.clear();for(const t of this.qOt)if(!t.a9())for(const s of t.KL())this.nLt.set(s.o4(),s)}tOt(){return"preview"===this.cOt}sY(){return this.yOt}zO(){return this.cOt}JO(){return"nwjs"===this.zO()||this.fOt}iOt(){return"cordova"===this.cOt}XBt(){return"Android"===V.fi.di&&("cordova"===this.cOt||"playable-ad-single-file"===this.cOt||"playable-ad-zip"===this.cOt||"instant-games"===this.cOt)}Q5t(){return this.xU}$Bt(){return this.dOt}qO(){return this.pOt}YBt(){return this.mOt}KF(){return this.jOt}HTt(){return this.WOt.HTt()}zTt(){return this.WOt.zTt()}Y9(){return this.fLt}KBt(){return this.Kb().Lw(this.W9())}kw(t){return this.Kb().kw(t||this.W9())}ZBt(){return this.PLt}QBt(t){this.pLt!==(t=!!t)&&(this.pLt=t,this.bD().TY(),this.JD())}pk(){return this.pLt}t4t(t){if(!this.JOt.has(t)){const i=()=>this.s4t(t);this.JOt.set(t,i),t.Kf().addEventListener("animationframeimagechange",i)}const s=this.Jg.Wg(t);return s.ey()||s.ny().then(()=>this.JD()),s}s4t(t){this.Jg.Hg(t)}HOt(t){const s=[];for(const i of t.oCt())for(const e of i.cW()){const h=e.yW();s.push({source:e,width:h._m(),height:h.Om(),tag:e.LW()})}return{Qg:s}}async zOt(t){const s=V.dr(V.Gd),i=[],h=new Map;for(const n of t.oCt())for(const o of n.cW()){const a=o.yW().f_t();h.has(a)||(h.set(a,null),i.push(s.xc(async()=>{const t=await a.ZH();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.oCt())for(const u of l.cW())e.push(s.xc(async()=>{const t=u.yW(),s=h.get(t.f_t()),i=await t.d_t(s),e=await createImageBitmap(i);return{my:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Qg:r}}i4t(t){this.t5t=t,this.s5t=!1}e4t(){this.t5t="",this.s5t=!0}h4t(t){this.i5t=t}d2t(t){this.Y4=t}r4t(){return this.e5t}kBt(){return!!(this.t5t||this.s5t||this.i5t||null!==this.Y4)}async DBt(){if(this.t5t&&(this.a5(),await this.n4t(this.t5t),this.o4t()),this.i5t&&(await this.a4t(this.i5t),this.o4t(),this.sY())&&U.StepIfPausedInDebugger(),this.s5t){const t=await this.l4t();this.e5t=t,await this.O4(V.G$.x$.M$.u4t,null),this.e5t="",this.o4t()}if(null!==this.Y4){this.a5();try{await this.c4t(this.Y4),this.e5t=this.Y4,await this.O4(V.G$.x$.M$.f4t,null),this.e5t=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.O4(V.G$.x$.M$.d4t,null)}this.o4t()}}o4t(){this.t5t="",this.s5t=!1,this.i5t="",this.Y4=null}aL(){return this.h5t||(this.h5t=localforage.Ni({name:"c3-localstorage-"+this.JBt(),description:this.ik()})),this.h5t}p4t(){return this.r5t||(this.r5t=localforage.Ni({name:"c3-savegames-"+this.JBt(),description:this.ik()})),this.r5t}async n4t(t){const s=await this.l4t();try{await this.p4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.e5t=s,await this.O4(V.G$.x$.M$.u4t,null),this.e5t=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.O4(V.G$.x$.M$.m4t,null)}}async a4t(t){try{const s=await this.p4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.c4t(s),this.e5t=s,await this.O4(V.G$.x$.M$.f4t,null),this.e5t=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.O4(V.G$.x$.M$.d4t,null)}}async l4t(){const t={c3save:!0,version:1,rt:{time:this.Xk(),timeRaw:this.UBt(),walltime:this.Yk(),timescale:this.Zk(),tickcount:this.Htt(),next_uid:this.rLt,running_layout:this.yD().g9(),start_time_offset:Date.now()-this.DLt},types:{},layouts:{},events:this.u0t.kq(),timelines:this.LQ.kq(),user_script_data:null};for(const i of this.qOt)i.a9()||i.PCt()||(t.types[i.g9().toString()]=i.kq());for(const e of this.Wq.xD())t.layouts[e.g9().toString()]=e.kq();const s=this.g4t("save");return s.saveData=null,await this.S$(s),t.user_script_data=s.saveData,JSON.stringify(t)}p$(){return this.QLt}async c4t(t){const s=this.bD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.p2t(),this.K_t.dispatchEvent(V.dr(V.Event,"beforeload"));for(const a of this.uBt()){const l=a.qB();l.PCt()||a.KY()}let e=i.rt,h=(this.VLt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.ULt.Set(e.timeRaw),this.HLt.Set(e.walltime),this.XCt=e.timescale,this.GLt=e.tickcount,this.DLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.QLt=!0);if(h!==this.yD().g9()){const u=s.yY(h);if(!u)return;await this.WBt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.yY(d);p&&p.Dq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.qV(y);!w||w.a9()||w.PCt()||w.Dq(g,n)}for(const S of this.Wq.xD())for(const b of S.C5())b.Oq();if(this.a5(),this._$(),this.QLt=!1,r){for(const v of this.uBt())v.m$();for(const[M,x]of Object.entries(i.types)){const G=parseInt(M,10),T=this.qV(G);!T||T.a9()||T.PCt()||T.FCt(x)}}this.rLt=e.next_uid,this.u0t.Dq(i.events);for(const _ of this.qOt)if(!_.a9()&&_.r4())for(const I of _.KL()){const C=I.I$();for(const P of _.UX().C$())if(P!==_){const R=P.KL();if(C<0||C>=R.length)throw new Error("missing sibling instance");I.P$(R[C])}}this.LQ.Dq(i.timelines),s.GY(),s.TY();for(const E of n)E.BPt();this.m2t(),this.K_t.dispatchEvent(V.dr(V.Event,"afterload")),this.tY(this.g4t("afterload"));for(const[A,F]of Object.entries(i.types)){const k=parseInt(A,10),D=this.qV(k);D&&D.ACt()}const o=this.g4t("load");o.saveData=i.user_script_data,await this.S$(o),this.JD()}y4t(t,s){return t.ND().WEt()-s.ND().WEt()}_At(t,s){t.ND()&&!this.P5t.has(t)&&(this.P5t.set(t,s),this.R5t.push(t))}p2t(){this.P5t=new WeakMap,V.Hn(this.R5t)}m2t(t="full",s=null){this.R5t.sort(this.y4t);for(const i of this.R5t)i.QY(this.P5t.get(i),t,s);for(const e of this.R5t)e.UPt(this.P5t.get(e),t,s);this.p2t()}async sBt(t){const s=await Promise.all(t.map(async t=>{const s=this.iOt()&&this.OH.iH();if(s||"playable-ad-single-file"===this.zO()){const i=await this.OH.Eo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.w5t.w4t(s)}S4t(t,s){this.w5t.b4t(t,s)}tBt(t,s){this.w5t.v4t(t,s)}iBt(t,s,i,e){return this.w5t.iBt(t,s,i,null,null,e)}M4t(t,s,i,e){return this.w5t.M4t(t,s,i,e)}x4t(){return this.w5t.G4t()}AD(t,s){this.vf("runtime","invoke-download",{url:t,filename:s})}async UDt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.nk()){const n=await this.XD("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async T4t(t){return this.nk()?this.XD("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}_4t(){this.l5t||(this.l5t=!0,this.vf("runtime","enable-device-orientation"))}I4t(){this.u5t||(this.u5t=!0,this.vf("runtime","enable-device-motion"))}gD(){return this.kLt()}C4t(t){this.kLt=t}M5t(){const t=this.Kb();return{fps:this.tD(),tps:this.iD(),cpu:this.hD(),gpu:this.nD(),layout:this.yD()?this.yD().uf():"",renderer:t.Eb()?t.eA():t.GetAdapterInfoString()}}j1t(){return!!this.sY()&&U.j1t()}F1t(t){return this.bMt()?U.F1t(t):Promise.resolve()}myt(){return!!this.bMt()&&U.BreakNext()}P4t(t){this.wOt=!!t,this.R4t()}E4t(){return this.wOt}bMt(){return this.SOt}r8(t){t?this.bOt--:this.bOt++,this.R4t()}R4t(){this.SOt=this.sY()&&this.wOt&&0===this.bOt}Fmt(){return this.sY()&&U.Fmt()}XJ(){return this.sY()&&this.Kb().XE()&&U.XJ()}async BBt(t){if(t)for(const s of t)await this.F1t(s)}NBt(t){return this.BBt(this.K_t.a0(t))}Ddt(t){return this.u0t.Ddt(t.name,t.params)}YD(t){if(this.nk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}dL(){return this._5t}g4t(t){const s=V.dr(V.Event,t,!1);return s.runtime=this._5t,s}j5t(){this._5t=new self.zF(this),this.p5t={tick:this.g4t("tick")}}H5t(){const t={};for(const s of this.qOt)t[s.a1t()]={value:s.kL(),enumerable:!0,writable:!1};this._5t.bk(t)}z5t(){const t={};for(const s of this.xk().g1t())t[s.a1t()]=s.l1t();this._5t.vk(t)}ID(){return this.C5t}jL(t,s){this.I5t.set(t,s)}E5(t){return this.I5t.get(t)}LO(t){if(!(t instanceof self.BL))throw new TypeError("expected IObjectClass");const s=this.E5(t);if(s&&s instanceof V.hut)return s;throw new Error("invalid IObjectClass")}XL(t){if(!(t instanceof self.zB))throw new TypeError("expected IInstance");const s=this.E5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}BD(t){if(!(t instanceof self.I6))throw new TypeError("expected IWorldInstance");const s=this.E5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.eOt.Cx,self.C3_InitRuntime=(t,s)=>t.KCt(s)}{const Oa=self.Ws;Oa.S5t=class extends Oa.ur{constructor(t,s){super(),this.wf=t,this.A4t=new Map,this.F4t=0,this.k4t=s.inputPort,s.outputPort.onmessage=t=>this.D4t(t),this.O4t=s.maxNumWorkers,this.L4t=1,this.B4t=!1,this.N4t=!1}async KCt(){}G4t(){return this.O4t}w4t(t){this.k4t.postMessage({type:"_import_scripts",scripts:t})}b4t(t,s){this.k4t.postMessage({type:"_send_blob",blob:t,id:s})}v4t(t,s){this.k4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}iBt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.F4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.A4t.set(n,{resolve:t,progress:e,reject:s,W4t:!1,maxWorkerNum:r})});return h&&h.C0(()=>this.j4t(n)),this.k4t.postMessage(o,i),this.V4t(),a}M4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.F4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.k4t.postMessage(r,i)}j4t(t){const s=this.A4t.get(t);s&&(s.W4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.k4t.postMessage({type:"_cancel",jobId:t}))}D4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.U4t(e,s.result);break;case"progress":this.H4t(e,s.progress);break;case"error":this.z4t(e,s.error);break;case"ready":this.J4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}U4t(t,s){const i=this.A4t.get(t);if(!i)throw new Error("invalid job ID");i.W4t||i.resolve(s),this.A4t.delete(t)}H4t(t,s){const i=this.A4t.get(t);if(!i)throw new Error("invalid job ID");!i.W4t&&i.progress&&i.progress(s)}z4t(t,s){const i=this.A4t.get(t);if(!i)throw new Error("invalid job ID");i.W4t||i.reject(s),this.A4t.delete(t)}J4t(){this.B4t&&(this.B4t=!1,this.L4t++,this.L4t<this.O4t?this.V4t():this.k4t.postMessage({type:"_no_more_workers"}))}q4t(){let t=0,s=[...this.A4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async V4t(){if(!(this.L4t>=this.O4t||this.B4t||this.N4t||this.q4t()<=this.L4t))try{this.B4t=!0;const t=await this.wf.XD("runtime","create-job-worker");t.outputPort.onmessage=t=>this.D4t(t)}catch(t){this.N4t=!0,this.B4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.L4t} so far)`,t)}}}}self.C3_Shaders={};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(S,self.Ws),i=null,e="",h="",r=[],n="",o="",a="",v=b.dr(b.ndt);b.G$.x$=class extends b.dxt{constructor(t){super(t),this.sdt=this.wf.xk().e8(),this.jft=this.wf.xk().Ok(),this.X4t=0,this.$4t=0,this.Y4t=new Map}pr(){super.pr()}JD(){this.wf.JD()}F4(t){this.wf.F4(t,null,null)}K4t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}Z4t(t,s,i){if(t!==n||s!==o||i!==a){const e=this.K4t(s,i);r=t.match(e),n=t,o=s,a=i}return r}async Q4t(t,s){if(s.length){this.X4t+=s.length;const i=[];for(const e of s)i.push(t.qX(e));await b.po(i,()=>{this.$4t++}),this.$4t++,this.$4t===this.X4t&&(this.$4t=0,this.X4t=0,this.wf.F4(b.G$.x$.M$.tNt,null,null))}}sNt(t,s){for(const i of s)0===i.t5()&&t.KX(i)}iNt(){return v}eNt(s){const i=this.wf.xk(),t=i.Ok(),e=t.s8(),h=e.Pk(),r=h.t8(),n=e.j0t(),o=t.i8(h),a=i.e8(),l=a.i8();if(l.hdt(s),n)for(let t=0;t<s&&!l.f8();++t)i.o8(r),l.u8(t),h.a8(e,o),i.l8(r);else for(let t=0;t<s&&!l.f8();++t)l.u8(t),h.a8(e,o);return t.d8(),a.d8(),!1}*hNt(s){const i=this.wf.xk(),t=i.Ok(),e=t.s8(),h=e.Pk(),r=h.t8(),n=e.j0t(),o=t.i8(h),a=i.e8(),l=a.i8();if(l.hdt(s),n)for(let t=0;t<s&&!l.f8();++t)i.o8(r),l.u8(t),yield*h._yt(e,o),i.l8(r);else for(let t=0;t<s&&!l.f8();++t)l.u8(t),yield*h._yt(e,o);return t.d8(),a.d8(),!1}rNt(){const s=this.wf.xk(),t=s.Ok(),i=t.s8(),e=i.Pk(),h=e.t8(),r=i.j0t(),n=t.i8(e),o=s.e8(),a=o.i8();if(r)for(let t=0;!a.f8();++t)s.o8(h),a.u8(t),e.a8(i,n)||a.WW(),s.l8(h);else for(let t=0;!a.f8();++t)a.u8(t),e.a8(i,n)||a.WW();return t.d8(),o.d8(),!1}*nNt(){const s=this.wf.xk(),t=s.Ok(),i=t.s8(),e=i.Pk(),h=e.t8(),r=i.j0t(),n=t.i8(e),o=s.e8(),a=o.i8();if(r)for(let t=0;!a.f8();++t){s.o8(h),a.u8(t);const l=yield*e._yt(i,n);l||a.WW(),s.l8(h)}else for(let t=0;!a.f8();++t){a.u8(t);const u=yield*e._yt(i,n);u||a.WW()}return t.d8(),o.d8(),!1}oNt(t,s,i){const e=this.wf.xk(),h=e.Ok(),r=h.s8(),n=r.Pk(),o=n.t8(),a=r.j0t(),l=h.i8(n),u=e.e8(),c=u.i8();if(c.h8(t),c.hdt(i),i<s)if(a)for(let t=s;t>=i&&!c.f8();--t)e.o8(o),c.u8(t),n.a8(r,l),e.l8(o);else for(let t=s;t>=i&&!c.f8();--t)c.u8(t),n.a8(r,l);else if(a)for(let t=s;t<=i&&!c.f8();++t)e.o8(o),c.u8(t),n.a8(r,l),e.l8(o);else for(let t=s;t<=i&&!c.f8();++t)c.u8(t),n.a8(r,l);return h.d8(),u.d8(),!1}*aNt(t,s,i){const e=this.wf.xk(),h=e.Ok(),r=h.s8(),n=r.Pk(),o=n.t8(),a=r.j0t(),l=h.i8(n),u=e.e8(),c=u.i8();if(c.h8(t),c.hdt(i),i<s)if(a)for(let t=s;t>=i&&!c.f8();--t)e.o8(o),c.u8(t),yield*n._yt(r,l),e.l8(o);else for(let t=s;t>=i&&!c.f8();--t)c.u8(t),yield*n._yt(r,l);else if(a)for(let t=s;t<=i&&!c.f8();++t)e.o8(o),c.u8(t),yield*n._yt(r,l),e.l8(o);else for(let t=s;t<=i&&!c.f8();++t)c.u8(t),yield*n._yt(r,l);return h.d8(),u.d8(),!1}lNt(i){const t=i.ZL(),s=t.KL();if(0!==s.length){const e=this.wf.xk(),h=e.Ok(),r=h.s8(),n=r.Pk(),o=n.t8(),a=r.j0t(),l=h.i8(n),u=e.e8(),c=u.i8(),f=i.r4(),d=v.i8();if(b.Xn(d,s),c.hdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.f8();++t){e.o8(o);const p=d[t];i.ZL().s0t(p),f&&p.Nmt(),c.u8(t),n.a8(r,l),e.l8(o)}else{t.Zft(!1);const m=t.Qft();b.Hn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.f8();++t){const g=d[t];m[0]=g,f&&g.Nmt(),c.u8(t),n.a8(r,l)}}h.d8(),u.d8(),b.Hn(d),v.d8()}return!1}*uNt(i){const t=i.ZL(),s=t.KL();if(0!==s.length){const e=this.wf.xk(),h=e.Ok(),r=h.s8(),n=r.Pk(),o=n.t8(),a=r.j0t(),l=h.i8(n),u=e.e8(),c=u.i8(),f=i.r4(),d=v.i8();if(b.Xn(d,s),c.hdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.f8();++t){e.o8(o);const p=d[t];i.ZL().s0t(p),f&&p.Nmt(),c.u8(t),yield*n._yt(r,l),e.l8(o)}else{t.Zft(!1);const m=t.Qft();b.Hn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.f8();++t){const g=d[t];m[0]=g,f&&g.Nmt(),c.u8(t),yield*n._yt(r,l)}}h.d8(),u.d8(),b.Hn(d),v.d8()}return!1}cNt(i,t){const s=i.ZL(),e=s.KL();if(0!==e.length){const h=this.wf.xk(),r=h.Ok(),n=h.Qdt(),o=r.s8(),a=o.Pk(),l=a.t8(),u=o.j0t(),c=r.i8(a),f=h.e8(),d=f.i8(),p=i.r4(),m=v.i8();b.Hn(m),d.hdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.jbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.f8();++t){h.o8(l);const g=m[t][0];i.ZL().s0t(g),p&&g.Nmt(),d.u8(t),a.a8(o,c),h.l8(l)}else{s.Zft(!1);const y=s.Qft();b.Hn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.f8();++t){const w=m[t][0];y[0]=w,p&&w.Nmt(),d.u8(t),a.a8(o,c)}}r.d8(),f.d8(),b.Hn(m),v.d8()}return!1}*fNt(i,t){const s=i.ZL(),e=s.KL();if(0!==e.length){const h=this.wf.xk(),r=h.Ok(),n=h.Qdt(),o=r.s8(),a=o.Pk(),l=a.t8(),u=o.j0t(),c=r.i8(a),f=h.e8(),d=f.i8(),p=i.r4(),m=v.i8();b.Hn(m),d.hdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.jbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.f8();++t){h.o8(l);const g=m[t][0];i.ZL().s0t(g),p&&g.Nmt(),d.u8(t),yield*a._yt(o,c),h.l8(l)}else{s.Zft(!1);const y=s.Qft();b.Hn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.f8();++t){const w=m[t][0];y[0]=w,p&&w.Nmt(),d.u8(t),yield*a._yt(o,c)}}r.d8(),f.d8(),b.Hn(m),v.d8()}return!1}dNt(t,s){let i=this.Y4t.get(t);if(!i){if(!s)return null;i={pNt:null,mNt:new Map},this.Y4t.set(t,i)}return i}gNt(t,s,i,e,h){s.Ik().Vyt(i,s.Ak()),e&&t.l8(h)}*yNt(t,s,i,e,h){yield*s.Ik().Uyt(i,s.Ak()),e&&t.l8(h)}}}{const La=self.Ws;La.G$.x$.PIt=class extends La.ur{constructor(t){super(),this.Fft=t,this.wf=t.nO(),this.Zxt=t.WL()}Oxt(){}pr(){this.Fft=null,this.wf=null,this.Zxt=null}}}{const Ba=self.Ws;Ba.G$.x$.Instance=class extends Ba.ur{constructor(t,s){super(),this.Ii=t,this.Fft=this.Ii.qB(),this.hGt=this.Fft.wvt(),this.wf=this.Ii.nO()}pr(){this.Ii=null,this.Fft=null,this.hGt=null,this.wf=null}}}{const G=self.Ws,Na=[];G.G$.x$.M$={wNt(){return!0},v$(){return!0},k$(){return!0},MBt(){return!0},xBt(){return!0},Uk(){return this.wf.Uk()},xgt(){const t=this.wf.Zdt();return!t.O0t()&&!t.k0t()},SNt(){let t=this.wf.Qdt(),s=t.Cbt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.wf.Htt();return s.set("TriggerOnce_lastTick",e),this.wf.ZBt()||i!==e-1},bNt(t){const s=this.wf.Qdt(),i=s.Cbt(),e=i.get("Every_lastTime")||0,h=this.wf.Xk(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Npt(t){const s=this.wf.xk().b1t(t);return s&&s.Npt()},tOt(){return this.wf.tOt()},Mi(){return G.fi.Mi},hBt(){return!0},vNt(){return!0},MNt(){return!0},u4t(){return!0},m4t(){return!0},f4t(){return!0},d4t(){return!0},xNt(t){return!!this.wf.kD(t)},GNt(t){switch(t){case 0:return"browser"===G.fi.bi;case 1:return"iOS"===G.fi.di;case 2:return"Android"===G.fi.di;case 8:return"cordova"===G.fi.bi;case 9:return"scirra-arcade"===this.wf.zO();case 10:return"nwjs"===G.fi.bi;case 13:return"windows-uwp"===this.wf.zO();default:return!1}},TNt(t,s,i){const e=this.K4t(s,i);return e.test(t)},_Nt(t,s,i){return G.compare(t,s,i)},INt(t,s,i){return s<=t&&t<=i},CNt(t,s,i){return G.compare(t.Net(),s,i)},PNt(t){return!!t.Net()},RNt(t,s){const i=this.wf.Xk();if(0!==t)return G.compare(i,t,s);{const e=this.wf.Qdt(),h=e.Cbt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},ENt(t){return isNaN(t)},D2t(t,s,i){return G.Er(G._r(t),G._r(i))<=G._r(s)},O2t(t,s){return G.Fr(G._r(t),G._r(s))},Xvt(t,s,i){let e=G._r(t),h=G._r(s),r=G._r(i),n=!G.Fr(r,h);return n?!(!G.Fr(e,h)&&G.Fr(e,r)):G.Fr(e,h)&&!G.Fr(e,r)},ANt(t,s){return"number"==typeof t?0===s:1===s},FNt(t){return!!t},ypt(t){return t.toLowerCase()===this.wf.xk().vpt()},kNt(t,i,e,h){if(!t)return!1;let s=this.iNt(),r=s.i8(),n=t.ZL(),o=(G.Xn(r,n.KL()),n.zft()&&G.Hn(n.t0t()),this.wf.Qdt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.jbt(1,t),h=o.jbt(3,t),G.compare(i,e,h)?++a:n.Kft(u)}G.Un(r,a),n.i0t(r);const l=!!r.length;return G.Hn(r),s.d8(),t.Dyt(),l},DNt(t,s){if(!t)return!1;let i=this.iNt(),e=i.i8(),h=t.ZL(),r=(G.Xn(e,h.KL()),h.zft()&&G.Hn(h.t0t()),this.wf.Qdt()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.jbt(1,t)?++n:h.Kft(a)}G.Un(e,n),h.i0t(e);const o=!!e.length;return G.Hn(e),i.d8(),t.Dyt(),o},ONt(t,i,e){if(!t)return!1;const s=t.ZL(),h=s.KL();if(0===h.length)return!1;let r=this.wf.Qdt(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.jbt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.o0t(n),t.Dyt(),!0},LNt(t,s){if(!t)return!1;const i=t.ZL(),e=i.KL();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.o0t(h),t.Dyt(),!0},BNt(t){if(!t)return!1;const s=t.ZL(),i=s.KL(),e=Math.floor(this.wf.gD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.o0t(h),t.Dyt(),!0},NNt(t){if(!t)return!1;if(!t.t5())return!1;const s=t.ZL();return s.Zft(!0),t.Dyt(),!0},WNt(t,i,e){if(!t)return!1;const h=t.ZL(),s=h.KL(),r=this.wf.Pk(),n=r.a0t(),o=this.wf.Qdt().xbt();h.zft()?(G.Xn(Na,s),h.Hft(),h.Zft(!1)):n?(G.Xn(Na,h.t0t()),G.Hn(h.t0t())):(G.Xn(Na,h.Qft()),G.Hn(h.Qft()));for(let t=0,s=Na.length;t<s;++t){const a=Na[t];G.xor(a.ND().LN(i,e),o)?h.Yft(a):h.Kft(a)}return t.Dyt(),G.xor(!!h.Qft().length,o)},jNt(s){if(!s)return!1;let i=s.a9(),e=null,h=this.wf.SCt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.qB().xvt(s)){e=r;break}}else if(r.qB()===s){e=r;break}}if(!e){const n=s.KL();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.ZL();return t.o0t(e),s.Dyt(),!0},VNt(t){return this.wf.bMt()?this.hNt(t):this.eNt(t)},UNt(){return this.wf.bMt()?this.nNt():this.rNt()},HNt(t,s,i){return this.wf.bMt()?this.aNt(t,s,i):this.oNt(t,s,i)},xd(t){return this.wf.bMt()?this.uNt(t):this.lNt(t)},zNt(t,s,i){return this.wf.bMt()?this.fNt(t,i):this.cNt(t,i)},JNt(t){return!!t&&t.eB()},qNt(t){return!!t&&t.uB()},XNt(t){return!!t&&t.oB()},$Nt(t){return!!t&&!t.t5()},YNt(t,s,i){return!!t&&G.compare(100*t.qR(),s,i)},KNt(t){const s=this.wf.yD();return!!s&&s.AX(t)},tNt(){return!0},ZNt(){return 0<this.X4t},QNt(t,s){const i=this.wf.IPt();return!!i&&!!s&&!!i.eut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const Wa=self.Ws,ja=[],Va=[],Ua=Wa.dr(Wa.Rect),Ha=Wa.dr(Wa.Yo),za=[];Wa.G$.x$.drt={t6t(t,s){t.vht(s)},s6t(t,s){t.ye()&&"number"!=typeof s&&(s=parseFloat(s)),t.vht(t.Net()+s)},i6t(t,s){t.ye()&&t.vht(t.Net()-s)},e6t(t,s){t.vht(!!s)},h6t(t){t.vht(!t.Net())},r6t(t){t.vht(t.Kdt())},n6t(t){this.wf.xk().w1t(t)},o6t(t,s,i,e,h,r){if(t&&s){const n=this.wf.i5(t,s,i,e,h,r);if(n){h&&s.e5(n);const o=this.wf.xk(),a=(o.h5(!0),n.r5(),o.h5(!1),new Map);n.wPt(a,t,h);for(const[l,u]of a)l.ZL().e0t(u)}}},a6t(t,s,i,e,h,r){if(t&&s){const n=this.wf.lBt(t);n&&Wa.G$.x$.drt.o6t.call(this,n,s,i,e,h,r)}},n9(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this.wf.LD(),i=s;if(t){const p=this.wf.bD().gY(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.WD(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.WD(u))){Ua.set(r,n,o,a);const m=i.n9(h,Ua,e,t,c,f,d);h.ZL().i0t(m),h.Dyt()}}}},l6t(){const t=this.sdt;t.K0t()&&t.$0t().WW()},Wpt(t,s){const i=this.wf.xk().b1t(t);i&&(0===s?i.Wpt(!1):1===s?i.Wpt(!0):i.Wpt(!i.Npt()))},u6t(t){this.wf.Qk(t)},c6t(t,s){if(s<0&&(s=0),t){const i=t.ZL(),e=i.KL();for(const h of e)h.Qk(s)}},f6t(t){if(t){const s=t.ZL(),i=s.KL();for(const e of i)e.f4()}},Bn(t){if(!(t<0))return this.wf.xk().tpt().nxt(t),!0},jk(t){return this.wf.xk().tpt().oxt(t),!0},d6t(){const t=this.wf.xk();return t.tpt().axt(t.gpt()),!0},Nk(t){this.wf.xk().Nk(t)},async FDt(t,s,i,e,h,r){const n=this.wf.$O();n&&(this.JD(),await n.FDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.wf.O4(Wa.G$.x$.M$.vNt,null))},p6t(t,s){if(!(t<=0||s<=0)){this.wf.hDt(t,s),this.wf.LD()._q();const i=this.wf.$O();i&&("off"!==i.Kkt()&&this.wf.cBt(t,s),i.wC(i.Qj(),i.tV(),!0),this.wf.JD())}},m6t(t){const s=this.wf.$O();s&&"off"!==s.Kkt()&&(s.cDt(0!==t?"high":"low"),s.wC(s.Qj(),s.tV(),!0))},tet(t){this.wf.i4t(t)},g6t(){this.wf.e4t()},y6t(t){this.wf.h4t(t)},w6t(t){this.wf.d2t(t)},S6t(t){},b6t(){for(const t of this.wf.bD().xD())t.U$()},v6t(t){this.wf.QBt(0!==t)},M6t(t,s){this.wf.mD(1/t),this.wf.fD(1/s)},x6t(t,s){this.wf.fD(t),this.wf.mD(s)},G6t(t){this.wf.lD(["vsync","unlimited-tick","unlimited-frame"][t])},T6t(t,i){if(t){const s=t.ZL(),e=s.KL(),h=ja,r=Va,n=this.wf.LD(),o=t.a9(),a=t.hSt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.ND();if(u){let t;t=o?l.int(i+l.qB().eSt(a)):l.int(i),h.push([u.WD().HF(),u.jD()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.VD(h[t][0]),d=h[t][1],p=f.UD();p[d]!==c&&((p[d]=c).ND().HD(f,!0),f.zD(c),i=!0)}i&&this.wf.JD(),Wa.Hn(ja),Wa.Hn(Va)}}},FO(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.wf.KF().FO(t,s)},_6t(t){if(!this.wf.hy()){const s=this.wf.bD();s.TD()||s._D(t)}},I6t(t){if(!this.wf.hy()){const s=this.wf.bD();if(!s.TD()){const i=s.gY(t);i&&s._D(i)}}},C6t(t){if(!this.wf.hy()){const s=this.wf.bD();if(!s.TD()){const i=s.xD(),e=i.indexOf(s.yD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s._D(h)}}}},P6t(){if(!this.wf.hy()){const t=this.wf.bD();t.TD()||(t._D(t.yD()),this.wf.xk().G1t())}},R6t(t,s){t&&t.sB(s)},E6t(t,s){t&&t.rB(s)},A6t(t,s){t&&t.aB(s)},F6t(t,s){t&&t.YR(s/100)},k6t(t,s){t&&t.cB(s)},D6t(t,s){t&&t.dB(s)},O6t(t,s){t&&t.y5(Wa._r(+s))},L6t(t,s,i){t&&(t.PB(!0),t.S5(s),t.v5(i))},B6t(t){t&&t.PB(!1)},N6t(t,s,i){t&&t.j9(s/100,i/100)},W6t(t,s){t&&t.Bv(+s)},j6t(t,s){if(t){Ha.Aa(s),Ha.Gr();const i=t.CB();i.Ga(Ha)||(i.ma(Ha),this.JD())}},V6t(t,s){t&&t.MB(s)},U6t(t,s){t&&t.vv(s)},H6t(t,s,i){if(t){const e=t.u5(),h=e.qht(i);if(h){const r=1===s;h.Rmt()!==r&&(h.HAt(r),t.K6(),this.wf.JD())}}},z6t(t,s,i,e){if(t){const h=t.u5(),r=h.qht(s);if(r){i=Math.floor(i);const n=r.IG().PG(i);if(n){"color"===n?(Ha.Aa(e),e=Ha):"percent"===n&&(e/=100);const o=h.Q6(r.HF(),i,e);o&&r.Rmt()&&this.wf.JD()}}}},J6t(t,s){t&&t.TB(s)},q6t(t){this.wf.LD().m5(+t)},X6t(t){this.wf.LD().y5(Wa._r(+t))},$6t(t,s){const i=this.wf.LD(),e=i.u5(),h=e.qht(s);if(h){const r=1===t;h.Rmt()!==r&&(h.HAt(r),i.K6(),this.wf.JD())}},Y6t(t,s,i){const e=this.wf.LD(),h=e.u5(),r=h.qht(t);if(r){s=Math.floor(s);const n=r.IG().PG(s);if(n){"color"===n?(Ha.Aa(i),i=Ha):"percent"===n&&(i/=100);const o=h.Q6(r.HF(),s,i);o&&r.Rmt()&&this.wf.JD()}}},K6t(t,s){const i=this.wf.LD();i.W5(t/100,s/100)},Z6t(t){const s=this.wf.LD();0===t?s.U5():s.H5()},Q6t(t){const s=this.wf.LD();s.S5(t)},tWt(t){const s=this.wf.LD();s.v5(t)},sWt(t,s){const i=this.wf.LD();i.S5(t),i.v5(s)},iWt(t){if(t){const s=t.uMt();if(s){const i=s.ND();if(i){const e=this.wf.LD();e.S5(i.Av()),e.v5(i.Dv())}}}},A5(t,s,i){const e=this.wf.LD();try{e.A5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},k5(t,s,i){if(t){const e=this.wf.LD();try{e.k5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},O5(t){if(t){const s=this.wf.LD();s.O5(t)}},B5(){this.wf.LD().B5()},async eWt(t){const s=this.wf.yD();if(s&&t&&!this.wf.hy()){const i=t.a9()?t.Igt():[t];await this.Q4t(s,i)}},async hWt(t){await Wa.G$.x$.drt.eWt.call(this,this.wf.lBt(t))},rWt(t){const s=this.wf.yD();if(s&&t){const i=t.a9()?t.Igt():[t];this.sNt(s,i)}},nWt(t){Wa.G$.x$.drt.rWt.call(this,this.wf.lBt(t))},oWt(){const t=this.wf.yD();if(t){const s=t.HX();this.sNt(t,s)}},async aWt(t){const s=this.wf.yD();t&&s&&!this.wf.hy()&&await this.Q4t(s,t.jX())},async lWt(t){const s=this.wf.yD(),i=this.wf.bD().gY(t);i&&s&&!this.wf.hy()&&await this.Q4t(s,i.jX())},Bk(t){const s=this.jft.Dk();if(s)switch(s.Lk()){case 1:"number"==typeof t&&s.Bk(t);break;case 2:"string"==typeof t&&s.Bk(t);break;case 3:s.Bk(t)}},uWt(t,s,i){const e=this.dNt(t.toLowerCase(),!0),h=e.mNt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Wa.first(h.values())||e.pNt);if(n){const o=0!==n.Fk(),a=0!==i.Fk();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},cWt(t,s){const i=this.dNt(t.toLowerCase(),!0),e=(i.pNt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Wa.first(i.mNt.values())||i.pNt);if(e){const h=0!==e.Fk(),r=0!==s.Fk();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.pNt=s},fWt(t,s,i){const e=this.wf,h=e.bMt()?za:null,r=(i=Math.floor(i),this.dNt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.mNt.get(s.toLowerCase());if(!n){if(!r.pNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.pNt,i=0}if(!n.nc())return h;if(0!==n.Fk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.xk(),a=o.Pk(),l=a.Ck(),u=0<l.length,c=(u&&(n.Ak()?o.o8(l):o.Z1t(l)),[]),f=o.Jpt(a);if(f){const p=f.Xpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Net())}const d=n.Xpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Kdt());return e.bMt()?this.yNt(o,n,c,u,l):this.gNt(o,n,c,u,l)}}}{const T=self.Ws;T.G$.x$.prt={dWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},qt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.wf.gD()*t:this.wf.gD()*(s-t)+t},Vwt(...t){const s=Math.floor(this.wf.gD()*t.length);return t[s]},pWt(t,...s){return"number"!=typeof t&&(t=0),s[t=T.Gr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},mWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},gWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(T._r(t))},cos(t){return Math.cos(T._r(t))},tan(t){return Math.tan(T._r(t))},asin(t){return T.Ir(Math.asin(t))},acos(t){return T.Ir(Math.acos(t))},atan(t){return T.Ir(Math.atan(t))},exp(t){return Math.exp(t)},Qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Gr(t,s,i){return T.Gr(t,s,i)},Et(t,s,i,e){return T.Cr(t,s,i,e)},angle(t,s,i,e){return T.Ir(T.Rr(t,s,i,e))},Lt(t,s,i){return T.Lt(t,s,i)},Br(t,s,i){return T.Br(t,s,i)},Wr(t,s,i,e){return T.Wr(t,s,i,e)},jr(t,s,i,e,h){return T.jr(t,s,i,e,h)},Vr(t,s,i){return T.Vr(t,s,i)},yWt(t,s){return T.Ir(T.Er(T._r(t),T._r(s)))},wWt(t,s,i){return T.Ir(T.kr(T._r(t),T._r(s),i))},SWt(t,s,i){return T.Ir(T.Ar(T._r(t),T._r(s),T._r(i)))},bWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},vWt(t,s){return(t|=0)^1<<(0|s)},MWt(t,s){return(t|=0)&1<<(0|s)?1:0},xWt(){return"\n"},GWt(t){return"string"==typeof t?t.toUpperCase():""},TWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},_Wt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},IWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(T.pe(s),"i")):-1},CWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(T.pe(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(T.pe(s),"gi"),i):"string"==typeof t?t:""},PWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},RWt(t,s,i){const e=this.K4t(s,i);return t?t.search(e):-1},EWt(t,s,i,e){const h=this.K4t(s,i);return t?t.replace(h,e):""},AWt(t,s,i){const e=this.Z4t(t.toString(),s,i);return e?e.length:0},FWt(t,s,i,e){e=Math.floor(e);const h=this.Z4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},kWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},DWt(t){return encodeURIComponent(t)},OWt(t){return decodeURIComponent(t)},dt(){return this.wf.XK()},timescale(){return this.wf.Zk()},LWt(){return(Date.now()-this.wf.VBt())/1e3},BWt(){return Date.now()},time(){return this.wf.Xk()},tickcount(){return this.wf.Htt()},NWt(){return this.wf.zBt()},fps(){return this.wf.tD()},WWt(){return this.wf.hD()},jWt(){return this.wf.nD()},VWt(){return this.wf.$O().eL()},UWt(){return this.wf.$O().rL()},HWt(){return this.wf.lk()},zWt(){return this.wf.ck()},JWt(){return this.wf.lk()},qWt(){return this.wf.ck()},XWt(){return this.wf.LD().b5()},$Wt(){return this.wf.LD().M5()},YWt(){return this.wf.LD().uf()},KWt(){return this.wf.LD().g5()},ZWt(){return T.Ir(this.wf.LD().w5())},QWt(){return this.wf.LD()._m()},tjt(){return this.wf.LD().Om()},sjt(){return 100*this.wf.LD().k9()},ijt(){return 100*this.wf.LD().D9()},ejt(t){const s=this.wf.LD().WD(t);return s?s.F9().El():0},hjt(t){const s=this.wf.LD().WD(t);return s?s.F9().Al():0},rjt(t){const s=this.wf.LD().WD(t);return s?s.F9().Fl():0},njt(t){const s=this.wf.LD().WD(t);return s?s.F9().kl():0},ojt(t){const s=this.wf.LD().WD(t);return s?s.F9().width():0},ajt(t){const s=this.wf.LD().WD(t);return s?s.F9().height():0},ljt(t){const s=this.wf.LD().WD(t);if(s){const i=s.F9();return(i.El()+i.Fl())/2}return 0},ujt(t){const s=this.wf.LD().WD(t);if(s){const i=s.F9();return(i.Al()+i.kl())/2}return 0},cjt(t,s,i){const e=this.wf.LD().WD(t);return e?e.kB(s,i)[0]:0},fjt(t,s,i){const e=this.wf.LD().WD(t);return e?e.kB(s,i)[1]:0},djt(t,s,i){const e=this.wf.LD().WD(t);return e?e.BB(s,i)[0]:0},pjt(t,s,i){const e=this.wf.LD().WD(t);return e?e.BB(s,i)[1]:0},mjt(t,s,i,e){const h=this.wf.LD(),r=h.WD(t),n=h.WD(s);if(!r||!n||r===n)return i;const[o,a]=r.BB(i,e);return n.kB(o,a)[0]},gjt(t,s,i,e){const h=this.wf.LD(),r=h.WD(t),n=h.WD(s);if(!r||!n||r===n)return e;const[o,a]=r.BB(i,e);return n.kB(o,a)[1]},yjt(t){const s=this.wf.LD().WD(t);return s?s.fB():0},wjt(t){const s=this.wf.LD().WD(t);return s?T.Ir(s.mB()):0},Sjt(t){const s=this.wf.LD().WD(t);return s?100*s.qR():0},bjt(t){const s=this.wf.LD().WD(t);return s?s.pB():0},vjt(t){const s=this.wf.LD().WD(t);return s?s.b5():0},Mjt(t){const s=this.wf.LD().WD(t);return s?s.M5():0},xjt(t){const s=this.wf.LD().WD(t);return s?100*s.yB():0},Gjt(t){const s=this.wf.LD().WD(t);return s?100*s.SB():0},Tjt(t){const s=this.wf.LD().WD(t);return s?s.Lv():0},_jt(t){const s=this.wf.LD().WD(t);return s?s.HF():-1},Ijt(){const t=this.wf.$O();return t?t.DDt():""},Cjt(t){const s=this.sdt;if(!s.K0t())return 0;if(t){const i=s.Q0t(t);return i?i.HF():0}return s.$0t().HF()},Pjt(){return this.wf.r4t()},Rjt(t,s,...i){const e=this.dNt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.mNt.get(s.toLowerCase());if(!h){if(!e.pNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.pNt}const r=h.Fk(),n=h.Tk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.nc())return n;const o=this.wf,a=o.xk(),l=a.Pk(),u=l.Ck(),c=0<u.length,f=(c&&(h.Ak()?a.o8(u):a.Z1t(u)),h.Xpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Kdt());const d=h.Ik(),p=d.Ek(d.Ck(),h.Ak(),r,n,...i);return c&&a.l8(u),p},Ejt(){return this.wf.XF().vH()},Ajt(){return 0===this.X4t?1:this.$4t/this.X4t},renderer(){return this.wf.wDt()?"webgpu":"webgl"},Fjt(){return this.wf.wDt()?this.wf.wDt().GetAdapterInfoString():this.wf.yDt().eA()},kjt(){let t=this.wf.Kb().kb();return Math.round(100*t/1048576)/100},Djt(t,s,i){return T.$r(t,s,i)},Ojt(t,s,i){return T.Kr(t/100,s/100,i/100)},Ljt(t,s,i,e){return T.Yr(t/100,s/100,i/100,e/100)},Bjt(t,s,i){return T.Kr(t/255,s/255,i/255)},Njt(t,s,i,e){return T.Yr(t/255,s/255,i/255,e/255)},Wjt(){return this.wf.ik()},jjt(){return this.wf.hk()},Vjt(){return this.wf.Pk().RX().uf()},Ujt(){return this.wf.Pk().zgt()}}}{const Ja=self.Ws;Ja.G$.Hjt=class extends Ja.dxt{constructor(t){super(t)}pr(){super.pr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const qa=self.Ws;qa.G$.Hjt.PIt=class extends qa.Kxt{constructor(t,s){super(t),this.WM="repeat",this.jM="repeat",s&&(this.WM=i(s[0]),this.jM=i(s[1]))}pr(){super.pr()}Oxt(){this.yW().rO(this.wf)}JX(t){return this.yW().J8(t,{EM:this.wf.fk(),PM:this.WM,RM:this.jM})}ZX(){this.yW().WI()}zjt(){return this.WM}Jjt(){return this.jM}}}{const Xa=self.Ws,$a=self.Ys,Ya=Xa.dr(Xa.Rect),Ka=Xa.dr(Xa.ou),Za=Xa.dr(Xa.Rect),Qa=Xa.dr(Xa.ou),I=(Xa.G$.Hjt.Instance=class extends Xa.RGt{constructor(t,s){super(t),this.qjt=0,this.Xjt=0,this.$jt=1,this.Yjt=1,this.Kjt=0,this.Zjt=!1,this.Qjt=0,this.tVt=0,this.sVt=0,this.iVt=0,this.eVt=0,this.hVt=null,s&&(this.ND().sB(!!s[0]),this.qjt=s[4],this.Xjt=s[5],this.$jt=s[6],this.Yjt=s[7],this.Kjt=Xa._r(s[8]),this.Zjt=!!s[9],this.Qjt=s[10],this.tVt=s[11],this.sVt=s[12],this.iVt=s[13],this.eVt=s[14])}pr(){this.rVt(),super.pr()}rVt(){this.hVt&&(this.hVt.pr(),this.hVt=null)}nVt(t,s,i){const e=this.BGt(),h=e._m(),r=e.Om(),n=this.qjt/h,o=this.Xjt/r,a=this.Kjt;Za.set(0,0,t/(h*this.$jt),s/(r*this.Yjt)),Za.offset(-n,-o),0===a?i.Cu(Za):i.Pu(Za,-a)}oVt(t,s=!0){if(this.Zjt){const i=this.BGt();t.oS(),t.ME(i._m()*this.$jt,i.Om()*this.Yjt,this.Qjt,this.tVt,this.sVt,this.iVt,this.eVt)}else s&&t.iS()}bM(t){const s=this.BGt(),i=s.K2();if(null!==i){this.oVt(t),t.QR(i);const e=s._m(),h=s.Om(),r=this.qjt/e,n=this.Xjt/h,o=this.ND();Za.set(0,0,o._m()/(e*this.$jt),o.Om()/(h*this.Yjt)),Za.offset(-r,-n),o.G6()?this.aVt(o,t):this.lVt(o,t)}}lVt(t,s){let i=t.bN();this.wf.pk()&&(i=t.sAt(i)),0===this.Kjt?s.qS(i,Za):(Qa.Pu(Za,-this.Kjt),s.lE(i,Qa))}aVt(i,t){const e=i.SAt();if(i.vAt()){i.ZEt(Ya,Ka,!1);let t=Ka,s=(this.wf.pk()&&(t=i.sAt(t)),Za);0!==this.Kjt&&(Qa.Pu(Za,-this.Kjt),s=Qa),e.SM(i.T6(),t,s),i.bAt(!1)}e.bM(t)}BGt(){return this.hVt||this.Fft.yW()}kit(){return!0}K2(){return this.BGt().K2()}uVt(){this.ND().bAt(!0)}cVt(t){this.qjt!==t&&(this.qjt=t,this.wf.JD(),this.uVt())}fVt(){return this.qjt}dVt(t){this.Xjt!==t&&(this.Xjt=t,this.wf.JD(),this.uVt())}pVt(){return this.Xjt}mVt(t){this.$jt!==t&&(this.$jt=t,this.wf.JD(),this.uVt())}gVt(){return this.$jt}yVt(t){this.Yjt!==t&&(this.Yjt=t,this.wf.JD(),this.uVt())}wVt(){return this.Yjt}SVt(t){this.Kjt!==t&&(this.Kjt=t,this.wf.JD(),this.uVt())}bVt(){return this.Kjt}vVt(t){this.Zjt!==(t=!!t)&&(this.Zjt=t,this.wf.JD())}MVt(){return this.Zjt}xVt(t){this.Qjt!==t&&(this.Qjt=t,this.MVt())&&this.wf.JD()}GVt(){return this.Qjt}TVt(t){this.tVt!==t&&(this.tVt=t,this.MVt())&&this.wf.JD()}_Vt(){return this.tVt}IVt(t){this.sVt!==t&&(this.sVt=t,this.MVt())&&this.wf.JD()}CVt(){return this.sVt}PVt(t){this.iVt!==t&&(this.iVt=t,this.MVt())&&this.wf.JD()}RVt(){return this.iVt}EVt(t){this.eVt!==t&&(this.eVt=t,this.MVt())&&this.wf.JD()}AVt(){return this.eVt}zv(){const t={};return 0!==this.qjt&&(t.iox=this.qjt),0!==this.Xjt&&(t.ioy=this.Xjt),1!==this.$jt&&(t.isx=this.$jt),1!==this.Yjt&&(t.isy=this.Yjt),0!==this.Kjt&&(t.ia=this.Kjt),this.Zjt&&(t.tr=!0),1!==this.Qjt&&(t.trx=this.Qjt),1!==this.tVt&&(t.try=this.tVt),1!==this.sVt&&(t.tra=this.sVt),.1!==this.iVt&&(t.trbmx=this.iVt),.1!==this.eVt&&(t.trbmy=this.eVt),t}Jv(t){this.qjt=t.iox||0,this.Xjt=t.ioy||0,this.$jt=t.hasOwnProperty("isx")?t.isx:1,this.Yjt=t.hasOwnProperty("isy")?t.isy:1,this.Kjt=t.ia||0,this.Zjt=!!t.tr,this.Qjt=t.hasOwnProperty("trx")?t.trx:1,this.tVt=t.hasOwnProperty("try")?t.try:1,this.sVt=t.hasOwnProperty("tra")?t.tra:1,this.iVt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.eVt=t.hasOwnProperty("trbmy")?t.trbmy:.1}TGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.fVt(),FVt:t=>this.cVt(t)},{name:t+".image-offset-y.name",value:this.pVt(),FVt:t=>this.dVt(t)},{name:t+".image-scale-x.name",value:100*this.gVt(),FVt:t=>this.mVt(t/100)},{name:t+".image-scale-y.name",value:100*this.wVt(),FVt:t=>this.yVt(t/100)},{name:t+".image-angle.name",value:Xa.Ir(this.bVt()),FVt:t=>this.SVt(Xa._r(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.MVt(),FVt:t=>this.vVt(t)},{name:t+".x-random.name",value:100*this.GVt(),FVt:t=>this.xVt(t/100)},{name:t+".y-random.name",value:100*this._Vt(),FVt:t=>this.TVt(t/100)},{name:t+".angle-random.name",value:100*this.CVt(),FVt:t=>this.IVt(t/100)},{name:t+".blend-margin-x.name",value:100*this.RVt(),FVt:t=>this.PVt(t/100)},{name:t+".blend-margin-y.name",value:100*this.AVt(),FVt:t=>this.EVt(t/100)}]}]}qrt(t){switch(t){case 4:return this.fVt();case 5:return this.pVt();case 6:return this.gVt();case 7:return this.wVt();case 8:return this.bVt();case 9:return this.MVt();case 10:return this.GVt();case 11:return this._Vt();case 12:return this.CVt();case 13:return this.RVt();case 14:return this.AVt()}}Qrt(t,s){switch(t){case 4:this.cVt(s);break;case 5:this.dVt(s);break;case 6:this.mVt(s);break;case 7:this.yVt(s);break;case 8:this.SVt(s);break;case 9:this.vVt(!!s);break;case 10:this.xVt(s);break;case 11:this.TVt(s);break;case 12:this.IVt(s);break;case 13:this.PVt(s);break;case 14:this.EVt(s)}}Lxt(){return self.kVt}},new WeakMap);self.kVt=class extends self.I6{constructor(){super(),I.set(this,self.zB.YB().A6())}set DVt(t){$a.Te(t),I.get(this).cVt(t)}get DVt(){return I.get(this).fVt()}set OVt(t){$a.Te(t),I.get(this).dVt(t)}get OVt(){return I.get(this).pVt()}LVt(t,s){$a.Te(t),$a.Te(s);const i=I.get(this);i.cVt(t),i.dVt(s)}BVt(){const t=I.get(this);return[t.fVt(),t.pVt()]}set NVt(t){$a.Te(t),I.get(this).mVt(t)}get NVt(){return I.get(this).gVt()}set WVt(t){$a.Te(t),I.get(this).yVt(t)}get WVt(){return I.get(this).wVt()}jVt(t,s){$a.Te(t),$a.Te(s);const i=I.get(this);i.mVt(t),i.yVt(s)}VVt(){const t=I.get(this);return[t.gVt(),t.wVt()]}set UVt(t){$a.Te(t),I.get(this).SVt(t)}get UVt(){return I.get(this).bVt()}set HVt(t){$a.Te(t),I.get(this).SVt(Xa._r(t))}get HVt(){return Xa.Ir(I.get(this).bVt())}get imageWidth(){return I.get(this).BGt()._m()}get imageHeight(){return I.get(this).BGt().Om()}zVt(){const t=I.get(this).BGt();return[t._m(),t.Om()]}set JVt(t){I.get(this).vVt(!!t)}get JVt(){return I.get(this).MVt()}set qVt(t){$a.Te(t),I.get(this).xVt(t)}get qVt(){return I.get(this).GVt()}set XVt(t){$a.Te(t),I.get(this).TVt(t)}get XVt(){return I.get(this)._Vt()}$Vt(t,s){$a.Te(t),$a.Te(s);const i=I.get(this);i.xVt(t),i.TVt(s)}YVt(){const t=I.get(this);return[t.GVt(),t._Vt()]}set KVt(t){$a.Te(t),I.get(this).IVt(t)}get KVt(){return I.get(this).CVt()}set ZVt(t){$a.Te(t),I.get(this).PVt(t)}get ZVt(){return I.get(this).RVt()}set QVt(t){$a.Te(t),I.get(this).EVt(t)}get QVt(){return I.get(this).AVt()}t8t(t,s){$a.Te(t),$a.Te(s);const i=I.get(this);i.PVt(t),i.EVt(s)}s8t(){const t=I.get(this);return[t.RVt(),t.AVt()]}async i8t(t){$a.nh(t,Blob);const s=I.get(this),i=s.nO(),e=Xa.dr(Xa.JTt);e.n_t(i,t),await e.J8(i.Kb(),{EM:i.fk(),PM:s.wvt().zjt(),RM:s.wvt().Jjt()}),s.Sr()?e.pr():(s.rVt(),s.hVt=e,i.JD())}}}{const tl=self.Ws;tl.G$.Hjt.M$={e8t(){return!0},h8t(){return!0},r8t(){return this.MVt()}}}{const sl=self.Ws;sl.G$.Hjt.drt={n8t(t){this.cVt(t)},o8t(t){this.dVt(t)},a8t(t){this.mVt(t/100)},l8t(t){this.yVt(t/100)},u8t(t){this.SVt(sl._r(t))},c8t(t){this.vVt(t)},f8t(t,s){this.xVt(t/100),this.TVt(s/100)},d8t(t){this.IVt(t/100)},p8t(t,s){this.PVt(t/100),this.EVt(s/100)},m8t(t){this.ND().vv(t),this.wf.JD()},async g8t(t,s){if(!this.hVt||this.hVt.pH()!==t){const i=this.wf,e=sl.dr(sl.JTt);try{if(await e.r_t(i,t),!e.VH())throw new Error("image failed to load");if(this.Sr())return e.pr(),null;const h=await e.J8(i.Kb(),{EM:i.fk(),PM:this.wvt().zjt(),RM:this.wvt().Jjt()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Sr()||this.F4(sl.G$.Hjt.M$.h8t))}this.Sr()?e.pr():(this.rVt(),this.hVt=e,i.JD(),await this.O4(sl.G$.Hjt.M$.e8t))}}}}{const il=self.Ws;il.G$.Hjt.prt={y8t(){return this.BGt()._m()},w8t(){return this.BGt().Om()},S8t(){return this.qjt},b8t(){return this.Xjt},v8t(){return 100*this.$jt},M8t(){return 100*this.Yjt},x8t(){return il.Ir(this.Kjt)},G8t(){return 100*this.GVt()},T8t(){return 100*this._Vt()},_8t(){return 100*this.CVt()},I8t(){return 100*this.RVt()},C8t(){return 100*this.AVt()}}}{const el=self.Ws;el.G$.Yht=class extends el.dxt{constructor(t){super(t)}pr(){super.pr()}}}{const hl=self.Ws,rl=self.Ys,nl=[],ol=(hl.G$.Yht.PIt=class extends hl.Kxt{constructor(t){super(t),this.MIt=t.oCt()}pr(){hl.Hn(this.MIt),super.pr()}Oxt(){for(const t of this.MIt)t.x_t(this.wf)}JX(s){const i={EM:this.wf.fk()};return Promise.all(this.MIt.map(t=>t.G_t(s,i)))}ZX(){for(const t of this.MIt)t.T_t()}$X(){this.P8t()}P8t(){for(const t of this.Fft.YL())t.A6().R8t()}kbt(t){hl.G$.Yht.J2t(this,t)}Svt(t){nl.push({sGt:null,E8t:!1,instances:[]})}A8t(t,s,i){const e=nl.at(-1);e.sGt=t,e.E8t=i,e.instances.push(s)}bvt(t){const s=nl.pop(),i=s.sGt,e=s.E8t;if(i){const h=new Map;for(const r of s.instances)r.wPt(h,i,e);for(const[n,o]of h)n.ZL().e0t(o)}}F8t(t){const s=this.qB().fCt(t),i=this.nO(),e=s.__t(0);return e.yW().J8(i.Kb(),{EM:i.fk()}).then(()=>this.P8t()),s}k8t(t){for(const s of this.Fft.YL())s.A6().D8t(t);this.qB().dCt(t)}O8t(t,s){const i=this.Fft.uCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.R_t(s);e<0&&(e+=i.lW()+1);const h=hl.b_t.M_t(this.nO()),r=(i.I_t(h,e),this.nO());h.yW().J8(r.Kb(),{EM:r.fk()}).then(()=>this.P8t());for(const n of this.Fft.YL())n.A6().L8t();return h}B8t(t,s){const i=this.Fft.uCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.lW())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.R_t(s);e<0&&(e+=i.lW()),i.C_t(e);for(const h of this.Fft.YL())h.A6().L8t()}Lxt(){return self.N8t}},new WeakMap);self.N8t=class extends self.BL{constructor(t){super(t),ol.set(this,t.wvt())}W8t(t){rl.Pe(t);const s=ol.get(this).qB().uCt(t);return s?s.E_t():null}j8t(){return ol.get(this).qB().lCt().map(t=>t.E_t())}V8t(t){return rl.Pe(t),ol.get(this).F8t(t).E_t()}U8t(t){rl.Pe(t),ol.get(this).k8t(t)}H8t(t,s){if(rl.Pe(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return ol.get(this).O8t(t,s).fW()}z8t(t,s){if(rl.Pe(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");ol.get(this).B8t(t,s)}}}{const C=self.Ws,al=self.Ys,ll=C.dr(C.Rect),ul=C.dr(C.ou),cl=C.dr(C.ol),P=(C.G$.Yht.Instance=class extends C.RGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.J8t=this.Fft.uCt(e)||this.Fft.oCt()[0],this.q8t=C.Gr(h,0,this.J8t.lW()-1),this.X8t=this.J8t.__t(this.q8t);const n=this.X8t.yW(),o=(this.$8t=n.K2(),this.Y8t=n.$C(),this.K8t=n.VGt(),this.kGt(),t.gPt(2,!0),t.gPt(1,0<=this.J8t.sW()),this.Z8t=Math.abs(this.J8t.sW()),this.Q8t=this.J8t.nW(),this.tUt=C.dr(C.A0),this.sUt=0,this.iUt=0,this.eUt="",this.hUt=-1,this.rUt="",this.nUt=0,this.ND());this.oUt=o.bN(),o.sB(i),o.ON(r),o._nt(this.X8t.bW()),o.Cnt(this.X8t.MW()),o.aAt(this.X8t.FW()),o.uN(),1===this.Fft.aCt()&&1===this.Fft.oCt()[0].lW()||0===this.Z8t||this.vGt()}pr(){this.J8t=null,this.X8t=null,this.$8t=null,this.tUt=null,super.pr()}BGt(){return this.X8t.yW()}kit(){return!0}XH(){this.$8t=null}LGt(){this.R8t()}bM(t){const s=this.$8t;if(null!==s){t.QR(s);const i=this.ND();i.G6()?this.aVt(i,t):this.lVt(i,t)}}lVt(t,s){let i=this.oUt;this.wf.pk()&&(i=t.sAt(i)),s.lE(i,this.K8t)}aVt(s,t){const i=s.SAt();if(s.vAt()){s.ZEt(ll,ul,!1);let t=ul;this.wf.pk()&&(t=s.sAt(t)),i.SM(s.T6(),t,this.K8t),s.bAt(!1)}i.bM(t)}aUt(){return this.tUt.ri()}lUt(){return this.Ii.yPt(2)}uUt(t){this.Ii.gPt(2,t)}cUt(){return this.Ii.yPt(1)}fUt(t){this.Ii.gPt(1,t)}dUt(){return this.Ii.yPt(4)}pUt(t){this.Ii.gPt(4,t)}YK(){this.rUt&&this.mUt(),0<=this.hUt&&this.gUt();const t=this.Z8t;if(this.lUt()&&0!==t){const s=this.wf.Hk(this.Ii),i=(this.tUt.xc(s),this.aUt()),e=this.X8t,h=e.wW()/t;if(!(i<this.sUt+h)){const r=this.J8t,n=this.Q8t,o=r.lW(),a=r.hW(),l=r.eW(),u=r.aW(),c=(this.cUt()?this.q8t++:this.q8t--,this.sUt+=h,this.q8t>=o&&(u?(this.fUt(!1),this.q8t=o-2):!l&&(this.iUt++,this.iUt>=a)?this.yUt(!1):this.q8t=n),this.q8t<0&&(u?(this.q8t=1,this.fUt(!0),l||(this.iUt++,this.iUt>=a&&this.yUt(!0))):!l&&(this.iUt++,this.iUt>=a)?this.yUt(!0):this.q8t=n),this.q8t=C.Gr(this.q8t,0,o-1),r.__t(this.q8t));i>this.sUt+c.wW()/t&&(this.sUt=i),this.wUt(e,c)}}else this.rGt()}yUt(t){this.q8t=t?0:this.J8t.lW()-1,this.uUt(!1),this.eUt=this.J8t.uf(),this.pUt(!0),this.tGt("animationend",!1,{animationName:this.eUt}),this.F4(C.G$.Yht.M$.SUt),this.F4(C.G$.Yht.M$.bUt),this.pUt(!1),this.iUt=0}wUt(i,e,t){if(i!==e){const s=this.ND(),h=i.yW(),r=e.yW(),n=h._m(),o=h.Om(),a=r._m(),l=r.Om(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.Fm(s._m()*(a/n)),o!==l&&s.Im(s.Om()*(l/o))),s._nt(e.bW()),s.Cnt(e.MW()),s.aAt(e.FW()),s.uN(),this.X8t=e,this.$8t=r.K2(),this.Y8t=r.$C(),this.K8t=r.VGt(),this.lj().Hht());for(let t=0,s=u.length;t<s;++t)u[t].CTt(i,e);this.tGt("framechange",!1,{animationName:this.J8t.uf(),vUt:this.q8t}),this.F4(C.G$.Yht.M$.MUt),this.wf.JD()}}xUt(t){this.uUt(!0),this.sUt=this.aUt(),1===t&&0!==this.q8t&&(this.hUt=0,this.dUt()||this.gUt()),this.vGt()}GUt(t,s,i){this.rUt=t,this.nUt=s,this.vGt(),!i&&this.dUt()||this.mUt()}TUt(){return this.J8t}_Ut(){return this.rUt||this.J8t.uf()}D8t(t){C.Mh(t,this._Ut())&&this.GUt(this.Fft.pCt().uf(),1,!0)}IUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Fft.uCt(this._Ut());if(!s)return;if(-1===(t=s.P_t(t)))return}isFinite(t)&&(this.hUt=t,this.dUt()||this.gUt())}L8t(){if(!this.rUt&&-1===this.hUt){const t=this.X8t,s=this.J8t.__t(C.Gr(this.q8t,0,this.J8t.lW()-1));t!==s&&this.wUt(t,s),1<this.J8t.lW()&&0<this.Z8t&&this.vGt()}}CUt(){return this.q8t}PUt(){return this.X8t.LW()}RUt(t){this.Z8t=Math.abs(t),this.fUt(0<=t),0<this.Z8t&&this.vGt()}EUt(){return this.cUt()?this.Z8t:-this.Z8t}AUt(t){"string"==typeof t&&-1===(t=this.J8t.P_t(t))||(t=C.Gr(Math.floor(t),0,this.J8t.lW()-1),this.Q8t=t)}FUt(){return this.Q8t}mUt(t){const s=this.X8t,i=this.Fft.uCt(this.rUt);if(this.rUt="",i&&(i!==this.J8t||!this.lUt())){this.J8t=i,this.fUt(0<=i.sW()),this.Z8t=Math.abs(i.sW()),this.Q8t=i.nW(),this.q8t=C.Gr(this.q8t,0,this.J8t.lW()-1),1===this.nUt&&(this.q8t=0),this.uUt(!0),this.sUt=this.aUt();const e=this.J8t.__t(this.q8t);this.wUt(s,e,t)}}gUt(t){const s=this.X8t,i=this.q8t;if(this.q8t=C.Gr(Math.floor(this.hUt),0,this.J8t.lW()-1),this.hUt=-1,t||i!==this.q8t){const e=this.J8t.__t(this.q8t);this.wUt(s,e),this.sUt=this.aUt()}}R8t(){const t=this.X8t.yW();this.$8t=t.K2(),this.Y8t=t.$C(),this.K8t=t.VGt(),this.ND().bAt(!0)}K2(){return this.$8t}$C(){return this.Y8t}VGt(){return this.K8t}TW(){return this.X8t.TW()}Fvt(t){let s=this.X8t,i=this.ND(),e=null;if("string"==typeof t)e=s.EW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.RW(t-1)}let h=i.gN();if(!e)return[i.Av(),i.Dv(),h];if(cl.I(e.V_t()),i.G6()){const[r,n,o]=i.T6()._M(cl.fl(),cl.pl());cl.set(r,n),h+=o}return cl.offset(-s.bW(),-s.MW()),cl.scale(i._m(),i.Om()),cl.rotate(i.w5()),cl.offset(i.Av(),i.Dv()),[cl.fl(),cl.pl(),h]}kUt(){return this.ND().dAt().qu()}DUt(t){t=Math.floor(t);const s=this.ND(),i=s.dAt(),e=i.qu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Ju();return[h[2*t+0]+s.Av(),h[2*t+1]+s.Dv()]}TGt(){const s=C.G$.Yht.drt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.J8t.uf(),FVt:t=>this.IGt(s.OUt,t,0)},{name:t+".current-frame",value:this.q8t,FVt:t=>this.IGt(s.LUt,t)},{name:t+".is-playing",value:this.lUt(),FVt:t=>t?this.IGt(s.BUt,0):this.IGt(s.NUt)},{name:t+".speed",value:this.Z8t,FVt:t=>this.IGt(s.WUt,t)},{name:t+".repeats",value:this.iUt,FVt:t=>this.iUt=t}]}]}zv(){const t={a:this.J8t.g9()},s=(0!==this.sUt&&(t.fs=this.sUt),this.aUt()),i=(0!==s&&(t.at=s),0!==this.q8t&&(t.f=this.q8t),0!==this.Z8t&&(t.cas=this.Z8t),1!==this.iUt&&(t.ar=this.iUt),0!==this.Q8t&&(t.rt=this.Q8t),this.lUt()||(t.ap=this.lUt()),this.cUt()||(t.af=this.cUt()),this.ND());return i.DN()&&(t.ce=i.DN()),t}Jv(t){const s=this.qB().cCt(t.a),i=(s&&(this.J8t=s),this.sUt=t.hasOwnProperty("fs")?t.fs:0,this.tUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.q8t=C.Gr(i,0,this.J8t.lW()-1),this.Z8t=t.hasOwnProperty("cas")?t.cas:0,this.iUt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.Q8t=C.Gr(e,0,this.J8t.lW()-1),this.uUt(!t.hasOwnProperty("ap")||!!t.ap),this.fUt(!t.hasOwnProperty("af")||!!t.af),this.J8t.__t(this.q8t)),r=(this.X8t=h,this.R8t(),this.ND());r._nt(h.bW()),r.Cnt(h.MW()),r.aAt(h.FW()),r.ON(!!t.ce),this.lUt()&&this.vGt()}qrt(t){const s=this.ND();switch(t){case 3:return s.DN();case 2:return C.Gr(this.q8t,0,this.J8t.lW()-1);case 1:return this.J8t.uf()}}Qrt(t,s,i){const e=this.ND();switch(t){case 3:e.ON(!!s);break;case 2:{this.uUt(!1);const h=this.J8t.lW()-1,r=s=C.Gr(s,0,h),n=this.J8t.__t(this.q8t),o=this.J8t.__t(r);this.wUt(n,o,i),this.q8t=C.Gr(r,0,h);break}case 1:{this.rUt=s,this.mUt(i);const a=this.J8t.lW();1<a&&0<this.J8t.sW()?this.vGt():this.rGt();break}}}Lxt(){return self.jUt}},new WeakMap),fl=new Map([["current-frame",0],["beginning",1]]);self.jUt=class extends self.I6{constructor(){super(),P.set(this,self.zB.YB().A6())}GW(){return P.get(this).TW()}_W(t){return this.IW(t)[0]}PW(t){return this.IW(t)[1]}VUt(t){return this.IW(t)[2]}IW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return P.get(this).Fvt(t)}AW(){return P.get(this).kUt()}kW(t){return al.Te(t),P.get(this).DUt(t)[0]}OW(t){return al.Te(t),P.get(this).DUt(t)[1]}DW(t){return al.Te(t),P.get(this).DUt(t)}UUt(){P.get(this).uUt(!1)}HUt(t="current-frame"){al.Pe(t);const s=fl.get(t);if(void 0===s)throw new Error("invalid mode");P.get(this).xUt(s)}zUt(t,s="beginning"){al.Pe(t),al.Pe(s);const i=fl.get(s);if(void 0===i)throw new Error("invalid mode");const e=P.get(this);if(!e.qB().uCt(t))throw new Error(`animation name "${t}" does not exist`);e.GUt(t,i)}W8t(t){al.Pe(t);const s=P.get(this).qB().uCt(t);return s?s.E_t():null}get animation(){return P.get(this).TUt().E_t()}get animationName(){return P.get(this)._Ut()}set vUt(t){al.Te(t),P.get(this).IUt(t)}get vUt(){return P.get(this).CUt()}set JUt(t){al.Pe(t),P.get(this).IUt(t)}get JUt(){return P.get(this).PUt()}set qUt(t){al.Te(t),P.get(this).RUt(t)}get qUt(){return P.get(this).EUt()}set XUt(t){al.Te(t),P.get(this).AUt(t)}get XUt(){return P.get(this).FUt()}get imageWidth(){return P.get(this).BGt()._m()}get imageHeight(){return P.get(this).BGt().Om()}zVt(){const t=P.get(this).BGt();return[t._m(),t.Om()]}async $Ut(t){al.nh(t,Blob);const s=P.get(this),i=s.nO(),e=s.BGt(),h=C.dr(C.JTt);if(h.n_t(i,t),await h.J8(i.Kb(),{EM:i.fk()}),s.Sr())h.pr();else{e.o_t(h);const r=s.wvt();r.P8t(),r.qB().Kf().dispatchEvent(new C.Event("animationframeimagechange")),i.JD()}}YUt(t,s){al.Pe(s),P.get(this).ND().YEt(!!t,s)}}}{const dl=self.Ws;dl.G$.Yht.M$={KUt(t){return dl.Mh(this._Ut(),t)},ZUt(t,s){return dl.compare(this.q8t,t,s)},QUt(t,s){if("string"!=typeof s)return!1;const i=this.X8t.LW();return dl.compare(i.toLowerCase(),t,s.toLowerCase())},tHt(t,s){return dl.compare(this.EUt(),t,s)},bUt(t){return dl.Mh(this.eUt,t)},SUt(){return!0},MUt(){return!0},sHt(){return this.ND()._m()<0},iHt(){return this.ND().Om()<0},e8t(){return!0},h8t(){return!0},DN(){return this.ND().DN()}}}{const pl=self.Ws;pl.G$.Yht.drt={eHt(t,s,i,e,h){if(t&&s){const[r,n]=this.Fvt(i),o=this.wf.i5(t,s,r,n,e,h);if(o){if(e&&s.e5(o),t.WL().vL()){const l=o.ND();l.y5(this.ND().w5()),l.uN()}const a=this.wf.xk();a.h5(!0),o.r5(),a.h5(!1),t!==this.wf.s1t().qB()&&this.hGt.A8t(t,o,e)}}},NUt(){this.uUt(!1)},BUt(t){this.xUt(t)},OUt(t,s){this.GUt(t,s)},LUt(t){this.IUt(t)},WUt(t){this.RUt(t)},hHt(t){this.AUt(t)},rHt(s,t){try{0===s?this.wvt().F8t(t):this.wvt().k8t(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},nHt(s,t,i){try{0===s?this.wvt().O8t(t,i):this.wvt().B8t(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},oHt(t){const s=this.ND(),i=s._m(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Fm(e),s.uN())},aHt(t){const s=this.ND(),i=s.Om(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Im(e),s.uN())},m5(t){const s=this.X8t,i=s.yW(),e=this.ND(),h=e._m()<0?-1:1,r=e.Om()<0?-1:1,n=i._m()*t*h,o=i.Om()*t*r;e._m()===n&&e.Om()===o||(e.wC(n,o),e.uN())},async g8t(t,s,i){const e=this.X8t,h=e.yW(),r=this.ND(),n=this.wf,o=this.hGt;if(h.pH()===t)0===s&&(r.wC(h._m(),h.Om()),r.uN()),this.F4(pl.G$.Yht.M$.e8t);else{const a=pl.dr(pl.JTt);try{if(await a.r_t(n,t),!a.VH())throw new Error("image failed to load");if(this.Sr())return void a.pr();await a.J8(n.Kb(),{EM:n.fk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Sr()||this.F4(pl.G$.Yht.M$.h8t))}this.Sr()?a.pr():(h.o_t(a),o.P8t(),o.qB().Kf().dispatchEvent(new pl.Event("animationframeimagechange")),n.JD(),0===s&&(r.wC(h._m(),h.Om()),r.uN()),await this.O4(pl.G$.Yht.M$.e8t))}},lHt(t){this.ND().ON(t)},YEt(t,s){this.ND().YEt(0===t,s)},m8t(t){this.ND().vv(t),this.wf.JD()}}}{const ml=self.Ws;ml.G$.Yht.prt={uHt(){return this.CUt()},cHt(){return this.PUt()},fHt(){return this.J8t.lW()},dHt(){return this.J8t.uf()},pHt(){return this.EUt()},mHt(){return this.J8t.sW()},gHt(t){return this.Fvt(t)[0]},yHt(t){return this.Fvt(t)[1]},wHt(t){return this.Fvt(t)[2]},SHt(){return this.TW()},y8t(){return this.BGt()._m()},w8t(){return this.BGt().Om()},bHt(t){return this.DUt(t)[0]},vHt(t){return this.DUt(t)[1]},MHt(){return this.kUt()}}}{const gl=self.Ws;gl.G$.xHt=class extends gl.Vxt{constructor(t){super(t,"progress-bar"),this.Jxt("click",(t,s)=>t.GHt(s))}pr(){super.pr()}}}{const yl=self.Ws;yl.G$.xHt.PIt=class extends yl.Kxt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const wl=self.Ws,Sl=self.Ys,bl=(wl.G$.xHt.Instance=class extends wl.JGt{constructor(t,s){super(t,"progress-bar"),this.Kht=0,this.Jot=100,this.THt="",this.bf="",this._Ht="",s&&(this.Kht=s[0],this.Jot=s[1],this.THt=s[2],this.ND().sB(s[3]),this.bf=s[4],this._Ht=s[5]),this.oTt({id:this.bf,className:this._Ht})}pr(){super.pr()}aTt(){return{value:this.Kht,max:this.Jot,title:this.THt}}async GHt(t){this.tGt("click"),await this.O4(wl.G$.xHt.M$.IHt)}CHt(t){this.THt!==t&&(this.THt=t,this.cTt())}PHt(){return this.THt}RHt(t){this.Kht!==t&&(this.Kht=t,this.cTt())}EHt(){return this.Kht}AHt(t){this.Jot!==t&&(this.Jot=t,this.cTt())}FHt(){return this.Jot}kHt(){this.Jot=0,this.Kht=0,this.cTt()}bM(t){}zv(){return{v:this.Kht,m:this.Jot,t:this.THt,id:this.bf}}Jv(t){this.Kht=t.v,this.Jot=t.m,this.THt=t.t,this.bf=t.id,this.cTt()}qrt(t){switch(t){case 0:return this.EHt();case 1:return this.FHt();case 2:return this.PHt()}}Qrt(t,s){switch(t){case 0:this.RHt(s);break;case 1:this.AHt(s);break;case 2:this.CHt(s)}}TGt(){const t="plugins.progressbar";return[{title:t+".name",properties:[{name:t+".properties.value.name",value:this.EHt(),FVt:t=>this.RHt(t)},{name:t+".properties.maximum.name",value:this.FHt(),FVt:t=>this.AHt(t)}]}]}Lxt(){return self.DHt}},new WeakMap);self.DHt=class extends self.P6{constructor(){super(),bl.set(this,self.zB.YB().A6())}set progress(t){Sl.Te(t),bl.get(this).RHt(t)}get progress(){return bl.get(this).EHt()}set OHt(t){Sl.Te(t),bl.get(this).AHt(t)}get OHt(){return bl.get(this).FHt()}set LHt(t){Sl.Pe(t),bl.get(this).CHt(t)}get LHt(){return bl.get(this).PHt()}BHt(){bl.get(this).kHt()}}}{const vl=self.Ws;vl.G$.xHt.M$={IHt(){return!0},NHt(t,s){return vl.compare(this.EHt(),t,s)}}}{const Ml=self.Ws;Ml.G$.xHt.drt={WHt(t){this.CHt(t)},jHt(t){this.RHt(t)},VHt(t){this.AHt(t)},UHt(){this.kHt()}}}{const xl=self.Ws;xl.G$.xHt.prt={HHt(){return this.EHt()},zHt(){return this.FHt()}}}{const Gl=self.Ws;Gl.G$.Keyboard=class extends Gl.dxt{constructor(t){super(t)}pr(){super.pr()}}}{let i=function(){return s.LL().A6()};i;const Tl=self.Ws;Tl.G$.Keyboard.PIt=class extends Tl.Kxt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}Lxt(){return self.JHt}};let s=null;self.JHt=class extends self.BL{constructor(t){super(t),(s=t).nO().ID().keyboard=this}qHt(t){const s=i();if("string"==typeof t)return s.XHt(t);if("number"==typeof t)return s.$Ht(t);throw new TypeError("expected string or number")}}}{const _l=self.Ws;_l.G$.Keyboard.Instance=class extends _l.iGt{constructor(t,s){super(t),this.YHt=new Set,this.KHt=new Set,this.ZHt=0,this.QHt="",this.t7t="";const i=this.nO().Kf();this.P0=new _l._0(_l.b0.T0(i,"keydown",t=>this.s7t(t.data)),_l.b0.T0(i,"keyup",t=>this.i7t(t.data)),_l.b0.T0(i,"window-blur",()=>this.e7t()),_l.b0.T0(i,"keyboard-blur",()=>this.e7t()))}pr(){super.pr()}s7t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.YHt.has(i)||(this.YHt.add(i),this.KHt.add(s),this.QHt=i,this.ZHt=s,this.t7t=e,this.F4(_l.G$.Keyboard.M$.h7t),this.F4(_l.G$.Keyboard.M$.r7t),this.F4(_l.G$.Keyboard.M$.n7t),this.F4(_l.G$.Keyboard.M$.o7t))}i7t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.YHt.delete(i),this.KHt.delete(s),this.QHt=i,this.ZHt=s,this.t7t=e,this.F4(_l.G$.Keyboard.M$.a7t),this.F4(_l.G$.Keyboard.M$.l7t),this.F4(_l.G$.Keyboard.M$.u7t),this.F4(_l.G$.Keyboard.M$.c7t)}e7t(){for(const t of this.KHt)this.KHt.delete(t),this.ZHt=t,this.F4(_l.G$.Keyboard.M$.a7t),this.F4(_l.G$.Keyboard.M$.l7t),this.F4(_l.G$.Keyboard.M$.c7t);this.YHt.clear()}XHt(t){return this.YHt.has(t)}$Ht(t){return this.KHt.has(t)}zv(){return{tk:this.ZHt,tkk:this.t7t}}Jv(t){this.ZHt=t.tk,t.hasOwnProperty("tkk")&&(this.t7t=t.tkk)}TGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.ZHt},{name:t+".debugger.last-key-string",value:_l.G$.Keyboard.prt.f7t(this.ZHt)},{name:t+".debugger.last-typed-key",value:this.t7t}]}]}}}{const Il=self.Ws,Cl=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Il.G$.Keyboard.M$={XHt(t){return this.KHt.has(t)},r7t(t){return this.ZHt===t},h7t(){return!0},a7t(){return!0},l7t(t){return this.ZHt===t},$Ht(t){return t=Math.floor(t),this.KHt.has(t)},o7t(t){return this.ZHt===t},c7t(t){return this.ZHt===t},n7t(t){const s=Cl[t];return this.QHt===s},u7t(t){const s=Cl[t];return this.QHt===s},d7t(t){const s=Cl[t];return this.YHt.has(s)}}}{const Pl=self.Ws;Pl.G$.Keyboard.drt={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Rl=self.Ws;Rl.G$.Keyboard.prt={p7t(){return this.ZHt},f7t(t){return s(t)},m7t(){return this.t7t}}}{const El=self.Ws;El.G$.g7t=class extends El.dxt{constructor(t){super(t)}pr(){super.pr()}}}{let h=function(){return s.LL().A6()};h;const Al=self.Ws,Fl=self.Ys;Al.G$.g7t.PIt=class extends Al.Kxt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}Lxt(){return self.y7t}};let s=null;self.y7t=class extends self.BL{constructor(t){super(t),(s=t).nO().ID().CD=this}w7t(t){return h().S7t(t)[0]}b7t(t){return h().S7t(t)[1]}v7t(t){return h().S7t(t)}M7t(t){return h().x7t(t)}G7t(t){Fl.Pe(t),h().T7t(t)}_7t(t){const s=h(),i=s.nO(),e=i.LO(t);s.I7t(e)}}}{let n=self.Ws,o=null;n.G$.g7t.Instance=class extends n.iGt{constructor(t,s){super(t,"mouse"),this.C7t=[!1,!1,!1,!1,!1],this.P7t=0,this.R7t=0,this.E7t=0,this.A7t=0,this.F7t=0,this.k7t=0,this.D7t=0,this.O7t=0,this.L7t=!1,this.B7t=0,this.N7t=0,this.dGt([["pointer-lock-change",t=>this.W7t(t)],["pointer-lock-error",t=>this.j7t(t)]]);const i=this.nO().Kf();this.P0=new n._0(n.b0.T0(i,"pointermove",t=>this.V7t(t.data)),n.b0.T0(i,"pointerdown",t=>this.U7t(t.data)),n.b0.T0(i,"pointerup",t=>this.H7t(t.data)),n.b0.T0(i,"dblclick",t=>this.z7t(t.data)),n.b0.T0(i,"wheel",t=>this.J7t(t.data)),n.b0.T0(i,"window-blur",()=>this.G5t()))}pr(){super.pr()}U7t(t){"mouse"===t.pointerType&&(this.P7t=t.pageX-this.wf.DB(),this.R7t=t.pageY-this.wf.OB(),this.q7t(t.lastButtons,t.buttons))}V7t(t){this.B7t=t.movementX,this.N7t=t.movementY,this.F4(n.G$.g7t.M$.X7t),this.B7t=0,this.N7t=0,"mouse"===t.pointerType&&(this.P7t=t.pageX-this.wf.DB(),this.R7t=t.pageY-this.wf.OB(),this.q7t(t.lastButtons,t.buttons))}H7t(t){"mouse"===t.pointerType&&this.q7t(t.lastButtons,t.buttons)}q7t(t,s){this.$7t(t,s,1,0),this.$7t(t,s,4,1),this.$7t(t,s,2,2),this.$7t(t,s,8,3),this.$7t(t,s,16,4)}$7t(t,s,i,e){!(t&i)&&s&i?this.Y7t(e):t&i&&!(s&i)&&this.K7t(e)}Y7t(t){this.C7t[t]=!0,this.F4(n.G$.g7t.M$.Z7t),this.E7t=t,this.A7t=0,this.F4(n.G$.g7t.M$.Q7t),this.F4(n.G$.g7t.M$.tzt)}K7t(t){this.C7t[t]&&(this.C7t[t]=!1,this.E7t=t,this.F4(n.G$.g7t.M$.szt))}z7t(t){this.E7t=t.button,this.A7t=1,this.F4(n.G$.g7t.M$.Q7t),this.F4(n.G$.g7t.M$.tzt)}J7t(t){this.F7t=t.deltaY<0?1:0,this.k7t=t.deltaX,this.D7t=t.deltaY,this.O7t=t.deltaZ,this.F4(n.G$.g7t.M$.izt)}G5t(){for(let t=0,s=this.C7t.length;t<s;++t){if(!this.C7t[t])return;this.C7t[t]=!1,this.E7t=t,this.F4(n.G$.g7t.M$.szt)}}S7t(t){const s=this.wf.yD(),i=this.P7t,e=this.R7t;if(void 0===t){const h=s.VD(0);return h.Pq(i,e)}{const r=s.WD(t);return r?r.kB(i,e):[0,0]}}x7t(t){return t=Math.floor(t),!!this.C7t[t]}ezt(){return 0<=this.P7t&&0<=this.R7t&&this.P7t<this.wf.fBt()&&this.R7t<this.wf.dBt()}T7t(t){o!==t&&(o=t,this.pGt("cursor",t))}async I7t(t){if(!n.fi.Mi&&t){const s=t.uMt();if(s){const i=s.ND(),e=s.BGt();if(i&&e&&o!==e){const h=await(o=e).p_t(),r=`url(${h}) ${Math.round(i.bW()*e._m())} ${Math.round(i.MW()*e.Om())}, auto`;this.pGt("cursor",r)}}}}W7t(t){this.hzt(t["has-pointer-lock"])}j7t(t){this.hzt(t["has-pointer-lock"]),this.F4(n.G$.g7t.M$.rzt)}hzt(t){this.L7t!==t&&(this.L7t=t,this.L7t?this.F4(n.G$.g7t.M$.nzt):this.F4(n.G$.g7t.M$.ozt))}TGt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.P7t+","+this.R7t},{name:t+".debugger.left-button",value:this.C7t[0]},{name:t+".debugger.middle-button",value:this.C7t[1]},{name:t+".debugger.right-button",value:this.C7t[2]},{name:t+".debugger.button-4",value:this.C7t[3]},{name:t+".debugger.button-5",value:this.C7t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.wf.yD().I5().map(t=>({name:"$"+t.uf(),value:t.kB(this.P7t,this.R7t).join(", ")}))}]}}}{const kl=self.Ws;kl.G$.g7t.M$={Q7t(t,s){return this.E7t===t&&this.A7t===s},Z7t(){return!0},azt(t){return this.C7t[t]},szt(t){return this.E7t===t},lzt(t){const s=this.wf.Qdt(),i=s.xbt(),e=[];return this.ezt()&&e.push([this.P7t,this.R7t]),kl.xor(this.wf.KF().x3t(t,e,i),i)},tzt(t,s,i){if(t!==this.E7t||s!==this.A7t)return!1;if(!this.ezt())return!1;const e=this.P7t,h=this.R7t;return this.wf.KF().x3t(i,[[e,h]],!1)},izt(t){return 2===t||this.F7t===t},nzt(){return!0},ozt(){return!0},rzt(){return!0},uzt(){return this.L7t},X7t(){return!0}}}{const Dl=self.Ws,Ol=["auto","pointer","text","crosshair","move","help","wait","none"];Dl.G$.g7t.drt={czt(t){this.T7t(Ol[t])},fzt(t){this.I7t(t)},dzt(t){this.gGt("request-pointer-lock",{unadjustedMovement:t})},pzt(){this.pGt("release-pointer-lock")}}}{const Ll=self.Ws;Ll.G$.g7t.prt={T2t(t){return this.S7t(t)[0]},_2t(t){return this.S7t(t)[1]},mzt(){return this.P7t},gzt(){return this.R7t},yzt(){return this.B7t},wzt(){return this.N7t},Szt(){return this.k7t},bzt(){return this.D7t},vzt(){return this.O7t}}}{const Bl=self.Ws;Bl.G$.Text=class extends Bl.dxt{constructor(t){super(t)}pr(){super.pr()}}}{const Nl=self.Ws;Nl.G$.Text.PIt=class extends Nl.Kxt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}JX(t){}ZX(){}}}{const Wl=self.Ws,jl=self.Ys,Vl=[0,0,0],Ul=["left","center","right"],Hl=["top","center","bottom"],zl=["ltr","rtl"],Jl=["word","cjk","character"],ql=new Wl.Rect,Xl=new Wl.ou,$l=new Wl.Yo,Yl=Wl.dr(Wl.ol),Kl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),R=(Wl.G$.Text.Instance=class extends Wl.RGt{constructor(t,s){if(super(t),this.Sf="",this.Mzt=!0,this.xzt="Arial",this.Gzt=12,this.Tzt=0,this.iI=!1,this.eI=!1,this.wv=Wl.dr(Wl.Yo),this.lI=0,this.uI=0,this.dI="word",this.pI=0,this._zt="auto",this.Izt=1,this.Czt=null,this.Pzt="",this.Rzt=!1,this.Ezt=!1,this.Azt=null,this.Fzt=-1,this.kzt=-1,this.Dzt=0,this.Ozt=Wl.dr(Wl.Ty.Lb,this.wf.Kb(),{timeout:5}),this.Ozt.VI=()=>this.wf.JD(),this.Lzt=()=>this.Bzt(),this.Nzt=!1,s){this.Sf=s[0],this.Mzt=!!s[1],this.xzt=s[2],this.Gzt=s[3],this.Tzt=s[4],this.iI=!!s[5],this.eI=!!s[6],this.lI=s[8],this.uI=s[9],this.dI=Jl[s[10]],this.pI=s[11],this.Wzt(this.wf.qV(s[12]));const i=s[7];this.wv.ra(i[0],i[1],i[2]),this.ND().sB(s[13]),this.Ezt=!!s[15]}this.jzt(),this.Vzt()}pr(){this.Wzt(null),this.Uzt(),this.Azt&&(this.Azt.pr(),this.Azt=null),this.Ozt.pr(),this.Ozt=null,super.pr()}jzt(){const t=this.Ozt;t.Mf(this.Sf),t.JI(this.Mzt),this.Ozt.X_()&&this.Czt?this.Ozt.Gm(this.nO().t4t(this.Czt)):this.Ozt.Gm(null),t.qI("nearest"!==this.wf.fk()),t.XI(this.xzt),t.ZI(this.Tzt),t.tC(this.iI),t.iC(this.eI),t.Mv(this.wv),t.lC(Ul[this.lI]),t.cC(Hl[this.uI]),t.dC(this.dI),t.mC(zl[this.pI])}Hzt(){let t=this.ND(),s=(this.Ozt.$I(this.Gzt),this.Ozt.KI(t.yEt()),t.WD()),i;"auto"===this._zt?i=s.RJ(t.gN()):"fixed"===this._zt&&(i=this.Izt),t.G6()&&i!==this.Ozt.SC()&&t.bAt(!0),this.Ozt.wC(t._m(),t.Om(),i)}Wzt(t){t&&(t.a9()||t.WL().constructor!==Wl.G$.Yht)||t!==this.Czt&&(this.Czt&&this.Czt.Kf().removeEventListener("animationframeimagechange",this.Lzt),this.Czt=t,this.Czt&&this.Czt.Kf().addEventListener("animationframeimagechange",this.Lzt),this.jzt(),this.Rzt=!1,this.wf.JD())}Bzt(){this.wf.s4t(this.Czt),this.wf.JD(),this.Nzt=!0}Vzt(){if(this.Ezt){let t=this.Sf;this.Mzt&&(t=Wl.Dh.ym(t)),this.Azt?this.Azt.Mf(t):this.Azt=Wl.dr(Wl.yf,this.wf,t)}else this.Azt&&(this.Azt.pr(),this.Azt=null)}bM(t){const s=this.ND(),i=(this.Hzt(),this.Nzt&&(this.Nzt=!1,this.Ozt.X_())&&this.Czt&&this.Ozt.Gm(this.nO().t4t(this.Czt)),this.Ozt.K2());if(i){const e=s.WD();if(0===s.w5()&&0===e.w5()&&0===s.gN()&&!s.G6()&&e.X9()){const h=s.bN(),[r,n]=e.VB(h.un(),h.cn()),[o,a]=e.VB(h.mn(),h.gn()),l=r-Math.round(r),u=n-Math.round(n),[c,f]=(ql.set(r,n,o,a),ql.offset(-l,-u),Xl.Cu(ql),t.dE(t.AE()));this.wf.$O().sU(t,c,f),t.QR(i),t.qS(Xl,this.Ozt.$C()),e.eU(t)}else t.QR(i),s.G6()?this.aVt(s,t):this.lVt(s,t)}}lVt(t,s){let i=t.bN();this.wf.pk()&&(i=this.zzt(i)),s.qS(i,this.Ozt.$C())}aVt(s,t){const i=s.SAt();if(s.vAt()){s.ZEt(ql,Xl,!1);let t=Xl;this.wf.pk()&&(t=this.zzt(t)),i.SM(s.T6(),t,this.Ozt.$C()),s.bAt(!1)}i.bM(t)}zzt(t){const s=t.un()-Math.round(t.un()),i=t.cn()-Math.round(t.cn());return 0==s&&0==i?t:(Xl.I(t),Xl.offset(-s,-i),Xl)}NGt(){const t=this.Ozt.K2();return t?[t._m(),t.Om()]:[100,100]}WGt(){return this.Ozt.$C()}UGt(){return!1}zv(){const t={t:this.Sf,c:this.wv.toJSON(),fn:this.xzt,ps:this.Gzt};return this.Mzt&&(t.bbc=this.Mzt),0!==this.lI&&(t.ha=this.lI),0!==this.uI&&(t.va=this.uI),"word"!==this.dI&&(t.wr=this.dI),0!==this.Tzt&&(t.lho=this.Tzt),this.iI&&(t.b=this.iI),this.eI&&(t.i=this.eI),-1!==this.kzt&&(t.tw={st:this.Fzt,en:this.kzt,l:this.Dzt}),this.Czt&&(t.ioc=this.Czt.g9()),"fixed"===this._zt&&(t.fs=this.Izt),t}Jv(t){if(this.Uzt(),this.Sf=t.t,this.wv.Ka(t.c),this.xzt=t.fn,this.Gzt=t.ps,this.Mzt=!!t.hasOwnProperty("bbc")&&t.bbc,this.lI=t.hasOwnProperty("ha")?t.ha:0,this.uI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.dI="boolean"==typeof s?s?"word":"character":s}else this.dI="word";if(this.Tzt=t.hasOwnProperty("lho")?t.lho:0,this.iI=!!t.hasOwnProperty("b")&&t.b,this.eI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.Fzt=i.st,this.kzt=i.en,this.Dzt=i.l}if(t.hasOwnProperty("ioc")){const e=this.nO().qV(t.ioc);e&&this.Wzt(e)}else this.Wzt(null);t.hasOwnProperty("fs")?(this._zt="fixed",this.Izt=t.fs):this._zt="auto",this.jzt(),this.Vzt(),this.Rzt=!1,-1!==this.kzt&&this.vGt()}qrt(t){switch(t){case 0:return this.yC();case 1:return this.Mzt;case 2:return this.Jzt();case 3:return this.qzt();case 4:return this.Xzt();case 5:return this.$zt();case 6:return this.Yzt();case 7:return Vl[0]=this.wv.ga(),Vl[1]=this.wv.ya(),Vl[2]=this.wv.wa(),Vl;case 8:return this.Kzt();case 9:return this.Zzt();case 10:return this.Qzt();case 15:return this.t9t()}}Qrt(t,s){switch(t){case 0:this.s9t(s);break;case 1:this.Mzt!==!!s&&(this.Mzt=!!s,this.jzt());break;case 2:this.i9t(s);break;case 3:this.e9t(s);break;case 4:this.h9t(s);break;case 5:this.r9t(s);break;case 6:this.n9t(s);break;case 7:const i=this.wv,e=s;i.ga()===e[0]&&i.ya()===e[1]&&i.wa()===e[2]||(this.wv.ra(e[0],e[1],e[2]),this.jzt());break;case 8:this.o9t(s);break;case 9:this.a9t(s);break;case 10:this.l9t(s)}}_Gt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.wv.na(s,i,e),this.jzt())}s9t(t){this.Sf!==t&&(this.Sf=t,this.Ozt.Mf(t),this.Vzt(),this.Rzt=!1,this.wf.JD())}yC(){return this.Sf}u9t(t,s){this.Hzt(),this.s9t(t),this.Fzt=this.wf.Yk(),this.kzt=this.Fzt+s/this.lj().u4(),this.Dzt=this.Ozt.xC(),this.Ozt.hC(0),this.vGt()}Uzt(){this.Fzt=-1,this.kzt=-1,this.Dzt=0,this.Ozt.hC(-1),this.rGt()}c9t(){-1!==this.kzt&&(this.Uzt(),this.F4(Wl.G$.Text.M$.f9t),this.wf.JD())}i9t(t){this.xzt!==t&&(this.xzt=t,this.Ozt.XI(t),this.wf.JD())}Jzt(){return this.xzt}r9t(t){this.iI!==(t=!!t)&&(this.iI=t,this.Ozt.tC(t),this.wf.JD())}$zt(){return this.iI}n9t(t){this.eI!==(t=!!t)&&(this.eI=t,this.Ozt.iC(t),this.wf.JD())}Yzt(){return this.eI}e9t(t){this.Gzt!==t&&(this.Gzt=t,this.wf.JD())}qzt(){return this.Gzt}d9t(t){this.wv.Ga(t)||(this.wv.ma(t),this.Ozt.Mv(this.wv),this.wf.JD())}p9t(){return this.wv}h9t(t){this.Tzt!==t&&(this.Tzt=t,this.jzt(),this.wf.JD())}Xzt(){return this.Tzt}o9t(t){this.lI!==t&&(this.lI=t,this.jzt(),this.wf.JD())}Kzt(){return this.lI}a9t(t){this.uI!==t&&(this.uI=t,this.jzt(),this.wf.JD())}Zzt(){return this.uI}m9t(t){this.l9t(Jl[t])}l9t(t){this.dI!==t&&(this.dI=t,this.jzt(),this.wf.JD())}Qzt(){return this.dI}g9t(t){this.pI!==t&&(this.pI=t,this.jzt(),this.wf.JD())}y9t(){return this.pI}w9t(t){this.Ezt=!!t,this.Vzt()}t9t(){return this.Ezt}S9t(t){this._zt!==t&&(this._zt=t,this.wf.JD())}b9t(){return this._zt}v9t(t){this.Izt!==t&&(this.Izt=t,"fixed"===this._zt)&&this.wf.JD()}M9t(){return this.Izt}x9t(){return this.Hzt(),this.Ozt.bC()}G9t(){return this.Hzt(),this.Ozt.MC()}T9t(t,s){this.Hzt();const i=this.ND(),e=(Yl.set(t-i.Av(),s-i.Dv()),Yl.rotate(-i.w5()),Yl.offset(i._m()*i.bW(),i.Om()*i.MW()),Yl.Pt(i._m(),i.Om()),Yl.scale(this.Ozt._m(),this.Ozt.Om()),this.Ozt.TC(Yl.fl(),Yl.pl()));if(e){const h=e.Gg("tag");if(h)return h.om}return""}_9t(t,s,i){const e=this.T9t(s,i);return e&&Wl.Mh(t,e)}I9t(t,s){this.Hzt(),s=Math.floor(s);const i=this.Ozt.IC(t,s);if(!i)return null;const e=this.ND(),h=this.Ozt.oC(),r=i.Sg(),n=i.vg()-(i.Om()-i.Bm())*h,o=i._m()*h/this.Ozt._m()*e._m(),a=i.Om()*h/this.Ozt.Om()*e.Om();return Yl.set(r,n),Yl.Pt(this.Ozt._m(),this.Ozt.Om()),Yl.scale(e._m(),e.Om()),Yl.offset(-e._m()*e.bW(),-e.Om()*e.MW()),Yl.rotate(e.w5()),Yl.offset(e.Av(),e.Dv()),{x:Yl.fl(),y:Yl.pl(),width:o,height:a}}C9t(t){return this.Hzt(),this.Ozt.CC(t)}P9t(t){let s=Kl.get(t);return null===s?"":`</${s||"span"||"span"}>`}R9t(t,s){let i=Kl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async E9t(){if(!this.Rzt){let t=new Wl.Dh(this.Sf,{zp:!0}).rm(),s=new Map,h='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.Jzt()}';`),this.$zt()&&i.push("font-weight: bold;"),this.Yzt()&&i.push("font-style: italic;"),"character"===this.Qzt()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.Czt?this.nO().t4t(this.Czt):null);if(this.Czt){const o=Wl.dr(Wl.Gd),a=[],l=new Map;for(const c of t)if(c.km()){const f=c.Rg(r);if(f){const d=f.vy(),p=d.yW().f_t();l.has(p)||(l.set(p,null),a.push(o.xc(async()=>{const t=await p.ZH();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.km()){const g=m.Rg(r);if(g){const y=g.vy(),w=y.yW().f_t();u.push(o.xc(async()=>{const t=await y.yW().p_t(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const n=new Map;for(const b of t){let e=b._g(),t=[...n.keys()];t.reverse();for(const v of t)e.has(v)&&e.get(v)===n.get(v)||(n.delete(v),h+=this.P9t(v));for(const[M,x]of e)n.has(M)||(n.set(M,x),h+=this.R9t(M,x));if(b.Am()&&(h+=Wl.fp(Wl.up(b.Ym().join("")),"\n","<br>")),b.km()&&r){const G=b.Rg(r);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.wf.fk()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${b.Pg()}" width="${G._m()}" height="${G.Om()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...n.keys()];e.reverse();for(const _ of e)h+=this.P9t(_);h+="</span>",this.Pzt=h,this.Rzt=!0}return this.Pzt}YK(){const s=this.wf.Yk();if(s>=this.kzt)this.Uzt(),this.F4(Wl.G$.Text.M$.f9t),this.wf.JD();else{let t=Wl.Nr(this.Fzt,this.kzt,s,0,this.Dzt);(t=Math.floor(t))!==this.Ozt.rC()&&(this.Ozt.hC(t),this.wf.JD())}}TGt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.yC(),FVt:t=>this.s9t(t)},{name:t+".properties.font.name",value:this.Jzt(),FVt:t=>this.i9t(t)},{name:t+".properties.size.name",value:this.qzt(),FVt:t=>this.e9t(t)},{name:t+".properties.line-height.name",value:this.Xzt(),FVt:t=>this.h9t(t)},{name:t+".properties.bold.name",value:this.$zt(),FVt:t=>this.r9t(t)},{name:t+".properties.italic.name",value:this.Yzt(),FVt:t=>this.n9t(t)}]}]}Lxt(){return self.A9t}},new WeakMap),Zl=new Map([["left",0],["center",1],["right",2]]),Ql=new Map([["top",0],["center",1],["bottom",2]]),tu=["ltr","rtl"];new Set(["auto","fixed"]);self.A9t=class extends self.I6{constructor(){super(),R.set(this,self.zB.YB().A6())}get text(){return R.get(this).yC()}set text(t){jl.Pe(t);const s=R.get(this);s.Uzt(),s.s9t(t)}F9t(t,s){jl.Pe(t),jl.Te(s);const i=R.get(this);i.Uzt(),i.u9t(t,s)}k9t(){R.get(this).c9t()}set nU(t){jl.Pe(t),R.get(this).i9t(t)}get nU(){return R.get(this).Jzt()}set aU(t){R.get(this).r9t(t)}get aU(){return R.get(this).$zt()}set lU(t){R.get(this).n9t(t)}get lU(){return R.get(this).Yzt()}set oU(t){jl.Te(t),R.get(this).e9t(t)}get oU(){return R.get(this).qzt()}set D9t(t){if(jl.He(t),t.length<3)throw new Error("expected 3 elements");$l.ra(t[0],t[1],t[2]),R.get(this).d9t($l)}get D9t(){const t=R.get(this).p9t();return[t.ga(),t.ya(),t.wa()]}set lineHeight(t){jl.Te(t),R.get(this).h9t(t)}get lineHeight(){return R.get(this).Xzt()}set fU(t){jl.Pe(t);const s=Zl.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).o9t(s)}get fU(){return Ul[R.get(this).Kzt()]}set verticalAlign(t){jl.Pe(t);const s=Ql.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).a9t(s)}get verticalAlign(){return Hl[R.get(this).Zzt()]}set dU(t){if(!Jl.includes(t))throw new Error("invalid mode");R.get(this).l9t(t)}get dU(){return R.get(this).Qzt()}set pU(t){jl.Pe(t);const s=tu.indexOf(t);if(-1===s)throw new Error("invalid text direction");R.get(this).g9t(s)}get pU(){return tu[R.get(this).y9t()]}set O9t(t){R.get(this).w9t(!!t)}get O9t(){return R.get(this).t9t()}L9t(t){jl.Te(t);const s=R.get(this);s.S9t("fixed"),s.v9t(t)}B9t(){R.get(this).S9t("auto")}get yU(){return R.get(this).x9t()}get wU(){return R.get(this).G9t()}N9t(){const t=R.get(this);return[t.x9t(),t.G9t()]}W9t(t,s,i){return jl.Pe(t),jl.Te(s),jl.Te(i),R.get(this)._9t(t,s,i)}j9t(t,s){return jl.Te(t),jl.Te(s),R.get(this).T9t(t,s)}V9t(t,s=0){return jl.Pe(t),jl.Te(s),R.get(this).I9t(t,s)}U9t(t){return jl.Pe(t),R.get(this).C9t(t)}H9t(t){const s=R.get(this),i=s.nO().LO(t);s.Wzt(i)}z9t(){return R.get(this).E9t()}}}{const su=self.Ws;su.G$.Text.M$={J9t(t,s){return s?this.Sf===t:su.Mh(this.Sf,t)},q9t(){return-1!==this.kzt},f9t(){return!0},X9t(t,s,i){return this._9t(t,s,i)}}}{const iu=self.Ws,eu=iu.dr(iu.Yo);iu.G$.Text.drt={Mf(t){this.Uzt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.s9t(t.toString())},$9t(t){this.Uzt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.s9t(this.Sf+t)},Y9t(t,s){this.Uzt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.u9t(t.toString(),s)},K9t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.xzt&&i===this.iI&&e===this.eI||(this.i9t(t),this.r9t(i),this.n9t(e))},$I(t){this.e9t(t)},Z9t(t){eu.Aa(t),eu.Gr(),this.d9t(eu)},Q9t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},m8t(t){this.ND().vv(t),this.wf.JD()},tJt(){this.c9t()},ZI(t){this.h9t(t)},sJt(t){this.o9t(t)},iJt(t){this.a9t(t)},eJt(t){this.m9t(t)},mC(t){this.g9t(t)},hJt(t){this.Wzt(t)},rJt(){return this.E9t()},nJt(t){this.w9t(t)},oJt(t,s){this.S9t(["auto","fixed"][t]),this.v9t(s)}}}{const hu=self.Ws;hu.G$.Text.prt={Text(){return this.Sf},aJt(){return this.Mzt?hu.Dh.ym(this.Sf):this.Sf},lJt(){return this.xzt},uJt(){return this.Gzt},cJt(){return this.x9t()},fJt(){return this.G9t()},dJt(){return this.Tzt},pJt(t,s){return this.T9t(t,s)},mJt(t){return this.C9t(t)},gJt(t,s){const i=this.I9t(t,s);return i?i.x:0},yJt(t,s){const i=this.I9t(t,s);return i?i.y:0},wJt(t,s){const i=this.I9t(t,s);return i?i.width:0},SJt(t,s){const i=this.I9t(t,s);return i?i.height:0},bJt(){return this.Pzt}}}{const ru=self.Ws;ru.G$.vJt=class extends ru.dxt{constructor(t){super(t)}pr(){super.pr()}}}{const nu=self.Ws;nu.G$.vJt.PIt=class extends nu.Kxt{constructor(t){super(t)}pr(){super.pr()}Oxt(){this.yW().rO(this.wf)}JX(t){return this.yW().J8(t,{EM:this.wf.fk()})}ZX(){this.yW().WI()}}}{let s=function(t){return uu.get(t).MJt()};s;const ou=self.Ws,au=self.Ys,lu=ou.dr(ou.Rect),uu=(ou.G$.vJt.Instance=class extends ou.RGt{constructor(t,s){super(t),this.xJt=!0;const i=ou.dr(self.GJt);(this._Jt=i).TJt=()=>this.IJt(),this.CJt=null,this.PJt=(t,s,i,e,h,r)=>this.RJt(t,s,i,e,h,r),this.EJt=t=>this.AJt(t);let e=this.FJt=!0;s&&(i.kJt(s[0]),i.DJt(ou._r(s[1])),i.OJt(s[2]?"one-shot":"continuous-spray"),this.LJt(this.wf.qV(s[3])),e=s[4],i.BJt(s[5]),i.NJt(s[6]),i.WJt(s[7]/100),i.jJt(s[8]),i.VJt(s[9]),i.UJt(s[10]),i.HJt(s[11]),i.zJt(s[12]),i.JJt(s[13]),i.qJt(s[14]),i.XJt(s[15]),i.$Jt(s[16]),i.YJt(s[17]),i.KJt(s[18]),i.ZJt(s[19]),i.QJt(s[20])),this.tqt(),this.CJt&&(this.FJt=!1),"one-shot"===i.sqt()?i.iqt():i.eqt(!0);const h=this.ND();h.sB(e),h.eAt(!0),this.Ii.Kf().addEventListener("bboxchange",()=>{h.iAt(this._Jt.wN())}),this.nO().Kb().Xw()&&h.qEt(),this.ZY=t=>this.QY(t),this.nO().Kf().addEventListener("afterload",this.ZY),this.vGt()}pr(){this.nO().Kf().removeEventListener("afterload",this.ZY),this.ZY=null,this._Jt.pr(),this._Jt=null,this.PJt=null,this.EJt=null,super.pr()}MJt(){return this._Jt}hqt(t){this._Jt.kJt(t),"one-shot"===this._Jt.sqt()&&this.xJt&&this._Jt.rqt(t)}LJt(t){(t=t===this.qB()?null:t)===this.CJt||(this.CJt=t,this._Jt.nqt=t?t=>this.oqt(t):null,this.CJt)||(this.FJt=!0)}tqt(){const t=this._Jt,s=this.ND();t.aqt(s.qR()),t.v6t(this.wf.pk()),t.lqt(s.Av()),t.uqt(s.Dv()),t.cqt(s.w5()),t.fqt(Math.abs(s.yEt()))}IJt(){this.wf.t4(this.Ii)}bM(t){if(this.FJt){const s=this.Fft.yW(),i=s.K2();if(i){const e=this.ND(),h=e.WD(),r=lu,n=(this.wf.$O().LDt()?r.set(-1/0,-1/0,1/0,1/0):h.K9()?h.Iq(e.gN(),r):h.O9(e.gN(),r),t.QR(i),h.L9(e.gN()));this._Jt.dqt(h.HB()*n),this._Jt.bM(t,s.VGt(),r,h.K9())}}}zv(){const t=this._Jt;return{r:t.pqt(),sc:t.mqt(),st:t.sqt(),isp:t.gqt(),isz:t.yqt(),io:t.wqt(),gr:t.Sqt(),xr:t.bqt(),yr:t.vqt(),spr:t.Mqt(),szr:t.xqt(),grnd:t.Gqt(),acc:t.Tqt(),g:t._qt(),lar:t.Iqt(),lsr:t.Cqt(),lor:t.Pqt(),dm:t.Rqt(),to:t.Eqt(),s:t.Aqt(),pcc:t.Fqt(),ft:this.xJt,soc:this.CJt?this.CJt.g9():null,p:t.kqt().map(t=>t.toJSON())}}Jv(t,s){const i=this._Jt;if(i.kJt(t.r),i.DJt(t.sc),i.OJt(t.st),i.BJt(t.isp),i.NJt(t.isz),i.WJt(t.io),i.jJt(t.gr),i.VJt(t.xr),i.UJt(t.yr),i.HJt(t.spr),i.zJt(t.szr),i.JJt(t.grnd),i.qJt(t.acc),i.XJt(t.g),i.$Jt(t.lar),i.YJt(t.lsr),i.KJt(t.lor),i.ZJt(t.dm),i.QJt(t.to),i.eqt(t.s),i.Dqt(t.pcc),this.xJt=t.ft,t.hasOwnProperty("soc")){const r=this.nO().qV(t.soc);r&&this.LJt(r)}const e=t.p,h=(i.rqt(e.length,!1),i.kqt());for(let t=0,s=h.length;t<s;++t)h[t].Ka(e[t]);"state"===s&&this.CJt&&(i.Oqt(),i.Lqt(this))}QY(){const t=this._Jt,i=(t.Oqt(),t.Lqt(this),t.kqt());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.Bqt();if(h){const r=h.ND();if(r){const n=r.lj();if(n){const o=e.Nqt(),a=n.o4();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.nO(),u=l.kD(o);u&&l.t4(u)}}}}}}YK(){const t=this.wf.Hk(this.Ii);this.tqt(),this.xJt&&"one-shot"===this._Jt.sqt()&&this._Jt.Wqt(),this._Jt.YK(t),this._Jt.Aqt()&&this.wf.JD(),this.ND().uN(),this.xJt=!1}jqt(t){for(this.xJt&&"one-shot"===this._Jt.sqt()&&this._Jt.Wqt();0<t;)this._Jt.YK(1/60),t-=1/60;this._Jt.Aqt()&&this.wf.JD(),this.ND().uN(),this.xJt=!1}oqt(t,s){let i,e=(i=(i=(i="number"==typeof s?this.wf.kD(s):i)&&i.qB()!==this.CJt?null:i)||this.wf.i5(this.CJt,this.ND().WD(),t.Av(),t.Dv())).ND();return e.wC(t.mc(),t.mc()),e.y5(t.w5()),e.YR(t.qR()),e.TN(this.ND().GN()),e.uN(),e.FN(this.lj(),!0),i.y$(),t.Vqt(this.PJt),t.Uqt(this.EJt),i}RJt(t,s,i,e,h,r){if(!t.dV()){const n=t.ND();n.pN(s,i),n.wC(n._m()+e,n.Om()+e),n.y5(n.w5()+h),n.YR(n.qR()+r),n.uN()}}AJt(t){t.dV()||this.wf.t4(t)}qrt(t){const s=this._Jt;switch(t){case 0:return s.pqt();case 1:return ou.Ir(s.mqt());case 2:return"one-shot"===s.sqt()?1:0;case 5:return s.gqt();case 6:return s.yqt();case 7:return 100*s.wqt();case 8:return s.Sqt();case 9:return s.bqt();case 10:return s.vqt();case 11:return s.Mqt();case 12:return s.xqt();case 13:return s.Gqt();case 14:return s.Tqt();case 15:return s._qt();case 16:return s.Iqt();case 17:return s.Cqt();case 18:return s.Pqt();case 19:return s.Rqt();case 20:return s.Eqt()}}Qrt(t,s){const i=this._Jt;switch(t){case 0:i.kJt(s);break;case 1:i.DJt(ou._r(s));break;case 2:i.OJt(s?"one-shot":"continuous-spray");break;case 5:i.BJt(s);break;case 6:i.NJt(s);break;case 7:i.WJt(s/100);break;case 8:i.jJt(s);break;case 9:i.VJt(s);break;case 10:i.UJt(s);break;case 11:i.HJt(s);break;case 12:i.zJt(s);break;case 13:i.JJt(s);break;case 14:i.qJt(s);break;case 15:i.XJt(s);break;case 16:i.$Jt(s);break;case 17:i.YJt(s);break;case 18:i.KJt(s);break;case 19:i.ZJt(s);break;case 20:i.QJt(s)}}TGt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this._Jt;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.Hqt()},{name:s+".type.name",value:[s+".type.items."+e.sqt()]},{name:i+".is-spraying",value:e.Aqt(),FVt:t=>e.eqt(t)},{name:s+".rate.name",value:e.pqt(),FVt:t=>e.kJt(t)},{name:s+".spray-cone.name",value:ou.Ir(e.mqt()),FVt:t=>e.DJt(ou._r(t))},{name:s+".speed.name",value:e.gqt(),FVt:t=>e.BJt(t)},{name:s+".size.name",value:e.yqt(),FVt:t=>e.NJt(t)},{name:s+".opacity.name",value:e.wqt(),FVt:t=>e.WJt(t)},{name:s+".grow-rate.name",value:e.Sqt(),FVt:t=>e.jJt(t)},{name:s+".x-randomiser.name",value:e.bqt(),FVt:t=>e.VJt(t)},{name:s+".y-randomiser.name",value:e.vqt(),FVt:t=>e.UJt(t)},{name:s+".initial-speed-randomiser.name",value:e.Mqt(),FVt:t=>e.HJt(t)},{name:s+".size-randomiser.name",value:e.xqt(),FVt:t=>e.zJt(t)},{name:s+".grow-rate-randomiser.name",value:e.Gqt(),FVt:t=>e.JJt(t)},{name:s+".acceleration.name",value:e.Tqt(),FVt:t=>e.qJt(t)},{name:s+".gravity.name",value:e._qt(),FVt:t=>e.XJt(t)},{name:s+".angle-randomiser.name",value:e.Iqt(),FVt:t=>e.$Jt(t)},{name:s+".life-speed-randomiser.name",value:e.Cqt(),FVt:t=>e.YJt(t)},{name:s+".opacity-randomiser.name",value:e.Pqt(),FVt:t=>e.KJt(t)},{name:s+".timeout.name",value:e.Eqt(),FVt:t=>e.QJt(t)}]}]}Lxt(){return self.zqt}},new WeakMap);self.zqt=class extends self.I6{constructor(){super(),uu.set(this,self.zB.YB().A6())}set Jqt(t){s(this).eqt(!!t)}get Jqt(){return s(this).Aqt()}set rate(t){au.Te(t),uu.get(this).hqt(t)}get rate(){return s(this).pqt()}set qqt(t){au.Te(t),s(this).DJt(t)}get qqt(){return s(this).mqt()}set Xqt(t){au.Te(t),s(this).BJt(t)}get Xqt(){return s(this).gqt()}set $qt(t){au.Te(t),s(this).NJt(t)}get $qt(){return s(this).yqt()}set Yqt(t){au.Te(t),s(this).WJt(t)}get Yqt(){return s(this).wqt()}set Kqt(t){au.Te(t),s(this).VJt(t)}get Kqt(){return s(this).bqt()}set Zqt(t){au.Te(t),s(this).UJt(t)}get Zqt(){return s(this).vqt()}set Qqt(t){au.Te(t),s(this).HJt(t)}get Qqt(){return s(this).Mqt()}set tXt(t){au.Te(t),s(this).zJt(t)}get tXt(){return s(this).xqt()}set sXt(t){au.Te(t),s(this).jJt(t)}get sXt(){return s(this).Sqt()}set iXt(t){au.Te(t),s(this).JJt(t)}get iXt(){return s(this).Gqt()}set acceleration(t){au.Te(t),s(this).qJt(t)}get acceleration(){return s(this).Tqt()}set eXt(t){au.Te(t),s(this).XJt(t)}get eXt(){return s(this)._qt()}set hXt(t){au.Te(t),s(this).$Jt(t)}get hXt(){return s(this).Iqt()}set rXt(t){au.Te(t),s(this).YJt(t)}get rXt(){return s(this).Cqt()}set nXt(t){au.Te(t),s(this).KJt(t)}get nXt(){return s(this).Pqt()}set timeout(t){au.Te(t),s(this).QJt(t)}get timeout(){return s(this).Eqt()}oXt(t){au.Te(t),uu.get(this).jqt(t)}aXt(t){const s=uu.get(this);t?s.LJt(s.nO().LO(t)):s.LJt(null)}}}{const cu=self.Ws;cu.G$.vJt.M$={Aqt(){return this._Jt.Aqt()}}}{const fu=self.Ws;fu.G$.vJt.drt={eqt(t){this._Jt.eqt(0!==t)},kJt(t){this.hqt(t)},lXt(t){this.LJt(t)},uXt(){this.LJt(null)},DJt(t){this._Jt.DJt(fu._r(t))},BJt(t){this._Jt.BJt(t)},NJt(t){this._Jt.NJt(t)},WJt(t){this._Jt.WJt(t/100)},jJt(t){this._Jt.jJt(t)},cXt(t){this._Jt.VJt(t)},fXt(t){this._Jt.UJt(t)},dXt(t){this._Jt.HJt(t)},pXt(t){this._Jt.zJt(t)},mXt(t){this._Jt.JJt(t)},gXt(t){this._Jt.qJt(t)},XJt(t){this._Jt.XJt(t)},yXt(t){this._Jt.$Jt(t)},wXt(t){this._Jt.YJt(t)},SXt(t){this._Jt.KJt(t)},QJt(t){this._Jt.QJt(t)},bXt(t){this.jqt(t)},m8t(t){this.ND().vv(t),this.wf.JD()}}}{const du=self.Ws;du.G$.vJt.prt={vXt(){return this._Jt.Hqt()},MXt(){return this._Jt.pqt()},xXt(){return du.Ir(this._Jt.mqt())},GXt(){return this._Jt.gqt()},TXt(){return this._Jt.yqt()},_Xt(){return 100*this._Jt.wqt()},IXt(){return this._Jt.Sqt()},CXt(){return this._Jt.bqt()},PXt(){return this._Jt.vqt()},RXt(){return this._Jt.xqt()},EXt(){return this._Jt.Mqt()},AXt(){return this._Jt.Gqt()},FXt(){return this._Jt.Tqt()},kXt(){return this._Jt._qt()},DXt(){return this._Jt.Iqt()},OXt(){return this._Jt.Cqt()},LXt(){return this._Jt.Pqt()},BXt(){return this._Jt.Eqt()}}}{const pu=self.Ws,mu=[],gu=new Set(["continuous-spray","one-shot"]),yu=["fade-to-invisible","timeout-expired","particle-stopped"],wu=pu.dr(pu.Rect);self.GJt=class{constructor(){this.NXt=0,this.WXt=0,this.jXt="continuous-spray",this.VXt=!1,this.UXt=0,this.HXt=!1,this.zXt=0,this.JXt=0,this.qXt=0,this.XXt=0,this.$Xt=0,this.YXt=1,this.KXt=0,this.ZXt=0,this.QXt=0,this.t$t=0,this.s$t=0,this.i$t=0,this.e$t=0,this.h$t=0,this.r$t=0,this.n$t=0,this.o$t=0,this.a$t=0,this.l$t=0,this.m0=0,this.u$t=0,this.c$t=1,this.TJt=null,this.nqt=null,this.f$t=[],this.jRt=new pu.Rect,this.wv=new pu.Yo}pr(){this.S0(),pu.Hn(this.f$t),this.f$t=null,this.TJt=null,this.nqt=null,this.jRt=null,this.wv=null}S0(){const i=this.f$t;for(let t=0,s=i.length;t<s;++t)i[t].r2t();pu.Kh(mu,i),pu.Hn(i),1e3<mu.length&&pu.Un(mu,1e3),this.VXt=!1}iqt(){for(let t=0,s=this.NXt;t<s;++t)this.d$t();this.f$t.length&&(this.VXt=!0)}d$t(t=!0){let s=null;return mu.length?(s=mu.pop()).p$t(this):s=pu.dr(self.m$t,this),this.f$t.push(s),t?s.KCt(this.nqt):s.KCt(),s}Wqt(){const i=this.f$t,e=this.nqt;for(let t=0,s=i.length;t<s;++t)i[t].KCt(e)}Oqt(){const i=this.f$t,e=this.nqt;for(let t=0,s=i.length;t<s;++t)i[t].g$t(e)}Lqt(i){const e=this.f$t;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.Bqt();if(r){const n=r.ND();n.Fv(h.Av()),n.Ov(h.Dv()),n.wC(h.mc(),h.mc()),n.YR(h.qR()),n.y5(h.w5()),n.TN(i.ND().GN()),n.uN()}}}rqt(t,s=!0){const i=this.f$t;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.r2t(),mu.push(h)}1e3<mu.length&&pu.Un(mu,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.d$t(s)}}kqt(){return this.f$t}Hqt(){return this.f$t.length}YK(t){this.y$t(t),this.w$t(t),this.S$t()}y$t(t){if("continuous-spray"===this.jXt&&this.VXt){this.u$t+=t*this.NXt;const s=Math.floor(this.u$t);this.u$t-=s;for(let t=0;t<s;++t)this.d$t()}}Dqt(t){this.u$t=t}Fqt(){return this.u$t}w$t(i){let e=this.jRt,h=(e.set(this.zXt,this.JXt,this.zXt,this.JXt),this.f$t),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).YK(i),n.Rmt()?(++r,e.ru(n.wN())):(n.r2t(),mu.push(n))}pu.Un(h,r),1e3<mu.length&&pu.Un(mu,1e3)}S$t(){"one-shot"===this.jXt&&0===this.f$t.length&&this.VXt&&(this.TJt&&this.TJt(),this.VXt=!1)}bM(i,e,h,r){wu.set(e.un(),e.cn(),e.mn(),e.gn()),i.pE(wu),this.wv.I(i.ZR());const n=this.f$t;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.su(o.wN())&&o.bM(i,e,r)}i.mE()}ZR(){return this.wv}kJt(t){this.NXt=+t}pqt(){return this.NXt}DJt(t){this.WXt=+t}mqt(){return this.WXt}OJt(t){if(!gu.has(t))throw new Error("invalid spray type");this.jXt=t}sqt(){return this.jXt}eqt(t){this.VXt=!!t}Aqt(){return this.VXt}aqt(t){this.UXt=+t}b$t(){return this.UXt}v6t(t){this.HXt=!!t}v$t(){return this.HXt}lqt(t){this.zXt=+t}M$t(){return this.zXt}uqt(t){this.JXt=+t}x$t(){return this.JXt}cqt(t){this.qXt=+t}G$t(){return this.qXt}BJt(t){this.XXt=+t}gqt(){return this.XXt}NJt(t){this.$Xt=+t}yqt(){return this.$Xt}fqt(t){this.YXt=+t}T$t(){return this.YXt}WJt(t){this.KXt=+t}wqt(){return this.KXt}jJt(t){this.ZXt=+t}Sqt(){return this.ZXt}VJt(t){this.QXt=+t}bqt(){return this.QXt}UJt(t){this.t$t=+t}vqt(){return this.t$t}HJt(t){this.s$t=+t}Mqt(){return this.s$t}zJt(t){this.i$t=+t}xqt(){return this.i$t}JJt(t){this.e$t=+t}Gqt(){return this.e$t}qJt(t){this.h$t=+t}Tqt(){return this.h$t}XJt(t){this.r$t=+t}_qt(){return this.r$t}$Jt(t){this.n$t=+t}Iqt(){return this.n$t}YJt(t){this.o$t=+t}Cqt(){return this.o$t}KJt(t){this.a$t=+t}Pqt(){return this.a$t}_$t(t){let s=yu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.l$t=s}ZJt(t){this._$t(yu[t])}I$t(){return yu[this.l$t]}Rqt(){return this.l$t}QJt(t){this.m0=+t}Eqt(){return this.m0}dqt(t){this.c$t=+t}C$t(){return this.c$t}wN(){return this.jRt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ws),l=new m.ou,u=new m.Yo,t=self.devicePixelRatio||1,c=!1;self.m$t=class{constructor(t){this.P$t=t,this.y0=!1,this.al=0,this.ll=0,this.g_t=0,this.K7=0,this.R$t=1,this.E$t=0,this.A$t=0,this.BH=0,this.F$t=0,this.k$t=0,this.D$t=0,this.Uu=new m.Rect,this.O$t=null,this.L$t=NaN,this.B$t=null,this.N$t=null}p$t(t){this.P$t=t}KCt(t){const s=this.P$t;this.y0=!0,this.al=s.M$t()+p(s.bqt()),this.ll=s.x$t()+p(s.vqt()),this.g_t=s.gqt()+p(s.Mqt()),this.K7=s.G$t()+p(s.mqt()),this.R$t=s.wqt(),this.E$t=this.R$t,this.BH=(s.yqt()+p(s.xqt()))*s.T$t(),this.F$t=this.BH/2,this.A$t=s.Sqt()+p(s.Gqt()),this.k$t=0,this.D$t=0,this.W$t(),t?this.O$t||(this.O$t=t(this)):(this.O$t=null,this.B$t=null,this.N$t=null)}g$t(t){t?this.O$t&&!this.O$t.dV()||(this.O$t=t(this,this.L$t)):(this.O$t=null,this.B$t=null,this.N$t=null)}Vqt(t){this.B$t=t}Uqt(t){this.N$t=t}r2t(){const t=this.N$t;t&&t(this.O$t),this.O$t=null,this.B$t=null,this.N$t=null}toJSON(){let t;return this.O$t&&this.O$t.ND()&&(t=this.O$t.ND().lj().o4()),[this.al,this.ll,this.g_t,this.K7,this.R$t,this.A$t,this.BH,this.k$t,this.D$t,t]}Ka(t){this.al=t[0],this.ll=t[1],this.g_t=t[2],this.K7=t[3],this.R$t=t[4],this.E$t=this.R$t,this.A$t=t[5],this.BH=t[6],this.k$t=t[7],this.D$t=t[8],this.L$t=t[9],this.F$t=this.BH/2,this.W$t()}YK(t){let s=this.P$t,i=this.g_t*t,e=this.K7,h=Math.cos(e)*i,r=Math.sin(e)*i+this.k$t*t,n=(this.al+=h,this.ll+=r,this.A$t*t),o=(this.BH+=n,this.F$t=this.BH/2,this.g_t+=s.Tqt()*t,this.k$t+=s._qt()*t,this.D$t+=t,this.W$t(),s.Iqt()),a=s.Cqt(),l=s.Pqt(),u=0;0!==o&&(u=p(o*t),this.K7+=u),0!==a&&(this.g_t+=p(a*t)),0!==l&&(this.R$t=m.Gr(this.R$t+p(l*t),0,1));const c=1<=this.BH&&(2===s.Rqt()?0<this.g_t:this.D$t<s.Eqt()),f=this.B$t;if(f&&c){let t=s.b$t()*this.R$t;0===s.Rqt()&&(t*=1-this.D$t/s.Eqt());const d=t-this.E$t;this.E$t=t,f(this.O$t,h,r,n,u,d)}this.y0=c}Rmt(){return this.y0}wN(){return this.Uu}W$t(){const t=this.al,s=this.ll,i=this.F$t;this.Uu.set(t-i,s-i,t+i,s+i)}bM(h,r,n){if(!this.O$t){let i=this.P$t,e=i.b$t()*this.R$t;if(0===i.Rqt()&&(e*=1-this.D$t/i.Eqt()),!(e<=0)){const o=this.BH,a=o*i.C$t()*t;if(!(a<1)){let t=this.al,s=this.ll;i.v$t()&&(t=t+.5|0,s=s+.5|0),h.Xw()?h.gE(t,s,o,e):n||a>h.QE()||a<h.ZE()?(u.I(i.ZR()),u.Pa(e),h.Mv(u),c=!0,l.Cu(this.Uu),h.lE(l,r)):(c&&(h.Mv(i.ZR()),c=!1),h.gE(t,s,a,e))}}}}Bqt(){return this.O$t}Nqt(){return this.L$t}Av(){return this.al}Dv(){return this.ll}mc(){return this.BH}w5(){return this.K7}qR(){return this.R$t}}}{const Su=self.Ws;Su.hlt.NTt=class extends Su.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const bu=self.Ws;bu.hlt.NTt.PIt=class extends bu.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const vu=self.Ws,Mu=self.Ys,xu=self.L6,Gu=new Set,Tu=(vu.hlt.NTt.Instance=class extends vu.bTt{constructor(t,s){super(t),this.z2t(!0),s&&(this.z2t(s[0]),this.Btt(s[1]))}pr(){super.pr()}z2t(t){this.Ii.cPt(!!t)}nc(){return this.Ii.uPt()}Btt(s){const i=this.Ii.Cbt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}ZW(){return this.Ii.Cbt().get("solidTags")||Gu}j$t(){return[...this.ZW()].join(" ")}zv(){return{e:this.nc()}}Jv(t){this.z2t(t.e)}qrt(t){if(0===t)return this.nc()}Qrt(t,s){0===t&&this.z2t(s)}TGt(){return[{title:"$"+this.V6().uf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.nc(),FVt:t=>this.z2t(t)},{name:"behaviors.solid.properties.tags.name",value:this.j$t(),FVt:t=>this.Btt(t)}]}]}Lxt(){return self.V$t}},new WeakMap);self.V$t=class extends xu{constructor(){super(),Tu.set(this,xu.YB().A6())}set isEnabled(t){Tu.get(this).z2t(!!t)}get isEnabled(){return Tu.get(this).nc()}set tags(t){Mu.Pe(t),Tu.get(this).Btt(t)}get tags(){return Tu.get(this).j$t()}}}{const _u=self.Ws;_u.hlt.NTt.M$={nc(){return this.nc()}}}{const Iu=self.Ws;Iu.hlt.NTt.drt={z2t(t){this.z2t(t)},Btt(t){this.Btt(t)}}}{const Cu=self.Ws;Cu.hlt.NTt.prt={}}{const Pu=self.Ws;Pu.hlt.U$t=class extends Pu.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Ru=self.Ws;Ru.hlt.U$t.PIt=class extends Ru.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Eu=self.Ws,Au=self.Ys,Fu=self.L6,E=(Eu.hlt.U$t.Instance=class extends Eu.bTt{constructor(t,s){super(t),this.H$t=!1,this.z$t=!1,this.J$t=!1,this.q$t=!1,this.X$t=!1,this.$$t=!1,this.Y$t=!1,this.K$t=!1,this.Z$t=!1,this.Q$t=0,this.tYt=0,this.sYt=200,this.iYt=600,this.eYt=500,this.hYt=3,this.rYt=3,this.nYt=!1,this.oYt=!0,this.Qyt=!0,s&&(this.sYt=s[0],this.iYt=s[1],this.eYt=s[2],this.hYt=s[3],this.rYt=s[4],this.nYt=!!s[5],this.oYt=!!s[6],this.Qyt=!!s[7]),this.Qyt&&this.vGt(),this.oYt&&this.aYt()}aYt(){if(!this.P0){const t=this.wf.Kf();this.P0=new Eu._0(Eu.b0.T0(t,"keydown",t=>this.s7t(t.data)),Eu.b0.T0(t,"keyup",t=>this.i7t(t.data)),Eu.b0.T0(t,"window-blur",()=>this.e7t()),Eu.b0.T0(t,"keyboard-blur",()=>this.e7t()))}}lYt(){this.P0&&(this.P0.pr(),this.P0=null)}pr(){super.pr()}zv(){return{dx:this.Q$t,dy:this.tYt,e:this.Qyt,ms:this.sYt,acc:this.iYt,dec:this.eYt,d:this.hYt,am:this.rYt,dc:this.oYt,ii:this.X$t}}Jv(t){this.Q$t=t.dx,this.tYt=t.dy,this.JMt(t.e),this.sYt=t.ms,this.iYt=t.acc,this.eYt=t.dec,this.hYt=t.d,this.rYt=t.am,this.oYt=t.dc,this.X$t=t.ii,this.H$t=!1,this.z$t=!1,this.J$t=!1,this.q$t=!1,this.$$t=!1,this.Y$t=!1,this.K$t=!1,this.Z$t=!1,this.oYt?this.aYt():this.lYt()}s7t(t){switch(t.key){case"ArrowLeft":this.J$t=!0;break;case"ArrowUp":this.H$t=!0;break;case"ArrowRight":this.q$t=!0;break;case"ArrowDown":this.z$t=!0}}i7t(t){switch(t.key){case"ArrowLeft":this.J$t=!1;break;case"ArrowUp":this.H$t=!1;break;case"ArrowRight":this.q$t=!1;break;case"ArrowDown":this.z$t=!1}}e7t(){this.H$t=!1,this.z$t=!1,this.J$t=!1,this.q$t=!1}YK(){let m=this.wf.Hk(this.Ii),g=this.wf.KF(),t=this.J$t||this.K$t,s=this.q$t||this.Z$t,i=this.H$t||this.$$t,e=this.z$t||this.Y$t;if(this.K$t=!1,this.Z$t=!1,this.$$t=!1,this.Y$t=!1,this.Qyt){let p=g.EO(this.Ii);if(!p||(g.y3t(this.Ii,p),g.k3t(this.Ii))){this.X$t&&(t=s=i=e=!1),0===this.hYt?t=s=!1:1===this.hYt&&(i=e=!1),(t=2===this.hYt&&(i||e)?s=!1:t)===s&&(this.Q$t<0?this.Q$t=Math.min(this.Q$t+this.eYt*m,0):0<this.Q$t&&(this.Q$t=Math.max(this.Q$t-this.eYt*m,0))),i===e&&(this.tYt<0?this.tYt=Math.min(this.tYt+this.eYt*m,0):0<this.tYt&&(this.tYt=Math.max(this.tYt-this.eYt*m,0)));let f=0,d=0;if(t&&!s&&(f=0<this.Q$t?-(this.iYt+this.eYt):-this.iYt),s&&!t&&(f=this.Q$t<0?this.iYt+this.eYt:this.iYt),i&&!e&&(d=0<this.tYt?-(this.iYt+this.eYt):-this.iYt),e&&!i&&(d=this.tYt<0?this.iYt+this.eYt:this.iYt),this.Q$t+=f*m,this.tYt+=d*m,0!==this.Q$t||0!==this.tYt){let e=Math.hypot(this.Q$t,this.tYt),t=Math.atan2(this.tYt,this.Q$t),s=this.sYt*Math.cos(t),i=this.sYt*Math.sin(t),h=(e>this.sYt&&(e=this.sYt,this.Q$t=s,this.tYt=i),this.Ii.ND()),r=h.Av(),n=h.Dv(),o=h.w5(),a=Math.abs(s)*m,l=Math.abs(i)*m,u=Eu.Gr(this.Q$t*m+.5*f*m*m,-a,a),c=Eu.Gr(this.tYt*m+.5*d*m*m,-l,l);if(this.nYt){if(h.pN(u,c),h.uN(),p=g.EO(this.Ii)){g.y3t(this.Ii,p);let t=Math.atan2(this.tYt,this.Q$t)+Math.PI/2,s=!1,i=(h._m()+h.Om())/4;if(g.F3t(this.Ii,Math.cos(t),Math.sin(t),Math.max(2.5*e*m,i))){s=!0;const S=h.Av(),b=h.Dv(),v=e*m,M=Eu.Cr(r,n,S,b);if(1.01*v<M){const x=v/M,G=Eu.Lt(r,S,x),T=Eu.Lt(n,b,x);if(h.cN(G,T),h.uN(),p=g.EO(this.Ii)){const _=Eu.Rr(r,n,S,b)+Math.PI/2,I=Math.cos(_),C=Math.sin(_),P=(h._m()+h.Om())/2/10;g.F3t(this.Ii,I,C,Math.max(P,1))||(h.cN(r,n),h.uN(),s=!1)}}}if(!s){const R=Math.hypot(u,c),E=-u/R,A=-c/R;this.Q$t=0,this.tYt=0,g.E3t(this.Ii,E,A,Math.max(2.5*e*m,i))||(h.cN(r,n),h.uN())}}}else h.ant(u),h.uN(),(p=g.EO(this.Ii))&&(g.E3t(this.Ii,this.Q$t<0?1:-1,0,Math.max(Math.abs(Math.floor(u)),1))||(h.Fv(r),h.uN()),this.Q$t=0,g.y3t(this.Ii,p)),h.lnt(c),h.uN(),(p=g.EO(this.Ii))&&(g.E3t(this.Ii,0,this.tYt<0?1:-1,Math.max(Math.abs(Math.floor(c)),1))||(h.Ov(n),h.uN()),this.tYt=0,g.y3t(this.Ii,p));const y=Eu.qr(this.Q$t,6),w=Eu.qr(this.tYt,6);0===y&&0===w||!this.Ii.WL().vL()||(1===this.rYt?h.y5(Eu._r(90*Math.round(Eu.Ir(Math.atan2(w,y))/90))):2===this.rYt?h.y5(Eu._r(45*Math.round(Eu.Ir(Math.atan2(w,y))/45))):3===this.rYt&&h.y5(Math.atan2(w,y))),h.uN(),h.w5()!=o&&(p=g.EO(this.Ii))&&(h.y5(o),h.uN(),g.y3t(this.Ii,p))}}}}qrt(t){switch(t){case 0:return this.uYt();case 1:return this.cYt();case 2:return this.fYt();case 3:return this.hYt;case 4:return this.rYt;case 5:return this.nYt;case 6:return this.dYt();case 7:return this.XMt()}}Qrt(t,s){switch(t){case 0:this.pYt(s);break;case 1:this.mYt(s);break;case 2:this.gYt(s);break;case 3:this.hYt=s;break;case 4:this.rYt=s;break;case 5:this.nYt=!!s;break;case 6:this.yYt(!!s);break;case 7:this.JMt(!!s)}}wYt(){this.Q$t=0,this.tYt=0}SYt(){this.Q$t*=-1,this.tYt*=-1}bYt(){const t=Math.hypot(this.Q$t,this.tYt);t>this.sYt&&this.vYt(t)}vYt(t){t=Eu.Gr(t,0,this.sYt);const s=Math.atan2(this.tYt,this.Q$t);this.Q$t=t*Math.cos(s),this.tYt=t*Math.sin(s)}MYt(){return Math.hypot(this.Q$t,this.tYt)}pYt(t){this.sYt=Math.max(t,0)}uYt(){return this.sYt}mYt(t){this.iYt=Math.max(t,0)}cYt(){return this.iYt}gYt(t){this.eYt=Math.max(t,0)}fYt(){return this.eYt}xYt(){return Math.atan2(this.tYt,this.Q$t)}GYt(t){this.Q$t=t,this.bYt()}TYt(){return this.Q$t}_Yt(t){this.tYt=t,this.bYt()}IYt(){return this.tYt}CYt(t){if(this.Qyt)switch(t){case 0:this.K$t=!0;break;case 1:this.Z$t=!0;break;case 2:this.$$t=!0;break;case 3:this.Y$t=!0}}yYt(t){this.oYt!==(t=!!t)&&(this.oYt=t,this.oYt?this.aYt():(this.lYt(),this.e7t()))}dYt(){return this.oYt}PYt(t){this.X$t=!!t}RYt(){return this.X$t}JMt(t){this.Qyt=!!t,this.Qyt?this.vGt():(this.K$t=!1,this.Z$t=!1,this.$$t=!1,this.Y$t=!1,this.rGt())}XMt(){return this.Qyt}EYt(t){this.nYt=!!t}AYt(){return this.nYt}TGt(){const t="behaviors.eightdir";return[{title:"$"+this.V6().uf(),properties:[{name:t+".debugger.vector-x",value:this.TYt(),FVt:t=>this.GYt(t)},{name:t+".debugger.vector-y",value:this.IYt(),FVt:t=>this._Yt(t)},{name:t+".debugger.speed",value:this.MYt(),FVt:t=>this.vYt(t)},{name:t+".debugger.angle-of-motion",value:Eu.Ir(this.xYt())},{name:t+".properties.max-speed.name",value:this.uYt(),FVt:t=>this.pYt(t)},{name:t+".properties.acceleration.name",value:this.cYt(),FVt:t=>this.mYt(t)},{name:t+".properties.deceleration.name",value:this.fYt(),FVt:t=>this.gYt(t)},{name:t+".properties.allow-sliding.name",value:this.AYt(),FVt:t=>this.EYt(t)},{name:t+".properties.enabled.name",value:this.XMt(),FVt:t=>this.JMt(t)}]}]}Lxt(){return self.FYt}},new WeakMap),ku=new Map([["left",0],["right",1],["up",2],["down",3]]);self.FYt=class extends Fu{constructor(){super(),E.set(this,Fu.YB().A6())}stop(){E.get(this).wYt()}reverse(){E.get(this).SYt()}kYt(t){Au.Pe(t);const s=ku.get(t);if("number"!=typeof s)throw new Error("invalid control");E.get(this).CYt(s)}get speed(){return E.get(this).MYt()}set speed(t){Au.Te(t),E.get(this).vYt(t)}get DYt(){return E.get(this).uYt()}set DYt(t){Au.Te(t),E.get(this).pYt(t)}get acceleration(){return E.get(this).cYt()}set acceleration(t){Au.Te(t),E.get(this).mYt(t)}get OYt(){return E.get(this).fYt()}set OYt(t){Au.Te(t),E.get(this).gYt(t)}get LYt(){return E.get(this).TYt()}set LYt(t){Au.Te(t),E.get(this).GYt(t)}get BYt(){return E.get(this).IYt()}set BYt(t){Au.Te(t),E.get(this)._Yt(t)}NYt(t,s){Au.Te(t),Au.Te(s);const i=E.get(this);i.GYt(t),i._Yt(s)}WYt(){const t=E.get(this);return[t.TYt(),t.IYt()]}get jYt(){return E.get(this).dYt()}set jYt(t){E.get(this).yYt(!!t)}get VYt(){return E.get(this).RYt()}set VYt(t){E.get(this).PYt(!!t)}get UYt(){return E.get(this).AYt()}set UYt(t){E.get(this).EYt(!!t)}get isEnabled(){return E.get(this).XMt()}set isEnabled(t){E.get(this).JMt(!!t)}}}{const Du=self.Ws;Du.hlt.U$t.M$={HYt(){return 1e-10<this.MYt()},zYt(t,s){return Du.compare(this.MYt(),t,s)},nc(){return this.XMt()},JYt(){return this.AYt()}}}{const Ou=self.Ws;Ou.hlt.U$t.drt={WW(){this.wYt()},qYt(){this.SYt()},XYt(t){this.PYt(t)},$Yt(t){this.vYt(t)},YYt(t){this.pYt(t)},qJt(t){this.mYt(t)},KYt(t){this.gYt(t)},ZYt(t){this.CYt(t)},z2t(t){this.JMt(t)},QYt(t){this.GYt(t)},tKt(t){this._Yt(t)},sKt(t){this.yYt(!!t)},iKt(t){this.EYt(t)}}}{const Lu=self.Ws;Lu.hlt.U$t.prt={eKt(){return this.MYt()},hKt(){return this.uYt()},rKt(){return this.cYt()},nKt(){return this.fYt()},oKt(){return Lu.Ir(this.xYt())},aKt(){return this.TYt()},lKt(){return this.IYt()}}}{const Bu=self.Ws;Bu.hlt.bound=class extends Bu.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Nu=self.Ws;Nu.hlt.bound.PIt=class extends Nu.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Wu=self.Ws;Wu.hlt.bound.Instance=class extends Wu.bTt{constructor(t,s){super(t),this.uKt=0,s&&(this.uKt=s[0]),this.xGt()}pr(){super.pr()}zv(){return{m:this.uKt}}Jv(t){this.uKt=t.m}bGt(){let t=this.Ii.ND(),s=t.wN(),i=t.vD(),e=!1;0===this.uKt?(t.Av()<0&&(t.Fv(0),e=!0),t.Dv()<0&&(t.Ov(0),e=!0),t.Av()>i._m()&&(t.Fv(i._m()),e=!0),t.Dv()>i.Om()&&(t.Ov(i.Om()),e=!0)):(s.El()<0&&(t.ant(-s.El()),e=!0),s.Al()<0&&(t.lnt(-s.Al()),e=!0),s.Fl()>i._m()&&(t.ant(-(s.Fl()-i._m())),e=!0),s.kl()>i.Om()&&(t.lnt(-(s.kl()-i.Om())),e=!0)),e&&t.uN()}qrt(t){if(0===t)return this.uKt}Qrt(t,s){0===t&&(this.uKt=s)}}}{const ju=self.Ws;ju.hlt.bound.M$={}}{const Vu=self.Ws;Vu.hlt.bound.drt={}}{const Uu=self.Ws;Uu.hlt.bound.prt={}}{const Hu=self.Ws;Hu.hlt.cKt=class extends Hu.dTt{constructor(t){super(t),this.fKt=0,this.dKt=0,this.pKt=0,this.mKt=0}pr(){super.pr()}gKt(t){this.fKt=t}yKt(){return this.fKt}wKt(t){this.dKt=t}SKt(){return this.dKt}bKt(t){this.pKt=t}vKt(){return this.pKt}MKt(t){this.mKt=t}xKt(){return this.mKt}}}{const zu=self.Ws;zu.hlt.cKt.PIt=class extends zu.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Ju=self.Ws;Ju.hlt.cKt.Instance=class extends Ju.bTt{constructor(t,s){super(t),this.Qyt=!0,s&&(this.Qyt=s[0]),this.Qyt&&this.xGt()}pr(){super.pr()}zv(){const t=this.N6();return{e:this.Qyt,smg:t.yKt(),ss:t.SKt(),se:t.vKt(),smd:t.xKt()}}Jv(t){const s=this.N6();s.gKt(t.smg),s.wKt(t.ss),s.bKt(t.se),s.MKt(t.smd),this.Qyt=t.e,this.Qyt?this.xGt():this.nGt()}JMt(t){this.Qyt=!!t,this.Qyt?this.xGt():this.nGt()}nc(){return this.Qyt}bGt(){if(this.nc()){this.wf.Hk(this.Ii);let s=this.N6(),t=s.KL(),i=0,e=0,h=0;for(const l of t){const u=l.APt(Ju.hlt.cKt);if(u&&u.A6().nc()){const c=l.ND();i+=c.Av(),e+=c.Dv(),++h}}let r=this.Ii.ND().vD(),n=this.wf.Xk(),o=0,a=0;if(n>=s.SKt()&&n<s.vKt()){let t=s.yKt()*Math.min(this.wf.Zk(),1);0===s.xKt()&&(t*=1-(n-s.SKt())/(s.vKt()-s.SKt()));const f=this.wf.gD()*Math.PI*2,d=this.wf.gD()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.S5(i/h+o),r.v5(e/h+a)}}qrt(t){if(0===t)return this.Qyt}Qrt(t,s){0===t&&(this.Qyt=!!s,this.Qyt?this.xGt():this.nGt())}TGt(){return[{title:"$"+this.V6().uf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.nc(),FVt:t=>this.JMt(t)}]}]}}}{const qu=self.Ws;qu.hlt.cKt.M$={nc(){return this.nc()}}}{const Xu=self.Ws;Xu.hlt.cKt.drt={GKt(t,s,i){const e=this.N6();e.gKt(t),e.wKt(this.wf.Xk()),e.bKt(this.wf.Xk()+s),e.MKt(i)},z2t(t){this.JMt(0!==t)}}}{const $u=self.Ws;$u.hlt.cKt.prt={}}{const Yu=self.Ws;Yu.hlt.TKt=class extends Yu.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Ku=self.Ws;Ku.hlt.TKt.PIt=class extends Ku.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Zu=self.Ws,Qu=self.Ys,tc=self.L6,sc=(Zu.hlt.TKt.Instance=class extends Zu.bTt{constructor(t,s){super(t);const i=this.ND(),e=(this.g_t=0,this.iYt=0,this.Zo=0,this._Kt=!1,this.IKt=!1,this.CKt=!1,this.Qyt=!0,this.Q$t=0,this.tYt=0,this.PKt=i.Av(),this.RKt=i.Dv(),this.EKt=i.w5(),this.AKt=0,this.FKt=Math.min(Math.abs(i._m()),Math.abs(i.Om())/2),this.kKt=!1,s&&(this.g_t=s[0],this.iYt=s[1],this.Zo=s[2],this._Kt=!!s[3],this.IKt=!!s[4],this.CKt=!!s[5],this.Qyt=!!s[6]),i.w5());this.Q$t=Math.cos(e)*this.g_t,this.tYt=Math.sin(e)*this.g_t,this.Qyt&&(this.vGt(),this._Kt)&&this._Tt()}pr(){super.pr()}zv(){const t={dx:this.Q$t,dy:this.tYt,lx:this.PKt,ly:this.RKt,lka:this.EKt,t:this.AKt};return 0!==this.iYt&&(t.acc=this.iYt),0!==this.Zo&&(t.g=this.Zo),this.CKt&&(t.st=this.CKt),this.Qyt||(t.e=this.Qyt),this._Kt&&(t.bos=this._Kt),this.IKt&&(t.sa=this.IKt),t}Jv(t){this.Q$t=t.dx,this.tYt=t.dy,this.PKt=t.lx,this.RKt=t.ly,this.EKt=t.lka,this.AKt=t.t,this.iYt=t.hasOwnProperty("acc")?t.acc:0,this.Zo=t.hasOwnProperty("g")?t.g:0,this.CKt=!!t.hasOwnProperty("st")&&t.st,this._Kt=!!t.hasOwnProperty("bos")&&t.bos,this.IKt=!!t.hasOwnProperty("sa")&&t.sa,this.JMt(!t.hasOwnProperty("e")||t.e)}YK(){if(this.Qyt){const h=this.wf.Hk(this.Ii),r=this.Ii.ND();if(r.w5()!==this.EKt){const t=r.w5();if(this.IKt){const s=Zu.Cr(0,0,this.Q$t,this.tYt);this.Q$t=Math.cos(t)*s,this.tYt=Math.sin(t)*s}this.EKt=t}let i=0,e=0;if(0!==this.iYt){let t=Zu.Cr(0,0,this.Q$t,this.tYt),s;s=0===this.Q$t&&0===this.tYt?r.w5():Zu.Rr(0,0,this.Q$t,this.tYt),t+=this.iYt*h,i=Math.cos(s)*this.iYt,e=Math.sin(s)*this.iYt,t<0&&(t=0,i=0,e=0),this.Q$t=Math.cos(s)*t,this.tYt=Math.sin(s)*t}if(0!==this.Zo&&(this.tYt+=this.Zo*h,e+=this.Zo),this.PKt=r.Av(),this.RKt=r.Dv(),0!==this.Q$t||0!==this.tYt){const n=this.Q$t*h+.5*i*h*h,o=this.tYt*h+.5*e*h*h,a=Zu.Cr(0,0,n,o);if(this.DKt(n,o,a),this.AKt+=a,this.IKt&&(0!=n||0!=o)){const l=Zu.Rr(0,0,n,o);r.y5(l),this.EKt=r.w5()}r.uN()}}}DKt(t,s,i){const e=this.ND();if(!this.CKt||i<=this.FKt)e.pN(t,s),e.uN(),this.CKt&&this.F4(Zu.hlt.TKt.M$.OKt);else{this.kKt=!1;const h=e.Av(),r=e.Dv(),n=h+t,o=r+s,a=Zu.Rr(0,0,t,s),l=Math.cos(a)*this.FKt,u=Math.sin(a)*this.FKt,c=Math.floor(i/this.FKt);for(let t=1;t<=c;++t)if(e.cN(h+l*t,r+u*t),e.uN(),this.F4(Zu.hlt.TKt.M$.OKt),this.Ii.dV()||this.kKt)return;e.cN(n,o),e.uN(),this.F4(Zu.hlt.TKt.M$.OKt)}}TTt(){if(this.Qyt&&this._Kt&&(0!==this.Q$t||0!==this.tYt)){const t=this.wf.Hk(this.Ii),s=this.Ii.ND(),i=this.wf.KF(),e=i.EO(this.Ii);if(e){i.y3t(this.Ii,e);const h=Zu.Cr(0,0,this.Q$t,this.tYt),r=i.D3t(this.Ii,this.PKt,this.RKt);this.Q$t=Math.cos(r)*h,this.tYt=Math.sin(r)*h,s.pN(this.Q$t*t,this.tYt*t),s.uN(),this.IKt&&(s.y5(r),this.EKt=s.w5(),s.uN()),i.E3t(this.Ii,this.Q$t/h,this.tYt/h,Math.max(2.5*h*t,30))||i.k3t(this.Ii,100)}}}qrt(t){switch(t){case 0:return this.MYt();case 1:return this.cYt();case 2:return this.LKt();case 4:return this.IKt;case 5:return this.CKt;case 6:return this.XMt()}}Qrt(t,s){switch(t){case 0:this.vYt(s);break;case 1:this.iYt=s;break;case 2:this.Zo=s;break;case 4:this.IKt=!!s;break;case 5:this.CKt=!!s;break;case 6:this.JMt(!!s)}}vYt(t){const s=Zu.Rr(0,0,this.Q$t,this.tYt);this.Q$t=Math.cos(s)*t,this.tYt=Math.sin(s)*t}MYt(){return Zu.qr(Zu.Cr(0,0,this.Q$t,this.tYt),6)}mYt(t){this.iYt=t}cYt(){return this.iYt}BKt(t){this.Zo=t}LKt(){return this.Zo}NKt(t){const s=Zu.Cr(0,0,this.Q$t,this.tYt);this.Q$t=Math.cos(t)*s,this.tYt=Math.sin(t)*s}WKt(){return Zu.Rr(0,0,this.Q$t,this.tYt)}jKt(t){this._Kt!==(t=!!t)&&(this._Kt=t,this.Qyt)&&(this._Kt?this._Tt():this.MTt())}VKt(){return this._Kt}UKt(t){this.AKt=t}HKt(){return this.AKt}JMt(t){this.Qyt=!!t,this.Qyt?(this.vGt(),this._Kt&&this._Tt()):(this.rGt(),this.MTt())}XMt(){return this.Qyt}TGt(){const t="behaviors.bullet";return[{title:"$"+this.V6().uf(),properties:[{name:t+".debugger.vector-x",value:this.Q$t,FVt:t=>this.Q$t=t},{name:t+".debugger.vector-y",value:this.tYt,FVt:t=>this.tYt=t},{name:t+".properties.speed.name",value:this.MYt(),FVt:t=>this.vYt(t)},{name:t+".debugger.angle-of-motion",value:Zu.Ir(this.WKt())},{name:t+".properties.gravity.name",value:this.LKt(),FVt:t=>this.BKt(t)},{name:t+".properties.acceleration.name",value:this.cYt(),FVt:t=>this.mYt(t)},{name:t+".debugger.distance-travelled",value:this.HKt()},{name:t+".properties.enabled.name",value:this.XMt(),FVt:t=>this.JMt(t)}]}]}Lxt(){return self.zKt}},new WeakMap);self.zKt=class extends tc{constructor(){super(),sc.set(this,tc.YB().A6())}get speed(){return sc.get(this).MYt()}set speed(t){Qu.Te(t),sc.get(this).vYt(t)}get acceleration(){return sc.get(this).cYt()}set acceleration(t){Qu.Te(t),sc.get(this).mYt(t)}get eXt(){return sc.get(this).LKt()}set eXt(t){Qu.Te(t),sc.get(this).BKt(t)}get JKt(){return sc.get(this).WKt()}set JKt(t){Qu.Te(t),sc.get(this).NKt(t)}get qKt(){return sc.get(this).VKt()}set qKt(t){sc.get(this).jKt(!!t)}get XKt(){return sc.get(this).HKt()}set XKt(t){Qu.Te(t),sc.get(this).UKt(t)}get isEnabled(){return sc.get(this).XMt()}set isEnabled(t){sc.get(this).JMt(t)}}}{const ic=self.Ws;ic.hlt.TKt.M$={zYt(t,s){const i=Math.hypot(this.Q$t,this.tYt);return ic.compare(i,t,s)},$Kt(t,s){return ic.compare(this.HKt(),t,s)},OKt(){return!0},nc(){return this.XMt()}}}{const ec=self.Ws;ec.hlt.TKt.drt={$Yt(t){this.vYt(t)},qJt(t){this.mYt(t)},XJt(t){this.BKt(t)},YKt(t){this.NKt(ec._r(t))},O3(t){if(t){const s=t.uMt(this.Ii);if(s){const i=this.Ii.ND(),e=this.wf.KF(),h=this.wf.Hk(this.Ii),r=ec.Cr(0,0,this.Q$t,this.tYt),n=e.D3t(this.Ii,this.PKt,this.RKt,s);this.Q$t=Math.cos(n)*r,this.tYt=Math.sin(n)*r,i.pN(this.Q$t*h,this.tYt*h),i.uN(),this.IKt&&(i.y5(n),this.EKt=i.w5(),i.uN()),0!==r&&(this._Kt?e.E3t(this.Ii,this.Q$t/r,this.tYt/r,Math.max(2.5*r*h,30))||e.k3t(this.Ii,100):e.R3t(this.Ii,this.Q$t/r,this.tYt/r,Math.max(2.5*r*h,30),s))}}},KKt(t){this.jKt(t)},ZKt(t){this.UKt(t)},z2t(t){this.JMt(t)},QKt(){this.kKt=!0}}}{const hc=self.Ws;hc.hlt.TKt.prt={eKt(){return this.MYt()},rKt(){return this.cYt()},tZt(){return hc.Ir(this.WKt())},sZt(){return this.HKt()},kXt(){return this.LKt()}}}{const rc=self.Ws;rc.hlt.QB=class extends rc.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const nc=self.Ws;nc.hlt.QB.PIt=class extends nc.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const oc=self.Ws;oc.hlt.QB.Instance=class extends oc.bTt{constructor(t,s){super(t),this.vGt()}pr(){super.pr()}YK(){const t=this.Ii.ND(),s=t.wN(),i=t.vD();(s.Fl()<0||s.kl()<0||s.El()>i._m()||s.Al()>i.Om())&&this.wf.t4(this.Ii)}}}{const ac=self.Ws;ac.hlt.QB.M$={}}{const lc=self.Ws;lc.hlt.QB.drt={}}{const uc=self.Ws;uc.hlt.QB.prt={}}{const cc=self.Ws;cc.hlt.iZt=class extends cc.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const fc=self.Ws;fc.hlt.iZt.PIt=class extends fc.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const dc=self.Ws,pc=self.Ys,mc=self.L6,gc=2*Math.PI,yc=Math.PI/2,wc=3*Math.PI/2,Sc=[0,1,8,3,4,2,5,6,9,7],bc=(dc.hlt.iZt.Instance=class extends dc.bTt{constructor(t,s){super(t),this.eZt=0,this.hZt=0,this.rZt=0,this.nZt=0,this.oZt=0,this.Qyt=!0,this.aZt=0,this.lZt=0,this.uZt=0,this.cZt=0,this.fZt=0,this.dZt=0,this.Gwt=0,this.pZt=0,this.mZt=0,this.gZt=0,this.yZt=0,s&&(this.hZt=Sc[s[0]],this.rZt=s[1],this.cZt=this.wf.gD()*s[3],this.aZt=s[2],this.nZt=s[2],this.nZt+=this.cZt,this.lZt=s[4],0!==this.nZt&&(this.fZt=this.wf.gD()*s[5],this.eZt=s[4]/this.nZt*gc,this.eZt+=this.fZt/this.nZt*gc),this.dZt=this.wf.gD()*s[7],this.uZt=s[6],this.oZt=s[6],this.oZt+=this.dZt,this.Qyt=!!s[8]),5===this.hZt&&(this.oZt=dc._r(this.oZt)),this.KCt(),this.Qyt&&this.vGt()}pr(){super.pr()}zv(){return{i:this.eZt,e:this.Qyt,mv:this.hZt,w:this.rZt,p:this.nZt,mag:this.oZt,iv:this.Gwt,iv2:this.pZt,r:this.yZt,lkv:this.mZt,lkv2:this.gZt}}Jv(t){this.eZt=t.i,this.JMt(t.e),this.hZt=t.mv,this.rZt=t.w,this.nZt=t.p,this.oZt=t.mag,this.Gwt=t.iv,this.pZt=t.iv2,this.yZt=t.r,this.mZt=t.lkv,this.gZt=t.lkv2}KCt(){const t=this.Ii.ND();switch(this.hZt){case 0:this.Gwt=t.Av();break;case 1:this.Gwt=t.Dv();break;case 2:this.Gwt=t._m(),this.yZt=t.Om()/t._m();break;case 3:this.Gwt=t._m();break;case 4:this.Gwt=t.Om();break;case 5:this.Gwt=t.w5();break;case 6:this.Gwt=t.qR();break;case 7:this.Gwt=0;break;case 8:this.Gwt=t.Av(),this.pZt=t.Dv();break;case 9:this.Gwt=t.Lv()}this.mZt=this.Gwt,this.gZt=this.pZt}wZt(t){switch(t%=gc,this.rZt){case 0:return Math.sin(t);case 1:return t<=yc?t/yc:t<=wc?1-2*(t-yc)/Math.PI:(t-wc)/yc-1;case 2:return 2*t/gc-1;case 3:return-2*t/gc+1;case 4:return t<Math.PI?-1:1}return 0}YK(){const t=this.wf.Hk(this.Ii);this.Qyt&&0!==t&&(0===this.nZt?this.eZt=0:this.eZt=(this.eZt+t/this.nZt*gc)%gc,this.SZt())}SZt(){const t=this.Ii.ND();switch(this.hZt){case 0:t.Av()!==this.mZt&&(this.Gwt+=t.Av()-this.mZt),t.Fv(this.Gwt+this.wZt(this.eZt)*this.oZt),this.mZt=t.Av();break;case 1:t.Dv()!==this.mZt&&(this.Gwt+=t.Dv()-this.mZt),t.Ov(this.Gwt+this.wZt(this.eZt)*this.oZt),this.mZt=t.Dv();break;case 2:t.Fm(this.Gwt+this.wZt(this.eZt)*this.oZt),t.Im(t._m()*this.yZt);break;case 3:t.Fm(this.Gwt+this.wZt(this.eZt)*this.oZt);break;case 4:t.Im(this.Gwt+this.wZt(this.eZt)*this.oZt);break;case 5:t.w5()!==this.mZt&&(this.Gwt=dc.Tr(this.Gwt+(t.w5()-this.mZt))),t.y5(this.Gwt+this.wZt(this.eZt)*this.oZt),this.mZt=t.w5();break;case 6:t.YR(this.Gwt+this.wZt(this.eZt)*this.oZt/100);break;case 8:t.Av()!==this.mZt&&(this.Gwt+=t.Av()-this.mZt),t.Dv()!==this.gZt&&(this.pZt+=t.Dv()-this.gZt),t.Fv(this.Gwt+Math.cos(t.w5())*this.wZt(this.eZt)*this.oZt),t.Ov(this.pZt+Math.sin(t.w5())*this.wZt(this.eZt)*this.oZt),this.mZt=t.Av(),this.gZt=t.Dv();break;case 9:t.Bv(this.Gwt+this.wZt(this.eZt)*this.oZt)}t.uN()}bZt(t,s){}vZt(t){this.nZt=t}MZt(){return this.nZt}xZt(t){this.oZt=t}GZt(t){5===this.hZt&&(t=dc._r(t)),this.xZt(t)}TZt(){return this.oZt}_Zt(){let t=this.TZt();return 5===this.hZt?dc.Ir(t):t}IZt(t){5===this.hZt&&5!==t&&(this.oZt=dc.Ir(this.oZt)),this.hZt=t,this.KCt()}CZt(){return this.hZt}PZt(t){this.rZt=t}RZt(){return this.rZt}EZt(t){this.eZt=dc.Gr(t,0,2*Math.PI),this.SZt()}AZt(){return this.eZt}JMt(t){this.Qyt=!!t,this.Qyt?this.vGt():this.rGt()}XMt(){return this.Qyt}qrt(t){switch(t){case 0:return this.hZt;case 1:return this.rZt;case 2:return this.aZt;case 6:return this.uZt;case 8:return this.Qyt}}Qrt(t,s){switch(t){case 0:this.hZt=Sc[s],this.KCt();break;case 1:this.rZt=s;break;case 2:this.aZt=s,this.nZt=this.aZt+this.cZt,this.Qyt||(0!==this.nZt?(this.eZt=this.lZt/this.nZt*gc,this.eZt+=this.fZt/this.nZt*gc):this.eZt=0);break;case 6:this.uZt=s,this.oZt=this.uZt+this.dZt,5===this.hZt&&(this.oZt=dc._r(this.oZt));break;case 8:this.Qyt=!!s}}TGt(){const t="behaviors.sin";return[{title:"$"+this.V6().uf(),properties:[{name:t+".properties.enabled.name",value:this.XMt(),FVt:t=>this.JMt(t)},{name:t+".properties.period.name",value:this.MZt(),FVt:t=>this.vZt(t)},{name:t+".properties.magnitude.name",value:this._Zt(),FVt:t=>this.GZt(t)},{name:t+".debugger.value",value:this.wZt(this.AZt())*this._Zt()}]}]}Lxt(){return self.FZt}},new WeakMap),vc=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],Mc=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.FZt=class extends mc{constructor(){super(),bc.set(this,mc.YB().A6())}set kZt(t){pc.Te(t),bc.get(this).vZt(t)}get kZt(){return bc.get(this).MZt()}set DZt(t){pc.Te(t),bc.get(this).xZt(t)}get DZt(){return bc.get(this).TZt()}set OZt(t){bc.get(this).EZt(t)}get OZt(){return bc.get(this).AZt()}set LZt(t){pc.Pe(t);const s=vc.indexOf(t);if(-1===s)throw new Error("invalid movement");bc.get(this).IZt(s)}get LZt(){return vc[bc.get(this).CZt()]}set BZt(t){pc.Pe(t);const s=Mc.indexOf(t);if(-1===s)throw new Error("invalid wave");bc.get(this).PZt(s)}get BZt(){return Mc[bc.get(this).RZt()]}get value(){const t=bc.get(this);return t.wZt(t.AZt())*t.TZt()}NZt(){bc.get(this).KCt()}set isEnabled(t){bc.get(this).JMt(!!t)}get isEnabled(){return bc.get(this).XMt()}}}{const xc=self.Ws;xc.hlt.iZt.M$={nc(){return this.XMt()},WZt(t){return this.CZt()===t},jZt(t,s){return xc.compare(this.MZt(),t,s)},VZt(t,s){return xc.compare(this._Zt(),t,s)},UZt(t){return this.RZt()===t}}}{const Gc=self.Ws;Gc.hlt.iZt.drt={z2t(t){this.JMt(0!==t)},HZt(t){this.vZt(t)},zZt(t){this.GZt(t)},JZt(t){this.IZt(t)},qZt(t){this.rZt=t},XZt(t){const s=2*Math.PI;this.EZt(t*s%s)},$Zt(){this.KCt()}}}{const Tc=self.Ws;Tc.hlt.iZt.prt={YZt(){return this.AZt()/(2*Math.PI)},KZt(){return this.MZt()},ZZt(){return this._Zt()},QZt(){return this.wZt(this.AZt())*this._Zt()}}}{const _c=self.Ws;_c.hlt.RCt=class extends _c.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Ic=self.Ws;Ic.hlt.RCt.PIt=class extends Ic.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Cc=self.Ws;Cc.hlt.RCt.Instance=class extends Cc.bTt{constructor(t,s){super(t)}pr(){super.pr()}}}{const Pc=self.Ws;Pc.hlt.RCt.M$={}}{const Rc=self.Ws;Rc.hlt.RCt.drt={}}{const Ec=self.Ws;Ec.hlt.RCt.prt={}}{const Ac=self.Ws;Ac.hlt.tQt=class extends Ac.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Fc=self.Ws;Fc.hlt.tQt.PIt=class extends Fc.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const kc=self.Ws,Dc=self.Ys,Oc=self.L6,A=(kc.hlt.tQt.Instance=class extends kc.bTt{constructor(t,s){super(t),this.g_t=0,this.h$t=0,this.Qyt=!0,this.sQt=0,this.iQt=0,this.eQt=0,this.hQt=!1,this.DQ=0,this.OQ=0,this.rQt=null,this.nQt=-1,this.oQt=0,this.aQt=0,this.lQt=0,s&&(this.g_t=kc._r(s[0]),this.h$t=kc._r(s[1]),this.Qyt=s[6],this.sQt=s[2],this.iQt=s[3],this.eQt=kc._r(s[4]),this.hQt=s[5]);const i=this.wf.Kf(),e=(this.P0=new kc._0(kc.b0.T0(i,"instancedestroy",t=>this.uQt(t.U6)),kc.b0.T0(i,"afterload",t=>this.QY())),this.JMt(this.Qyt),this.Ii.ND());this.DQ=e.Av(),this.OQ=e.Dv(),this.oQt=e.w5()}pr(){this.rQt=null,super.pr()}vYt(t){this.g_t=t}MYt(){return this.g_t}mYt(t){this.h$t=t}cYt(){return this.h$t}cQt(t,s){this.rQt=null,this.DQ=t,this.OQ=s}fQt(){return this.DQ}dQt(){return this.OQ}pQt(){const t=this.sQt*Math.cos(this.oQt),s=this.iQt*Math.sin(this.oQt);return Math.hypot(t,s)}mQt(t){this.oQt=t}gQt(){return this.oQt}yQt(t){this.eQt=t}wQt(){return this.eQt}SQt(t){this.sQt=t}bQt(){return this.sQt}vQt(t){this.iQt=t}MQt(){return this.iQt}xQt(t){this.hQt=!!t}GQt(){return this.hQt}TQt(t){this.aQt=t}_Qt(){return this.aQt}IQt(t){this.lQt=t}CQt(){return this.lQt}PQt(t){if(!t||t.ND()){const s=this.Qyt;s&&this.JMt(!1),this.rQt=t,s&&this.JMt(!0)}}JMt(t){this.Qyt=!!t,this.RQt()?this.Qyt?this.xGt():this.nGt():this.Qyt?this.vGt():this.rGt()}XMt(){return this.Qyt}zv(){return{s:this.g_t,a:this.h$t,r:this.oQt,e:this.Qyt,a1:this.iQt,a2:this.sQt,oa:this.eQt,mr:this.hQt,tx:this.DQ,ty:this.OQ,tuid:this.rQt?this.rQt.o4():-1}}Jv(t){this.g_t=t.s,this.h$t=t.a,this.oQt=t.r,this.iQt=t.a1,this.sQt=t.a2,this.eQt=t.oa,this.hQt=t.mr,this.DQ=t.tx,this.OQ=t.ty,this.nQt=t.tuid,this.JMt(t.e)}QY(){-1===this.nQt?this.rQt=null:(this.rQt=this.wf.kD(this.nQt),this.nQt=-1)}uQt(t){this.rQt===t&&(this.rQt=null)}EQt(){if(this.AQt){const t=this.Ii.ND();this.DQ=t.Av(),this.OQ=t.Dv(),this.oQt=t.w5(),this.AQt=!1}}FQt(){if(this.rQt){const t=this.rQt.ND();this.DQ=t.Av(),this.OQ=t.Dv()}}RQt(){return!!this.rQt}YK(){this.kQt()}bGt(){this.kQt()}kQt(){if(this.Qyt){const t=this.wf.Hk(this.Ii);if(0!==t){0!==this.h$t&&(this.g_t+=this.h$t*t);const s=this.Ii.ND(),i=this.g_t*t,e=(this.oQt=kc.Tr(this.oQt+i),this.aQt+=i,this.lQt+=Math.abs(i),this.sQt*Math.cos(this.oQt)),h=this.iQt*Math.sin(this.oQt),r=Math.cos(this.eQt),n=Math.sin(this.eQt);this.FQt(),s.cN(this.DQ+(e*r-h*n),this.OQ+(e*n+h*r)),this.hQt&&s.y5(this.oQt+this.eQt+.5*Math.PI),s.uN()}}}qrt(t){switch(t){case 0:return kc.Ir(this.MYt());case 1:return kc.Ir(this.cYt());case 6:return this.XMt();case 2:return this.bQt();case 3:return this.MQt();case 4:return kc.Ir(this.wQt());case 5:return this.GQt()}}Qrt(t,s){switch(t){case 0:this.vYt(kc._r(s));break;case 1:this.mYt(kc._r(s));break;case 6:this.JMt(s);break;case 2:this.SQt(s);break;case 3:this.vQt(s);break;case 4:this.yQt(kc._r(s));break;case 5:this.xQt(s)}}TGt(){const t="behaviors.orbit";return[{title:"$"+this.V6().uf(),properties:[{name:t+".debugger.rotation",value:kc.Ir(this.gQt())},{name:t+".debugger.total-rotation",value:kc.Ir(this._Qt())},{name:t+".debugger.total-absolute-rotation",value:kc.Ir(this.CQt())},{name:t+".properties.speed.name",value:kc.Ir(this.MYt()),FVt:t=>this.vYt(kc._r(t))},{name:t+".properties.acceleration.name",value:kc.Ir(this.cYt()),FVt:t=>this.mYt(kc._r(t))},{name:t+".properties.primary-axis.name",value:this.bQt(),FVt:t=>this.SQt(t)},{name:t+".properties.secondary-axis.name",value:this.MQt(),FVt:t=>this.vQt(t)},{name:t+".properties.offset-angle.name",value:kc.Ir(this.wQt()),FVt:t=>this.yQt(kc._r(t))},{name:t+".properties.match-rotation.name",value:this.GQt(),FVt:t=>this.xQt(!!t)},{name:t+".properties.enabled.name",value:this.XMt(),FVt:t=>this.JMt(t)}]}]}Lxt(){return self.DQt}},new WeakMap);self.DQt=class extends Oc{constructor(){super(),A.set(this,Oc.YB().A6())}OQt(t,s){Dc.Te(t),Dc.Te(s),A.get(this).cQt(t,s)}LQt(){const t=A.get(this);return[t.fQt(),t.dQt()]}BQt(t){const s=A.get(this),i=t?s.nO().BD(t):null;s.PQt(i)}set speed(t){Dc.Te(t),A.get(this).vYt(t)}get speed(){return A.get(this).MYt()}set acceleration(t){Dc.Te(t),A.get(this).mYt(t)}get acceleration(){return A.get(this).cYt()}set rotation(t){Dc.Te(t),A.get(this).mQt(t)}get rotation(){return A.get(this).gQt()}set NQt(t){Dc.Te(t),A.get(this).yQt(t)}get NQt(){return A.get(this).wQt()}set WQt(t){Dc.Te(t),A.get(this).SQt(t)}get WQt(){return A.get(this).bQt()}set jQt(t){Dc.Te(t),A.get(this).vQt(t)}get jQt(){return A.get(this).MQt()}set VQt(t){A.get(this).xQt(!!t)}get VQt(){return A.get(this).GQt()}set UQt(t){Dc.Te(t),A.get(this).TQt(t)}get UQt(){return A.get(this)._Qt()}set HQt(t){Dc.Te(t),A.get(this).IQt(t)}get HQt(){return A.get(this).CQt()}zQt(){return A.get(this).pQt()}set isEnabled(t){A.get(this).JMt(t)}get isEnabled(){return A.get(this).XMt()}}}{const Lc=self.Ws;Lc.hlt.tQt.M$={nc(){return this.XMt()}}}{const Bc=self.Ws;Bc.hlt.tQt.drt={$Yt(t){this.vYt(Bc._r(t))},qJt(t){this.mYt(Bc._r(t))},JQt(t,s){this.cQt(t,s)},qQt(t){this.mQt(Bc._r(t))},XQt(t){this.yQt(Bc._r(t))},$Qt(t,s){this.SQt(t),this.vQt(s)},YQt(t){this.xQt(!!t)},KQt(t){if(t){const s=t.uMt(this.Ii);s&&this.PQt(s)}},ZQt(){this.PQt(null)},z2t(t){this.JMt(t)},QQt(){this.TQt(0),this.IQt(0)}}}{const Nc=self.Ws;Nc.hlt.tQt.prt={eKt(){return Nc.Ir(this.MYt())},rKt(){return Nc.Ir(this.cYt())},tts(){return this.bQt()},sts(){return this.MQt()},wnt(){return Nc.Ir(this.wQt())},its(){return Nc.Ir(this.gQt())},ets(){return Nc.Ir(this._Qt())},hts(){return Nc.Ir(this.CQt())},rts(){return this.fQt()},nts(){return this.dQt()},ots(){return this.pQt()}}}{const Wc=self.Ws;Wc.hlt.ats=class extends Wc.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const jc=self.Ws;jc.hlt.ats.PIt=class extends jc.wTt{constructor(t){super(t),this.lts=[]}pr(){jc.Hn(this.lts),super.pr()}Oxt(){}uts(){return this.lts}}}{const F=self.Ws,Vc=self.Ys,Uc=self.L6,Hc=F.dr(F.Rect),zc=[],Jc=(F.hlt.ats.Instance=class extends F.bTt{constructor(t,s){super(t),this.cts=300,this.fts=1,this.dts=!0,this.pts=F._r(180),this.gts=0,this.yts=!1,this.wts=500,this.Sts=!0,this.Qyt=!0,this.bts=0,this.vts=0,this.Mts=null,this.xts=-1,this.Gts=0,this.Tts=0,s&&(this.cts=s[0],this.fts=s[1],this.dts=!!s[2],this.pts=F._r(s[3]),this.gts=s[4],this.yts=!!s[5],this.wts=s[6],this.Sts=!!s[7],this.Qyt=!!s[8]),this.vts=this.fts;const i=this.wf.Kf();this.P0=new F._0(F.b0.T0(i,"instancedestroy",t=>this.uQt(t.U6)),F.b0.T0(i,"afterload",t=>this.QY())),this.Qyt&&this.vGt()}pr(){this.Mts=null,super.pr()}QY(){-1===this.xts?this.Mts=null:this.Mts=this.wf.kD(this.xts)}uQt(t){this.Mts===t&&(this.Mts=null)}_ts(t){return!(this.Mts===t||this.Ii===t||!this.Its(t)||(this.Mts=t,this.Cts(),0))}Pts(){this.Mts=null}Rts(t){this.cts=t}Ets(){return this.cts}Ats(t){this.fts=t}Fts(){return this.fts}kts(t){this.dts=!!t}Dts(){return this.dts}Ots(t){this.pts=t}Lts(){return this.pts}Bts(t){this.gts=t}Nts(){return this.gts}Wts(t){this.yts=!!t}jts(){return this.yts}Vts(t){this.wts=t}Uts(){return this.wts}JMt(t){this.Qyt=!!t,this.Qyt?this.vGt():this.rGt()}XMt(){return this.Qyt}zv(){return{r:this.cts,rof:this.fts,re:this.dts,rs:this.pts,tm:this.gts,pa:this.yts,ps:this.wts,ucc:this.Sts,e:this.Qyt,lct:this.bts,ftc:this.vts,t:this.Mts?this.Mts.o4():-1,ox:this.Gts,oy:this.Tts,targs:this.wvt().uts().map(t=>t.g9())}}Jv(t){this.cts=t.r,this.fts=t.rof,this.dts=t.re,this.pts=t.rs,this.gts=t.tm,this.yts=t.pa,this.wts=t.ps,this.Sts=t.ucc,this.JMt(t.e),this.bts=t.lct,this.vts=t.ftc,this.xts=t.t,this.Gts=t.ox,this.Tts=t.oy;const s=this.wvt().uts();F.Hn(s);for(const i of t.targs){const e=this.wf.qV(i);e&&s.push(e)}}Its(t){const s=this.ND(),i=t.ND(),e=i.Av()-s.Av(),h=i.Dv()-s.Dv();return e*e+h*h<=this.cts*this.cts}Hts(){const t=this.ND(),s=this.wvt().uts(),i=this.wf.KF();if(this.Sts)Hc.set(t.Av()-this.cts,t.Dv()-this.cts,t.Av()+this.cts,t.Dv()+this.cts),i.BO(t.WD(),s,Hc,zc);else for(const e of s)F.Kh(zc,e.KL());for(const h of zc)if(h!==this.Ii&&this.Its(h))return this.Mts=h,void F.Hn(zc);F.Hn(zc)}zts(){let t=this.ND(),s=this.wvt().uts(),i=this.wf.KF(),e=t.Av(),h=t.Dv(),r=this.cts*this.cts;if(this.Mts=null,this.Sts)Hc.set(e-this.cts,h-this.cts,e+this.cts,h+this.cts),i.BO(t.WD(),s,Hc,zc);else for(const n of s)F.Kh(zc,n.KL());for(const o of zc)if(o!==this.Ii){const a=o.ND(),l=e-a.Av(),u=h-a.Dv(),c=l*l+u*u;c<r&&(this.Mts=o,r=c)}F.Hn(zc)}Cts(){const t=this.Mts.ND();this.Gts=t.Av(),this.Tts=t.Dv(),this.tGt("targetacquired",!1,{Jts:this.Mts.DD()}),this.F4(F.hlt.ats.M$.qts)}YK(){if(this.Qyt){const o=this.wf.Hk(this.Ii),t=this.wf.Xk(),a=this.ND();if(this.Mts&&!this.Its(this.Mts)&&(this.Mts=null),t>=this.bts+.1)if(this.bts=t,0!==this.gts||this.Mts){if(1===this.gts){const s=this.Mts;this.zts(),this.Mts&&this.Mts!==s&&this.Cts()}}else this.Hts(),this.Mts&&this.Cts();if(this.vts+=o,this.Mts){let t=this.Mts.ND(),s=a.Av(),i=a.Dv(),e=t.Av(),h=t.Dv(),r=F.Rr(s,i,t.Av(),t.Dv()),n=0;if(this.yts){const l=e-s,u=h-i,c=(e-this.Gts)/o,f=(h-this.Tts)/o,d=l*f-u*c,p=Math.asin(F.Gr(d/(this.wts*Math.hypot(l,u)),-1,1))+r;n=0<(Math.cos(p)*f-Math.sin(p)*c)*d?p:r}else n=r;this.dts&&(a.y5(F.Ar(a.w5(),n,this.pts*o)),a.uN()),this.vts>=this.fts&&(!this.dts||F.Ir(F.Er(a.w5(),n))<=.1)&&(this.vts-=this.fts,this.vts>=this.fts&&(this.vts=0),this.tGt("shoot",!1,{Jts:this.Mts.DD()}),this.F4(F.hlt.ats.M$.Xts)),this.Mts&&(t=this.Mts.ND(),this.Gts=t.Av(),this.Tts=t.Dv())}this.vts>this.fts&&(this.vts=this.fts)}}qrt(t){switch(t){case 0:return this.Ets();case 1:return this.Fts();case 2:return this.Dts();case 3:return F.Ir(this.Lts());case 4:return this.Nts();case 5:return this.jts();case 6:return this.Uts();case 7:return this.Sts;case 8:return this.XMt()}}Qrt(t,s){switch(t){case 0:this.Rts(s);break;case 1:this.Ats(s);break;case 2:this.kts(!!s);break;case 3:this.Dts()&&this.Ots(F._r(s));break;case 4:this.Bts(s);break;case 5:this.Wts(!!s);break;case 6:this.jts()&&this.Vts(s);break;case 7:this.Sts=!!s;break;case 8:this.JMt(s)}}TGt(){const t="behaviors.turret";return[{title:"$"+this.V6().uf(),properties:[{name:t+".properties.range.name",value:this.Ets(),FVt:t=>this.Rts(t)},{name:t+".properties.rate-of-fire.name",value:this.Fts(),FVt:t=>this.Ats(t)},{name:t+".properties.rotate-speed.name",value:F.Ir(this.Lts()),FVt:t=>this.Ots(F._r(t))},{name:t+".properties.predictive-aim.name",value:this.jts(),FVt:t=>this.Wts(t)},{name:t+".properties.projectile-speed.name",value:this.Uts(),FVt:t=>this.Vts(t)},{name:t+".debugger.has-target",value:!!this.Mts},{name:t+".debugger.target-uid",value:this.Mts?this.Mts.o4():0},{name:t+".properties.enabled.name",value:this.XMt(),FVt:t=>this.JMt(t)}]}]}Lxt(){return self.$ts}},new WeakMap),qc=["first","nearest"];self.$ts=class extends Uc{constructor(){super(),Jc.set(this,Uc.YB().A6())}get currentTarget(){const t=Jc.get(this).Mts;return t?t.DD():null}set currentTarget(t){const s=Jc.get(this);t?s._ts(s.nO().BD(t)):s.Pts()}get range(){return Jc.get(this).Ets()}set range(t){Vc.Te(t),Jc.get(this).Rts(t)}get Yts(){return Jc.get(this).Fts()}set Yts(t){Vc.Te(t),Jc.get(this).Ats(t)}get Kts(){return Jc.get(this).Dts()}set Kts(t){Jc.get(this).kts(!!t)}get Zts(){return Jc.get(this).Lts()}set Zts(t){Vc.Te(t),Jc.get(this).Ots(t)}get Qts(){return qc[Jc.get(this).Nts()]}set Qts(t){const s=qc.indexOf(t);if(-1===s)throw new Error("invalid targetMode");Jc.get(this).Bts(s)}get tss(){return Jc.get(this).jts()}set tss(t){Jc.get(this).Wts(!!t)}get sss(){return Jc.get(this).Uts()}set sss(t){Vc.Te(t),Jc.get(this).Vts(t)}get isEnabled(){return Jc.get(this).XMt()}set isEnabled(t){Jc.get(this).JMt(t)}}}{const Xc=self.Ws;Xc.hlt.ats.M$={iss(){return!!this.Mts},Xts(){return!0},qts(){return!0},nc(){return this.XMt()}}}{const $c=self.Ws;$c.hlt.ats.drt={ess(t){if(t){const s=t.ZL().KL();for(const i of s)if(this._ts(i))break}},hss(t){const s=this.wvt().uts();if(!s.includes(t)){for(const i of s)if(i.a9()&&i.l9(t))return;s.push(t)}},rss(){$c.Hn(this.wvt().uts())},nss(){this.Pts()},z2t(t){this.JMt(0!==t)},oss(t){this.Rts(t)},ass(t){this.Ats(t)},lss(t){this.kts(0!==t)},uss(t){this.Ots($c._r(t))},css(t){this.Bts(t)},fss(t){this.Wts(0!==t)},dss(t){this.Vts(t)}}}{const Yc=self.Ws;Yc.hlt.ats.prt={pss(){return this.Mts?this.Mts.o4():0},Range(){return this.Ets()},mss(){return this.Fts()},gss(){return Yc.Ir(this.Lts())}}}{const Kc=self.Ws;Kc.hlt.elt=class extends Kc.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Zc=self.Ws;Zc.hlt.elt.PIt=class extends Zc.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Qc=self.Ws,tf=Qc.hlt.elt;tf.Instance=class extends Qc.bTt{constructor(t,s){super(t),this.yss=!1,this.zu=!0,s&&(this.yss=!1,this.zu=!!s[0]),this.wss=new Map,this.Sss=[],this.bss=new Map,this.vss=null,this.Mss=null,this.xss=null,this.Gss=null,this.Tss="",this._ss=[],this.ZY=t=>this.QY(),this.nO().Kf().addEventListener("afterload",this.ZY)}pr(){this.nO().Kf().removeEventListener("afterload",this.ZY),this.ZY=null,this.vss&&(this.Iss(this.vss),this.vss=null),this.Css(),this.Pss=null,this.Rss(),this.Sss=null,this.Ess(),this.bss=null,this._ss=null,super.pr()}ult(t){this._ss.push(t)}clt(){this._ss.pop()}Ass(){return this._ss[this._ss.length-1]}z2t(t){this.zu=!!t,t?this.bss&&this.bss.size&&this.xGt():this.nGt();for(const s of this.Fss())t?this.kss(s)&&s.jW():((s.IsPlaying()||s.Jtt())&&this.Dss(s),s.WW());t&&this.Rss()}nc(){return this.zu}Dss(t){this.Sss.push(t)}kss(t){return this.Sss.includes(t)}Rss(){Qc.Hn(this.Sss)}Oss(){return this.vss}oit(){const t=this.H6();return!!t&&!t.dV()}Lss(t,s,i=!1){const e=s?this.Bss(s,i):this.Fss(i);if(e&&e.length)for(const h of e)if(h.VW(t))return h}Nss(t,s){for(const i of this.wss.values())for(const e of i)if(!e.BW()&&e.VW(t)&&s(e))return!0;for(const h of this.bss.values())for(const r of h)if(!r.BW()&&r.VW(t)&&s(r))return!0;return!1}Wss(t){for(const s of this.wss.values())for(const i of s)if(!i.BW()&&t(i))return!0;for(const e of this.bss.values())for(const h of e)if(!h.BW()&&t(h))return!0;return!1}jss(t,s){return this.Lss(t,s,!0)}*Vss(t,s,i=!1){const e=s?this.Bss(s,i):this.Fss(i);if(e&&e.length)for(const h of e)h.VW(t)&&(yield h)}*Uss(t,s){yield*this.Vss(t,s,!0)}Bss(i,t){if(t){let t=this.wss.get(i),s=this.bss.get(i);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.BW())}{let t=this.wss.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.BW())}}Fss(t){if(t){const s=[...this.wss.values()].flat(),i=[...this.bss.values()].flat();return s.concat(i).filter(t=>t).filter(t=>!t.BW())}{const e=[...this.wss.values()].flat();return e.filter(t=>t).filter(t=>!t.BW())}}Hss(){return this.Fss(!0)}zv(t=0){return{s:!1,e:!!this.zu,at:this.zss(),dt:this.Jss(),wt:this.qss(),ft:this.Xss()}}Jv(t,s="full"){t&&(this.Mss=t.at,this.xss=t.dt,this.Gss=t.wt,this.Tss=t.ft,this.yss=!1,this.zu=!!t.e,"state"===s)&&this.QY()}QY(){const t=this.nO().Mtt();if(this.$ss(this.Mss,this.wss,t),this.xss){Qc.Hn(this.Sss);for(const s of this.xss)this.Yss(this.Sss,s,t)}this.$ss(this.Gss,this.bss,t),this.vss=this.Kss(this.Tss,t),this.zu?this.bss&&this.bss.size&&this.xGt():this.nGt()}$ss(s,i,e){if(s)for(const h in s){let t=i.get(h);t?Qc.Hn(t):t=[];const r=s[h];for(const n of r){const o=this.Yss(t,n.name,e);if(o)this.Zss(n.name,n,e);else{const a=Qc.Vnt.plt({runtime:this.nO(),json:n});Qc.Vnt._it(a,this.H6().o4()),a.Hat(t=>this.Qss(t)),e.RK(a),this.Yss(t,a,e)}}i.set(h,t)}}Kss(t,s){return s.IK(t)}Yss(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.Kss(s,i);if(e)return!!t.push(e)}return!1}Zss(t,s,i){if("string"==typeof t){const e=this.Kss(t,i);e&&(e.Dq(s),Qc.Vnt._it(e,this.H6().o4()))}else t.Dq(s),Qc.Vnt._it(t,this.H6().o4())}zss(){const t={};for(const[s,i]of this.wss)t[s]=i.filter(t=>!t.BW()).map(t=>t.kq());return t}Jss(){return this.Sss.filter(t=>!t.BW()).map(t=>t.uf())}qss(){const t={};for(const[s,i]of this.bss)t[s]=i.map(t=>t.kq());return t}Xss(){return this.vss?this.vss.uf():""}bGt(){this.Ess()}tis(t){const s=tf.iis.sis(t.property,t.Slt,t.blt,t.ease,t.resultMode,this.H6()),i=tf.his.eis(t.property),e=(tf.his.ris(i)||this.nis(t.property),Qc.Vnt.plt({runtime:this.nO(),id:i,tags:t.tags,time:t.time,U6:this.H6(),glt:!!t.glt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,mlt:s}));return e.Hat(t=>this.Qss(t)),this.ois(e,t.property),e}ais(t){const s=t.dj();if(this.wss.has(s)){const i=this.wss.get(s);if(i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}nj(t,s=!1){this.ais(t),t.BW()||this.lis(t)||(t.WW(s),this.uis(t))}nis(t,s=!1){if(Qc.we(t)){const i=tf.his.eis(t);if(this.wss.has(i)){const e=this.wss.get(i),h=this.Oss();for(const r of e)r===h||r.BW()||this.lis(r)||(r.WW(s),r.pr());Qc.Hn(e)}}else{const n=this.Oss();for(const o of this.Fss())o===n||o.BW()||this.lis(o)||(o.WW(s),o.pr());for(const a of this.wss.keys())Qc.Hn(this.wss.get(a)),this.wss.delete(a);this.wss.clear()}}Iss(t){this.nj(t,!0)}Css(){this.nis(NaN,!0)}qrt(t){if(0===t)return this.zu}Qrt(t,s){0===t&&(this.zu=!!s)}cis(t){const s=t.lj(),i=s.Hht();for(const e of i){const h=e.V6();if(h.KIt()===this.constructor)return h}}F4(t,s,i,e){return this.wf?super.F4(t):s.F4(t,i,e)}Qss(t){this.vss=t,tf.M$.fis(t);let s,i;if(this.nO())s=this.Ii,i=this.wf,this.F4(tf.M$.dis),this.F4(tf.M$.pis),this.nj(t);else{if(!(s=t.lj()))return;if(s&&s.dV())return;i=s.nO();const e=this.cis(t);this.F4(tf.M$.dis,i,s,e),this.F4(tf.M$.pis,i,s,e),t.WW()}this.vss=null,tf.M$.fis(null),t.cj()&&i.t4(s)}ois(t,s){const i=tf.his.eis(s),e=(this.wss.has(i)||this.wss.set(i,[]),this.wss.get(i));e.push(t)}uis(t){const s=t.dj();this.bss.has(s)||this.bss.set(s,[]),this.bss.get(s).push(t),this.GGt()||this.xGt()}lis(t){const s=t.dj();return!!this.bss.has(s)&&this.bss.get(s).includes(t)}Ess(){if(this.bss.size){for(const t of this.bss.values()){for(const s of t)s.BW()||s.pr();Qc.Hn(t)}this.bss.clear(),this.GGt()&&this.nGt()}}TGt(){return[{title:"$"+this.V6().uf(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.nc(),FVt:t=>this.z2t(t)}]}]}Lxt(){return self.mis}}}{let i=self.Ws,s=null;i.hlt.elt.M$={ilt(){return!0},rlt(t){const s=this.Ass();return!!s&&s.VW(t)},nlt(t){const s=this.Ass();return!!s&&(s.Ott()===t||2===t)},olt(t,s){const i=this.Ass();return!!i&&(i.Ott()===s||2===s)&&i.VW(t)},fis(t){s=t},dis(t){return s.VW(t)},pis(){return!0},IsPlaying(t){return this.Nss(t,i.Vnt.IsPlaying)},gis(){return this.Wss(i.Vnt.IsPlaying)},sj(t){return this.Nss(t,i.Vnt.sj)},yis(){return this.Wss(i.Vnt.sj)},aW(t,s){return 0===s?this.Nss(t,i.Vnt.flt):1===s&&this.Nss(t,i.Vnt.dlt)},wis(t){return 0===t?this.Wss(i.Vnt.flt):1===t&&this.Wss(i.Vnt.dlt)}}}{const sf=self.Ws,ef=self._c,hf=sf.hlt.elt;hf.drt={z2t(t){this.z2t(!!t)},async Sis(...t){if(this.nc()&&this.oit()){const s=this.tis(hf.vis.bis(this,...t));s.Play()&&await s.QW()}},async Mis(...t){if(this.nc()&&this.oit()){const s=this.tis(hf.vis.xis(this,...t));s.Play()&&await s.QW()}},async Gis(...t){if(this.nc()&&this.oit()){const s=this.tis(hf.vis.Tis(this,...t));s.Play()&&await s.QW()}},_is(t){if(this.nc()&&this.oit())for(const s of this.Vss(t))s.WW()},Iis(){if(this.nc()&&this.oit())for(const t of this.Fss())t.WW()},Cis(t){if(this.nc()&&this.oit())for(const s of this.Vss(t))s.jW()},Pis(){if(this.nc()&&this.oit())for(const t of this.Fss())t.jW()},Ris(t){if(this.nc()&&this.oit())for(const s of this.Vss(t))this.nj(s)},Eis(){if(this.nc()&&this.oit())for(const t of this.Fss())this.nj(t)},Ais(t,s,i){if(this.nc()&&this.oit()){const e=sf.hlt.elt.his.Fis(s);for(const h of this.Vss(t))h.$at([e]),h.Yat(i,e)}},kis(t,s,i,e){if(this.nc()&&this.oit()){const h=sf.hlt.elt.his.Dis(s);for(const r of this.Vss(t))r.$at(h),r.Yat(i,h[0]),r.Yat(e,h[1])}},Ois(t,s){if(this.nc()&&this.oit())for(const i of this.Vss(t,"value"))i.qat(s,"value")},Lis(t,s){if(this.nc()&&this.oit())for(const i of this.Vss(t,"value"))i.$at(["value"]),i.Yat(s,"value")},Bis(t,s){if(this.nc()&&this.oit()){const i=ef.Uc(s);for(const e of this.Vss(t))e.aj(i)}},Nis(t){if(this.nc()&&this.oit()){const s=ef.Uc(t);for(const i of this.Fss())i.aj(s)}},Wis(t,s){if(this.nc()&&this.oit())for(const i of this.Vss(t))i.UW(s)},jis(t){if(this.nc()&&this.oit())for(const s of this.Fss())s.UW(t)},Vis(t,s){if(this.nc()&&this.oit())for(const i of this.Vss(t))i.YW(s)},Uis(t){if(this.nc()&&this.oit())for(const s of this.Fss())s.YW(t)},His(t,s){if(this.nc()&&this.oit())for(const i of this.Vss(t))i.fj(!!s)},zis(t){if(this.nc()&&this.oit())for(const s of this.Fss())s.fj(!!t)}}}{const rf=self.Ws;rf.hlt.elt.prt={Jis(t){const s=this.jss(t);return s?s.xA():0},HHt(t){const s=this.jss(t);return s?s.xA()/s.zW():0},brt(t){const s=this.jss(t);return s?s.KW():0},QZt(t){const s=this.jss(t,"value");return s?s.mj("value").pj():0},QMt(){let t=this.Oss();return(t=t||this.Ass())?t.Wtt():""}}}{const nf=self.Ws,of=self._c,af=["position","size","scale"],lf=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],uf=["value"],cf=[].concat(af).concat(lf).concat(uf),ff={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},df=Object.assign({},cf.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),ff);nf.hlt.elt.his=class{constructor(){}static qis(){return[...of.Fc()]}static Uc(t){return[...of.Fc()][t]}static eis(t){return cf[t]}static Xis(t){return cf.indexOf(t)}static $is(t){return af[t]}static Fis(t){return lf[t]}static Yis(t){return uf[t]}static Kis(t){return ff[t]}static Dis(t){return nf.Ce(t)?df[t]:df[cf[t]]}static Zis(t){return!!ff[t]}static Qis(t){return"offsetColor"===t}static tes(t){return"offsetAngle"===t}static ses(t){return"offsetOpacity"===t}static ris(t){return"value"===t}}}{const pf=self.Ws,mf=pf.hlt.elt,gf=new Map;mf.iis=class{constructor(){}static sis(t,s,i,e,h,r){0===gf.size&&this.ies();let n=mf.hes.ees(t),o=gf.get(n);return pf.we(t)&&(t=mf.his.eis(t)),this.res(o,t,s,i,e,h,r)}static nes(t,s){const i=pf.hlt.elt.sis(t);return i.oes(s)}static ies(){const t=mf.hes,s=mf.aes;this.les(t.ues,this.ces,s.fes),this.les(t.COLOR,this.des,s.pes),this.les(t.mes,this.ges,s.yes),this.les(t.wes,this.Ses,s.fes),this.les(t.bes,this.ves,s.fes)}static les(t,s,i){gf.set(t,this.Mes(t,s,i))}static Mes(t,s,i){return{name:t,xes:s,oes:i}}static res(t,s,i,e,h,r,n){return t.xes(s,t.oes(i),t.oes(e),h,r,n)}static ces(t,i,e,h,r,s){const n=mf.his.Kis(t);return n.map((t,s)=>({ylt:"world-instance",property:t,type:"float",valueType:"numeric",Slt:i[s],blt:e[s],ease:mf.his.Uc(h),resultMode:r}))}static des(t,s,i,e,h,r){return pf.G$.Text&&r.WL()instanceof pf.G$.Text?{ylt:"plugin",wlt:[7],property:"color",type:"color",valueType:"color",Slt:s,blt:i,ease:mf.his.Uc(e),resultMode:h}:{ylt:"world-instance",property:t,type:"color",valueType:"color",Slt:s,blt:i,ease:mf.his.Uc(e),resultMode:h}}static ges(t,s,i,e,h,r){return{ylt:"world-instance",property:t,type:"angle",valueType:"angle",Slt:s,blt:i,ease:mf.his.Uc(e),resultMode:h}}static ves(t,s,i,e,h,r){return{ylt:"world-instance",property:t,type:"float",valueType:"numeric",Slt:s,blt:i,ease:mf.his.Uc(e),resultMode:h}}static Ses(t,s,i,e,h,r){return{ylt:"value",property:t,type:"float",valueType:"numeric",Slt:s,blt:i,ease:mf.his.Uc(e),resultMode:h}}}}{const yf=self.Ws,wf=yf.hlt.elt,Sf={resultMode:"absolute"},bf=Object.assign({},Sf,{tags:"",property:"",time:0,ease:0,glt:0,loop:!1,pingPong:!1,repeatCount:1}),vf=Object.assign({},bf,{initialValueMode:"current-state",Slt:0,blt:0}),Mf=Object.assign({},bf,{initialValueMode:"current-state",Slt:[0,0],blt:[0,0]}),xf=Object.assign({},bf,{initialValueMode:"current-state",Slt:[0,0,0],blt:[0,0,0]}),Gf=Object.assign({},vf,{initialValueMode:"start-value"});wf.vis=class{constructor(){}static Ges(t,s,i,e,h,r,n,o){t.tags=s,t.time=i,t.ease=e,t.glt=h,t.loop=r,t.pingPong=n,t.repeatCount=o}static bis(t,s,i,e,h,r,n,o,a,l){const u="string"==typeof i?i:wf.his.Fis(i),c=wf.his.Qis(u)?xf:vf;return this.Ges(c,s,h,r,n,o,a,l),wf.his.Qis(u)?(xf.blt[0]=yf.Zr(e),xf.blt[1]=yf.Qr(e),xf.blt[2]=yf.tn(e),xf.property=wf.his.Xis(u)):wf.his.ses(u)?vf.blt=e/100:vf.blt=e,c.property=wf.his.Xis(u),c}static xis(t,s,i,e,h,r,n,o,a,l,u){this.Ges(Mf,s,r,n,o,a,l,u);const c="string"==typeof i?i:wf.his.$is(i);return Mf.blt[0]=e,Mf.blt[1]=h,Mf.property=wf.his.Xis(c),Mf}static Tis(t,s,i,e,h,r,n,o,a,l){return this.Ges(Gf,s,h,r,n,o,a,l),Gf.Slt=i,Gf.blt=e,Gf.property=wf.his.Xis("value"),Gf}}}{const Tf=self.Ws,_f=Tf.hlt.elt,If=[];_f.hes=class{constructor(){}static ees(t){if(0===If.length){const s=If;s.push({TP:_f.his.Zis,result:this.ues}),s.push({TP:_f.his.Qis,result:this.COLOR}),s.push({TP:_f.his.tes,result:this.mes}),s.push({TP:_f.his.ris,result:this.wes}),s.push({TP:()=>!0,result:this.bes})}Tf.we(t)&&(t=Tf.hlt.elt.his.eis(t));for(const i of If)if(i.TP(t))return i.result}static get ues(){return"pair"}static get COLOR(){return"color"}static get mes(){return"angle"}static get wes(){return"value"}static get bes(){return"other"}}}{const Cf=self.Ws,Pf=Cf.hlt.elt;Pf.aes=class{constructor(){}static yes(t){const s=Cf._r(parseFloat(t));return Cf.Tr(s)}static pes(t){return t.slice(0)}static fes(t){return t}}}{let l=function(t){Ef.Pe(t);let s=Ff.Pc(t),i;if(-1===(i=s?Ff.Hc(s,null):Ff.Hc(t,null)))throw new Error(`invalid ease name '${t}'`);return i},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const Rf=self.Ws,Ef=self.Ys,Af=self.L6,Ff=self._c,kf=Rf.hlt.elt,Df=new WeakMap,Of=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),Lf={tags:"",Tes:!1,loop:!1,pingPong:!1,repeatCount:1,Slt:0},Bf={rj:l};self.mis=class extends Af{constructor(){super(),Df.set(this,Af.YB().A6())}_es(t,s,i,e,h){const r=Df.get(this);if(!r.nc()||!r.oit())return null;const n=Of.get(t);if(!n)throw new Error("invalid tween property");"one"===n.type||"value"===n.type?Ef.Se(s):(Ef.He(s),"two"===n.type?(Ef.Se(s[0]),Ef.Se(s[1])):"color"===n.type&&(Ef.Se(s[0]),Ef.Se(s[1]),Ef.Se(s[2]))),"angle"===t?s=Rf.Ir(s):"opacity"===t?s*=100:"color"===t&&(s=Rf.Kr(s[0],s[1],s[2]));const o=l(e);Ef.Te(i),h=Object.assign({},Lf,h),"value"===n.type&&Ef.Se(h.Slt),u(h.tags,!0);let a;if("one"===n.type||"color"===n.type?a=r.tis(kf.vis.bis(r,h.tags,n.name,s,i,o,!!h.Tes,!!h.loop,!!h.pingPong,h.repeatCount)):"two"===n.type?a=r.tis(kf.vis.xis(r,h.tags,n.name,s[0],s[1],i,o,!!h.Tes,!!h.loop,!!h.pingPong,h.repeatCount)):"value"===n.type&&(a=r.tis(kf.vis.Tis(r,h.tags,h.Slt,s,i,o,!!h.Tes,!!h.loop,!!h.pingPong,h.repeatCount))),a.Play())return a.vlt(r,Bf);throw new Error("failed to start tween")}*Ies(){const t=Df.get(this);for(const s of t.Fss())yield s.vlt(t,Bf)}*Ces(t){u(t);const s=Df.get(this);for(const i of s.Vss(t))yield i.vlt(s,Bf)}get isEnabled(){return Df.get(this).nc()}set isEnabled(t){Df.get(this).z2t(t)}}}{const Nf=self.Ws;Nf.hlt.Pes=class extends Nf.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const Wf=self.Ws;Wf.hlt.Pes.PIt=class extends Wf.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const jf=self.Ws,Vf=self.Ys,Uf=self.L6,Hf=(jf.hlt.Pes.Instance=class extends jf.bTt{constructor(t,s){super(t),this.Res=0,this.Ees=0,this.Aes=0,this.Fes=!0,this.kes=!0,this.Des=!1,this.Oes=0,this.Les=jf.dr(jf.A0),this.Bes=this.Ii.ND().qR()||1,s&&(this.Res=s[0],this.Ees=s[1],this.Aes=s[2],this.Fes=!!s[3],this.kes=!!s[4],this.Oes=this.kes?0:3),this.kes&&(0===this.Res?(this.Oes=1,0===this.Ees&&(this.Oes=2)):(this.Ii.ND().YR(0),this.wf.JD())),this.vGt()}pr(){super.pr()}zv(){return{fit:this.Res,wt:this.Ees,fot:this.Aes,d:this.Fes,s:this.Oes,st:this.Les.ri(),mo:this.Bes}}Jv(t){this.Res=t.fit,this.Ees=t.wt,this.Aes=t.fot,this.Fes=t.d,this.Oes=t.s,this.Les.Set(t.st),this.Bes=t.mo,3===this.Oes?this.rGt():this.vGt()}YK(){const t=this.wf.Hk(this.Ii),s=(this.Les.xc(t),this.Ii.ND());0===this.Oes&&(s.YR(this.Les.ri()/this.Res*this.Bes),this.wf.JD(),s.qR()>=this.Bes)&&(s.YR(this.Bes),this.Oes=1,this.Les.w0(),this.tGt("fadeinend"),this.F4(jf.hlt.Pes.M$.Nes)),1===this.Oes&&this.Les.ri()>=this.Ees&&(this.Oes=2,this.Les.w0(),this.tGt("waitend"),this.F4(jf.hlt.Pes.M$.Wes)),2===this.Oes&&(0!==this.Aes?(s.YR(this.Bes-this.Les.ri()/this.Aes*this.Bes),this.wf.JD(),s.qR()<=0&&(this.Oes=3,this.Les.w0(),this.tGt("fadeoutend"),this.F4(jf.hlt.Pes.M$.jes),this.Fes)&&this.wf.t4(this.Ii)):(this.Oes=3,this.Les.w0())),3===this.Oes&&this.rGt()}Ves(){this.kes||this.Des||(this.Bes=this.Ii.ND().qR()||1,this.Des=!0),3===this.Oes&&this._E()}Ues(){this._E()}_E(){this.Oes=0,this.Les.w0(),0===this.Res?(this.Oes=1,0===this.Ees&&(this.Oes=2)):(this.Ii.ND().YR(0),this.wf.JD()),this.vGt()}Hes(t){this.Res=Math.max(t,0)}zes(){return this.Res}Jes(t){this.Ees=Math.max(t,0)}qes(){return this.Ees}Xes(t){this.Aes=Math.max(t,0)}$es(){return this.Aes}qrt(t){switch(t){case 0:return this.zes();case 1:return this.qes();case 2:return this.$es();case 3:return this.Fes}}Qrt(t,s){switch(t){case 0:this.Hes(s);break;case 1:this.Jes(s);break;case 2:this.Xes(s);break;case 3:this.Fes=!!s}}TGt(){const t="behaviors.fade";return[{title:"$"+this.V6().uf(),properties:[{name:t+".properties.fade-in-time.name",value:this.zes(),FVt:t=>this.Hes(t)},{name:t+".properties.wait-time.name",value:this.qes(),FVt:t=>this.Jes(t)},{name:t+".properties.fade-out-time.name",value:this.$es(),FVt:t=>this.Xes(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.Oes]]}]}]}Lxt(){return self.Yes}},new WeakMap);self.Yes=class extends Uf{constructor(){super(),Hf.set(this,Uf.YB().A6())}Kes(){Hf.get(this).Ves()}Zes(){Hf.get(this).Ues()}set Qes(t){Vf.Te(t),Hf.get(this).Hes(t)}get Qes(){return Hf.get(this).zes()}set ths(t){Vf.Te(t),Hf.get(this).Jes(t)}get ths(){return Hf.get(this).qes()}set shs(t){Vf.Te(t),Hf.get(this).Xes(t)}get shs(){return Hf.get(this).$es()}}}{const zf=self.Ws;zf.hlt.Pes.M$={jes(){return!0},Nes(){return!0},Wes(){return!0}}}{const Jf=self.Ws;Jf.hlt.Pes.drt={ihs(){this.Ves()},ehs(){this.Ues()},hhs(t){this.Hes(t)},rhs(t){this.Jes(t)},nhs(t){this.Xes(t)}}}{const qf=self.Ws;qf.hlt.Pes.prt={ohs(){return this.zes()},ahs(){return this.qes()},lhs(){return this.$es()}}}{const Xf=self.Ws;Xf.hlt.KQt=class extends Xf.dTt{constructor(t){super(t)}pr(){super.pr()}}}{const $f=self.Ws;$f.hlt.KQt.PIt=class extends $f.wTt{constructor(t){super(t)}pr(){super.pr()}Oxt(){}}}{const Yf=self.Ws;Yf.hlt.KQt.Instance=class extends Yf.bTt{constructor(t,s){super(t),this.uhs=null,this.chs=-1,this.uKt="",this.fhs=new Set,this.dhs=0,this.phs=0,this.mhs=0,this.Q$t=0,this.tYt=0,this.ghs=0,this.yhs=0,this.whs=0,this.Shs=0,this.EKt=0,this.Fes=!1,s&&(this.Fes=s[0]);const i=this.wf.Kf();this.P0=new Yf._0(Yf.b0.T0(i,"instancedestroy",t=>this.uQt(t.U6)),Yf.b0.T0(i,"afterload",t=>this.QY()))}pr(){this.uhs=null,super.pr()}bhs(t){t?(this.uhs=t,this.xGt()):(this.uhs=null,this.nGt())}vhs(t,s,i){if(t){const e=t.uMt(this.Ii);if(e){this.uKt=s,this.bhs(e);const h=this.Ii.ND(),r=e.ND();if("properties"===this.uKt){const n=this.fhs;n.clear();for(const o of i)n.add(o);this.Q$t=h.Av()-r.Av(),this.tYt=h.Dv()-r.Dv(),this.whs=h.w5()-r.w5(),this.EKt=h.w5(),this.Shs=h.Lv()-r.Lv(),n.has("x")&&n.has("y")&&(this.phs=Yf.Rr(r.Av(),r.Dv(),h.Av(),h.Dv())-r.w5(),this.dhs=Yf.Cr(r.Av(),r.Dv(),h.Av(),h.Dv())),n.has("width-abs")?this.ghs=h._m()-r._m():n.has("width-scale")&&(this.ghs=h._m()/r._m()),n.has("height-abs")?this.yhs=h.Om()-r.Om():n.has("height-scale")&&(this.yhs=h.Om()/r.Om())}else this.dhs=Yf.Cr(r.Av(),r.Dv(),h.Av(),h.Dv())}}}zv(){const t=this.fhs,s=this.uKt,i={uid:this.uhs&&!this.uhs.dV()?this.uhs.o4():-1,m:s,d:this.Fes};return"rope"===s||"bar"===s?i.pd=this.dhs:"properties"===s&&(i.ps=[...this.fhs],t.has("imagepoint")?i.ip=this.mhs:t.has("x")&&t.has("y")?(i.pa=this.phs,i.pd=this.dhs):(t.has("x")&&(i.dx=this.Q$t),t.has("y")&&(i.dy=this.tYt)),t.has("angle")&&(i.da=this.whs,i.lka=this.EKt),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.ghs),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.yhs),t.has("z"))&&(i.dz=this.Shs),i}Jv(t){const s=t.m,i=this.fhs;if(i.clear(),this.chs=t.uid,"number"==typeof s)this.Mhs(t);else if(this.uKt=s,t.hasOwnProperty("d")&&(this.Fes=!!t.d),"rope"===s||"bar"===s)this.dhs=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.mhs=t.ip:i.has("x")&&i.has("y")?(this.phs=t.pa,this.dhs=t.pd):(i.has("x")&&(this.Q$t=t.dx),i.has("y")&&(this.tYt=t.dy)),i.has("angle")&&(this.whs=t.da,this.EKt=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.ghs=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.yhs=t.dh),i.has("z")&&(this.Shs=t.dz)}}Mhs(t){const s=this.fhs,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.uKt="properties",s.add("x").add("y").add("angle"),this.phs=h,this.dhs=r,this.whs=i-e,this.EKt=t.lka;break;case 1:this.uKt="properties",s.add("x").add("y"),this.phs=h,this.dhs=r;break;case 2:this.uKt="properties",s.add("angle"),this.whs=i-e,this.EKt=t.lka;break;case 3:this.uKt="rope",this.dhs=t.pd;break;case 4:this.uKt="bar",this.dhs=t.pd}}QY(){-1===this.chs?this.bhs(null):(this.bhs(this.wf.kD(this.chs)),this.chs=-1)}uQt(t){this.uhs===t&&(this.bhs(null),this.Fes)&&this.wf.t4(this.Ii)}bGt(){const r=this.uhs;if(r&&!r.dV()){let i=r.ND(),t=this.Ii,e=t.ND(),s=this.uKt,h=!1;if("rope"===s||"bar"===s){const n=Yf.Cr(e.Av(),e.Dv(),i.Av(),i.Dv());if(n>this.dhs||"bar"===s&&n<this.dhs){const o=Yf.Rr(i.Av(),i.Dv(),e.Av(),e.Dv());e.cN(i.Av()+Math.cos(o)*this.dhs,i.Dv()+Math.sin(o)*this.dhs),h=!0}}else{let t=this.fhs,s=0;if(t.has("imagepoint")){const[a,l]=r.Fvt(this.mhs);e.Evt(a,l)||(e.cN(a,l),h=!0)}else if(t.has("x")&&t.has("y")){const u=i.Av()+Math.cos(i.w5()+this.phs)*this.dhs,c=i.Dv()+Math.sin(i.w5()+this.phs)*this.dhs;e.Evt(u,c)||(e.cN(u,c),h=!0)}else s=i.Av()+this.Q$t,t.has("x")&&s!==e.Av()&&(e.Fv(s),h=!0),s=i.Dv()+this.tYt,t.has("y")&&s!==e.Dv()&&(e.Ov(s),h=!0);t.has("angle")&&(this.EKt!==e.w5()&&(this.whs=Yf.Tr(this.whs+(e.w5()-this.EKt))),(s=Yf.Tr(i.w5()+this.whs))!==e.w5()&&(e.y5(s),h=!0),this.EKt=e.w5()),t.has("width-abs")&&(s=i._m()+this.ghs)!==e._m()&&(e.Fm(s),h=!0),t.has("width-scale")&&(s=i._m()*this.ghs)!==e._m()&&(e.Fm(s),h=!0),t.has("height-abs")&&(s=i.Om()+this.yhs)!==e.Om()&&(e.Im(s),h=!0),t.has("height-scale")&&(s=i.Om()*this.yhs)!==e.Om()&&(e.Im(s),h=!0),t.has("z")&&(s=i.Lv()+this.Shs)!==e.Lv()&&(e.Bv(s),this.wf.JD())}h&&e.uN()}}TGt(){const t="behaviors.pin.debugger";return[{title:"$"+this.V6().uf(),properties:[{name:t+".is-pinned",value:!!this.uhs},{name:t+".pinned-uid",value:this.uhs?this.uhs.o4():0}]}]}}}{const Kf=self.Ws;Kf.hlt.KQt.M$={xhs(){return!!this.uhs},Ghs(){return this.Fes}}}{const Zf=self.Ws;Zf.hlt.KQt.drt={Ths(t,s){this.vhs(t,0===s?"rope":"bar")},_hs(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.vhs(t,"properties",o)},Ihs(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.mhs=s,this.vhs(t,"properties",n)},Chs(t){"rope"!==this.uKt&&"bar"!==this.uKt||(this.dhs=Math.max(t,0))},Phs(t){this.Fes=t},ZQt(){this.bhs(null),this.uKt="",this.fhs.clear(),this.mhs=""},KQt(t,s){switch(s){case 0:this.vhs(t,"properties",["x","y","angle"]);break;case 1:this.vhs(t,"properties",["x","y"]);break;case 2:this.vhs(t,"properties",["angle"]);break;case 3:this.vhs(t,"rope");break;case 4:this.vhs(t,"bar")}}}}{const Qf=self.Ws;Qf.hlt.KQt.prt={Rhs(){return this.uhs?this.uhs.o4():-1}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.pSt=[()=>0,()=>-1e4,t=>{const s=t.GSt(0);return()=>s.Ywt()},()=>2e4,()=>1,()=>"Animation 1",t=>{const s=t.GSt(0).dSt();return()=>.9*s.Net()},()=>2,()=>"Animation 2",()=>3,()=>"Animation 3",t=>{const s=t.GSt(0).dSt();return()=>1.1*s.Net()},t=>{const s=t.GSt(0).dSt();return()=>s.Net()},t=>{const s=t.GSt(0);return()=>s.Ywt()+100},t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()-i.Net()},t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()-1.5*i.Net()},t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()-2*i.Net()},()=>.01,()=>4,()=>.2,()=>999999,()=>"",t=>{const s=t.GSt(0).dSt();return()=>s.Net()/8},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/10},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/12},t=>{const s=t.GSt(0);return()=>s.aSt()+15},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/13},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/14},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/15},()=>7,()=>14,()=>8,()=>.4,t=>{const s=t.GSt(0).dSt();return()=>2*s.Net()},()=>5,()=>20,()=>7.5,t=>{const s=t.GSt(0).dSt();return()=>s.Net()/2},t=>{const s=t.GSt(0).dSt();return()=>s.Net()/3},t=>{const s=t.GSt(0);return()=>s.aSt("ShieldOpacity")},()=>"ShieldOpacity",()=>100,()=>15,()=>"Layer 2",t=>{const s=t.GSt(0).dSt();return()=>i("Upgrade Points: ",s.Net())},t=>{const s=t.GSt(0).dSt();return()=>s.Net()+35},()=>70,()=>"Repairs\n\nHeals a third of your HP.\n\nCost: 100UP",()=>75,()=>40,()=>"Double shot\n\nFires a second weaker shot.\n\nCost: 75UP",()=>250,()=>"Triple Barrels\n\nFires a third weaker shot.\n\nCost: 250UP",()=>1e3,()=>"Fury Cannon\n\nFires two extra weaker shots.\n\nCost: 1000UP",()=>50,t=>{const s=t.GSt(0);return()=>1.075*s.aSt()},()=>"Polynovic Fuel\n\nIncreases movement and fire speed.\n\nCost: 50UP",()=>175,t=>{const s=t.GSt(0);return()=>1.125*s.aSt()},t=>{const s=t.GSt(0).dSt();return()=>.85*s.Net()},()=>"Zirconium Thrusters\n\nIncreases movement and fire speed more.\n\nCost: 175UP",()=>400,t=>{const s=t.GSt(0);return()=>1.25*s.aSt()},t=>{const s=t.GSt(0).dSt();return()=>.8*s.Net()},()=>"Hyperflux Engine\n\nIncreases movement and fire speed even more.\n\nCost: 400UP",()=>125,()=>"Enemy Radar\n\nShots redirect to enemies slightly.\n\nCost: 125UP",()=>"Detection Software\n\nShots Gravitate towards enemies.\n\nCost: 400UP",()=>1200,()=>"Shot Sentience\n\nShots magnetise towards enemies greatly.\n\nCost: 1200UP",t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()+i.Net()},()=>800,()=>500,t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()+.666*i.Net()},t=>{const s=t.GSt(0).Hwt(),i=t.GSt(1).dSt();return()=>s()-i.Net()},t=>{const s=t.GSt(0).Hwt();return()=>s()},()=>"Animation 4",()=>"SwitchUM",()=>-2e4,t=>{const s=t.GSt(0);return()=>s.tSt()},t=>{const s=t.GSt(0);return()=>Math.round(s.tSt())},()=>12,()=>.5,t=>{const s=t.GSt(0).Hwt();return()=>s(2.7,3.3)},t=>{const s=t.GSt(0).Hwt();return()=>s(2.2,2.8)},t=>{const s=t.GSt(0).Hwt();return()=>s(1.85,2.45)},t=>{const s=t.GSt(0).Hwt();return()=>s(1.4,1.7)},t=>{const s=t.GSt(0).Hwt();return()=>s(1.1,1.4)},t=>{const s=t.GSt(0).Hwt();return()=>s(.9,1.1)},()=>180,()=>1.8,()=>3.5,()=>220,()=>80,t=>{const s=t.GSt(0);return()=>160-5*s.tSt()},t=>{const s=t.GSt(0);return()=>180-5*s.tSt()},t=>{const s=t.GSt(0);return()=>200-5*s.tSt()},t=>{const s=t.GSt(0).Hwt();return()=>s(.5,.15)},t=>{const s=t.GSt(0),i=t.GSt(1).Hwt();return()=>s.Ywt()+i(-30,30)},()=>.1,t=>{const s=t.GSt(0);return()=>1.25*s.iSt()},t=>{const s=t.GSt(0);return()=>1.1*s.iSt()},t=>{const s=t.GSt(0);return()=>.8*s.iSt()},t=>{const s=t.GSt(0);return()=>.9*s.iSt()},()=>10,t=>{const s=t.GSt(0).Hwt();return()=>s(7,11)},t=>{const s=t.GSt(0);return()=>s.tSt()/8.5},t=>{const s=t.GSt(0);return()=>2*s.tSt()},t=>{const s=t.GSt(0);return()=>257+s.tSt()},t=>{const s=t.GSt(0);return()=>125-8*s.tSt()},t=>{const s=t.GSt(0);return()=>13-s.tSt()},t=>{const s=t.GSt(0);return()=>.85*s.aSt()},t=>{const s=t.GSt(0);return()=>1.2*s.aSt()},()=>22,()=>265,t=>{const s=t.GSt(0).dSt();return()=>s.Net()/4},()=>"Low",()=>"Half",()=>"Default",t=>{const s=t.GSt(0).Hwt();return()=>s(.15,.2)},t=>{const s=t.GSt(0),i=t.GSt(1).Hwt();return()=>s.Ywt()+i(-5,5)},t=>{const s=t.GSt(0).Hwt();return()=>s(1,4)},t=>{const s=t.GSt(0).Hwt();return()=>s(30,45)},t=>{const s=t.GSt(0).Hwt();return()=>s(.6,1.2)},t=>{const s=t.GSt(0).Hwt();return()=>s(.1,.15)},t=>{const s=t.GSt(0).Hwt();return()=>s(.1,.2)},t=>{const s=t.GSt(0);return()=>s.Ywt()-180},t=>{const s=t.GSt(0).Hwt();return()=>s(.8,2.4)},t=>{const s=t.GSt(0).Hwt();return()=>s(.6,2)},()=>270,()=>.3,t=>{const s=t.GSt(0).Hwt();return()=>s(.05,.15)},()=>1.5,t=>{const s=t.GSt(0),i=t.GSt(1).dSt();return()=>s.Ywt()-i.Net()+0}]}var t=self.Ws;self.V5t=function(){return[t.G$.Hjt,t.G$.Yht,t.hlt.NTt,t.hlt.U$t,t.hlt.bound,t.hlt.cKt,t.G$.xHt,t.hlt.TKt,t.hlt.QB,t.hlt.iZt,t.hlt.RCt,t.G$.Keyboard,t.G$.g7t,t.G$.Text,t.hlt.tQt,t.hlt.ats,t.hlt.elt,t.hlt.Pes,t.G$.vJt,t.hlt.KQt,t.G$.x$.M$.v$,t.hlt.ats.drt.hss,t.G$.x$.drt.u6t,t.G$.Yht.drt.Qvt,t.G$.Yht.prt._2t,t.G$.Yht.drt.kvt,t.G$.x$.M$.CNt,t.G$.Yht.drt.OUt,t.G$.x$.drt.t6t,t.G$.x$.M$.wNt,t.G$.x$.M$.PNt,t.G$.Yht.prt.T2t,t.G$.Yht.drt.u2t,t.G$.Yht.drt.y5,t.G$.Hjt.drt.Rvt,t.G$.Hjt.prt.T2t,t.G$.Hjt.prt._2t,t.G$.Keyboard.M$.XHt,t.hlt.U$t.drt.ZYt,t.G$.Keyboard.M$.r7t,t.G$.x$.drt.h6t,t.G$.x$.drt.s6t,t.G$.x$.drt.i6t,t.G$.x$.drt.e6t,t.G$.Yht.drt.sB,t.G$.Yht.drt.eHt,t.hlt.KQt.drt.Ihs,t.G$.x$.drt.Bn,t.G$.Yht.drt.a2t,t.hlt.TKt.drt.$Yt,t.hlt.TKt.prt.eKt,t.G$.Yht.M$.Pvt,t.G$.Yht.M$.YMt,t.G$.Yht.drt.Zvt,t.G$.Yht.M$.SMt,t.G$.xHt.drt.jHt,t.G$.Yht.drt.r2t,t.hlt.cKt.drt.GKt,t.G$.Yht.drt.Fm,t.G$.Yht.drt.YR,t.hlt.elt.prt.QZt,t.hlt.elt.drt.Gis,t.G$.g7t.M$.lzt,t.G$.g7t.M$.Q7t,t.G$.x$.drt.R6t,t.G$.Hjt.drt.sB,t.G$.Text.drt.sB,t.G$.g7t.M$.szt,t.G$.Text.drt.Mf,t.G$.Yht.drt.c2t,t.hlt.U$t.drt.YYt,t.hlt.U$t.prt.hKt,t.hlt.U$t.drt.qJt,t.hlt.U$t.prt.rKt,t.hlt.U$t.drt.KYt,t.hlt.U$t.prt.nKt,t.G$.g7t.M$.azt,t.G$.x$.M$._Nt,t.G$.Yht.drt.Rvt,t.G$.Text.drt.Rvt,t.G$.Text.prt.T2t,t.G$.Text.prt._2t,t.G$.g7t.prt.T2t,t.G$.g7t.prt._2t,t.G$.g7t.M$.tzt,t.G$.x$.drt.Nk,t.G$.x$.M$.ypt,t.G$.Yht.M$.$Mt,t.G$.vJt.drt.eqt,t.G$.vJt.drt.r2t,t.G$.x$.M$.bNt,t.G$.x$.prt.random,t.hlt.TKt.drt.O3,t.G$.Yht.drt.m5,t.G$.Yht.drt.WUt,t.hlt.TKt.drt.YKt,t.hlt.ats.M$.Xts,t.G$.Yht.M$.SUt,t.G$.Yht.drt.l2t,t.hlt.Pes.drt.nhs,t.hlt.Pes.drt.ihs,t.G$.Yht.prt.L2t,t.G$.vJt.drt.$vt,t.G$.x$.drt._6t,t.G$.Hjt.drt.Lvt,t.G$.x$.drt.n6t]},self.rBt=[{Ehs:0},{Ahs:0},{Fhs:0},{"8Direction":0},{khs:0},{Dhs:0},{Ohs:0},{Lhs:0},{Bhs:0},{TKt:0},{Nhs:0},{Whs:0},{jhs:0},{Vhs:0},{Uhs:0},{Hhs:0},{zhs:0},{Jhs:0},{RCt:0},{qhs:0},{Keyboard:0},{g7t:0},{Xhs:0},{$hs:0},{Yhs:0},{Khs:0},{Zhs:0},{Qhs:0},{trs:0},{srs:0},{irs:0},{ers:0},{hrs:0},{rrs:0},{nrs:0},{ors:0},{ars:0},{lrs:0},{urs:0},{crs:0},{frs:0},{tQt:0},{ats:0},{drs:0},{prs:0},{elt:0},{mrs:0},{grs:0},{yrs:0},{wrs:0},{Srs:0},{brs:0},{vrs:0},{Mrs:0},{xrs:0},{Grs:0},{Trs:0},{_rs:0},{Irs:0},{Pes:0},{Crs:0},{Yht:0},{Prs:0},{Rrs:0},{lkt:0},{Ers:0},{Ars:0},{Frs:0},{krs:0},{Drs:0},{Ors:0},{Lrs:0},{Brs:0},{Nrs:0},{KQt:0},{Wrs:0},{jrs:0},{Vrs:0},{Urs:0},{Hrs:0},{zrs:0},{Jrs:0},{qrs:0},{Xrs:0},{$rs:0},{Yrs:0},{Krs:0},{Zrs:0},{Qrs:0},{tns:0},{sns:0},{ins:0},{ens:0},{hns:0},{rns:0},{nns:0},{ons:0},{ans:0},{lns:0},{uns:0},{cns:0},{fns:0},{dns:0},{vJt:0},{pns:0},{mns:0},{gns:0},{yns:0},{wns:0},{Sns:0},{bns:0},{vns:0},{Mns:0},{xns:0},{Gns:0},{Tns:0},{_ns:0},{Ins:0},{Cns:0},{Pns:0},{Rns:0},{Ens:0},{Ans:0},{Fns:0},{kns:0},{Dns:0},{Ons:0},{Debug:0},{Lns:0},{Bns:0},{Nns:0},{Wns:0},{jns:0},{Vns:0},{Uns:0}],self.Hns={Ehs:class extends self.kVt{},Fhs:class extends self.jUt{},Dhs:class extends self.jUt{},Lhs:class extends self.jUt{},Bhs:class extends self.DHt{},Whs:class extends self.jUt{},zhs:class extends self.jUt{},qhs:class extends self.jUt{},Keyboard:class extends self.zB{},g7t:class extends self.zB{},$hs:class extends self.jUt{},Yhs:class extends self.A9t{},Khs:class extends self.A9t{},trs:class extends self.jUt{},srs:class extends self.jUt{},irs:class extends self.jUt{},ers:class extends self.jUt{},rrs:class extends self.jUt{},nrs:class extends self.jUt{},ors:class extends self.jUt{},ars:class extends self.jUt{},lrs:class extends self.jUt{},urs:class extends self.jUt{},crs:class extends self.jUt{},frs:class extends self.jUt{},drs:class extends self.jUt{},prs:class extends self.jUt{},mrs:class extends self.jUt{},grs:class extends self.jUt{},yrs:class extends self.jUt{},wrs:class extends self.jUt{},Srs:class extends self.jUt{},brs:class extends self.jUt{},vrs:class extends self.kVt{},Mrs:class extends self.A9t{},xrs:class extends self.A9t{},Grs:class extends self.jUt{},Trs:class extends self.A9t{},Uhs:class extends self.A9t{},_rs:class extends self.A9t{},Irs:class extends self.jUt{},Crs:class extends self.jUt{},Yht:class extends self.jUt{},Prs:class extends self.zqt{},Rrs:class extends self.zqt{},lkt:class extends self.jUt{},Ers:class extends self.zqt{},Ars:class extends self.jUt{},Frs:class extends self.jUt{},krs:class extends self.jUt{},Drs:class extends self.jUt{},Ors:class extends self.jUt{},Lrs:class extends self.jUt{},Brs:class extends self.kVt{},Nrs:class extends self.kVt{},Wrs:class extends self.jUt{},jrs:class extends self.A9t{},Vrs:class extends self.A9t{},Urs:class extends self.kVt{},Hrs:class extends self.jUt{},zrs:class extends self.kVt{},Jrs:class extends self.kVt{},qrs:class extends self.jUt{},Xrs:class extends self.jUt{},$rs:class extends self.jUt{},Yrs:class extends self.A9t{},Krs:class extends self.jUt{},Zrs:class extends self.A9t{},Qrs:class extends self.jUt{},tns:class extends self.jUt{},sns:class extends self.jUt{},ins:class extends self.jUt{},ens:class extends self.A9t{},hns:class extends self.jUt{},rns:class extends self.jUt{},nns:class extends self.jUt{},ons:class extends self.jUt{},ans:class extends self.jUt{},lns:class extends self.jUt{},cns:class extends self.jUt{},fns:class extends self.jUt{},dns:class extends self.jUt{},vJt:class extends self.zqt{},pns:class extends self.jUt{},mns:class extends self.jUt{},gns:class extends self.jUt{},yns:class extends self.jUt{},wns:class extends self.jUt{},Sns:class extends self.jUt{},bns:class extends self.jUt{},vns:class extends self.jUt{}};